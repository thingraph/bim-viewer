{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/bim-tree/BimTree.module.scss?fc11","webpack:///./src/App.vue?79d2","webpack:///./src/components/materials/MaterialManager.module.scss?f002","webpack:///./src/components/progress-bar/ProgressBar.module.scss?886f","webpack:///./src/components/snapshot/SnapshotPanel.module.scss?8fd1","webpack:///./src/components/projectSettingsPanel/ProjectSettings.module.scss?75ff","webpack:///./public/three/js/libs/ifc/ifc sync","webpack:///./src/components/base-panel/BasePanel.module.scss?ddc9","webpack:///./src/components/property/PropertyPanel.module.scss?750d","webpack:///./src/core/postmate/Message.ts","webpack:///./src/core/postmate/PostmateManager.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?2add","webpack:///./src/service/project.ts","webpack:///./src/core/ProjectManager.ts","webpack:///./src/components/projects/ProjectCard.tsx","webpack:///./src/views/projects/Projects.tsx","webpack:///./src/components/projectSettingsPanel/ProjectSettingsDef.ts","webpack:///./src/store/index.ts","webpack:///./src/core/utils/ExportUtils.ts","webpack:///./src/core/Constants.ts","webpack:///./src/core/exploder/Exploder.ts","webpack:///./src/core/utils/SceneUtils.ts","webpack:///./src/core/utils/ObjectUtils.ts","webpack:///./src/core/section/BaseBoxSection.ts","webpack:///./src/core/section/ObjectsBoxSection.ts","webpack:///./src/core/section/BasePlaneSection.ts","webpack:///./src/core/section/ObjectsPlaneSection.ts","webpack:///./src/components/base-panel/BasePanel.tsx","webpack:///./src/lib/element-ui/tree/src/tree.vue","webpack:///./src/lib/element-ui/tree/src/model/util.js","webpack:///./src/lib/element-ui/tree/src/model/node.js","webpack:///./src/lib/element-ui/tree/src/model/tree-store.js","webpack:///./src/lib/element-ui/tree/src/tree-node.vue","webpack:///./src/lib/element-ui/tree/src/mixin/node.js","webpack:///src/lib/element-ui/tree/src/tree-node.vue","webpack:///./src/lib/element-ui/tree/src/tree-node.vue?c529","webpack:///./src/lib/element-ui/tree/src/tree-node.vue?0f07","webpack:///./src/lib/element-ui/tree/src/tree-virtual-node.vue","webpack:///src/lib/element-ui/tree/src/tree-virtual-node.vue","webpack:///./src/lib/element-ui/tree/src/tree-virtual-node.vue?4ed0","webpack:///./src/lib/element-ui/tree/src/tree-virtual-node.vue?8a30","webpack:///src/lib/element-ui/tree/src/tree.vue","webpack:///./src/lib/element-ui/tree/src/tree.vue?590e","webpack:///./src/lib/element-ui/tree/src/tree.vue?b40b","webpack:///./src/core/utils/GeometryUtils.ts","webpack:///./src/core/utils/MaterialUtils.ts","webpack:///./src/core/helpers/InstantiateHelper.ts","webpack:///./src/core/helpers/MergeHelper.ts","webpack:///./src/core/utils/Viewer3DUtils.ts","webpack:///./src/components/bim-tree/BimTree.tsx","webpack:///./src/components/bottom-bar/BottomBar.tsx","webpack:///./src/core/axes/CoordinateAxes.ts","webpack:///./src/core/axes/CoordinateAxesViewport.ts","webpack:///./src/components/materials/MaterialManager.tsx","webpack:///./src/components/progress-bar/ProgressBar.tsx","webpack:///./src/components/projectSettingsPanel/ProjectSettingsPanel.tsx","webpack:///./src/service/interceptor.ts","webpack:///./src/service/base.ts","webpack:///./src/service/json.ts","webpack:///./src/components/property/PropertyPanel.tsx","webpack:///./src/components/snapshot/SnapshotPanel.tsx","webpack:///./src/core/shp-js/Shp.ts","webpack:///./src/core/shp-js/BitView.ts","webpack:///./src/core/shp-js/ShpThree.ts","webpack:///./src/core/shp-js/SHPLoader.ts","webpack:///./src/core/webcam/WebCam.ts","webpack:///./src/core/utils/CommonUtils.ts","webpack:///./src/core/utils/UnitConversionUtils.ts","webpack:///./src/core/utils/DecimalPrecisionUtils.ts","webpack:///./src/core/measure/Measure.ts","webpack:///./src/core/utils/GroundUtils.ts","webpack:///./src/core/utils/SkyboxUtils.ts","webpack:///./src/core/helpers/DatGuiHelper.ts","webpack:///./src/core/utils/DeviceUtils.ts","webpack:///./src/core/helpers/RafHelper.ts","webpack:///./src/core/utils/PmremUtils.ts","webpack:///./src/core/Viewer3D.ts","webpack:///./src/components/viewer-container/Viewer3DContainer.tsx","webpack:///./src/components/projects/ProjectPanel.tsx","webpack:///./src/router/index.ts","webpack:///./src/main.ts","webpack:///./src/plugins/element.ts","webpack:///./src/components/bottom-bar/BottomBar.module.scss?2b15","webpack:///./src/views/projects/Projects.module.scss?d7ce","webpack:///./src/components/viewer-container/Viewer3DContainer.module.scss?6746","webpack:///./src/components/projects/ProjectCard.module.scss?6738"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","webpackEmptyContext","req","e","Error","code","keys","resolve","id","MessageId","PM","require","PostmateManager","constructor","isEmbedded","model","properties","functions","histories","_instance","init","location","parent","this","console","log","Postmate","default","handshake","Model","then","childApi","addEventListenerWithReturnValue","getSupportedPostmateProperties","getSupportedPostmateFunctions","getIsEmbedded","emit","messageId","addEventListener","callback","messageData","direction","type","time","Date","now","removeEventListener","forEach","indexOf","removeEventListenerWithReturnValue","getHistories","undefined","render","_vm","_c","_self","attrs","staticRenderFns","script","async","getProjects","warn","deleteProject","projectId","createProject","projectName","projectDescription","uploadBimFile","formData","ProjectManager","baseURL","process","configFile","Promise","reject","axios","res","projects","catch","reason","error","forceRefetch","customProjects","map","proj","_id","models","getCustomProjects","project","find","index","findIndex","arr","THREE","Array","isArray","ProjectCard","Vue","defaultThumbnail","delete","stopPropagation","mounted","div","$refs","thumbnail","style","backgroundImage","openProject","event","$router","h","arguments","styles","projectCard","card","infos","info","__decorate","Prop","required","Emit","Component","Projects","Projects_1","sampleProjects","onLoading","activateUpdate","getSampleProjects","finally","createNewProject","_Message","warning","addProject","uploadFiles","uploadModel","createData","FormData","projectKeys","append","addCustomProject","upData","file","splitMethod","deleteCustomProject","sampleProjectCards","cardsWrapper","defaultSettings","unit","decimalPrecision","camera","near","far","mouse","sensitivity","keyboard","cameraNearRange","cameraFarRange","unitRange","Meter","Milimeter","Centimeter","Feet","Inch","Point","sensitivityRange","decimalPrecisionRange","settingStoreKeyName","Types","use","Vuex","store","state","STATE_ACTIVE_PROJECT","STATE_SHOW_BIM_TREE","STATE_SHOW_LAYER_MANAGER","STATE_SHOW_PROPERTY_PANEL","STATE_SHOW_SNAPSHOT_PANEL","STATE_SHOW_VIEWPOINTS","STATE_SHOW_ANNOTATIONS","STATE_PROJECT_SETTINGS","STATE_SHOW_PROJECT_SETTINGS_PANEL","STATE_OBJECT_UUID_FOR_MATERIAL_MANAGER","mutations","MUTATION_ACTIVE_PROJECT","val","MUTATION_SHOW_BIM_TREE","MUTATION_SHOW_LAYER_MANAGER","MUTATION_SHOW_PROPERTY_PANEL","MUTATION_SHOW_SNAPSHOT_PANEL","MUTATION_SHOW_VIEWPOINTS","MUTATION_SHOW_ANNOTATIONS","MUTATION_SHOW_PROJECT_SETTINGS_PANEL","MUTATION_PROJECT_SETTINGS","MUTATION_OBJECT_UUID_FOR_MATERIAL_MANAGER","actions","getters","GETTER_ACTIVE_PROJECT","GETTER_SHOW_BIM_TREE","GETTER_SHOW_LAYER_MANAGER","GETTER_SHOW_PROPERTY_PANEL","GETTER_SHOW_SNAPSHOT_PANEL","GETTER_SHOW_VIEWPOINTS","GETTER_SHOW_ANNOTATIONS","GETTER_SHOW_PROJECT_SETTINGS_PANEL","GETTER_PROJECT_SETTINGS","GETTER_OBJECT_UUID_FOR_MATERIAL_MANAGER","Store","ExportUtils","input","filename","exportToGltfOrGlb","binary","options","exporter","GLTFExporter","DEFAULT_OPTIONS","onlyVisible","includeCustomExtensions","assign","parse","gltf","addExtention","EXTENSION_GLB","ab","saveArrayBuffer","EXTENSION_GLTF","saveJson","EXTENSION_OBJ","OBJExporter","saveString","EXTENSION_DRACO","DRACOExporter","encodeSpeed","json","toJSON","toLowerCase","endsWith","EXTENSION_JSON","blob","link","downloadLink","document","createElement","display","body","appendChild","href","URL","createObjectURL","download","click","buffer","save","Blob","saveJsonString","JSON","stringify","jsonString","str","extension","matrixAutoUpdate","Exploder","scene","objectId","position","scale","DEFAULT_SCALE","explodedTimes","isExplodeUp","getObjectCenter","explode","getObjectById","children","x","y","z","childObj","matrix","pos","quaternion","count","getMatrixAt","decompose","distance2","setZ","distance","clone","sub","addScaledVector","setPosition","setMatrixAt","matrixWorldNeedsUpdate","instanceMatrix","needsUpdate","updateMatrix","unexplode","factor","dist2","dist","setOnlyExplodeUp","onlyExplodeUp","center","bbox","traverse","obj","expandByObject","getCenter","SceneUtils","traverseVisible","userData","selectable","objectUuids","uuid","getObjectByProperty","box","getBoundingBox","isEmpty","union","sampling","getInstancedMeshBoundingBox","divisor","updateMatrixWorld","child","mesh","geom","geometry","boundingBox","applyMatrix4","isNaN","min","max","matrixWorld","exploderDict","getPositionCenter","exploder","explodeObject","ObjectUtils","revertWireframeMode","revertObjectOpacity","revertVisibleForFloors","getObjectByUuid","resetObjectStyle","opacity","includeObjectUuids","excludeObjectUuids","materialInfoList","addOpacity","mat","transparent","addOpacityForClonedMaterial","matInfo","clonedMaterial","material","materials","revertOpacity","tryGetOriginalMaterial","setObjectOpacity","explodeUp","wireframeMaterial","color","wireframe","materialForWireframe","setWireframeMode","searchText","targetUuids","findFirst","results","matchStr","matchNum","num","toString","matchUserData","gltfExtensions","ext","Value","elementId","findInner","reg","RegExp","exec","f","replace","Number","floor","getFloorsFromString","floors","modelUuid","match","level","sort","matchCallback","unmatchCallback","isMatch","matchFloors","makeUnmatchedInvisible","traverseObjectByFloors","visible","OUTLINE_MATERIAL","visibleOnly","meshOnly","replaceOriginalObject","lines","addOutlines","line","createOutline","isOutline","removeFromParent","dispose","removeOutlines","remove","hasOutline","BaseBoxSection","renderer","controls","isOpen","boxMin","Vector3","boxMax","group","Group","planes","vertices","faces","raycaster","Raycaster","mousePosition","Vector2","activeFace","onMouseMove","updateMouseAndRay","intersects","intersectObjects","domElement","cursor","face","setActive","onMouseDown","isLeftButton","button","axis","point","drag","start","ground","Mesh","PlaneGeometry","MeshBasicMaterial","colorWrite","depthWrite","initGround","enablePan","enableZoom","enableRotate","mousemove","mouseup","end","intersectObject","updateSectionBox","normals","xLeft","xRight","yDown","yUp","zBack","zFront","includes","setX","setY","copy","newNormal","projectOnVector","add","lookAt","minSize","MIN_WIDTH","Math","updatePlanes","initOrUpdateVertices","initOrUpdateFaces","initOrUpdateLines","setSectionBox","sectionBox","open","initSectionBox","addMouseListener","close","removeMouseListener","clearSectionBox","reset","initPlanes","Plane","constant","set","v","setFromPoints","BoxFace","backFace","BoxLine","clientX","innerWidth","clientY","innerHeight","setFromCamera","LineSegments","super","normalMaterial","LineBasicMaterial","activeMaterial","BufferGeometry","isActive","setIndex","computeVertexNormals","backMaterial","side","BackSide","ObjectsBoxSection","objectsUuids","box3","Box3","expandByScalar","clippingPlanes","clipIntersection","BasePlaneSection","isSectionObjectVisible","controllerMarkers","normalMarkerOpacity","activeMarkerOpacity","normalColor","activeColor","activeMarker","markers","filter","updateSectionPlane","initOrUpdateFace","setSectionPlane","setSectionObjectVisible","visilbe","initSectionPlane","clearSectionPlane","setMatrix","plane","createOrUpdateControllerMarker","v1","v2","marker","createPointMarker","initPointMarkerMaterial","markerTexture","load","spriteMaterial","sizeAttenuation","depthTest","DoubleSide","ObjectsPlaneSection","BasePanel","minWidth","maxWidth","minHeight","maxHeight","resize","dragHandler","panel","basePanel","parentElement","findRelativeParentElement","distX","offsetLeft","distY","offsetTop","setCapture","onmousemove","preventDefault","pOffsetWidth","offsetWidth","pOffsetHeight","offsetHeight","elOffsetWidth","elOffsetHeight","left","top","onmouseup","onmousedown","releaseCapture","resizeHandler","w","width","height","el","pElement","beforeDestroy","$scopedSlots","header","text","content","staticClass","class","highlightCurrent","dragState","draggingNode","allowDrop","dropType","getNodeKey","visibleList","itemComponent","ceil","extraLine","renderAfterExpand","showCheckbox","renderContent","onNodeExpand","handleNodeExpand","_l","root","childNodes","props","on","_v","_s","emptyText","_e","directives","rawName","showDropIndicator","expression","ref","NODE_KEY","markNodeData","node","configurable","writable","findNearestComponent","element","componentName","target","tagName","__vue__","$options","parentNode","getChildState","all","none","allWithoutDisable","checked","indeterminate","disabled","half","reInitChecked","checkStrictly","getPropertyFromData","prop","config","dataProp","nodeIdSeed","Node","expanded","isCurrent","loaded","loading","registerNode","isLeaf","isLeafByUser","lazy","setData","defaultExpandAll","expand","defaultExpandedKeys","autoExpandParent","currentNodeKey","currentNode","_initDefaultCheckedNode","updateLeafState","insertChild","nodeKey","contains","deep","walk","removeChild","batch","getChildren","objectAssign","insertBefore","insertAfter","dataIndex","deregisterNode","removeChildByData","targetNode","expandParent","done","shouldLoadData","loadData","setChecked","doCreateChildren","array","defaultProps","item","collapse","recursion","passValue","checkDescendants","handleDescendants","isCheck","forceInit","updateChildren","newData","oldData","newDataMap","newNodes","isNodeExists","arrayFindIndex","TreeStore","option","nodesMap","loadFn","_initDefaultCheckedNodes","filterNodeMethod","allHidden","some","newVal","instanceChanged","getNode","refData","refNode","parentData","defaultCheckedKeys","checkedKey","setDefaultCheckedKey","getCheckedNodes","leafOnly","includeHalfChecked","checkedNodes","getCheckedKeys","getHalfCheckedNodes","nodes","getHalfCheckedKeys","_getAllNodes","allNodes","_setCheckedKeys","checkedKeys","a","b","cache","setCheckedNodes","setCheckedKeys","setDefaultExpandedKeys","getCurrentNode","setCurrentNode","prevCurrentNode","setUserCurrentNode","currNode","setCurrentNodeKey","tree","draggable","$event","handleClick","handleContextMenu","handleDragStart","handleDragOver","handleDragEnd","handleDrop","indent","iconClass","handleExpandIconClick","handleCheckChange","nativeOn","$$v","$set","childNodeRendered","handleChildNodeExpand","methods","creator","nodeTag","isTree","childrenKey","$watch","accordion","$on","handleSelectChange","source","oldChecked","oldIndeterminate","$emit","expandOnClickNode","checkOnClickNode","_events","_","ev","$nextTick","halfCheckedNodes","halfCheckedKeys","nodeData","instance","broadcast","mixins","emitter","mixinNode","Function","Boolean","components","ElCollapseTransition","ElCheckbox","NodeContent","$parent","_renderProxy","$vnode","context","label","watch","created","VirtualList","ElTreeNode","treeItems","checkboxItems","dropNode","ElVirtualNode","String","allowDrag","computed","treeItemArray","every","flattenTree","checkbox","setAttribute","datas","reduce","conn","getNodePath","path","reverse","getCurrentKey","setCurrentKey","updateKeyChildren","initTabIndex","$el","querySelectorAll","checkedItem","handleKeydown","currentItem","className","keyCode","currentIndex","nextIndex","focus","hasInput","querySelector","treeNode","dataTransfer","effectAllowed","oldDropNode","removeClass","dropPrev","dropInner","dropNext","userAllowDropInner","dropEffect","nextSibling","previousSibling","targetPosition","getBoundingClientRect","treePosition","prevPercent","nextPercent","indicatorTop","iconPosition","dropIndicator","bottom","right","addClass","draggingNodeCopy","updated","GeometryUtils","g1","g2","morphTargetsRelative","equals","boundingSphere","attributesEqual","attributes","bufferAttributeEqual","t1","t2","a1","a2","keys1","keys2","ba1","ba2","b1","b2","itemSize","normalized","d1","d2","bufferAttr","MaterialUtils","m1","m2","alphaTest","colorEquals","emissive","roughness","metalness","alphaMap","materialEquals","c1","c2","InstantiateHelper","instantiate","startTime","instantiateInner","childCount","dict","nonInstIndexes","oi","foundInstantableObject","values","k","indexes","ok","geometryEquals","materialsEquals","removeFromArray","instances","indexesToBeRemoved","firstObj","toBeRemoved","MergeHelper","counter","merge","deepMerge","mergeInner","nonMergeIndexes","foundMergeableObject","tryHandleMergeableObjects","mergedMeshes","geometries","tryConvertInterleavedBufferAttributes","mergedBufferGeometry","mergeGeometries","mergedMesh","updateWorldMatrix","totalCount","objects","applyMatrix","removedCount","Views","Command","Viewer3DUtils","view","eye","look","getVisibleObjectBoundingBox","getCameraPositionByBboxAndView","getObjectsBoundingBox","getCameraPositionByBboxAndCamera","DISTANCE_FACTOR","distanceVector","cx","cy","cz","oldPostion","getWorldPosition","dir","normalize","multiply","delta","pow","E","Top","Bottom","Front","Back","Left","Right","ms","setTimeout","uuids","twinklingObjectUuids","sleep","BimTree","checkMark","treeData","filterText","treeHeight","postmate","dropdownMenuState","setBimTreeVisibility","setBimTree","highlightRandomNode","random","handleNodeClick","onShowBimTreeChanged","onFilterTextChanged","filterNode","$store","getShowBimTree","bimModelUuids","viewer","loadedModels","bimModelsToTreeData","changeTreeHeight","treeWrapper","clientHeight","modelUuids","treeItem","objectToTreeData","maxDepth","getTreeLabelForObject","childTreeItem","traverseAncestors","setObjLeavesVisible","enableRender","component","getCameraPositionByObjects","flyTo","twinkle","selectObject","commit","startScroll","wrapper","classList","stopScroll","command","objectsBoxSection","objectsPlaneSection","getState","showOutline","handleDropdownCommand","ZoomTo","zoomTo","Transparent","Wireframe","Outline","outline","Material","SectionBox","section","SectionPlane","sectionPlane","CustomizedSectionPlane","customizedSectionPlane","Explode","Floor","Instantiate","Merge","ExportToGltf","exportToGltf","ExportToGlb","exportToGlb","ExportToObj","exportToObj","ExportToDraco","exportToDraco","ExportToThreeJsJson","exportToThreeJsJson","runCommand","setOutlinesVisibility","runCommands","commands","revertObjectOpacityByUuid","removeCheckMark","setObjectOpacityByUuid","addCheckMark","clearSelection","isWireframeMode","revertWireframeModeByUuid","setWireframeModeByUuid","customizedPlaneSection","localClippingEnabled","format","_MessageBox","prompt","matrixX","makeRotationX","PI","matrixY","makeRotationY","matrixZ","makeRotationZ","unexplodeObject","distinctFloors","alert","filterByFloorInfo","mil","split","unmatchUuids","materialInfo","isInstantiated","isMerged","innerText","isRootNode","isTransparent","isSection","isSectionByPanel","title","scopedSlots","ElTree","bimTreeData","_mergeJSXProps","bimTree","Watch","BottomBar","postmateHistories","postmateHistoryString","updateCameraInfo","round","p2t","span","textContent","getObjectInfo","points","updateMaterialInfo","updatePostmateHistoryCount","postmateHistoryCount","numToTime","updateObjectsInfo","objectsInfo","updateTextContent","materialCount","date","getHours","getMinutes","getSeconds","bottomBar","CoordinateAxes","addTexts","AXIS_LENGTH","AXIS_COLOR_X","AXIS_COLOR_Y","AXIS_COLOR_Z","origin","axisX","axisY","axisZ","arrowX","arrowY","arrowZ","FontLoader","font","createText","textGeom","TextGeometry","size","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelSegments","textMat","flatShading","CoordinateAxesViewport","initRenderer","initScene","animate","antialias","alpha","setSize","coordinateAxes","update","requestAnimationFrame","setHostRenderer","hostRenderer","getWorldDirection","up","updateCameraDirection","distanceFactor","centerDelta","clear","MaterialManager","objectUuid","materialData","selectedMaterialIndex","setPanelVisibility","getMaterials","onObjectUuidForMaterialManagerChanged","getObjectUuidForMaterialManager","getMaterialsInner","checkAndAddMaterial","materialId","refCount","color2Str","handleRowClick","row","column","handleColorChange","setRGB","g","handleTransparentChange","handleOpacityChange","handleRoughnessChange","handleMetalnessChange","colorFormatter","cellValue","$createElement","opacity2HexStr","getHexString","editorDiv","materialManager","Progressbar","duration","from","to","strokeWidth","trailWidth","step","autoStyleContainer","easing","ProgressBar","initProgressbar","progressBar","destroy","updateProgressBar","setText","Line","progressBarWrapper","ProjectSettingsPanel","activeName","settings","ProjectSettingType","changeTab","initProjectSettings","savedSettings","localStorage","getItem","cloneDeep","restore","tabId","VuexTypes","setItem","updateProjectSettings","options1","options2","psetting","sliderWrap","btnWrap","pushErrorMessage","message","status","errorHandler","response","errorMsg","responseHandler","msg","genRequestId","url","method","cancelPending","requestId","$pendingRequests","cancel","timeout","defaults","headers","post","interceptors","request","cancelToken","CancelToken","params","paramsSerializer","qs","getJson","PropertyPanel","jsonComponents","propData","getObjectAttributes","getPropDataFormJson","concat","getShowPropertyPanel","newProject","oldProject","getActiveProject","propFile","propertyFile","_json$find","comp","tableWrapper","SnapshotPanel","quality","imageData","onShowSnapshotPanelChanged","getShowSnapshotPanel","snapshotPanel","regenerateImageData","canvas","toDataURL","SHP","SHPParser","arrayBuffer","dv","DataView","idx","fileCode","getInt32","wordLength","byteLength","version","shapeType","minX","getFloat64","minY","maxX","maxY","minZ","maxZ","minM","maxM","records","record","number","shape","parseShape","NULL","POINT","POLYLINE","POLYGON","parts","Int32Array","Float64Array","BitView","buf","u8","Uint8Array","getBit","off","setBit","bidx","getInt12","abits","bbits","cbits","am","bm","cm","setInt12","getInt6","setInt6","test","ArrayBuffer","bv","ShpThree","LINE_MATERIAL","linewidth","MESH_MATERIAL","createModel","shp","polygons","poly","last","trangles","triangulateShape","lineGeom","loadCompressed","deltaEncoded","compressed","deltaDecode6","compress","polys","i16a","Int16Array","denc","deltaEncode6","deltaEncode","spans","byteLen","abs","storeDeltas","storeDeltas6","setInt16","setInt8","deltaDecode","getInt16","dx","getInt8","dy","setUint32","bitLength","getUint32","SHPLoader","onLoad","onProgress","onError","updateProgress","xhr","XMLHttpRequest","responseType","onload","parser","parsedShp","onerror","send","percent","progressEventInit","lengthComputable","total","ProgressEvent","WebCam","vertexShader","fragmentShader","webcam","constraints","video","navigator","mediaDevices","getUserMedia","mediaStream","srcObject","onloadedmetadata","play","err","webcamCanvas","canvasCtx","getContext","fillStyle","fillRect","webcamTexture","minFilter","magFilter","shaderMaterial","uniforms","keyColor","similarity","smoothness","getShaderMaterial","createWebCamPlane","readyState","HAVE_ENOUGH_DATA","drawImage","CommonUtils","doc","isFull","mozCancelFullScreen","oRequestFullscreen","webkitIsFullScreen","msFullscreenEnabled","ele","documentElement","func","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullScreen","webkitExitFullscreen","msExitFullscreen","radius","cssText","CSS2DObject","__getPointBaseLength","testDiv","baseLen","inchToMeter","unitConversionByMeter","mm","ft","in","pt","unitLabel","_getSuffix","power","getUnitStr","getLengthValueByUnit","sourceUnit","targetUnit","targetValue","showPrecisionValue","precistionType","toFixed","MeasureMode","Measure","Distance","isCompleted","mouseMoved","pointMarkers","labels","pointArray","mousedown","getClosestIntersection","tempPointMarker","p0","tempLine","createLine","startPoint","lastPoint","Area","distanceTo","getUnitString","addOrUpdateTempLabel","onMouseClicked","dblclick","complete","lastClickTime","polyline","tempLabel","len","indexArray","Angle","keydown","clientWidth","OBJ_NAME","MAX_DISTANCE","createFaces","curve","frustumCulled","clearPoints","clearPolyline","area","calculateArea","getBarycenter","labelObj","createLabel","innerHTML","p1","p2","dir0","dir1","getAngleBisector","dir2","angle","calculateAngle","arcP0","arcP2","createCurve","padding","fontSize","backgroundColor","borderRadius","LABEL_NAME","getPoints","sqrt","middlePoint","endPoint","angleTo","numberToString","fractionDigits","GroundUtils","divisions","groundCenter","DEFAULT_WIDTH","DEFAULT_WIDTH_SEGS","helper","DEFAULT_MAT_PARAMS","GROUND_GRID_NAME","texture","repeatX","repeatY","DEFAULT_HEIGHT","loader","groundTexture","wrapS","wrapT","repeat","DEFAULT_HEIGHT_SETS","anisotropy","encoding","groundMaterial","rotation","receiveShadow","GRASS_GROUND_NAME","wireframeLinewidth","SkyboxUtils","widthSegments","heightSegments","skyCenter","topColor","skylineColor","bottomColor","offset","exponent","skyGeo","skyMat","sky","NAME","createSkyOfGradientRampByBoundingBox","MIN_SKY_RADIUS","MAX_SKY_RADIUS","createSkyOfGradientRamp","subFolder","setPath","pictures","screenfull","DatGuiHelper","showGroundGrid","showGrassGround","skyMode","homeView","views","OrthographicCamera","takeSnapshot","fullScreen","uploadFile","showBimTree","transparentMode","sectionMode","measure","alVisible","alColor","alIntensity","alCastShadow","dlVisible","dlColor","dlIntensity","dlCastShadow","hlVisible","hlIntensity","hlColor","hlGroundColor","fogEnabled","fogColor","fogNearDistance","fogFarDistance","composerEnabled","renderPassEnabled","fxaaEnabled","saoEnabled","ssaoEnabled","outlineEnabled","ssaaEnabled","bloomEnabled","unrealBloomEnabled","initPostmate","gui","dat","autoPlace","closed","sf","addFolder","onChange","groundGrid","createGroundGrid","grassGround","createGrassGround","skyModeController","skyOfGradientRamp","createSkyFromTextures","background","sceneBackgroundColor","setValue","goToHomeView","getCameraPositionByView","setToOrthographicCamera","isEnabled","getElementById","mf","showBimTreeController","addOrRemoveObjectOpacity","disableSection","enableSection","disableMeasure","enableMeasure","al","ambientLight","alf","addColor","intensity","castShadow","dl","directionalLight","dlf","hl","hemisphereLight","hlf","groundColor","ff","fog","cf","enableComposer","enableRenderPass","enableFxaaPass","enableSaoPass","enableSsaoPass","enableOutlinePass","enableSsaaPass","enableBloomPass","enableUnrealBloomPass","setExplodeMode","isExplodeMode","explodeObjects","unexplodeObjects","getGroundGrid","setGroundGrid","goHomeView","setTransparentMode","DeviceUtils","ua","userAgent","isAndroid","isFireFox","isChrome","isTablet","isiPhone","isPc","isTouchDevice","isTouchScreenDevice","webgl","getExtension","glRenderer","getParameter","UNMASKED_RENDERER_WEBGL","RafHelper","TIMEOUT","INTERVAL","timeoutMap","intervalMap","run","cb","interval","endTime","timerSymbol","loop","setIdMap","clearTimeout","timer","cancelAnimationFrame","setInterval","clearInterval","PmremUtils","pmremGenerator","HDR_CITY_STREET_64x32","flipY","envMap","fromEquirectangular","Uint16Array","TWEEN","IFC","decoderPath","Viewer3D","selectedObject","composerRenderEnabled","savedMaterialsForOpacity","mouseDoubleClicked","raf","renderEnabled","isFrustumInsectChecking","events","timeoutSymbol","ifcHighlightMaterial","propertyName","old","initCamera","initControls","initLights","initPointerEvents","initDatGui","initOthers","preserveDrawingBuffer","setPixelRatio","devicePixelRatio","outputColorSpace","toneMappingExposure","useLegacyLights","setClearColor","shadowMap","enabled","css2dRenderer","CSS2DRenderer","stats","Stats","compileEquirectangularShader","createEnvTextureFromDataArray","environment","perspectiveCamera","isOrthCamera","printDeviceInfo","orthoCamera","OrbitControls","enableDamping","dampingFactor","keyPanSpeed","LEFT","UP","RIGHT","BOTTOM","listenToKeyEvents","orthoCameraConrols","perspectiveCameraControls","addEvent","onControlsChange","onKeyDown","newTarget","ANGLE","theta","cos","sin","ANGLE2","theta2","distVec","deltaY","asin","newDeltaY","ALPHA","lerp","flyToSelectedObject","intersections","getIntersections","firstIntersect","intersect","p3","p4","displayPointMarker","onPointerUp","handleMouseClick","highIntensity","datGui","setObjectsBoxClipper","setObjectsPlaneClipper","ctrl","enableWebCam","getWebGlRendererInfo","outlineWidth","sycnCameraPosition","src","dest","sycnControls","pc","pcc","oc","occ","zoom","updateProjectionMatrix","tween","composer","frustrumCullingByModelBBox","frustum","projScreenMatrix","multiplyMatrices","projectionMatrix","matrixWorldInverse","setFromProjectionMatrix","_visible","defineProperties","userConfigVisibility","computeBoundingBox","intersectsBox","wc","webcamPlane","renderPass","effectFxaaPass","saoPass","ssaoPass","outlinePass","fileName","loadFbx","loadObj","loadStl","loadIfc","loadShp","loadDae","loadGltf","getGltfLoader","encodeURIComponent","applyOptionsAndAddToScene","FBXLoader","OBJLoader","mtlLoader","MTLLoader","mtlUrl","preload","setMaterials","STLLoader","lastIndexOf","substr","ifcLoader","IFCLoader","mgr","ifcManager","setWasmPath","ifcModel","ColladaLoader","collada","ErrorEvent","PLYLoader","addLoadedModelToScene","gltfLoader","GLTFLoader","dracoLoader","DRACOLoader","setDecoderPath","setDRACOLoader","tryMakeTransparent","isFirstModel","regenSkyOfGradientRamp","regenGroundGrid","edges","isAdd","list","aspect","clonedHighlightMaterials","newMaterials","clonedHighlightMaterial","highlightColor","MeshStandardMaterial","MeshPhongMaterial","MeshLambertMaterial","coords","instanceId","faceIndex","instanceIdOrFaceIndexId","originalMatrix","clonedMesh","im","selectedObjects","highlightConfigOfModel","_this$ifcLoader","cfg","removeSubset","modelID","originalMaterial","hideMatrix","_this$ifcLoader2","ifcObj","getExpressId","ids","removePrevious","subset","createSubset","getItemProperties","flyToObjects","flyToObject","onCompleteCallback","multiplyScalar","tween1","Tween","Easing","Sinusoidal","InOut","onUpdate","onComplete","tween2","activeProject","home","arrayToVector3","getCameraPositionByObjectUuids","expandByPoint","createSkyOfGradientRampByObjectsInScene","enable","EffectComposer","pass","RenderPass","addPass","ShaderPass","FXAAShader","renderToScreen","SAOPass","output","saoBias","saoIntensity","saoScale","saoKernelRadius","saoMinResolution","SSAOPass","kernelRadius","minDistance","maxDistance","OutlinePass","edgeStrength","edgeGlow","edgeThickness","pulsePeriod","visibleEdgeColor","hiddenEdgeColor","ssaaRenderPass","SSAARenderPass","bloomPass","BloomPass","unrealBloomPass","UnrealBloomPass","threshold","strength","disableWebCam","updateCameraSettings","cs","EventStatus","Viewer3DContainer","selectedObjId","loadingProgress","loadingText","showProjectSettingPanel","viewerContainer","projectSettings","loadSampleProjectModels","initStats","initAxesRenderer","_obj$userData","_obj$userData2","_extensions$objectId","_extensions$elementId","extensions","objId","setMode","statsOutput","axesViewport","axesDiv","axesRenderer","cav","loadModel","getEventStatusIcon","icon","RUNNING","FAILED","SUCCEEDED","toggleProjectSettingPanel","uploadModelFile","files","loadLocalModel","_this$viewer","_this$viewer2","propertyPanel","_mergeJSXProps2","settingPanelStyle","pSettingDialog","ProjectPanel","getProjectId","currentRoute","projectPanel","VueRouter","routes","router","startApp","productionTip","loadConfig","App","$mount","$config","_Aside","_Button","_Card","_Checkbox","_ColorPicker","_Container","_Dialog","_Divider","_Dropdown","_DropdownMenu","_DropdownItem","_Footer","_Form","_FormItem","_Header","_Input","_Main","_Popover","_Radio","_RadioGroup","_Table","_TableColumn","_Tree","_Upload","_Tabs","_TabPane","_Slider","_Select","_Option"],"mappings":"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AM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,KAAK,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,SAAS,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,UAAU,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,SAAS,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,UAAU,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,WAAW,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,UAAU,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,KAAK,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,KAAK,WAAW,MAAM,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,WAAW,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,KAAK,KAAK,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,UAAU,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,KAAK,KAAK,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,MAAM,UAAU,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,UAAU,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,UAAU,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,UAAU,KAAK,KAAK,KAAK,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,QCgBzw9C,MAAM2gB,GAAQ/qD,EAAQ,QAChBgrD,GAAMhrD,EAAQ,QAEdirD,GAAc,4BACN,MAAOC,GA0DnBhrD,YAAY4jB,EAAeC,EAAgBsnB,EAAyB9iC,GAjDpE,KAAA4iD,oBAAkC3oD,EAGlC,KAAAgjD,qBAAoC,IAAItgD,OAAY,UAGpD,KAAAw4B,aAA4E,GAMpE,KAAA0tB,uBAAwB,EACxB,KAAArH,iBAAkB,EAUlB,KAAAhgC,OAAS,EACT,KAAAD,MAAQ,EAGR,KAAAunC,yBAA4C,GAC5C,KAAAjQ,YAAa,EACb,KAAAkQ,oBAAqB,EAWrB,KAAAC,IAAkB,IAAIhC,GACtB,KAAAiC,eAAgB,EAEhB,KAAAC,yBAA0B,EAE1B,KAAAC,OAAmD,GAE1C,KAAA9uB,SAAW38B,EAAgB0wB,WA8e5C,KAAA4N,aAAe,CAACv8B,EAAe,OAC7BpB,KAAK4qD,eAAgB,EAChB5qD,KAAK2qD,MAGV3qD,KAAK+qD,eAAiB/qD,KAAK2qD,IAAIpB,aAAavpD,KAAK+qD,eACjD/qD,KAAK+qD,cAAgB/qD,KAAK2qD,IAAIpvB,WAAW,KACvCv7B,KAAK4qD,eAAgB,EAErB5qD,KAAKwqD,uBAAwB,GAC5BppD,KAknBG,KAAA4pD,qBAAuB,IAAI1mD,QAAwB,CAAE0Q,MAAO,SAAUgM,WAAW,EAAO3M,aAAa,EAAMN,QAAS,KAkpB5H,KAAAgd,MAAQ,CAACk6B,EAAsBjqD,KAC7B,GAAIiqD,KAAgBjrD,KAAM,CACxB,IAAIkrD,EAAMlrD,KAAKirD,GACf3vD,OAAO8B,eAAe4C,KAAMirD,EAAc,CACxC5tC,IAAK,SAASpT,GACZ,MAAM9M,EAAI+tD,EACVA,EAAMjhD,EACNjJ,EAASiJ,EAAK9M,EAAG6C,OAEnB1C,IAAK,WACH,OAAO4tD,OAnwDblrD,KAAKkjB,MAAQA,EACbljB,KAAKmjB,OAASA,EACdnjB,KAAKyqC,SAAWA,EAChBzqC,KAAKH,OAMPA,OACEG,KAAKwmC,YACLxmC,KAAKumC,eACLvmC,KAAKmrD,aACLnrD,KAAKorD,eACLprD,KAAKqrD,aACLrrD,KAAKsrD,oBACLtrD,KAAKurD,aACLvrD,KAAK4jD,eACL5jD,KAAKwrD,aAGChlB,YACNxmC,KAAK+O,MAAQ,IAAIzK,QAKjBtE,KAAK+O,MAAMF,iBAAmBA,GAMxB03B,eACNvmC,KAAKqY,SAAW,IAAI/T,QAAoB,CAAEoiC,WAAW,EAAM+kB,uBAAuB,IAClFzrD,KAAKqY,SAASqzC,cAAcntD,OAAOotD,kBACnC3rD,KAAKqY,SAASuuB,QAAQ5mC,KAAKkjB,MAAOljB,KAAKmjB,QAEvCnjB,KAAKqY,SAASuzC,iBAAmBtnD,QACjCtE,KAAKqY,SAASwzC,oBAAsB,EAEpC7rD,KAAKqY,SAASyzC,iBAAkB,EAChC9rD,KAAKqY,SAAS0zC,cAAc,SAAU,GACtC/rD,KAAKqY,SAAS2zC,UAAUC,SAAU,EAClCjsD,KAAKqY,SAAS2zC,UAAU7qD,KAAOmD,QAG/BtE,KAAKksD,cAAgB,IAAIC,QACzBnsD,KAAKksD,cAActlB,QAAQ5mC,KAAKkjB,MAAOljB,KAAKmjB,QAE5CnjB,KAAKosD,MAAQ,IAAIC,QAEjB,MAAMxC,EAAiB,IAAIvlD,QAAqBtE,KAAKqY,UACrDwxC,EAAeyC,+BACf1C,GAAW2C,8BAA8B1C,GAAgBtpD,KAAMw+C,IACzD/+C,KAAK+O,QACP/O,KAAK+O,MAAMy9C,YAAczN,KAKvBoM,aACDnrD,KAAK+O,QAKV/O,KAAKysD,kBAAoB,IAAInoD,QAAwB,GAAItE,KAAKkjB,MAAQljB,KAAKmjB,OAAQnjB,KAAKyqC,SAAS3iC,OAAOC,KAAM/H,KAAKyqC,SAAS3iC,OAAOE,KACnIhI,KAAKysD,kBAAkBx9C,SAASoO,IAAI,EAAG,IAAK,GAC5Crd,KAAK+O,MAAMiN,IAAIhc,KAAKysD,mBACpBzsD,KAAK8H,OAAS9H,KAAKysD,mBAGbrB,aAAasB,GAAwB,GAC3C,IAAK1sD,KAAKqY,SACR,OAGFsvC,GAAYgF,kBAEZ,MAAM7kD,EAAS4kD,EAAe1sD,KAAK4sD,YAAc5sD,KAAKysD,kBACtD,IAAK3kD,EACH,OAEF,MAAMwQ,EAAW,IAAIu0C,QAAc/kD,EAAQ9H,KAAKqY,SAASoB,YACzDnB,EAASw0C,eAAgB,EACzBx0C,EAASy0C,cAAgB,GACzBz0C,EAAS2zC,SAAU,EACnB3zC,EAAS00C,YAAc,GAEvB10C,EAASvZ,KAAO,CACdkuD,KAAM,OACNC,GAAI,QACJC,MAAO,OACPC,OAAQ,eAEV90C,EAAS+0C,kBAAkB3/C,SAASG,MACpCyK,EAASwuB,SACL4lB,EACF1sD,KAAKstD,mBAAqBh1C,EAE1BtY,KAAKutD,0BAA4Bj1C,EAEnCtY,KAAKsY,SAAWA,EAChBtY,KAAKwtD,SAASl1C,EAAU,SAAUtY,KAAKytD,iBAAiBztD,OACxDA,KAAKwtD,SAASjvD,OAAQ,UAAWyB,KAAK0tD,UAAU1tD,OAG1CytD,iBAAiB5wB,GACvB,MAAO,KACLA,EAAOc,gBAIH+vB,UAAU7wB,GAChB,OAAQj+B,IACN,MAAMkJ,EAAS+0B,EAAO/0B,OAChBwQ,EAAWukB,EAAOvkB,SACxB,IAAKxQ,IAAWwQ,EACd,OAEF,MAAMpQ,EAAclI,KAAKyqC,SAAStiC,SAASD,aAAe,EACpD7J,EAAI,IAAIiG,QACdwD,EAAO2yB,iBAAiBp8B,GACxB,MAAMV,EAAI2a,EAAS4N,OACbynC,EAAYhwD,EAAE4S,QACpB,GAAe,cAAX3R,EAAEE,MAAmC,eAAXF,EAAEE,KAAuB,CAGrD,MAAM8uD,EAAQ1lD,EACd,IAAI2lD,EAASzxC,KAAKslB,GAAKksB,EAAS,IACjB,cAAXhvD,EAAEE,OACJ+uD,GAASA,GAEXF,EAAUj+C,GAAM/R,EAAE+R,EAAIrR,EAAEqR,GAAK0M,KAAK0xC,IAAID,IAAUlwD,EAAEiS,EAAIvR,EAAEuR,GAAKwM,KAAK2xC,IAAIF,GAAUxvD,EAAEqR,EAClFi+C,EAAU/9C,GAAMjS,EAAEiS,EAAIvR,EAAEuR,GAAKwM,KAAK0xC,IAAID,IAAUlwD,EAAE+R,EAAIrR,EAAEqR,GAAK0M,KAAK2xC,IAAIF,GAAUxvD,EAAEuR,EAClF0I,EAAS4N,OAASynC,EAClBr1C,EAASwuB,cACJ,GAAe,YAAXloC,EAAEE,MAAiC,cAAXF,EAAEE,KAAsB,CAGzD,MAAMkvD,EAAS9lD,EACf,IAAI+lD,EAAU7xC,KAAKslB,GAAKssB,EAAU,IAClC,MAAME,EAAU,IAAI5pD,QAAc3G,EAAE+R,EAAIrR,EAAEqR,EAAG/R,EAAEgS,EAAItR,EAAEsR,EAAGhS,EAAEiS,EAAIvR,EAAEuR,GAC1DuB,EAAO+8C,EAAQ7yD,SACf8yD,EAAUxwD,EAAEgS,EAAItR,EAAEsR,EACT,cAAX/Q,EAAEE,OACJmvD,GAAUA,GAEZ,MAAM3Q,EAAQlhC,KAAKgyC,KAAKD,EAASh9C,GAAQ88C,EACzC,GAAI3Q,GAASlhC,KAAKslB,GAAK,GAAK4b,EAAQlhC,KAAKslB,GAAK,EAC5C,OAEF,MAAM2sB,EAAYjyC,KAAK2xC,IAAIzQ,GAASnsC,EACpCw8C,EAAUh+C,EAAIhS,EAAEgS,GAAK0+C,EAAYF,GACjC71C,EAAS4N,OAASynC,EAClBr1C,EAASwuB,cACJ,GAAe,SAAXloC,EAAEE,KAAiB,CAC5B,MAAMwvD,EAAsB,IAAdpmD,EACRiJ,EAAO9S,EAAEg9C,WAAW19C,GACtBwT,EAAOrJ,EAAOC,MAGhBuQ,EAAS4N,OAAOqoC,KAAKlwD,GAAIyJ,EAAOC,KAAOoJ,GAEzC9S,EAAEkwD,KAAK5wD,EAAG2wD,GACVxmD,EAAOmH,SAASoO,IAAIhf,EAAEqR,EAAGrR,EAAEsR,EAAGtR,EAAEuR,QAC3B,GAAe,SAAXhR,EAAEE,KAAiB,CAC5B,MAAMwvD,EAAsB,IAAdpmD,EACd7J,EAAEkwD,KAAK5wD,GAAI2wD,GACXxmD,EAAOmH,SAASoO,IAAIhf,EAAEqR,EAAGrR,EAAEsR,EAAGtR,EAAEuR,QAC3B,GAAe,SAAXhR,EAAEE,KAEXkB,KAAKwuD,2BACA,GAAe,SAAX5vD,EAAEE,KAAiB,CAM5B,MAAM2vD,EAAgBzuD,KAAK0uD,mBAC3B,GAAID,EAAcpzD,OAAS,EAAG,CAC5B,MAAMszD,EAAiBF,EAAcvqD,KAAK0qD,IACxC,MAAMzwD,EAASywD,EAAUzwD,OAGzB,OAAOA,EAAOkZ,SAAWlZ,aAAkBmG,UAE7C,GAAIqqD,GAAkBA,EAAe10C,OAASja,KAAK8H,QAAU9H,KAAKsY,SAAU,CAC1E,MAAM0kC,EAAKh9C,KAAK8H,OAAOmH,SACjBguC,EAAK0R,EAAe10C,MACpB40C,EAAK7uD,KAAKsY,SAAS4N,OACnBiQ,EAAK6mB,EAAG3B,WAAW4B,GACzB,GAAI9mB,EAAKn2B,KAAK8H,OAAOC,MAAQouB,EAAKn2B,KAAK8H,OAAOE,IAAK,CAEjD,MAAMouB,EAAK4mB,EAAG3B,WAAWwT,GACnBC,EAAK9R,EAAGzsC,QAAQg+C,KAAKM,EAAI14B,EAAKC,GACpCp2B,KAAKsY,SAAS4N,OAAO7I,IAAIyxC,EAAGp/C,EAAGo/C,EAAGn/C,EAAGm/C,EAAGl/C,GACpC5P,KAAK+O,OACP6oC,GAAYmX,mBAAmB/uD,KAAK+O,MAAO+/C,EAAI,YAKnC,SAAXlwD,EAAEE,MAGXkB,KAAK89B,MAAMz/B,EAAGV,EAAE4S,QAAQqL,KAAKvd,EAAEsR,IAEjCktB,EAAOc,gBAQXqxB,YAAYnyB,EAAkBx3B,GAC5B,MAAO,KACAw3B,EAAO6tB,qBAEV7tB,EAAOoyB,iBAAiB5pD,GACxBw3B,EAAOc,iBAKL0tB,aACN,IAAKrrD,KAAK+O,MACR,OAIF,MAAMiG,EAAQ,SACRk6C,EAAgB,GAChBlJ,EAAK,IAAI1hD,OAAuB0Q,EAAOk6C,GAC7ClJ,EAAG/2C,SAASoO,KAAK,EAAG,EAAG,GACvBrd,KAAKimD,iBAAmBD,EACxBhmD,KAAK2lD,aAAe,IAAIrhD,OAAmB,SAC3CtE,KAAKomD,gBAAkB,IAAI9hD,OAAsB0Q,EAAO,SAAU,GAClEhV,KAAKomD,gBAAgBn3C,SAASoO,IAAI,EAAG,IAAK,GAE1Crd,KAAK+O,MAAMiN,IAAIgqC,GACfhmD,KAAK+O,MAAMiN,IAAIhc,KAAK2lD,cACpB3lD,KAAK+O,MAAMiN,IAAIhc,KAAKomD,iBAMdkF,oBACDtrD,KAAKqY,UAAarY,KAAK8H,QAAW9H,KAAKsY,WAK5CtY,KAAKqY,SAASoB,WAAW1Y,iBAAiB,cAAgBnC,IACxDoB,KAAKw6C,YAAa,EAClBx6C,KAAK29B,iBAEP39B,KAAKqY,SAASoB,WAAW1Y,iBAAiB,cAAgBnC,IACxDoB,KAAKw6C,YAAa,EAEdx6C,KAAKkiD,UAAYliD,KAAKkiD,QAAQ3H,aAChCv6C,KAAK29B,iBAGT39B,KAAKqY,SAASoB,WAAW1Y,iBAAiB,YAAcnC,IACjDoB,KAAKw6C,YAAex6C,KAAK0qD,oBAE5BnvB,WAAWv7B,KAAKgvD,YAAYhvD,KAAMpB,GAAI,KAEpCoB,KAAK0qD,oBACPnvB,WAAW,KAAQv7B,KAAK0qD,oBAAqB,GAAS,OAG1D1qD,KAAKqY,SAASoB,WAAW1Y,iBAAiB,WAAanC,IACrDoB,KAAK0qD,oBAAqB,EACrB1qD,KAAKw6C,YAAgBx6C,KAAKkiD,UAAWliD,KAAKkiD,QAAQ3H,cACrDv6C,KAAKivD,iBAAiBrwD,GACtBoB,KAAKwuD,sBACLxuD,KAAK29B,kBAGT39B,KAAKgZ,UAAY,IAAIC,SAGfsyC,aACNvrD,KAAKmvD,OAAS,IAAI9N,GAAarhD,MAC/BA,KAAKmvD,OAAOryC,QAGN8mC,eACF5jD,KAAKg8B,SAASz8B,aAChBS,KAAKg8B,SAASj7B,iBAAiB7B,EAAUkwD,qBAAuBnuD,IAC9D,MAAMvD,EAASuD,EAAmCvD,MAClDA,EAAQsC,KAAKulD,cAAc,qBAAuBvlD,KAAKslD,mBAEzDtlD,KAAKg8B,SAASj7B,iBAAiB7B,EAAUmwD,uBAAyBpuD,IAChE,MAAMvD,EAASuD,EAAmCvD,MAClDA,EAAQsC,KAAKulD,cAAc,gBAAkBvlD,KAAKslD,oBAKhDkG,aACN,IAAKxrD,KAAK+O,QAAU/O,KAAKqY,WAAarY,KAAK8H,OACzC,OAKF,MAAMwnD,EAAOtvD,KAAKmvD,QAAUnvD,KAAKmvD,OAAO72C,SACpCg3C,IAEEA,EAAKhO,iBACPthD,KAAKokD,WAAa7F,GAAY8F,mBAC9BrkD,KAAK+O,MAAMiN,IAAIhc,KAAKokD,aAElBkL,EAAK/N,iBACP,WACEvhD,KAAKskD,kBAAoB/F,GAAYgG,oBACrCvkD,KAAK+O,OAAS/O,KAAK+O,MAAMiN,IAAIhc,KAAKskD,aAClCtkD,KAAK29B,gBAHP,GAOF2xB,EAAKvZ,QAAU/1C,KAAKuvD,eAEpBvvD,KAAKmjD,gBAAkBmM,EAAKnM,gBACxBnjD,KAAKmjD,kBACPnjD,KAAK0mD,gBAAe,GACpB1mD,KAAK2mD,iBAAiB2I,EAAKlM,mBAC3BpjD,KAAK4mD,eAAe0I,EAAKjM,aACzBrjD,KAAK6mD,cAAcyI,EAAKhM,YACxBtjD,KAAK8mD,eAAewI,EAAK/L,aACzBvjD,KAAK+mD,kBAAkBuI,EAAK9L,gBAC5BxjD,KAAKgnD,eAAesI,EAAK7L,aACzBzjD,KAAKinD,gBAAgBqI,EAAK5L,cAC1B1jD,KAAKknD,sBAAsBoI,EAAK3L,sBAIpC1jD,QAAQC,IAAI,mBAAmBynD,GAAY6H,qBAAqBxvD,KAAKqY,SAASoB,aAE9EzZ,KAAKqY,SAASoB,WAAWvU,MAAMuqD,aAAe,IAGhDC,mBAAmBC,EAAyDC,GAC1E,MAAMvxD,EAAIsxD,EAAI1gD,SAGd,GAFA2gD,EAAK3gD,SAASoO,IAAIhf,EAAEqR,EAAGrR,EAAEsR,EAAGtR,EAAEuR,GAE1B5P,KAAK+O,MAAO,CACd,MAAMpR,EAAIqC,KAAK+O,MAAME,SACrB2gD,EAAK3zC,OAAOte,IAIhBkyD,aAAaF,EAAoBC,EAAqBt+C,GACpD,MAAMvU,EAAIuU,EACJ3T,EAAIgyD,EAAIzpC,OACV0pC,EAAKt+C,OACPs+C,EAAKt+C,OAAO+L,IAAItgB,EAAE2S,EAAG3S,EAAE4S,EAAG5S,EAAE6S,GAE5BggD,EAAKt+C,OAASvU,EAAEwT,QAElBq/C,EAAK1pC,OAAO7I,IAAI1f,EAAE+R,EAAG/R,EAAEgS,EAAGhS,EAAEiS,GAC5BggD,EAAK9oB,SAGPke,wBAAwB0H,GAAwB,GAC9C,IAAK1sD,KAAK+O,QAAU/O,KAAKsY,SACvB,OAEF,MAAMw3C,EAAK9vD,KAAKysD,kBACVsD,EAAM/vD,KAAKutD,0BACjB,IAAIyC,EAAKhwD,KAAK4sD,YACVqD,EAAMjwD,KAAKstD,mBACXZ,GACGsD,IACHA,EAAK,IAAI1rD,SAA0BtE,KAAKkjB,MAAQ,EAAGljB,KAAKkjB,MAAQ,EAAGljB,KAAKmjB,OAAS,GAAInjB,KAAKmjB,OAAS,EAAGnjB,KAAKyqC,SAAS3iC,OAAOC,KAAM/H,KAAKyqC,SAAS3iC,OAAOE,KACtJgoD,EAAG/gD,SAASoO,IAAI,EAAG,IAAK,GACxB2yC,EAAGE,KAAO,GACVF,EAAGG,yBACHnwD,KAAK+O,OAAS/O,KAAK+O,MAAMiN,IAAIg0C,GAC7BhwD,KAAK4sD,YAAcoD,GAEhBC,IACHjwD,KAAKorD,cAAa,GAClB6E,EAAMjwD,KAAKstD,oBAETwC,IACF9vD,KAAK0vD,mBAAmBI,EAAIE,GAC5BA,EAAGE,KAAO,GACVF,EAAGG,0BAEDJ,GAAOE,GACTjwD,KAAK6vD,aAAaE,EAAKE,EAAKD,EAAG/gD,UAEjCjP,KAAK8H,OAASkoD,EACdhwD,KAAKsY,SAAW23C,IAEZH,GAAME,GACRhwD,KAAK0vD,mBAAmBM,EAAIF,GAE1BC,GAAOE,GAAOH,GAChB9vD,KAAK6vD,aAAaI,EAAKF,EAAKD,EAAG7gD,UAEjCjP,KAAK8H,OAASgoD,EACd9vD,KAAKsY,SAAWy3C,GAGlB/vD,KAAKwhB,SAGPilB,UACEM,sBAAsB/mC,KAAKymC,QAAQxoC,KAAK+B,OACxCA,KAAKowD,OAASjG,GAAMrjB,SACpB9mC,KAAK+1C,QAAU/1C,KAAK+1C,OAAOtP,UAE3BzmC,KAAKsY,WAAatY,KAAKowD,OAASpwD,KAAKsY,SAASwuB,SAE1C9mC,KAAK4qD,eAAiB5qD,KAAK+O,OAAS/O,KAAK8H,SAC3C9H,KAAKqY,UAAYrY,KAAKqY,SAASxW,OAAO7B,KAAK+O,MAAO/O,KAAK8H,QACvD9H,KAAKksD,eAAiBlsD,KAAKksD,cAAcrqD,OAAO7B,KAAK+O,MAAO/O,KAAK8H,SAE/D9H,KAAKwqD,uBAAyBxqD,KAAKqwD,UAAYrwD,KAAKmjD,kBACtDnjD,KAAKqwD,SAASxuD,SACd7B,KAAKwqD,uBAAwB,GAE/BxqD,KAAKswD,6BACLtwD,KAAKosD,OAASpsD,KAAKosD,MAAMtlB,SAO3BwpB,6BACE,MAAMC,EAAU,IAAIjsD,OACdksD,EAAmB,IAAIlsD,QAC7BtE,KAAK6qD,yBAA0B,EAC3B7qD,KAAK8H,SACP0oD,EAAiBC,iBAAiBzwD,KAAK8H,OAAO4oD,iBAAkB1wD,KAAK8H,OAAO6oD,oBAC5EJ,EAAQK,wBAAwBJ,GAChCl1D,OAAOq8B,OAAO33B,KAAK88B,cAAct7B,QAASiQ,IACxC,MAAMjS,EAAQQ,KAAK+O,OAAS/O,KAAK+O,MAAMmD,oBAAoB,OAAQT,EAAIQ,MACjEV,EAAOE,EAAIF,KACb/R,GAAS+R,GAAQvR,KAAK+O,QASe,qBAA5BvP,EAAMsS,SAAS++C,WACxBrxD,EAAMsS,SAAS++C,UAAW,EAC1Bv1D,OAAOw1D,iBAAiBtxD,EAAO,CAC7B6X,QAAS,CACPgG,IAAMpT,IACJzK,EAAMsS,SAAS++C,SAAW5mD,EACrBjK,KAAK6qD,0BACRrrD,EAAMsS,SAASi/C,sBAAuB,IAG1CzzD,IAAKA,IAAMkC,EAAMsS,SAAS++C,aAImB,qBAAxCrxD,EAAMsS,SAASi/C,uBACxBx/C,EAAKuB,SAASk+C,qBACVz/C,EAAKuB,SAASC,cAChBvT,EAAM6X,QAAUk5C,EAAQU,cAAc1/C,EAAKuB,SAASC,mBAM9D/S,KAAK6qD,yBAA0B,EAwBjCvnC,gBAEEtjB,KAAK8qD,OAAOtpD,QAAQ5C,GAAKA,EAAEgnB,KAAKrkB,oBAAoB3C,EAAEuC,KAAMvC,EAAEy5C,OAC9Dr4C,KAAK8qD,OAAS,GACV9qD,KAAKmvD,QAAUnvD,KAAKmvD,OAAOtL,MAC7B7jD,KAAKmvD,OAAO7rC,gBACZtjB,KAAKmvD,YAASvtD,GAEhB,MAAMsvD,EAAKlxD,KAAKmxD,YACZnxD,KAAK+O,OAASmiD,IAChBlxD,KAAK+O,MAAMmJ,OAAOg5C,GAClBA,EAAGp+C,SAASkF,UACXk5C,EAAGz8C,SAA4BuD,UAChChY,KAAKmxD,iBAAcvvD,GAErB5B,KAAK+1C,YAASn0C,EACd5B,KAAK8H,YAASlG,EACd5B,KAAKqwD,cAAWzuD,EAChB5B,KAAKoxD,gBAAaxvD,EAClB5B,KAAKqxD,oBAAiBzvD,EACtB5B,KAAKsxD,aAAU1vD,EACf5B,KAAKuxD,cAAW3vD,EAChB5B,KAAKwxD,iBAAc5vD,EAOf5B,KAAK+O,QACP/O,KAAK+O,MAAMw4B,QACXvnC,KAAK+O,WAAQnN,GAEX5B,KAAKqY,WACPrY,KAAKqY,SAASkvB,QACdvnC,KAAKqY,SAASL,UACdhY,KAAKqY,cAAWzW,GAElB5B,KAAK2lD,kBAAe/jD,EACpB5B,KAAKimD,sBAAmBrkD,EACxB5B,KAAKomD,qBAAkBxkD,EACnB5B,KAAKsY,WACPtY,KAAKsY,SAASN,UACdhY,KAAKsY,cAAW1W,GAElB5B,KAAKosD,WAAQxqD,EACb5B,KAAKgZ,eAAYpX,EACjB5B,KAAKuqD,oBAAiB3oD,EAClB5B,KAAKokD,aACPpkD,KAAKokD,WAAWtxC,SAASkF,UACxBhY,KAAKokD,WAAW3vC,SAA4BuD,UAC7ChY,KAAKokD,WAAW7c,QAChBvnC,KAAKokD,gBAAaxiD,GAEhB5B,KAAKskD,cACPtkD,KAAKskD,YAAYxxC,SAASkF,UACzBhY,KAAKskD,YAAY7vC,SAA4BuD,UAC9ChY,KAAKskD,YAAY/c,QACjBvnC,KAAKskD,iBAAc1iD,GAEjB5B,KAAKykD,oBACPzkD,KAAKykD,kBAAkB3xC,SAASkF,UAE/BhY,KAAKykD,kBAAkBhwC,SAA4BuD,UACpDhY,KAAKykD,kBAAkBld,QACvBvnC,KAAKykD,uBAAoB7iD,GAE3B5B,KAAKyqD,8BAA2B7oD,EAChC5B,KAAKo/B,aAAUx9B,EACftG,OAAOyD,KAAKiB,KAAK88B,cAAct7B,QAAQxD,WAC9BgC,KAAK88B,aAAa9+B,KAEvBgC,KAAK2qD,MACP3qD,KAAK+qD,eAAiB/qD,KAAK2qD,IAAIpB,aAAavpD,KAAK+qD,eACjD/qD,KAAK2qD,SAAM/oD,GAET5B,KAAKg8B,SAASz8B,YAChBS,KAAKg8B,SAASz6B,oBAAoBrC,EAAUkwD,qBAAsBlwD,EAAUmwD,wBAIhF,qBAAqBxjD,EAAgB+oC,EAA6CC,GAChF,MAAMzI,EAAMvgC,EAAQ8jD,IACd8B,EAAW5lD,EAAQ8jD,IAAIviD,cAC7B,OAAIqkD,EAASpkD,SAAS,OACbrN,KAAK0xD,QAAQtlB,EAAKvgC,EAAS+oC,EAAYC,GACrC4c,EAASpkD,SAAS,OACpBrN,KAAK2xD,QAAQvlB,EAAKvgC,EAAS+oC,EAAYC,GACrC4c,EAASpkD,SAAS,OACpBrN,KAAK4xD,QAAQxlB,EAAKvgC,EAAS+oC,EAAYC,GACrC4c,EAASpkD,SAAS,OACpBrN,KAAK6xD,QAAQzlB,EAAKvgC,EAAS+oC,EAAYC,GACrC4c,EAASpkD,SAAS,OACpBrN,KAAK8xD,QAAQ1lB,EAAKvgC,EAAS+oC,EAAYC,GACrC4c,EAASpkD,SAAS,OACpBrN,KAAK+xD,QAAQ3lB,EAAKvgC,EAAS+oC,EAAYC,GAEvC70C,KAAKgyD,SAAS5lB,EAAKvgC,EAAS+oC,EAAYC,GAInD,gBAAgBhpC,EAAgB+oC,EAA6CC,GAC3E,MAAMzI,EAAMvgC,EAAQ8jD,IAAIviD,cACxB,OAAIg/B,EAAI/+B,SAAS,OACRrN,KAAK0xD,QAAQtlB,EAAKvgC,EAAS+oC,EAAYC,GACrCzI,EAAI/+B,SAAS,OACfrN,KAAK2xD,QAAQvlB,EAAKvgC,EAAS+oC,EAAYC,GACrCzI,EAAI/+B,SAAS,OACfrN,KAAK4xD,QAAQxlB,EAAKvgC,EAAS+oC,EAAYC,GACrCzI,EAAI/+B,SAAS,OACfrN,KAAK6xD,QAAQzlB,EAAKvgC,EAAS+oC,EAAYC,GACrCzI,EAAI/+B,SAAS,OACfrN,KAAK8xD,QAAQ1lB,EAAKvgC,EAAS+oC,EAAYC,GACrCzI,EAAI/+B,SAAS,OACfrN,KAAK+xD,QAAQ3lB,EAAKvgC,EAAS+oC,EAAYC,GAEvC70C,KAAKgyD,SAAS5lB,EAAKvgC,EAAS+oC,EAAYC,GAInD,eAAezI,EAAavgC,EAAgB+oC,EAA6CC,GACvF,MAAMsK,EAASn/C,KAAKiyD,gBACpB,OAAO,IAAI/uD,QAAwB,CAAClE,EAASmE,MACjB,IAAtBipC,EAAI3qC,QAAQ,MACdxB,QAAQqC,KAAK,6CAA6C8pC,GAE5D+S,EAAOt+B,KAAKurB,EAAI91B,QAAQ,KAAM47C,mBAAmB,MAAO7lD,IACtD,MAAMlO,EAASkO,EAAK0C,MACpB/O,KAAKmyD,0BAA0B/lB,EAAKjuC,EAAQ0N,GAC5C7M,EAAQb,IAEVy2C,EACCvvC,IACCwvC,GAAWA,EAAQxvC,GACnBlC,EAAOkC,OAKb,cAAc+mC,EAAavgC,EAAgB+oC,EAA6CC,GACtF,MAAMsK,EAAS,IAAIiT,QACnB,OAAO,IAAIlvD,QAAwB,CAAClE,EAASmE,KAC3Cg8C,EAAOt+B,KAAKurB,EAAKjuC,IACf6B,KAAKmyD,0BAA0B/lB,EAAKjuC,EAAQ0N,GAC5C7M,EAAQb,IAEVy2C,EACCvvC,IACCwvC,GAAWA,EAAQxvC,GACnBlC,EAAOkC,OAKb,cAAc+mC,EAAavgC,EAAgB+oC,EAA6CC,GACtF,MAAMsK,EAAS,IAAIkT,QACbC,EAAY,IAAIC,QAEhBC,EAASpmB,EAAI91B,QAAQ,OAAQ,QACnC,OAAO,IAAIpT,QAAwB,CAAClE,EAASmE,KAC3CmvD,EAAUzxC,KAAK2xC,EAAQ/9C,IACrBA,EAASg+C,UACTtT,EAAOuT,aAAaj+C,GACpB0qC,EAAOt+B,KAAKurB,EAAKjuC,IACf6B,KAAKmyD,0BAA0B/lB,EAAKjuC,EAAQ0N,GAC5C7M,EAAQb,IAEVy2C,EACCvvC,IACCwvC,GAAWA,EAAQxvC,GACnBlC,EAAOkC,SAMf,cAAc+mC,EAAavgC,EAAgB+oC,EAA6CC,GACtF,MAAMsK,EAAS,IAAIwT,QACnB,OAAO,IAAIzvD,QAAwB,CAAClE,EAASmE,KAC3Cg8C,EAAOt+B,KAAKurB,EAAMt5B,IAChB,MAAM3U,EAAS,IAAImG,QAAWwO,GAC9B,GAAIjH,EAAQ8jD,IACVxxD,EAAOlB,KAAO4O,EAAQ8jD,QACjB,CACL,MAAMx0D,EAAIixC,EAAIwmB,YAAY,MACf,IAAPz3D,IACFgD,EAAOlB,KAAOmvC,EAAIymB,OAAO13D,EAAI,IAGjC6E,KAAKmyD,0BAA0B/lB,EAAKjuC,EAAQ0N,GAC5C7M,EAAQb,IAEVy2C,EACCvvC,IACCwvC,GAAWA,EAAQxvC,GACnBlC,EAAOkC,OAKb,cAAc+mC,EAAavgC,EAAgB+oC,EAA6CC,GACtF,IAAK70C,KAAK+O,MACR,MAAM,IAAIlQ,MAAM,mBAElB,IAAKmB,KAAK8yD,UAAW,CACnB9yD,KAAK8yD,UAAY,IAAI1I,GAAI2I,UASzB,MAAMC,EAAMhzD,KAAK8yD,UAAUG,WACvBD,GAAkC,oBAApBA,EAAIE,aACpBF,EAAIE,YAAY,yBAGpB,MAAM/T,EAASn/C,KAAK8yD,UACpB,OAAO,IAAI5vD,QAAwB,CAAClE,EAASmE,KAC3Cg8C,EAAOt+B,KAAKurB,EAAM+mB,IAChBnzD,KAAKmyD,0BAA0B/lB,EAAK+mB,EAASvgD,KAAM/G,GACnD7M,EAAQm0D,EAASvgD,OAEnBgiC,EACCvvC,IACCwvC,GAAWA,EAAQxvC,GACnBlC,EAAOkC,OAKb,cAAc+mC,EAAavgC,EAAgB+oC,EAA6CC,GACtF,IAAK70C,KAAK+O,MACR,MAAM,IAAIlQ,MAAM,mBAElB,MAAMsgD,EAAS,IAAIzK,GACnB,OAAO,IAAIxxC,QAAwB,CAAClE,EAASmE,KAC3Cg8C,EAAOt+B,KAAKurB,EAAKjuC,IACf6B,KAAKmyD,0BAA0B/lB,EAAKjuC,EAAQ0N,GAC5C7M,EAAQb,IAEVy2C,EACCvvC,IACCwvC,GAAWA,EAAQxvC,GACnBlC,EAAOkC,OAKb,cAAc+mC,EAAavgC,EAAgB+oC,EAA6CC,GACtF,IAAK70C,KAAK+O,MACR,MAAM,IAAIlQ,MAAM,mBAElB,MAAMsgD,EAAS,IAAIiU,QACnB,OAAO,IAAIlwD,QAAwB,CAAClE,EAASmE,KAC3Cg8C,EAAOt+B,KAAKurB,EAAMinB,IAChB,GAAKA,EAIE,CACL,MAAMl1D,EAASk1D,EAAQtkD,MACvB/O,KAAKmyD,0BAA0B/lB,EAAKjuC,EAAQ0N,GAC5C7M,EAAQb,OAPI,CACZ,MAAMkH,EAAQ,IAAIiuD,WAAW,IAC7Bze,GAAWA,EAAQxvC,GACnBlC,EAAOkC,KAOXuvC,EACCvvC,IACCwvC,GAAWA,EAAQxvC,GACnBlC,EAAOkC,OAKb,cAAc+mC,EAAavgC,EAAgB+oC,EAA6CC,GACtF,IAAK70C,KAAK+O,MACR,MAAM,IAAIlQ,MAAM,mBAElB,MAAMsgD,EAAS,IAAIoU,QACnB,OAAO,IAAIrwD,QAAwB,CAAClE,EAASmE,KAC3Cg8C,EAAOt+B,KAAKurB,EAAMt5B,IAChB,MAAM3U,EAAS,IAAImG,QAAWwO,GAC9B,GAAIjH,EAAQ8jD,IACVxxD,EAAOlB,KAAO4O,EAAQ8jD,QACjB,CACL,MAAMx0D,EAAIixC,EAAIwmB,YAAY,MACf,IAAPz3D,IACFgD,EAAOlB,KAAOmvC,EAAIymB,OAAO13D,EAAI,IAGjC6E,KAAKmyD,0BAA0B/lB,EAAKjuC,EAAQ0N,GAC5C7M,EAAQb,IAEVy2C,EACCvvC,IACCwvC,GAAWA,EAAQxvC,GACnBlC,EAAOkC,OAQL8sD,0BAA0B/lB,EAAajuC,EAAwB0N,GACrE,MAAMoD,EAAWpD,EAAQoD,UAAY,CAAC,EAAG,EAAG,GACtC2wC,EAAW/zC,EAAQ+zC,UAAY,CAAC,EAAG,EAAG,GACtC1wC,EAAQrD,EAAQqD,OAAS,CAAC,EAAG,EAAG,GAChCioB,EAActrB,EAAQsrB,YACtBqB,EAAQ3sB,EAAQ2sB,MACtBr6B,EAAO8Q,SAASoO,IAAIpO,EAAS,GAAIA,EAAS,GAAIA,EAAS,IACvD9Q,EAAOyhD,SAASviC,IAAIuiC,EAAS,GAAKxjC,KAAKslB,GAAK,IAAOke,EAAS,GAAKxjC,KAAKslB,GAAK,IAAOke,EAAS,GAAKxjC,KAAKslB,GAAK,KAC1GvjC,EAAO+Q,MAAMmO,IAAInO,EAAM,GAAIA,EAAM,GAAIA,EAAM,IACvCioB,EAEFoE,WAAW,KACTv7B,KAAKm3B,YAAYh5B,GAIjBo9B,WAAW,KACL/C,GACFx4B,KAAKw4B,MAAMr6B,GAEb6B,KAAKwzD,sBAAsBr1D,EAAQ0N,IAClC,IACF,GACM2sB,EACT+C,WAAW,KACTv7B,KAAKw4B,MAAMr6B,GAIXo9B,WAAW,IAAMv7B,KAAKwzD,sBAAsBr1D,EAAQ0N,GAAU,IAC7D,GAEH7L,KAAKwzD,sBAAsBr1D,EAAQ0N,GAI/BomD,gBACN,IAAKjyD,KAAKyzD,WAAY,CACpBzzD,KAAKyzD,WAAa,IAAIC,QACtB,MAAMC,EAAc,IAAIC,QACxBD,EAAYE,eAAexJ,IAC3BrqD,KAAKyzD,WAAWK,eAAeH,GAIjC,OAAO3zD,KAAKyzD,WAQND,sBAAsBr1D,EAAwB0N,GACpD,IAAK7L,KAAK+O,MACR,OAIF5Q,EAAO0Q,iBAAmBA,GAC1B1Q,EAAO4S,eACP5S,EAAOqT,SAASC,KACT5C,IAAoB4C,EAAI5C,mBAC3B4C,EAAI5C,iBAAmBA,GACvB4C,EAAIV,gBAIN,MAAMgjD,EAAsB3/C,IACtBA,EAAIL,QAAU,IAAQK,EAAIC,cAC5BD,EAAIC,aAAc,IAGlB5C,aAAenN,UACbmN,EAAIgD,oBAAoBnQ,QAC1ByvD,EAAmBtiD,EAAIgD,UACdlQ,MAAMC,QAAQiN,EAAIgD,WAC3BhD,EAAIgD,SAASjT,QAAQ4S,IACnB2/C,EAAmB3/C,QAK3BpU,KAAK+O,MAAMiN,IAAI7d,GACf,MAAMoT,EAAO,IAAIjN,OAAgBnG,GACjCoT,EAAK8F,SAAU,EACf9F,EAAK1C,iBAAmBA,GACpB0C,EAAKkD,WAEPlD,EAAKkD,cAAW7S,EAChB2P,EAAKO,SAASC,YAAa,GAG7B/R,KAAK88B,aAAajxB,EAAQ8jD,KAAO,CAC/B19C,KAAM9T,EAAO8T,KACbV,QAEF,MAAM4rB,EAAa7hC,OAAOq8B,OAAO33B,KAAK88B,cAAcl5B,IAAI6N,GAAOA,EAAIQ,MAC7D+hD,GAAiB72B,GAAcA,EAAW9hC,QAAU,EAC1D,GAAI24D,EAAc,CAChB,MAAM1E,EAAOtvD,KAAKmvD,QAAUnvD,KAAKmvD,OAAO72C,SACxCtY,KAAKi0D,yBACD3E,GAAQA,EAAKhO,gBACfthD,KAAKk0D,kBAEPl0D,KAAK8kD,eAEP9kD,KAAK+O,MAAMiN,IAAIzK,GAEX1F,EAAQsoD,OACV1gD,GAAYkE,YAAYxZ,GAG1B6B,KAAK29B,eAQA0nB,yBAAyB+O,GAAQ,EAAMrgD,EAAU,IAKtD,GAHK/T,KAAKyqD,2BACRzqD,KAAKyqD,yBAA2B,KAE7BzqD,KAAK+O,MACR,OAEF,MAAMA,EAAQ/O,KAAK+O,MACbmF,EAAkC,GACxC5Y,OAAOyD,KAAKiB,KAAK88B,cAAct7B,QAAQxD,IACrC,MAAMyT,EAAMzR,KAAK88B,aAAa9+B,GAC9B,GAAIo2D,EAAO,CACLp0D,KAAKyqD,yBAA0BpvD,OAAS,GAC1CoY,GAAYktB,0BAA0B5xB,EAAO0C,EAAIQ,KAAMjS,KAAKyqD,0BAE9D,MAAM4J,EAAO5gD,GAAYotB,uBAAuB9xB,EAAO0C,EAAIQ,KAAM8B,GACjEG,EAAiBvY,QAAQ04D,QAEzB5gD,GAAYktB,0BAA0B5xB,EAAO0C,EAAIQ,KAAMjS,KAAKyqD,4BAI9DzqD,KAAKyqD,yBADH2J,EAC8BlgD,EAEA,GAElClU,KAAK29B,eAKAnc,OAAO0B,EAAgBC,GAE5B,MAAMrb,EAAS9H,KAAK8H,OAChBA,IACF9H,KAAKkjB,MAAQA,GAAS3kB,OAAOqf,WAC7B5d,KAAKmjB,OAASA,GAAU5kB,OAAOuf,YAC3BhW,aAAkBxD,QACpBwD,EAAOwsD,OAASt0D,KAAKkjB,MAAQljB,KAAKmjB,OACzBrb,aAAkBxD,UAC3BwD,EAAO6a,MAAQ3iB,KAAKkjB,MAAQ,EAC5Bpb,EAAO4sB,MAAQ10B,KAAKkjB,MAAQ,EAC5Bpb,EAAO8a,IAAM5iB,KAAKmjB,OAAS,EAC3Brb,EAAO2sB,QAAUz0B,KAAKmjB,OAAS,GAEjCrb,EAAOqoD,yBACHnwD,KAAKqY,UACPrY,KAAKqY,SAASuuB,QAAQ5mC,KAAKkjB,MAAOljB,KAAKmjB,QAErCnjB,KAAKksD,eACPlsD,KAAKksD,cAActlB,QAAQ5mC,KAAKkjB,MAAOljB,KAAKmjB,QAE1CnjB,KAAKqwD,UACPrwD,KAAKqwD,SAASzpB,QAAQ5mC,KAAKkjB,MAAOljB,KAAKmjB,QAErCnjB,KAAKqxD,gBAEPrxD,KAAKqxD,eAAela,SAAS,cAAcz5C,MAAM2f,IAAI,EAAIrd,KAAKkjB,MAAO,EAAIljB,KAAKmjB,SAGlFnjB,KAAK29B,eAGC42B,yBAAyB3hD,EAAkB/G,EAI/C,IACF,IAAK+G,IAASA,EAAK6B,SACjB,OAEF,MAAML,EAAMxB,EAAK6B,SACjB,GAAIlQ,MAAMC,QAAQ4P,IAAQA,EAAI/Y,OAAS,EAAG,CACxC,MAAMm5D,EAA2B,GAIjC,OAHApgD,EAAI5S,QAAQ1E,IACV03D,EAAa74D,KAAKqE,KAAKy0D,wBAAwB33D,EAAG+O,MAE7C2oD,EACF,GAAIpgD,aAAe9P,QACxB,OAAOtE,KAAKy0D,wBAAwBrgD,EAAKvI,GAEzC5L,QAAQqC,KAAK,qBAAqB8R,GAK9BqgD,wBAAwBhgD,EAAoB5I,EAIhD,IACF,MAAM,UAAEmV,EAAqB,eAAE0zC,EAAiB,IAAIpwD,OAAY,UAAS,QAAEyP,EAAU,IAAQlI,EAGvFuI,EAAMK,EAASlE,QAyBrB,OAxBI6D,aAAeugD,SAGRvgD,aAAewgD,SAFxBxgD,EAAIuiB,SAAStZ,IAAIq3C,GACjBtgD,EAAIY,MAAMqI,IAAIq3C,IAILtgD,aAAemG,SAEfnG,aAAe+J,QAEf/J,aAAeygD,QAHxBzgD,EAAIY,MAAMqI,IAAIq3C,GAMdz0D,QAAQwD,MAAM,iCAAmC2Q,GAAKuB,YAGxDvB,EAAIL,QAAUA,EACdK,EAAIC,aAAc,OACAzS,IAAdof,IAEF5M,EAAI4M,WAAY,EAEhB5M,EAAIsK,KAAOpa,QAEN8P,EAODs6C,iBAAiBrpD,GACvB,IAAKrF,KAAKgZ,YAAchZ,KAAK8H,SAAW9H,KAAK+O,MAC3C,MAAO,GAGT,IAAIW,EAAI,EACJC,EAAI,EACJtK,IACFqK,EAAKrK,EAAMsY,QAAU3d,KAAKkjB,MAAS,EAAI,EACvCvT,GAAMtK,EAAMwY,QAAU7d,KAAKmjB,OAAU,EAAI,GAE3C,MAAM2xC,EAAS,IAAIxwD,QAAcoL,EAAGC,GACpC3P,KAAKgZ,UAAU+E,cAAc+2C,EAAQ90D,KAAK8H,QAC1C,MAAMwxB,EAA4B,GAOlC,OANAh+B,OAAOq8B,OAAO33B,KAAK88B,cAAct7B,QAAQiQ,IACvC,MAAMtT,EAAS6B,KAAK+O,OAAS/O,KAAK+O,MAAMmD,oBAAoB,OAAQT,EAAIQ,MACpE9T,GAAUA,EAAOkZ,SACnBiiB,EAAQ39B,KAAKwC,KAGV6B,KAAKgZ,UAAUQ,iBAAiB8f,GAAS,IAAS,GAMnD21B,iBAAiB5pD,GAEvB,GAAIrF,KAAKkiD,UAAYliD,KAAKkiD,QAAQ3H,YAChC,OAEF,MAAMkU,EAAgBzuD,KAAK0uD,iBAAiBrpD,GACtCspD,EAAiBF,EAAcvqD,KAAK0qD,IACxC,MAAMzwD,EAASywD,EAAUzwD,OAGzB,OAAOA,EAAOkZ,WAA2C,IAA/BlZ,EAAO2T,SAASC,YAAwB5T,aAAkBmG,WAEtF,IACIywD,EADA52D,EAAUwwD,GAAkBA,EAAexwD,aAAWyD,EAE1D,GAAIzD,EACF,IAAmC,IAA/BA,EAAO2T,SAASC,WAGlB9R,QAAQC,IAAI,yBAAyB/B,EAAOgD,eAAehD,EAAOlB,yBAClEkB,OAASyD,OACJ,GAAIzD,aAAkBmG,OAC3BywD,EAAcpG,EAAsCoG,WAChD/0D,KAAKuqD,gBAAkBvqD,KAAKuqD,eAAet4C,OAAS9T,EAAO8T,MAAQjS,KAAKuqD,eAAez4C,SAASijD,aAAeA,IAEjH52D,OAASyD,QAGN,GAAKzD,EAAe80D,WAAY,CAErC,MAAM+B,EAAarG,GAAkBA,EAAeqG,YAAe,EACnED,EAAaC,EACTh1D,KAAKuqD,gBAAkBvqD,KAAKuqD,eAAez4C,SAASkjD,YAAcA,IAEpE72D,OAASyD,QAEF5B,KAAKuqD,gBAAkBvqD,KAAKuqD,eAAet4C,OAAS9T,EAAO8T,OAEpE9T,OAASyD,GAGbzD,EAAS6B,KAAKg+B,aAAa7/B,EAAQ42D,GAAc/0D,KAAK+gC,iBA4BjD/C,aAAa7/B,EAAyB82D,EAAkCj0C,GAE7E,GAAIhhB,KAAKuqD,eAAgB,CACvB,MAAMz4C,EAAW9R,KAAKuqD,eAAez4C,SACrC,GAA2B,MAAvBA,EAASijD,YAAsBjjD,EAASojD,gBAAkBpjD,EAASqjD,WAAY,CACjFn1D,KAAK+O,OAAS/O,KAAK+O,MAAMmJ,OAAOpG,EAASqjD,YACzC,MAAMC,EAAKp1D,KAAKuqD,eAQhB,GAPA6K,EAAGzkD,YAAYmB,EAASijD,WAAYjjD,EAASojD,gBAC7CE,EAAGvkD,eAAeC,aAAc,EAChCskD,EAAGrkD,sBACIe,EAASijD,kBACTjjD,EAASojD,eAGZ/2D,IAAW2T,EAASqjD,WAOtB,OANArjD,EAASqjD,WAAWriD,SAASkF,iBACtBlG,EAASqjD,WAChBn1D,KAAKuqD,oBAAiB3oD,OAClB5B,KAAKwxD,cACPxxD,KAAKwxD,YAAY6D,gBAAkB,KAIvCvjD,EAASqjD,WAAWriD,SAASkF,iBACtBlG,EAASqjD,gBACX,GAAIrjD,EAASwjD,uBAAwB,KAAAC,EAC1C,MAAMtC,EAA2B,QAAjBsC,EAAGv1D,KAAK8yD,iBAAS,IAAAyC,OAAA,EAAdA,EAAgBtC,WACnC,GAAIA,EAAY,CACd,MAAMuC,EAAM1jD,EAASwjD,uBACrBrC,EAAWwC,aAAaD,EAAIE,SAE9B11D,KAAKgrD,qBAAqBj3C,QAAU,SAC7BjC,EAASwjD,8BACTxjD,EAASkjD,eACX,GAAIljD,EAAS6jD,iBAAkB,CACpC,GAAI31D,KAAKuqD,eAAe91C,SAAU,CAEhC,MAAMA,EAAWzU,KAAKuqD,eAAe91C,SACjClQ,MAAMC,QAAQiQ,GAChBA,EAASjT,QAAQ1E,GAAKA,EAAEkb,WACfvD,aAAoBnQ,SAC7BmQ,EAASuD,UAGbhY,KAAKuqD,eAAe91C,SAAW3C,EAAS6jD,wBACjC7jD,EAAS6jD,iBAElB31D,KAAKuqD,oBAAiB3oD,EAClB5B,KAAKwxD,cACPxxD,KAAKwxD,YAAY6D,gBAAkB,IAGvC,GAAKr1D,KAAK+O,OAAU5Q,EAApB,CAGA,GAAIA,aAAkBmG,QAAkD,MAA3B2wD,EAAiC,CAC5E,MAAMG,EAAKj3D,EACL+2D,EAAiB,IAAI5wD,QACrBsxD,EAAa,IAAItxD,QACvBsxD,EAAWv4C,IAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC5D+3C,EAAGllD,YAAY+kD,EAAyBC,GACxCl1D,KAAKuqD,eAAiBpsD,EAClB6B,KAAKwxD,cACPxxD,KAAKwxD,YAAY6D,gBAAkB,CAACl3D,IAOtC,MAAMqW,EAAiBxU,KAAKu0D,yBAAyBp2D,EAAQ,CAAE6iB,cAC/D,GAAIxM,EAAgB,CAElB,MAAM2gD,EAAa,IAAI7wD,QAAW8wD,EAAGtiD,SAASvC,QAASiE,GACvD2gD,EAAWniD,aAAa7U,EAAOiV,YAAYwnB,SAASs6B,IACpDC,EAAWvkD,wBAAyB,EACpCukD,EAAWl4D,KAAO,+BAElB,MAAM6S,EAASolD,EAAe3kD,QAC9BT,EAAO2gD,iBAAiByE,EAAgBU,GACxCR,EAAGzkD,YAAYskD,EAAyBnlD,GACxCslD,EAAGvkD,eAAeC,aAAc,EAChCskD,EAAGrkD,eACH/Q,KAAKuqD,eAAez4C,SAASijD,WAAaE,EAC1Cj1D,KAAKuqD,eAAez4C,SAASojD,eAAiBA,EAC9Cl1D,KAAKuqD,eAAez4C,SAASqjD,WAAaA,EAC1Cn1D,KAAK+O,MAAMiN,IAAIm5C,SAEZ,GAAKh3D,EAAe80D,YAAyC,MAA3BgC,EAAiC,KAAAY,EACxE,MAAMC,EAAS33D,EACT80D,EAA2B,QAAjB4C,EAAG71D,KAAK8yD,iBAAS,IAAA+C,OAAA,EAAdA,EAAgB5C,WAC7B+B,EAAYC,EAClB,GAAID,GAAa,GAAK/B,EAAY,CAChC,MAAMngD,EAAWgjD,EAAOhjD,SAClB7T,EAAKg0D,EAAW8C,aAAajjD,EAAUkiD,GACvCjmD,EAAQ/O,KAAK+O,MACnB,GAAI9P,GAAM8P,EAAO,CACf,MAAM2mD,EAAUI,EAAOJ,QAEjBF,EAAM,CACVE,UACAM,IAAK,CAAC/2D,GACN8P,QACAknD,gBAAgB,EAChBxhD,SAAUzU,KAAKgrD,sBAEXkL,EAASjD,EAAWkD,aAAaX,GACvC,GAAIU,EAAQ,CAEVA,EAAOpkD,SAASwjD,uBAAyBE,EACzCU,EAAOpkD,SAASkjD,UAAYA,EAC5Bh1D,KAAKgrD,qBAAqBj3C,QAAU,GACpC,MAAMgR,EAAQkuC,EAAWmD,kBAAkBV,EAASz2D,GAAI,GACxDgB,QAAQC,IAAI,aAAc6kB,GAC1B/kB,KAAKuqD,eAAiB2L,OAEtBj2D,QAAQqC,KAAK,sDAAsDozD,UAAgBz2D,WAIpF,CAEL,MAAMuV,EAAiBxU,KAAKu0D,yBAAyBp2D,EAAsB,CAAE6iB,cACzExM,IACFxU,KAAKuqD,eAAiBpsD,EACtB6B,KAAKuqD,eAAez4C,SAAS6jD,iBAAmB31D,KAAKuqD,eAAe91C,SACpEzU,KAAKuqD,eAAe91C,SAAWD,EAC3BxU,KAAKwxD,cACPxxD,KAAKwxD,YAAY6D,gBAAkB,CAACl3D,KAI1C6B,KAAK29B,gBAMAoD,iBACL/gC,KAAKg+B,eAMAq4B,aAAa/8B,GAClB,IAAKA,GAA8B,IAAnBA,EAAQj+B,SAAiB2E,KAAK8H,OAC5C,OAEF,MAAM+xB,EAAM,IAAIv1B,QACVw1B,EAAO,IAAIx1B,QACjBq1B,GAAckE,2BAA2BvE,EAASt5B,KAAK8H,OAAQ+xB,EAAKC,GACpE95B,KAAK89B,MAAMjE,EAAKC,GAMXw8B,YAAYn4D,GACjB6B,KAAKq2D,aAAa,CAACl4D,IAMdqwD,sBACL,IAAKxuD,KAAKuqD,eACR,OAEF,IAAI94C,EAAMzR,KAAKuqD,eAEX94C,aAAenN,QAAuBmN,EAAIK,SAASqjD,aACrD1jD,EAAMA,EAAIK,SAASqjD,YAErBn1D,KAAKs2D,YAAY7kD,GAQZqsB,MAAM7uB,EAAyBgN,EAAuBs6C,GAC3D,MAAMzuD,EAAS9H,KAAK8H,OACdwQ,EAAWtY,KAAKsY,SACtB,IAAKxQ,IAAWwQ,EACd,OAEF,GAAIrJ,EAASimB,OAAOjZ,GAElB,YADAhc,QAAQwD,MAAM,6DAET,GAAIwP,MAAMhE,EAASS,IAAMuD,MAAMhE,EAASU,IAAMsD,MAAMhE,EAASW,IAAMqD,MAAMgJ,EAAOvM,IAAMuD,MAAMgJ,EAAOtM,IAAMsD,MAAMgJ,EAAOrM,GAE3H,YADA3P,QAAQwD,MAAM,0CAKhB,MAAM6M,EAAWrB,EAASosC,WAAWp/B,GACjC3L,EAAWxI,EAAOC,MAEpBkH,EAAWA,EAASsB,QAAQC,IAAIyL,GAAQ0e,YAAY67B,eAA6B,IAAd1uD,EAAOC,MAC1E9H,QAAQqC,KAAK,4DACJgO,EAAWxI,EAAOE,MAE3BiH,EAAWA,EAASsB,QAAQC,IAAIyL,GAAQ0e,YAAY67B,eAA4B,GAAb1uD,EAAOE,KAC1E/H,QAAQqC,KAAK,0DAGf,MAAMwkC,EAASA,CAACzoC,EAAmBV,KACjCA,GAAKmK,EAAOmU,OAAOte,GACnBU,GAAKyJ,EAAOmH,SAASoO,IAAIhf,EAAEqR,EAAGrR,EAAEsR,EAAGtR,EAAEuR,GACrCjS,GAAK2a,EAAS4N,OAAO7I,IAAI1f,EAAE+R,EAAG/R,EAAEgS,EAAGhS,EAAEiS,GACrC0I,EAASwuB,SACT9mC,KAAK29B,gBAMDhgC,EAAI2a,EAAS4N,OAAO3V,QACpBkmD,EAAS,IAAItM,GAAMuM,MAAM/4D,GAC/B84D,EAAOhtB,GAAGxtB,EAAQ,KAClBw6C,EAAO3sB,OAAOqgB,GAAMwM,OAAOC,WAAWC,OACtCJ,EAAOK,SAAS,KACdhwB,OAAOllC,EAAWjE,KAEpB84D,EAAOM,WAAW,KAChB,MAAM14D,EAAIyJ,EAAOmH,SAASsB,QACpBymD,EAAS,IAAI7M,GAAMuM,MAAMr4D,GAC/B24D,EAAOvtB,GAAGx6B,EAAU,MACpB+nD,EAAOltB,OAAOqgB,GAAMwM,OAAOC,WAAWC,OACtCG,EAAOF,SAAS,KACdhwB,EAAOzoC,EAAG4d,KAEZ+6C,EAAOD,WAAW,KAChBjwB,EAAOzoC,EAAG4d,GACVs6C,GAAsBA,MAExBv2D,KAAKowD,MAAQ4G,EACbA,EAAO78C,UAETna,KAAKowD,MAAQqG,EACbA,EAAOt8C,QAGF2qC,eACL,MAAMjhD,EAAOsF,EAAMC,MAAM6tD,cACnBC,EAAOrzD,GAAQA,EAAKiE,OACpBmH,EAAWioD,GAAQp0D,EAAeq0D,eAAeD,EAAKr9B,KACtD3T,EAASgxC,GAAQp0D,EAAeq0D,eAAeD,EAAKp9B,MAC1D,GAAI7qB,GAAYiX,EACdlmB,KAAK89B,MAAM7uB,EAAUiX,QAChB,GAAIlmB,KAAK+O,MAAO,CAErB,MAAM8qB,EAAM,IAAIv1B,QACVw1B,EAAO,IAAIx1B,QACjBq1B,GAAcy9B,+BAA+Bp3D,KAAK+O,MAAOzT,OAAOq8B,OAAO33B,KAAK88B,cAAcl5B,IAAI6N,GAAOA,EAAIQ,MAAOwnB,GAAMyB,MAAOrB,EAAKC,GAE7HD,EAAI3E,OAAO4E,IACd95B,KAAK89B,MAAMjE,EAAKC,IAQdm6B,yBACN,IAAKj0D,KAAK+O,MACR,OAEE/O,KAAKykD,oBACPzkD,KAAKykD,kBAAkB3xC,SAASkF,UAC/BhY,KAAKykD,kBAAkBhwC,SAA4BuD,UACpDhY,KAAK+O,MAAMmJ,OAAOlY,KAAKykD,mBACvBzkD,KAAKykD,kBAAkBld,QACvBvnC,KAAKykD,uBAAoB7iD,GAE3B,MAAMu7B,EAAa7hC,OAAOq8B,OAAO33B,KAAK88B,cAAcl5B,IAAI6N,GAAOA,EAAIQ,MACnE,GAAIkrB,EAAY,CACd,MAAMt5B,EAAOsF,EAAMC,MAAM6tD,cACnBC,EAAOrzD,GAAQA,EAAKiE,OACpBmH,EAAWioD,GAAQp0D,EAAeq0D,eAAeD,EAAKr9B,KACtD3T,EAASgxC,GAAQp0D,EAAeq0D,eAAeD,EAAKp9B,MAC1D,GAAI7qB,GAAYiX,EAAQ,CACtB,MAAM82B,EAAK/tC,EACLguC,EAAK/2B,EACL3U,EAAO,IAAIjN,OACjBiN,EAAK8lD,cAAc,IAAI/yD,QAAc04C,EAAGttC,EAAGstC,EAAGrtC,EAAGqtC,EAAGptC,IACpD2B,EAAK8lD,cAAc,IAAI/yD,QAAc24C,EAAGvtC,EAAGutC,EAAGttC,EAAGstC,EAAGrtC,IACpD5P,KAAKykD,kBAAoBzE,GAAYa,qCAAqCtvC,QAE1EvR,KAAKykD,kBAAoBzE,GAAYsX,wCAAwCt3D,KAAK+O,MAAOouB,GAE3Fn9B,KAAK+O,MAAMiN,IAAIhc,KAAKykD,oBAOhByP,kBACN,IAAKl0D,KAAK+O,MACR,OAEE/O,KAAKokD,aACPpkD,KAAKokD,WAAWtxC,SAASkF,UACxBhY,KAAKokD,WAAW3vC,SAA4BuD,UAC7ChY,KAAK+O,MAAMmJ,OAAOlY,KAAKokD,aAEzB,MAAMjnB,EAAa7hC,OAAOq8B,OAAO33B,KAAK88B,cAAcl5B,IAAI6N,GAAOA,EAAIQ,MACnE,GAAIkrB,EAAY,CACd,MAAMt5B,EAAOsF,EAAMC,MAAM6tD,cACnBC,EAAOrzD,GAAQA,EAAKiE,OACpBwJ,EAAS4lD,GAAQp0D,EAAeq0D,eAAeD,EAAKp9B,MAC1DxoB,IAAWA,EAAO3B,EAAI,GAEtB3P,KAAKokD,WAAa7F,GAAY8F,sBAAiBziD,OAAWA,EAAW0P,GACrEtR,KAAK+O,MAAMiN,IAAIhc,KAAKokD,aAOjBsC,eAAe6Q,GACfv3D,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,WAIzCrY,KAAKmjD,gBAAkBoU,EACnBA,IAAWv3D,KAAKqwD,WAClBrwD,KAAKqwD,SAAW,IAAImH,QAAex3D,KAAKqY,WAE1CrY,KAAK29B,gBAMAgpB,iBAAiB4Q,GACtB,GAAKv3D,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,UAAarY,KAAKqwD,SAA3D,CAIA,GAAIkH,IAAWv3D,KAAKoxD,WAAY,CAC9B,MAAMqG,EAAO,IAAIC,QAAW13D,KAAK+O,MAAO/O,KAAK8H,QAC7C2vD,EAAK7wB,QAAQ5mC,KAAKkjB,MAAOljB,KAAKmjB,QAC9BnjB,KAAKqwD,SAASsH,QAAQF,GACtBz3D,KAAKoxD,WAAaqG,EAEhBz3D,KAAKoxD,aACPpxD,KAAKoxD,WAAWnF,QAAUsL,GAE5Bv3D,KAAK29B,gBAMAipB,eAAe2Q,GACpB,GAAKv3D,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,UAAarY,KAAKqwD,SAA3D,CAIA,GAAIkH,IAAWv3D,KAAKqxD,eAAgB,CAClC,MAAMoG,EAAO,IAAIG,QAAWC,SAE5BJ,EAAKtgB,SAAS,cAAcz5C,MAAM2f,IAAI,EAAIrd,KAAKkjB,MAAO,EAAIljB,KAAKmjB,QAC/Ds0C,EAAK7wB,QAAQ5mC,KAAKkjB,MAAOljB,KAAKmjB,QAC9Bs0C,EAAKK,gBAAiB,EACtB93D,KAAKqwD,SAASsH,QAAQF,GACtBz3D,KAAKqxD,eAAiBoG,EAEpBz3D,KAAKqxD,iBACPrxD,KAAKqxD,eAAepF,QAAUsL,GAEhCv3D,KAAK29B,gBAMAkpB,cAAc0Q,GACnB,GAAKv3D,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,UAAarY,KAAKqwD,SAA3D,CAIA,GAAIkH,IAAWv3D,KAAKsxD,QAAS,CAC3B,MAAMmG,EAAO,IAAIM,QAAQ/3D,KAAK+O,MAAO/O,KAAK8H,QAAQ,GAAO,EAAM,IAAIxD,QAAc,EAAItE,KAAKkjB,MAAO,EAAIljB,KAAKmjB,SAC1Gs0C,EAAK7wB,QAAQ5mC,KAAKkjB,MAAOljB,KAAKmjB,QAG9Bs0C,EAAKvqB,OAAO8qB,OAAS,EACrBP,EAAKvqB,OAAO+qB,QAAU,GACtBR,EAAKvqB,OAAOgrB,aAAe,KAC3BT,EAAKvqB,OAAOirB,SAAW,EACvBV,EAAKvqB,OAAOkrB,gBAAkB,GAC9BX,EAAKvqB,OAAOmrB,iBAAmB,EAK/Br4D,KAAKqwD,SAASsH,QAAQF,GACtBz3D,KAAKsxD,QAAUmG,EAEbz3D,KAAKsxD,UACPtxD,KAAKsxD,QAAQrF,QAAUsL,GAEzBv3D,KAAK29B,gBAMAmpB,eAAeyQ,GACpB,GAAKv3D,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,UAAarY,KAAKqwD,SAA3D,CAIA,GAAIkH,IAAWv3D,KAAKuxD,SAAU,CAC5B,MAAMkG,EAAO,IAAIa,QAASt4D,KAAK+O,MAAO/O,KAAK8H,OAAQ9H,KAAKkjB,MAAOljB,KAAKmjB,QACpEs0C,EAAKc,aAAe,GACpBd,EAAKe,YAAc,KACnBf,EAAKgB,YAAc,GAEnBz4D,KAAKqwD,SAASsH,QAAQF,GACtBz3D,KAAKuxD,SAAWkG,EAEdz3D,KAAKuxD,WACPvxD,KAAKuxD,SAAStF,QAAUsL,GAE1Bv3D,KAAK29B,gBAMAopB,kBAAkBwQ,GACvB,GAAKv3D,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,UAAarY,KAAKqwD,SAA3D,CAIA,GAAIkH,IAAWv3D,KAAKwxD,YAAa,CAC/B,MAAMiG,EAAO,IAAIiB,QAAY,IAAIp0D,QAActE,KAAKkjB,MAAOljB,KAAKmjB,QAASnjB,KAAK+O,MAAO/O,KAAK8H,QAC1F2vD,EAAKkB,aAAe,EACpBlB,EAAKmB,SAAW,EAChBnB,EAAKoB,cAAgB,EACrBpB,EAAKqB,YAAc,EAEnBrB,EAAKsB,iBAAiB17C,IAAI,UAC1Bo6C,EAAKuB,gBAAgB37C,IAAI,UACzBrd,KAAKqwD,SAASsH,QAAQF,GACtBz3D,KAAKwxD,YAAciG,EAEjBz3D,KAAKwxD,cACPxxD,KAAKwxD,YAAYvF,QAAUsL,GAE7Bv3D,KAAK29B,gBAMAqpB,eAAeuQ,GACpB,GAAKv3D,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,UAAarY,KAAKqwD,SAA3D,CAIA,GAAIkH,IAAWv3D,KAAKi5D,eAAgB,CAClC,MAAMxB,EAAO,IAAIyB,QAAel5D,KAAK+O,MAAO/O,KAAK8H,OAAQ,SAAU,GACnE9H,KAAKqwD,SAASsH,QAAQF,GACtBz3D,KAAKi5D,eAAiBxB,EAEpBz3D,KAAKi5D,iBACPj5D,KAAKi5D,eAAehN,QAAUsL,GAEhCv3D,KAAK29B,gBAMAspB,gBAAgBsQ,GACrB,GAAKv3D,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,UAAarY,KAAKqwD,SAA3D,CAIA,GAAIkH,IAAWv3D,KAAKm5D,UAAW,CAC7B,MAAM1B,EAAO,IAAI2B,QACf,EACA,GACA,GAEF3B,EAAKK,gBAAiB,EACtB93D,KAAKqwD,SAASsH,QAAQF,GACtBz3D,KAAKm5D,UAAY1B,EAEfz3D,KAAKm5D,YACPn5D,KAAKm5D,UAAUlN,QAAUsL,GAE3Bv3D,KAAK29B,gBAMAupB,sBAAsBqQ,GAC3B,GAAKv3D,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,UAAarY,KAAKqwD,SAA3D,CAIA,GAAIkH,IAAWv3D,KAAKq5D,gBAAiB,CACnC,MAAM5B,EAAO,IAAI6B,QAAgB,IAAIh1D,QAActE,KAAKkjB,MAAOljB,KAAKmjB,QAAS,EAAG,EAAG,GACnFs0C,EAAK8B,UAAY,EACjB9B,EAAK+B,SAAW,GAChB/B,EAAK5e,OAAS,EACd74C,KAAKqwD,SAASsH,QAAQF,GACtBz3D,KAAKq5D,gBAAkB5B,EAErBz3D,KAAKq5D,kBACPr5D,KAAKq5D,gBAAgBpN,QAAUsL,GAEjCv3D,KAAK29B,gBAOA4nB,cAActD,EAAsB,qBACzC,IAAKjiD,KAAK+O,QAAU/O,KAAK8H,SAAW9H,KAAKqY,WAAarY,KAAKsY,SACzD,OAEEtY,KAAKo/B,SACPp/B,KAAKslD,iBAEP,MAAMnoB,EAAa7hC,OAAOq8B,OAAO33B,KAAK88B,cAAcl5B,IAAI6N,GAAOA,EAAIQ,OAC9DkrB,GAAcA,EAAW9hC,OAAS,EACrC4E,QAAQqC,KAAK,0BAGftC,KAAKqY,SAAS+oB,sBAAuB,EACjB,sBAAhB6gB,GACFjiD,KAAKo/B,QAAU,IAAIxgB,GAAkBue,EAAYn9B,KAAK+O,MAAO/O,KAAK8H,OAAQ9H,KAAKqY,SAAUrY,KAAKsY,UAC9FtY,KAAKo/B,QAAQziB,QACY,iBAAhBslC,IACTjiD,KAAKo/B,QAAU,IAAIle,GAAoBic,EAAYn9B,KAAK+O,MAAO/O,KAAK8H,OAAQ9H,KAAKqY,SAAUrY,KAAKsY,UAChGtY,KAAKo/B,QAAQziB,QAEf3c,KAAK29B,gBAGA2nB,iBACAtlD,KAAKqY,UAAarY,KAAKo/B,UAK5Bp/B,KAAKo/B,QAAQtiB,QACb9c,KAAKo/B,aAAUx9B,EACf5B,KAAK29B,gBAGA8nB,cAAc7nD,GACdoC,KAAK+O,OAAU/O,KAAK8H,QAAW9H,KAAKqY,UAAarY,KAAKsY,WAGvDtY,KAAKkiD,SACPliD,KAAKwlD,iBAEPxlD,KAAKkiD,QAAU,IAAI7H,GAAQr6C,KAAKqY,SAAUrY,KAAK+O,MAAO/O,KAAK8H,OAAQ9H,KAAKsY,SAAU1a,EAAMoC,KAAKyqC,UAC7FzqC,KAAKkiD,QAAQvlC,QAGR6oC,iBACAxlD,KAAKqY,UAAarY,KAAKkiD,UAGxBliD,KAAKkiD,SACPliD,KAAKkiD,QAAQplC,QAEf9c,KAAKkiD,aAAUtgD,GAGV2tD,eACAvvD,KAAK+O,QAKL/O,KAAK+1C,SACR/1C,KAAK+1C,OAAS,IAAIH,IAEf51C,KAAKmxD,cACRnxD,KAAKmxD,YAAcnxD,KAAK+1C,OAAOyB,oBAC/Bx3C,KAAKmxD,YAAYliD,SAASoO,IAAI,GAAI,EAAG,IAEvCrd,KAAK+O,MAAMiN,IAAIhc,KAAKmxD,cAGfsI,gBACAz5D,KAAK+O,OAGN/O,KAAKmxD,cACPnxD,KAAKmxD,YAAYr+C,SAASkF,UACzBhY,KAAKmxD,YAAY18C,SAA4BuD,UAC9ChY,KAAK+O,MAAMmJ,OAAOlY,KAAKmxD,cASnBh6B,YAAYh5B,GAClB,IAAI+4B,GAAkB/4B,GAAQg5B,cAQxBqB,MAAMr6B,GACZ,IAAIm6B,GAAYn6B,GAAQq6B,QA6BlBg1B,SAAS5nC,EAAWzkB,EAAck3C,GACxCzyB,EAAK7kB,iBAAiBI,EAAMk3C,GAC5Br4C,KAAK8qD,OAAOnvD,KAAK,CAAEiqB,OAAMzkB,OAAMk3C,SAM1BhN,sBAAsBZ,GAC3BzqC,KAAKyqC,SAAWA,EAEhB,MAAMivB,EAAuBA,CAAC38D,EAAmE48D,KAC3F58D,GAAK48D,IACP58D,EAAEgL,KAAO4xD,EAAG5xD,KACZhL,EAAEiL,IAAM2xD,EAAG3xD,IACXjL,EAAEozD,2BAGNuJ,EAAqB15D,KAAKysD,kBAAmBzsD,KAAKyqC,SAAS3iC,QAC3D4xD,EAAqB15D,KAAK4sD,YAAa5sD,KAAKyqC,SAAS3iC,QACrD9H,KAAK29B,aAAa,KC13Df,IAAKi8B,IAAZ,SAAYA,GACVA,IAAA,sBACAA,IAAA,wBACAA,IAAA,6BAHF,CAAYA,QAAW,KAOvB,IAAqBC,GAArB,cAA+Cn1D,OAA/CpF,c,oBAGE,KAAAw6D,cAAgB,GAGhB,KAAAxzD,WAAY,EACZ,KAAAyzD,gBAAkB,EAClB,KAAAC,YAAc,GAEd,KAAAC,yBAA0B,EAE1Bn1D,UACE9E,KAAK4qC,sBACL,MAAMsvB,EAAmBl6D,KAAKgF,MAAMk1D,gBAC9Br9B,EAAS,IAAIytB,GAAS/rD,OAAOqf,WAAYrf,OAAOuf,YAAa9d,KAAKm6D,iBACxEt9B,EAAO4J,UACPzmC,KAAK68B,OAASA,EACVA,EAAOxkB,WACT6hD,EAAgBpsD,YAAY+uB,EAAOxkB,SAASoB,YAC5C3W,EAAe0D,oBAAoBjG,KAAK+C,IACtC,MAAMO,EAAOP,EAASY,KAAM7F,GAAeA,EAAEY,KAAOe,KAAKwC,WACrDqB,GACF7D,KAAK08B,OAAOuB,OAAOj1B,EAAMgB,wBAAyBnG,GAClD7D,KAAKo6D,wBAAwBv9B,EAAQh5B,IAErC8C,IAAQlD,MAAM,yCAAyCzD,KAAKwC,cAI9Dq6B,EAAOqvB,gBACTrvB,EAAOqvB,cAAczyC,WAAW2kB,UAAUpiB,IAAI,iBAC9Ck+C,EAAgBpsD,YAAY+uB,EAAOqvB,cAAczyC,aAEnDzZ,KAAKq6D,UAAUx9B,GACf78B,KAAKs6D,iBAAiBz9B,GAGtBt+B,OAAOwC,iBAAiB,SAAU,KAChC87B,GAAUA,EAAOrb,OAAOjjB,OAAOqf,WAAYrf,OAAOuf,eACjD,GAEH+e,EAAO9L,MAAM,iBAAmBtf,IAAY,IAAA8oD,EAC1C,GAAO,OAAH9oD,QAAG,IAAHA,GAAa,QAAV8oD,EAAH9oD,EAAKK,gBAAQ,IAAAyoD,GAAbA,EAAe1kD,eAAgB,KAAA2kD,EAAAC,EAAAC,EACjC,MAAMC,EAAgB,OAAHlpD,QAAG,IAAHA,GAAa,QAAV+oD,EAAH/oD,EAAKK,gBAAQ,IAAA0oD,OAAA,EAAbA,EAAe3kD,eAC5B+kD,GAAkB,OAAVD,QAAU,IAAVA,GAAoB,QAAVF,EAAVE,EAAY3rD,gBAAQ,IAAAyrD,OAAA,EAApBA,EAAsB1kD,SAAmB,OAAV4kD,QAAU,IAAVA,GAAqB,QAAXD,EAAVC,EAAY3kD,iBAAS,IAAA0kD,OAAA,EAArBA,EAAuB3kD,OACpE/V,KAAK85D,cAAgBc,GAAS,QAClB,OAAHnpD,QAAG,IAAHA,KAAKQ,KACdjS,KAAK85D,cAAgBroD,EAAIQ,KAEzBjS,KAAK85D,cAAgB,KAK3BO,UAAUx9B,GACR,MAAMuvB,EAAQvvB,EAAOuvB,MACrB,GAAIA,EAAO,CACTA,EAAMyO,QAAQ,GACd,MAAMC,EAAe96D,KAAKgF,MAAM81D,YAChCA,EAAYhtD,YAAYs+C,EAAM3yC,aAIlCmxB,sBACE,MAAM5sC,EAAM+K,EAAsB,IAAM/I,KAAKwC,UACvCqoC,EAA8BC,aAAaC,QAAQ/sC,IAAQwQ,KAAKpC,MAAM0+B,aAAaC,QAAQ/sC,IAAQ,IACnG9B,EAAS8uC,uBAAUrjC,GACrBkjC,GACFvvC,OAAO6Q,OAAOjQ,EAAQ8uC,uBAAUH,IAElC7qC,KAAKm6D,gBAAkBj+D,EAGzBonB,gBACMtjB,KAAK68B,SACP78B,KAAK68B,OAAOvZ,gBACZtjB,KAAK68B,YAASj7B,GAEZ5B,KAAK+6D,eACP/6D,KAAK+6D,aAAa/iD,UAClBhY,KAAK+6D,kBAAen5D,GAEtB5B,KAAK85D,cAAgB,GACrB95D,KAAKg6D,YAAc,GAGrBM,iBAAiBz9B,GACf,MAAMm+B,EAAWh7D,KAAKgF,MAAMi2D,aACtBC,EAAM,IAAI50B,GAAuB00B,EAAQ9e,YAAa8e,EAAQ99B,cAChEg+B,EAAI7iD,WACN2iD,EAAQltD,YAAYotD,EAAI7iD,SAASoB,YACjCyhD,EAAIl0B,gBAAgBnK,IAEtB78B,KAAK+6D,aAAeG,EAGtBd,wBAAwBv9B,EAAkBh5B,GACxC,IAAKg5B,IAAWh5B,EAEd,YADA5D,QAAQC,IAAI,kCAGd,IAAK2D,EAAKE,QAAUF,EAAKE,OAAO1I,OAAS,EAEvC,YADA4E,QAAQC,IAAI,2BAGdF,KAAKsG,WAAY,EACjBtG,KAAK+5D,gBAAkB,EACvB,IAAIxhC,EAAU,EACd,IAAK,IAAIp9B,EAAI,EAAGA,EAAI0I,EAAKE,OAAO1I,SAAUF,EAAG,CAC3C,MAAMqE,EAAQqE,EAAKE,OAAO5I,IACJ,IAAlBqE,EAAM6X,UAGVkhB,IACAv4B,KAAKsG,WAAY,EACjBu2B,EAAOs+B,UAAU37D,EAAQ6F,IACvBrF,KAAKg6D,YAAc,GAAGn2D,EAAK5G,QAAQ9B,EAAI,KAAK0I,EAAKE,OAAO1I,UACxD2E,KAAK+5D,gBAAkB39C,KAAK5F,MAAqB,IAAfnR,EAAMoiB,OAAepiB,EAAMqwC,QAC3DrwC,IACFsB,IAAQlD,MAAM,kBAAoBjE,EAAMmwD,IAAM,KAAOtqD,EAAMumC,SAC3D5rC,KAAKsG,YAAeiyB,EAAU,IAC7Bh4B,KAAK,KACNP,KAAKsG,YAAeiyB,EAAU,MAKpC6iC,mBAAmBvvB,GACjB,IAAIwvB,EAAO,GACX,OAAQxvB,GACN,KAAK+tB,GAAY0B,QACfD,EAAO,kBACP,MACF,KAAKzB,GAAY2B,OACfF,EAAO,kBACP,MACF,KAAKzB,GAAY4B,UACfH,EAAO,kBACP,MACF,QACEA,EAAO,kBACP,MAEJ,OAAOA,EAGTI,0BAA0BxxD,GACxBjK,KAAK08B,OAAOuB,OAAOj1B,EAAMwB,qCAAsCP,GASjEyxD,gBAAgB7+B,GACd,OAAQx3B,IACN,MAAMs2D,EAAQt2D,EAAM6gB,OAAOy1C,MAC3B,IAAKA,GAASA,EAAMtgE,QAAU,EAC5B,OAEF,MAAMiM,EAAOq0D,EAAM,GAEnB37D,KAAKsG,WAAY,EACjB,MAAMuF,EAAiB,CACrB8jD,IAAKroD,EAAKrK,KACVgS,SAAU,CAAC,EAAG,EAAG,GACjB2wC,SAAU,CAAC,EAAG,EAAG,GACjB1wC,MAAO,CAAC,EAAG,EAAG,GACdioB,aAAa,EACbqB,OAAO,GAETqE,GAAUA,EAAO++B,eAAe/vD,EAAUxG,IACxCrF,KAAKg6D,YAAc,WAAW1yD,EAAKrK,KACnC+C,KAAK+5D,gBAAkB39C,KAAK5F,MAAqB,IAAfnR,EAAMoiB,OAAepiB,EAAMqwC,QAC3DrwC,IACFsB,IAAQlD,MAAM,kBAAoB6D,EAAKrK,KAAO,KAAOoI,EAAMumC,SAC3D5rC,KAAKsG,WAAY,IAChB/F,KAAK,KACNP,KAAKsG,WAAY,KAKbzE,SAAM,IAAAg6D,EAAAC,EAAA,MAAAv2D,EAAAC,UAAA,GACd,OAAAD,EAAA,WACW,kBAAiB,MAAQE,KAAOy0D,iBAAe,CAAA30D,EAAA,WAC7C,cAAa,MAAQE,KAAOq1D,cAAWv1D,EAAAo2B,GAAA,eAC9B37B,KAAK68B,UAAMt3B,EAAA+nC,GAAA,cACK,QADLuuB,EACN77D,KAAK68B,cAAM,IAAAg/B,OAAA,EAAXA,EAAa9sD,MAAK,MAAW/O,KAAK85D,eAAa,MAAUr0D,KAAOs2D,gBAAax2D,EAAAiiC,GAAA,eAC1ExnC,KAAK68B,UAAMt3B,EAAA,WAC5B,eAAc,UAAI,gBAAc,MAAQE,KAAOw1D,eAAY11D,EAAA8oC,GAAA,eAClC,QADkCytB,EAC7C97D,KAAK68B,cAAM,IAAAi/B,GAAU,QAAVA,EAAXA,EAAazjD,gBAAQ,IAAAyjD,OAAA,EAArBA,EAAuBriD,cAAUlU,EAAA89B,GAAA,eACpCrjC,KAAK68B,UAAMt3B,EAAA,qBAEnB,OAAM,GAAI,mBAAiB,MAAO,gBAAe,WAAYvF,KAAK07D,gBAAgB17D,KAAK68B,WAClG78B,KAAKsG,WAASf,EAAAwkC,GAAA,aAAuB/pC,KAAKg6D,YAAW,cAAiBh6D,KAAK+5D,mBAAmBx0D,EAAA,YAAAy2D,IAAA,eAEvF,mBAAkB,MAClB,QAAO,QAEJh8D,KAAK08B,OAAO9xB,QAAQ5B,EAAMoC,oCAAmC,gBACtD,GAAI,MAFb6wD,KAAkBC,gBAAc,IAGnC,CAAE,iBAAmBjyD,IAAmBjK,KAAKy7D,0BAA0BxxD,QAAQ,CAAA1E,EAAAglC,GAAArH,IAAA,mBAClDljC,KAAKwC,YAAS,IAAM,CAAE,iBAAmByH,IAAmBjK,KAAKy7D,0BAA0BxxD,MAAQ,eAAUjK,KAAK68B,kBA7MjI/2B,eAAA,CAAzBC,eAAK,CAAEC,UAAU,K,iCADC6zD,GAAiB/zD,eAAA,CADrCI,QACoB2zD,cCtBrB,IAAqBsC,GAArB,cAA0Cz3D,OAGxCI,WAGAs3D,eAEE,GADAp8D,KAAKwC,UAAYxC,KAAKsF,QAAQ+2D,aAAanvB,OAAO1qC,UAC7CxC,KAAKwC,UAIV,OAAOxC,KAAKwC,UAHVvC,QAAQwD,MAAM,2BAMR5B,SAAM,MAAA0D,EAAAC,UAAA,GACd,OAAAD,EAAA,WACW,eAAc,MAAQE,IAAO62D,cAAY,CAAA/2D,EAAAs0D,GAAA,kBAClB75D,KAAKo8D,sBAlBtBD,GAAYr2D,eAAA,CADhCI,QACoBi2D,c,aCJrBz3D,aAAIuE,IAAIszD,SAER,MAAMC,GAA6B,CACjC,CACErqC,KAAM,YACNl1B,KAAM,WACN2gC,UAAWz3B,GAEb,CACEgsB,KAAM,uBACNl1B,KAAM,eACN2gC,UAAWu+B,IAEb,CACEhqC,KAAM,IACNl1B,KAAM,QACN2gC,UAAWz3B,IAITs2D,GAAS,IAAIF,QAAU,CAC3BC,YAGaC,U,ohCChBfr6D,eAAes6D,KACbh4D,aAAIyiB,OAAOw1C,eAAgB,EAE3Bt9D,EAAgB0wB,iBACV6sC,KAEN,IAAIl4D,aAAI,CACN+3D,UACAtzD,QACAtH,OAAQ0D,GAAKA,EAAEs3D,KACdC,OAAO,QAGZ16D,eAAew6D,KACb,IACE,MAAM75D,EAAUC,IACVC,EAAa,mBACbI,QAAYD,IAAM9F,IAAI2F,EAAY,CAAEF,YAC1C2B,aAAInJ,UAAUwhE,QAAU15D,EAAIxI,KAC5B,MAAO+D,GACPqB,QAAQwD,MAAM7E,IC9BlB8F,aAAIuE,IAAG+zD,MACPt4D,aAAIuE,IAAGg0D,MACPv4D,aAAIuE,IAAGi0D,MACPx4D,aAAIuE,IAAGk0D,MACPz4D,aAAIuE,IAAGm0D,MACP14D,aAAIuE,IAAGo0D,MACP34D,aAAIuE,IAAGq0D,MACP54D,aAAIuE,IAAGs0D,MACP74D,aAAIuE,IAAGu0D,MACP94D,aAAIuE,IAAGw0D,MACP/4D,aAAIuE,IAAGy0D,MACPh5D,aAAIuE,IAAG00D,MACPj5D,aAAIuE,IAAG20D,MACPl5D,aAAIuE,IAAG40D,MACPn5D,aAAIuE,IAAG60D,MACPp5D,aAAIuE,IAAG80D,MACPr5D,aAAIuE,IAAG+0D,MACPt5D,aAAIuE,IAAGg1D,MACPv5D,aAAIuE,IAAGi1D,MACPx5D,aAAIuE,IAAGk1D,MACPz5D,aAAIuE,IAAGm1D,MACP15D,aAAIuE,IAAGo1D,MACP35D,aAAIuE,IAAGq1D,MACP55D,aAAIuE,IAAGs1D,MACP75D,aAAIuE,IAAGu1D,MACP95D,aAAIuE,IAAGw1D,MACP/5D,aAAIuE,IAAGy1D,MACPh6D,aAAIuE,IAAG01D,MACPj6D,aAAIuE,IAAG21D,MDtBPl6D,aAAIyiB,OAAOw1C,eAAgB,EAE3BD,M,qBEVA9/D,EAAOD,QAAU,CAAC,UAAY,qC,qBCA9BC,EAAOD,QAAU,CAAC,SAAW,iCAAiC,aAAe,qCAAqC,KAAO,6BAA6B,aAAe,uC,qBCArKC,EAAOD,QAAU,CAAC,gBAAkB,iDAAiD,YAAc,6CAA6C,cAAgB,+CAA+C,aAAe,8CAA8C,aAAe,8CAA8C,OAAS,wCAAwC,KAAO,sCAAsC,UAAY,2CAA2C,SAAW,0CAA0C,iBAAmB,kDAAkD,aAAe,gD,qBCAvmBC,EAAOD,QAAU,CAAC,YAAc,uCAAuC,KAAO,gCAAgC,UAAY,qCAAqC,UAAY,qCAAqC,MAAQ,iCAAiC,KAAO,kC","file":"js/app.65615134.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-threejs\",\"chunk-elementui\",\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bimTree\":\"BimTree-module_bimTree_3pdwV\"};","export * from \"-!../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/.pnpm/sass-loader@8.0.2_sass@1.87.0_webpack@4.47.0/node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=5fc927f0&prod&lang=scss\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"materialManager\":\"MaterialManager-module_materialManager_Xvry7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progressBarWrapper\":\"ProgressBar-module_progressBarWrapper__IZtB\",\"progressBar\":\"ProgressBar-module_progressBar_3SMbv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"snapshotPanel\":\"SnapshotPanel-module_snapshotPanel_By779\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"psetting\":\"ProjectSettings-module_psetting_1zNg6\",\"sliderWrap\":\"ProjectSettings-module_sliderWrap_mzMu8\",\"btnWrap\":\"ProjectSettings-module_btnWrap_3Kkkj\",\"pSettingDialog\":\"ProjectSettings-module_pSettingDialog_1-AOI\"};","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"a7d5\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"basePanel\":\"BasePanel-module_basePanel_34bf_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tableWrapper\":\"PropertyPanel-module_tableWrapper_2F9tn\"};","/**\n * Message Id that is sent from parent app to threejs viewer\n */\nexport enum MessageId {\n  /* postmate properties, which returns value to caller */\n  getSupportedPostmateProperties = \"getSupportedPostmateProperties\", // message for postmate itself\n  getSupportedPostmateFunctions = \"getSupportedPostmateFunctions\", // message for postmate itself\n  getGroundGrid = \"getGroundGrid\",\n\n  /* postmate messages/functions, which don't returns anything to caller */\n  setBimTree = \"setBimTree\",\n  setGroundGrid = \"setGroundGrid\",\n  goHomeView = \"goHomeView\",\n  setTransparentMode = \"setTransparentMode\",\n  setExplodeMode = \"setExplodeMode\",\n  highlightRandomNode = \"highlightRandomNode\",\n  setObjectsPlaneClipper = \"setObjectsClipPlane\", // input param: boolean\n  setObjectsBoxClipper = \"setObjectsClipBox\" // input param: boolean\n}\n\n/**\n * Message format, that is transfered between threejs viewer and parents\n */\nexport interface Message {\n  messageId: string;\n  time?: string; // time stamp\n  messageData?: object | BooleanMessageData; // eslint-disable-line\n}\n\n/**\n * Message data for true/false cases\n */\nexport interface BooleanMessageData {\n  value: boolean;\n}\n","import { MessageId } from \"../postmate/Message\";\n\nconst PM = require(\"postmate\");\n\nexport interface History {\n  direction: \"sent\" | \"received\",\n  type: \"property\" | \"function\",\n  messageId: string,\n  time: number\n}\n\n/**\n * Util methods for PostMessage\n * https://github.com/dollarshaveclub/postmate\n */\nexport class PostmateManager {\n  isEmbedded = false;\n  childApi: any;\n  // stores all properties and functions\n  model: { [property: string]: any } = {};\n  // the different between property and function is that\n  // - property has return value, ParentAPI should call ParentAPI.get(property) to get a Promise\n  // - function doesn't return anything, ParentAPI should call ParentAPI.call(property, data)\n  properties: string[] = []; // store all properties\n  functions: string[] = []; // store all functions\n  // store sent/received message history\n  histories: History[] = [];\n\n  /**\n   * Singleton design pattern\n   */\n  private static _instance: PostmateManager | undefined = undefined; // eslint-disable-line\n  public static instance(): PostmateManager {\n    if (!PostmateManager._instance) {\n      PostmateManager._instance = new PostmateManager();\n      PostmateManager._instance.init();\n    }\n    return PostmateManager._instance;\n  }\n\n  /**\n   * Initialize postmate\n   */\n  private init() {\n    // found out if 'this' page is embedded in an iframe\n    const isEmbedded = (window.location !== window.parent.location);\n    this.isEmbedded = isEmbedded;\n    // if not embedded, then not necessary to receive message\n    if (!isEmbedded) {\n      return;\n    }\n    console.log(`[PM] BIM Viewer is${isEmbedded ? \"\" : \" not\"} embedded`);\n\n    const Postmate = PM.default;\n    // Postmate.debug = true\n    const handshake = new Postmate.Model(this.model);\n    // When parent <-> child handshake is complete, events may be emitted to the parent\n    handshake.then((childApi: any) => {\n      this.childApi = childApi;\n    });\n\n    // register two messages for postmate, so parent knows what properties and functions it can get() and call()\n    this.addEventListenerWithReturnValue(MessageId.getSupportedPostmateProperties, () => this.properties);\n    this.addEventListenerWithReturnValue(MessageId.getSupportedPostmateFunctions, () => this.functions);\n  }\n\n  /**\n   * To indicate if 'this' page is embedded into an iframe\n   */\n  public getIsEmbedded(): boolean {\n    return this.isEmbedded;\n  }\n\n  /**\n   * Emits message from child(inner iframe) to parent\n   * @param messageId should be defined in parent\n   * @param message should be defined and parsed in parent\n   */\n  public emit(messageId: string, data: any) {\n    if (this.childApi) {\n      this.childApi.emit(messageId, data);\n    }\n  }\n\n  /**\n   * Simply calls childApi.get()\n   * @param property property name\n   */\n  public get(property: string) {\n    if (this.childApi) {\n      return this.childApi.get(property);\n    }\n  }\n\n  /**\n   * Simply calls childApi.call()\n   * @param property property name\n   * @param data data object\n   */\n  public call(property: string, data: any) {\n    if (this.childApi) {\n      this.childApi.call(property, data);\n    }\n  }\n\n  /**\n   * Registers a property to postmate model, so parent can call parentApi.call('property', data),\n   * then, postmate returns a Promise.\n   * @param property aka, message id\n   * @param value value or function\n   */\n  public addEventListener(property: MessageId, callback: (messageData: object) => void) {\n    if (!this.isEmbedded) {\n      return; // do nothing if not embedded\n    }\n    // wrap the callback, so we know\n    this.model[property] = (messageData: object) => {\n      this.histories.push({ direction: \"received\", type: \"function\", messageId: property, time: Date.now() });\n      callback(messageData);\n    };\n    this.functions.push(property);\n  }\n\n  /**\n   * Registers a property to postmate model, so parent can call parentApi.get('property'),\n   * then, postmate returns a Promise.\n   * @param property a string\n   * @param value value or function\n   */\n  public addEventListenerWithReturnValue(property: MessageId, callback: (messageData: object) => void) {\n    if (!this.isEmbedded) {\n      return; // do nothing if not embedded\n    }\n    this.model[property] = (messageData: object) => {\n      this.histories.push({ direction: \"received\", type: \"property\", messageId: property, time: Date.now() });\n      return callback(messageData);\n    };\n    this.properties.push(property);\n  }\n\n  /**\n   * Removes a property to postmate model,\n   * then, postmate returns a Promise.\n   * @param property aka, message id\n   */\n  public removeEventListener(...properties: MessageId[]) {\n    properties.forEach(property => {\n      if (this.model[property]) {\n        delete this.model[property];\n      }\n      const i = this.functions.indexOf(property);\n      if (i >= 0) {\n        this.functions.splice(i, 1);\n      }\n    });\n  }\n\n  /**\n   * Removes a property to postmate model,\n   * then, postmate returns a Promise.\n   * @param property a string\n   */\n  public removeEventListenerWithReturnValue(...properties: MessageId[]) {\n    properties.forEach(property => {\n      if (this.model[property]) {\n        delete this.model[property];\n      }\n      const i = this.properties.indexOf(property);\n      if (i >= 0) {\n        this.properties.splice(i, 1);\n      }\n    });\n  }\n\n  /**\n   * Gets postmate histories\n   */\n  public getHistories(): History[] {\n    return this.histories;\n  }\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"nav\"}}),_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5fc927f0\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&id=5fc927f0&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// import { AxiosRequestConfig } from \"axios\";\n// import { post } from \"./base\";\n\nexport async function getProjects() {\n  console.warn(\"Not implemented yet!\");\n  return [];\n}\n\nexport async function deleteProject(projectId: string) {\n  console.warn(\"Not implemented yet!\");\n  return null;\n}\n\nexport async function createProject(projectName: string, projectDescription = \"\") {\n  console.warn(\"Not implemented yet!\");\n  return null;\n}\n\nexport async function uploadBimFile(projectId: string, formData: FormData) {\n  console.warn(\"Not implemented yet!\");\n  return null;\n}\n\n/**\n * Gets BIM models' sences belong to a project\n * @param projectId\n */\nexport async function getScenes(projectId: string) {\n  console.warn(\"Not implemented yet!\");\n  return null;\n}\n","import * as THREE from \"three\";\nimport { getProjects } from \"@/service/project\";\nimport axios from \"axios\";\n\nexport interface Project {\n  id: string;\n  name: string;\n  thumbnail?: string;\n  camera?: CameraConfig; // eslint-disable-line\n  models: Model[]; // eslint-disable-line\n}\n\nexport interface CameraConfig {\n  eye: number[] | THREE.Vector3;\n  look: number[] | THREE.Vector3;\n}\n\nexport interface Model {\n  name?: string;\n  src: string;\n  position?: number[];\n  rotation?: number[];\n  scale?: number[];\n  instantiate?: boolean; // if we want to do instantiate to the model\n  merge?: boolean; // if we want to merge mesh with the same materials\n  edges?: boolean; // if we want to generate and show edges/outline to the modle\n  propertyFile?: string;\n  visible?: boolean; // default value is true. won't load a model when invisible\n}\n\n/**\n * Class for ProjectManager\n * There are two kind of projects:\n * 1) Demo project, which is defined in 'public/config/projects.json', and stored in 'public/three/projects'\n * 2) Common project, which is stored in back-end service (not implemented yet until today 2021.6)\n */\nexport class ProjectManager {\n  static customProjects: Project[] = []; // stores online projects\n\n  /**\n   * Gets demo projects\n   */\n  public static getSampleProjects(): Promise<Project[]> {\n    const baseURL = process.env.BASE_URL;\n    const configFile = \"config/projects.json\";\n    return new Promise<Project[]>((resolve, reject) => {\n      axios.get(configFile, { baseURL }).then(res => {\n        const projects = res.data;\n        resolve(projects);\n      }).catch(reason => {\n        console.error(reason);\n        reject(reason);\n      });\n    });\n  }\n\n  /**\n   * Gets online projects\n   * TODO: handle pagging, filter, etc. when there are many projects\n   */\n  public static async getCustomProjects(forceRefetch = false): Promise<Project[]> {\n    if (!ProjectManager.customProjects || ProjectManager.customProjects.length < 1 || forceRefetch) {\n      // if list is empty or user want to fetch from online, then fetch from online\n      try {\n        const projects = await getProjects();\n        if (!projects) {\n          console.warn(`Failed to load online projects: ${projects}`);\n        }\n        ProjectManager.customProjects = projects.map((proj: any) => {\n          return {\n            id: proj._id,\n            name: proj.name,\n            models: []\n          };\n        }) || [];\n        console.log(`ProjectManager.customProjects: ${ProjectManager.customProjects}`);\n        return ProjectManager.customProjects;\n      } catch (e) {\n        console.warn(`Failed to load online projects, error: ${e}`);\n      }\n    }\n    return Promise.resolve(ProjectManager.customProjects);\n  }\n\n  /**\n   * Gets a project\n   */\n  public static async getProject(id: string): Promise<Project> {\n    const projects = await ProjectManager.getCustomProjects();\n    const project = projects ? projects.find(p => p.id === id) : undefined;\n    if (!project) {\n      // TODO: need to get project from backend, because projects are possibly not loaded yet\n      throw Error(`Failed to get project with id: ${id}`);\n    }\n    return Promise.resolve(project);\n  }\n\n  public static addCustomProject(project: Project): (Project) {\n    ProjectManager.customProjects.push(project);\n    return project;\n  }\n\n  public static deleteCustomProject(projectId: string) {\n    const index = ProjectManager.customProjects.findIndex(p => p.id === projectId);\n    index > -1 && ProjectManager.customProjects.splice(index, 1);\n  }\n\n  /**\n   * Converts number array to THREE.Vector3\n   */\n  public static arrayToVector3(arr: number[] | THREE.Vector3 | undefined): THREE.Vector3 | undefined {\n    if (!arr) {\n      return arr;\n    } else if (arr instanceof THREE.Vector3) {\n      return arr;\n    } else if (Array.isArray(arr) && arr.length >= 3) {\n      return new THREE.Vector3(arr[0], arr[1], arr[2]);\n    }\n  }\n\n  /**\n   * Converts number array to THREE.Euler\n   */\n  public static arrayToEuler(arr: number[] | THREE.Euler | undefined): THREE.Euler | undefined {\n    if (!arr) {\n      return arr;\n    } else if (arr instanceof THREE.Euler) {\n      return arr;\n    } else if (Array.isArray(arr) && arr.length >= 3) {\n      return new THREE.Euler(arr[0], arr[1], arr[2]);\n    }\n  }\n}\n","import { Component, Vue, Prop, Emit } from \"vue-property-decorator\";\nimport { Project } from \"@/core/ProjectManager\";\nimport { VNode } from \"vue/types/umd\";\nimport styles from \"./ProjectCard.module.scss\";\n\nexport interface ProjectCardProps {\n  project: Project;\n  click?: (project: Project) => void;\n}\n\n@Component\nexport default class ProjectCard extends Vue {\n  @Prop({ required: true }) project!: ProjectCardProps[\"project\"];\n  @Prop({ required: false }) click?: ProjectCardProps[\"click\"];\n\n  @Emit()\n  delete(e: MouseEvent) { e.stopPropagation() }\n\n  readonly defaultThumbnail = \"images/default-thumbnail.jpg\";\n\n  mounted() {\n    const div = this.$refs.thumbnail as HTMLDivElement;\n    if (this.project.thumbnail) {\n      div.style.backgroundImage = `url(${this.project.thumbnail})`;\n    }\n  }\n\n  openProject(project: Project) {\n    return (event: MouseEvent) => {\n      console.log(`[PC] Routing to project: ${project.name}, id: ${project.id}`);\n      this.$router.push(`/projects/${project.id}`);\n    };\n  }\n\n  protected render(): VNode {\n    return (\n      <div ref=\"projectCard\" class={styles.projectCard} onClick={/* this.click || */ this.openProject(this.project)}>\n        <div class={styles.card}>\n          <div ref=\"thumbnail\" class={styles.thumbnail}>\n          </div>\n          <div class={styles.infos}>\n            <div class={styles.info}>{`${this.project.name}`}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Component, Vue } from \"vue-property-decorator\";\nimport { createProject, deleteProject, uploadBimFile } from \"@/service/project\";\nimport { Message } from \"element-ui\";\nimport { ProjectManager, Project } from \"@/core/ProjectManager\";\nimport { VNode } from \"vue/types/umd\";\nimport ProjectCard from \"../../components/projects/ProjectCard\";\nimport styles from \"./Projects.module.scss\";\n// import UploadForm from \"@/components/upload-form/UploadForm\";\n\n@Component\nexport default class Projects extends Vue {\n  // define a global static variable, so we only need to get demo projects once\n  static sampleProjects: Project[] = [];\n  sampleProjects: Project[] = [];\n  onLoading = false;\n  activateUpdate = false;\n  customProjects: Project[] = [];\n\n  async mounted() {\n    if (Projects.sampleProjects.length === 0) {\n      this.onLoading = true;\n      ProjectManager.getSampleProjects().then((projects: Project[]) => {\n        Projects.sampleProjects.push(...projects);\n        this.sampleProjects = Projects.sampleProjects;\n      }).finally(() => {\n        this.onLoading = false;\n      });\n    } else {\n      this.sampleProjects = Projects.sampleProjects;\n    }\n  }\n\n  createNewProject() {\n    // disable from creating a project for now!\n    Message.warning(\"Not implemented yet!\");\n    // this.activateUpdate = true\n  }\n\n  async addNewProject(data: any) {\n    const projectId = await this.addProject(data);\n    if (projectId && data.uploadFiles.length) {\n      this.uploadModel(projectId, data);\n    }\n    this.activateUpdate = false;\n  }\n\n  async addProject(data: any) {\n    const createData = new FormData();\n    const projectKeys = [\"projectName\", \"projectDescription\"];\n    projectKeys.forEach(key => {\n      createData.append(key, data[key]);\n    });\n    const res = await createProject(data.projectName, data.projectDescription) as any;\n    if (res && res.projectId) {\n      const proj = {\n        id: res.projectId,\n        name: data.projectName,\n        models: []\n      };\n      ProjectManager.addCustomProject(proj);\n      this.customProjects = ProjectManager.customProjects;\n      return res.projectId;\n    }\n    return \"\";\n  }\n\n  async uploadModel(projectId: string, data: any) {\n    const upData = new FormData();\n    data.uploadFiles.forEach((file: File) => {\n      upData.append(\"file\", file, file.name);\n    });\n    upData.append(\"splitMethod\", data.splitMethod);\n    await uploadBimFile(projectId, upData);\n  }\n\n  async deleteProject(proj: Project) {\n    proj.id && await deleteProject(proj.id);\n    proj.id && ProjectManager.deleteCustomProject(proj.id);\n    this.customProjects = ProjectManager.customProjects;\n  }\n\n  protected render(): VNode {\n    const sampleProjectCards = this.sampleProjects.map(p => <ProjectCard project={p} class={styles.card} key={p.id}></ProjectCard>);\n    return (\n      <div ref=\"projects\" class={styles.projects}>\n        <el-card class={styles.cardsWrapper}>\n          <div slot=\"header\">\n            <span class='span'>Sample projects</span>\n          </div>\n          {sampleProjectCards}\n        </el-card>\n      </div>\n    );\n  }\n}\n","/**\n * Perspective and Orthographic camera share the same settings\n */\nexport interface CameraSettings {\n  near: number,\n  far: number\n}\n\nexport interface MouseSetting {\n  sensitivity: number\n}\n\nexport interface KeyboardSetting {\n  sensitivity: number\n}\n\nexport interface Settings {\n  unit: string,\n  decimalPrecision: number,\n  camera: CameraSettings,\n  mouse: MouseSetting,\n  keyboard: KeyboardSetting\n}\n\nexport const defaultSettings: Settings = {\n  unit: \"file\",\n  decimalPrecision: 99,\n  camera: {\n    near: 0.5,\n    far: 30000\n  },\n  mouse: {\n    sensitivity: 3\n  },\n  keyboard: {\n    sensitivity: 3\n  }\n};\n\nexport const cameraNearRange = [0.1, 100];\n\nexport const cameraFarRange = [1000, 50000];\n\nexport const unitRange: {[key: string]: string} = {\n  \"Unit from file\": \"file\",\n  Meter: \"m\",\n  Milimeter: \"mm\",\n  Centimeter: \"cm\",\n  Feet: \"ft\",\n  Inch: \"in\",\n  Point: \"pt\"\n};\n\nexport const sensitivityRange = [1, 5];\n\nexport const decimalPrecisionRange: {[key: string]: number} = {\n  \"Precision from file\": 99,\n  \"0(1)\": 0,\n  \"0.1(1/2)\": 1,\n  \"0.01(1/4)\": 2,\n  \"0.001(1/8)\": 3,\n  \"0.0001(1/16)\": 4,\n  \"0.00001(1/32)\": 5,\n  \"0.000001(1/64)\": 6\n};\n\nexport const settingStoreKeyName = \"THREE_RENDER_SETTING\";\n","import { Project } from \"@/core/ProjectManager\";\nimport { Settings as SettingsType } from \"@/components/projectSettingsPanel/ProjectSettingsDef\";\nimport Vue from \"vue\";\nimport Vuex, { StoreOptions } from \"vuex\";\n\nVue.use(Vuex);\n\nexport enum Types {\n  STATE_ACTIVE_PROJECT = \"activeProject\",\n  GETTER_ACTIVE_PROJECT = \"getActiveProject\",\n  MUTATION_ACTIVE_PROJECT = \"setActiveProject\",\n\n  STATE_SHOW_BIM_TREE = \"showBimTree\",\n  GETTER_SHOW_BIM_TREE = \"getShowBimTree\",\n  MUTATION_SHOW_BIM_TREE = \"setShowBimTree\",\n\n  STATE_SHOW_LAYER_MANAGER = \"showLayerManager\",\n  GETTER_SHOW_LAYER_MANAGER = \"getShowLayerManager\",\n  MUTATION_SHOW_LAYER_MANAGER = \"setShowLayerManager\",\n\n  STATE_SHOW_PROPERTY_PANEL = \"showPropertyPanel\",\n  GETTER_SHOW_PROPERTY_PANEL = \"getShowPropertyPanel\",\n  MUTATION_SHOW_PROPERTY_PANEL = \"setShowPropertyPanel\",\n\n  STATE_SHOW_SNAPSHOT_PANEL = \"showSnapshotPanel\",\n  GETTER_SHOW_SNAPSHOT_PANEL = \"getShowSnapshotPanel\",\n  MUTATION_SHOW_SNAPSHOT_PANEL = \"setShowSnapshotPanel\",\n\n  STATE_SHOW_VIEWPOINTS = \"showViewpoints\",\n  GETTER_SHOW_VIEWPOINTS = \"getShowViewpoints\",\n  MUTATION_SHOW_VIEWPOINTS = \"setShowViewpoints\",\n\n  STATE_SHOW_ANNOTATIONS = \"showAnnotations\",\n  GETTER_SHOW_ANNOTATIONS = \"getShowAnnotations\",\n  MUTATION_SHOW_ANNOTATIONS = \"setShowAnnotations\",\n\n  STATE_SHOW_PROJECT_SETTINGS_PANEL = \"showProjectSettingsPanel\",\n  GETTER_SHOW_PROJECT_SETTINGS_PANEL = \"getShowProjectSettingsPanel\",\n  MUTATION_SHOW_PROJECT_SETTINGS_PANEL = \"setShowProjectSettingsPanel\",\n\n  STATE_PROJECT_SETTINGS = \"projectSettings\",\n  GETTER_PROJECT_SETTINGS = \"getProjectSettings\",\n  MUTATION_PROJECT_SETTINGS = \"setProjectSettings\",\n\n  STATE_OBJECT_UUID_FOR_MATERIAL_MANAGER = \"objectUuidForMaterialManager\",\n  GETTER_OBJECT_UUID_FOR_MATERIAL_MANAGER = \"getObjectUuidForMaterialManager\",\n  MUTATION_OBJECT_UUID_FOR_MATERIAL_MANAGER = \"setObjectUuidForMaterialManager\"\n}\n\nexport interface RootState {\n  activeProject: Project; // active project which is defined in ProjectManager\n  showBimTree: boolean; // to indicate if BimTree data need to update\n  showLayerManager: boolean; // to indicate if layer manager panel is visible\n  showPropertyPanel: boolean; // to indicate if layer manager panel is visible\n  showSnapshotPanel: boolean;\n  showViewpoints: boolean;\n  showAnnotations: boolean;\n  projectSettings: SettingsType|null;\n  showProjectSettingsPanel: boolean;\n  objectUuidForMaterialManager: string | null; // to store the object uuid for Material manager panel\n  showMaterialManagerPanel: boolean\n}\n\nconst store: StoreOptions<RootState> = {\n  state: {\n    [Types.STATE_ACTIVE_PROJECT]: {},\n    [Types.STATE_SHOW_BIM_TREE]: false,\n    [Types.STATE_SHOW_LAYER_MANAGER]: false,\n    [Types.STATE_SHOW_PROPERTY_PANEL]: false,\n    [Types.STATE_SHOW_SNAPSHOT_PANEL]: false,\n    [Types.STATE_SHOW_VIEWPOINTS]: false,\n    [Types.STATE_SHOW_ANNOTATIONS]: false,\n    [Types.STATE_PROJECT_SETTINGS]: null,\n    [Types.STATE_SHOW_PROJECT_SETTINGS_PANEL]: false,\n    [Types.STATE_OBJECT_UUID_FOR_MATERIAL_MANAGER]: null\n  } as RootState,\n  mutations: {\n    [Types.MUTATION_ACTIVE_PROJECT](state: RootState, val: Project) {\n      state[Types.STATE_ACTIVE_PROJECT] = val;\n    },\n    [Types.MUTATION_SHOW_BIM_TREE](state: RootState, val: boolean) {\n      state[Types.STATE_SHOW_BIM_TREE] = val;\n    },\n    [Types.MUTATION_SHOW_LAYER_MANAGER](state: RootState, val: boolean) {\n      state[Types.STATE_SHOW_LAYER_MANAGER] = val;\n    },\n    [Types.MUTATION_SHOW_PROPERTY_PANEL](state: RootState, val: boolean) {\n      state[Types.STATE_SHOW_PROPERTY_PANEL] = val;\n    },\n    [Types.MUTATION_SHOW_SNAPSHOT_PANEL](state: RootState, val: boolean) {\n      state[Types.STATE_SHOW_SNAPSHOT_PANEL] = val;\n    },\n    [Types.MUTATION_SHOW_VIEWPOINTS](state: RootState, val: boolean) {\n      state[Types.STATE_SHOW_VIEWPOINTS] = val;\n    },\n    [Types.MUTATION_SHOW_ANNOTATIONS](state: RootState, val: boolean) {\n      state[Types.STATE_SHOW_ANNOTATIONS] = val;\n    },\n    [Types.MUTATION_SHOW_PROJECT_SETTINGS_PANEL](state: RootState, val: boolean) {\n      state[Types.STATE_SHOW_PROJECT_SETTINGS_PANEL] = val;\n    },\n    [Types.MUTATION_PROJECT_SETTINGS](state: RootState, val: SettingsType) {\n      state[Types.STATE_PROJECT_SETTINGS] = val;\n    },\n    [Types.MUTATION_OBJECT_UUID_FOR_MATERIAL_MANAGER](state: RootState, val: string | null) {\n      state[Types.STATE_OBJECT_UUID_FOR_MATERIAL_MANAGER] = val;\n    }\n  },\n  actions: {\n  },\n  modules: {\n  },\n  getters: {\n    [Types.GETTER_ACTIVE_PROJECT](state) {\n      return state[Types.STATE_ACTIVE_PROJECT];\n    },\n    [Types.GETTER_SHOW_BIM_TREE](state) {\n      return state[Types.STATE_SHOW_BIM_TREE];\n    },\n    [Types.GETTER_SHOW_LAYER_MANAGER](state) {\n      return state[Types.STATE_SHOW_LAYER_MANAGER];\n    },\n    [Types.GETTER_SHOW_PROPERTY_PANEL](state) {\n      return state[Types.STATE_SHOW_PROPERTY_PANEL];\n    },\n    [Types.GETTER_SHOW_SNAPSHOT_PANEL](state) {\n      return state[Types.STATE_SHOW_SNAPSHOT_PANEL];\n    },\n    [Types.GETTER_SHOW_VIEWPOINTS](state) {\n      return state[Types.STATE_SHOW_VIEWPOINTS];\n    },\n    [Types.GETTER_SHOW_ANNOTATIONS](state) {\n      return state[Types.STATE_SHOW_ANNOTATIONS];\n    },\n    [Types.GETTER_SHOW_PROJECT_SETTINGS_PANEL](state) {\n      return state[Types.STATE_SHOW_PROJECT_SETTINGS_PANEL];\n    },\n    [Types.GETTER_PROJECT_SETTINGS](state) {\n      return state[Types.STATE_PROJECT_SETTINGS];\n    },\n    [Types.GETTER_OBJECT_UUID_FOR_MATERIAL_MANAGER](state) {\n      return state[Types.STATE_OBJECT_UUID_FOR_MATERIAL_MANAGER];\n    }\n  }\n};\n\nexport default new Vuex.Store<RootState>(store);\n","import * as THREE from \"three\";\nimport { DRACOExporter, DRACOExporterOptions } from \"three/examples/jsm/exporters/DRACOExporter\";\nimport { GLTFExporter, GLTFExporterOptions } from \"three/examples/jsm/exporters/GLTFExporter\";\nimport { OBJExporter } from \"three/examples/jsm/exporters/OBJExporter\";\n\nexport class ExportUtils {\n  public static EXTENSION_GLTF = \".gltf\";\n  public static EXTENSION_GLB = \".glb\";\n  public static EXTENSION_OBJ = \".obj\";\n  public static EXTENSION_DRACO = \".drc\";\n  public static EXTENSION_JSON = \".json\";\n\n  // creates a link element in order to trigger download\n  private static downloadLink: HTMLAnchorElement;\n\n  /**\n   * Exports given object to gltf file\n   */\n  public static exportToGltf(input: THREE.Object3D, filename: string) {\n    ExportUtils.exportToGltfOrGlb(input, filename, { binary: false });\n  }\n\n  /**\n   * Exports given object to glb file\n   */\n  public static exportToGlb(input: THREE.Object3D, filename: string) {\n    ExportUtils.exportToGltfOrGlb(input, filename, { binary: true });\n  }\n\n  /**\n   * Exports given object to gltf/glb file\n   * @param input given object\n   * @param filename filename without path, nor extension\n   * @param options\n   */\n  public static exportToGltfOrGlb(input: THREE.Object3D, filename: string, options: GLTFExporterOptions = {}) {\n    if (!input || !filename) {\n      throw new Error(\"Invalid input or filename!\");\n    }\n    // Something is wrong when upgrading threejs version, so disable this feature for now\n    // console.warn(\"Not implemented yet!\");\n    const exporter = new GLTFExporter();\n    const DEFAULT_OPTIONS: GLTFExporterOptions = {\n      binary: true,\n      onlyVisible: false,\n      includeCustomExtensions: false\n    };\n    options = Object.assign({}, DEFAULT_OPTIONS, options);\n    exporter.parse(input, (gltf: object) => {\n      if (options.binary) {\n        filename = ExportUtils.addExtention(filename, ExportUtils.EXTENSION_GLB);\n        const ab = gltf as ArrayBuffer;\n        ExportUtils.saveArrayBuffer(ab, filename);\n      } else {\n        filename = ExportUtils.addExtention(filename, ExportUtils.EXTENSION_GLTF);\n        ExportUtils.saveJson(gltf, filename);\n      }\n    }, (error: ErrorEvent) => console.log(error),\n    options);\n  }\n\n  /**\n   * Exports given object to obj file\n   */\n  public static exportToObj(input: THREE.Object3D, filename: string) {\n    if (!input || !filename) {\n      throw new Error(\"Invalid input or filename!\");\n    }\n    filename = ExportUtils.addExtention(filename, ExportUtils.EXTENSION_OBJ);\n    const exporter = new OBJExporter();\n    const result = exporter.parse(input);\n    ExportUtils.saveString(result, filename);\n  }\n\n  /**\n   * Exports given object to draco(drc) file\n   */\n  public static exportToDraco(input: THREE.Mesh, filename: string, options: DRACOExporterOptions = {}) {\n    if (!input || !filename) {\n      throw new Error(\"Invalid input or filename!\");\n    }\n    filename = ExportUtils.addExtention(filename, ExportUtils.EXTENSION_DRACO);\n    const exporter = new DRACOExporter();\n    const DEFAULT_OPTIONS: DRACOExporterOptions = {\n      encodeSpeed: 5\n    };\n    options = Object.assign({}, DEFAULT_OPTIONS, options);\n    const result = exporter.parse(input, options);\n    ExportUtils.saveArrayBuffer(result, filename);\n  }\n\n  /**\n   * Exports to threejs json\n   * @param input\n   * @param filename\n   */\n  public static exportToThreeJsJson(input: THREE.Object3D, filename: string) {\n    const json = input.toJSON();\n    if (!filename.toLowerCase().endsWith(ExportUtils.EXTENSION_JSON)) {\n      filename += ExportUtils.EXTENSION_JSON;\n    }\n    ExportUtils.saveJson(json, filename);\n  }\n\n  /**\n   * Saves blob as file\n   */\n  static save(blob: Blob, filename: string) {\n    let link = ExportUtils.downloadLink;\n    if (!link) {\n      link = document.createElement(\"a\");\n      link.style.display = \"none\";\n      document.body.appendChild(link);\n      ExportUtils.downloadLink = link;\n    }\n    link.href = URL.createObjectURL(blob);\n    link.download = filename;\n    link.click();\n  }\n\n  static saveArrayBuffer(buffer: ArrayBuffer, filename: string) {\n    ExportUtils.save(new Blob([buffer], { type: \"application/octet-stream\" }), filename);\n  }\n\n  static saveJson(json: Object, filename: string) {\n    ExportUtils.saveJsonString(JSON.stringify(json), filename);\n  }\n\n  static saveJsonString(jsonString: string, filename: string) {\n    ExportUtils.save(new Blob([jsonString], { type: \"application/json\" }), filename);\n  }\n\n  static saveString(str: string, filename: string) {\n    ExportUtils.save(new Blob([str], { type: \"text/csv\" }), filename);\n  }\n\n  /**\n   * Adds extention if missing\n   */\n  private static addExtention(filename: string, extension: string) {\n    if (!filename.toLowerCase().endsWith(extension.toLowerCase())) {\n      filename += extension;\n    }\n    return filename;\n  }\n}\n","/**\n * To improve performance, we can set object.matrixAutoUpdate = false for static or rarely moving objects and\n * manually call object.updateMatrix() whenever their position/rotation/quaternion/scale are updated.\n * Add a constrant here, so developer can change it here easily for debugging.\n */\nexport const matrixAutoUpdate = false;\n","import * as THREE from \"three\";\n\n/**\n * Exploder class is used to explode an object\n */\nexport default class Exploder {\n  static DEFAULT_SCALE = 1;\n  private scene: THREE.Scene;\n  private objectId: number; // target object to be exploded\n  public position: THREE.Vector3; // position of exploder\n  private scale: number; // power of exploder, means how far will a sub-object exploded away\n  private explodedTimes: number = 0; // an object can be exploded more than once\n  private isExplodeUp: boolean = false; // only explode at y direction\n\n  /**\n   * Constructor of Explode\n   * @param objectId target object id, that is going to be exploded\n   * @param position if undefined, will explode object by its center\n   * @param scale scale factor, 1 means 1 time farer away from exploder's position\n   */\n  public constructor(scene: THREE.Scene, objectId: number, position: THREE.Vector3 | undefined = undefined, scale: number = Exploder.DEFAULT_SCALE) {\n    this.scene = scene;\n    this.objectId = objectId;\n    if (!objectId) {\n      console.log(`[EXP] Invalid objectId: ${objectId}`);\n    }\n    this.scale = scale;\n    if (scale <= 0) {\n      console.log(`[EXP] Invalid scale: ${scale}`);\n    }\n    if (position) {\n      this.position = position;\n    } else {\n      this.position = new THREE.Vector3();\n      this.getObjectCenter(this.position);\n    }\n  }\n\n  /**\n   * Explode the object\n   */\n  public explode() {\n    if (!this.objectId || !this.position || !this.scale) {\n      console.log(`[EXP] Invalid objectId: ${this.objectId}, or position: ${this.position}, or this.power: ${this.scale}`);\n      return;\n    }\n    const object = this.scene.getObjectById(this.objectId);\n    if (!object || !object.children) {\n      console.log(\"[EXP] No children to explode!\");\n      return;\n    }\n    console.log(`[EXP] Exploding ${object.name} at: ${this.position.x}, ${this.position.y}, ${this.position.z}`);\n    object.children.forEach(childObj => {\n      if (childObj instanceof THREE.InstancedMesh) {\n        const matrix = new THREE.Matrix4();\n        const pos = new THREE.Vector3();\n        const quaternion = new THREE.Quaternion();\n        const scale = new THREE.Vector3();\n        for (let i = 0; i < childObj.count; ++i) {\n          // gets position, update position, then set a new position\n          childObj.getMatrixAt(i, matrix);\n          matrix.decompose(pos, quaternion, scale);\n          // console.log(`obj '${childObj.name}', [${i}] old position: (${pos.x}, ${pos.y}, ${pos.z})`)\n          if (!this.isExplodeUp) {\n            const distance = pos.clone().sub(this.position); // get distance from childObj to exploder position\n            pos.addScaledVector(distance, this.scale);\n          } else {\n            const distance2 = (pos.z - this.position.z) * this.scale;\n            pos.setZ(pos.z + distance2);\n          }\n          // console.log(`obj '${childObj.name}', [${i}] new position: (${pos.x}, ${pos.y}, ${pos.z})`)\n          matrix.setPosition(pos);\n          childObj.setMatrixAt(i, matrix);\n        }\n        childObj.matrixWorldNeedsUpdate = true; // not necessary?\n        childObj.instanceMatrix.needsUpdate = true; // need to call this to upate it\n      } else {\n        const pos = childObj.position.clone();\n        if (!this.isExplodeUp) {\n          const distance = pos.sub(this.position); // get distance from childObj to exploder position\n          childObj.position.addScaledVector(distance, this.scale);\n          // if child has children, update their position too\n          // childObj.children.forEach(o => o.position.addScaledVector(distance, this.scale))\n        } else {\n          const distance2 = (pos.z - this.position.z) * this.scale;\n          childObj.position.setZ(pos.z + distance2);\n        }\n      }\n      childObj.updateMatrix(); // need to call it since object.matrixAutoUpdate is false\n    });\n    this.explodedTimes++;\n  }\n\n  /**\n   * Unexplode the object\n   */\n  public unexplode() {\n    const object = this.scene.getObjectById(this.objectId);\n    if (!object || !object.children) {\n      console.log(\"[EXP] No children to explode!\");\n      return;\n    }\n    console.log(`[EXP] Unexploding ${object.name} at: ${this.position.x}, ${this.position.y}, ${this.position.z}`);\n    for (let i = this.explodedTimes; i > 0; --i) {\n      object.children.forEach(childObj => {\n        if (childObj instanceof THREE.InstancedMesh) {\n          const matrix = new THREE.Matrix4();\n          const pos = new THREE.Vector3();\n          const quaternion = new THREE.Quaternion();\n          const scale = new THREE.Vector3();\n          const factor = this.scale / (1 + this.scale);\n          for (let i = 0; i < childObj.count; ++i) {\n            // gets position, update position, then set a new position\n            childObj.getMatrixAt(i, matrix);\n            matrix.decompose(pos, quaternion, scale);\n            // console.log(`obj '${childObj.name}', [${i}] old position: (${pos.x}, ${pos.y}, ${pos.z})`)\n            if (!this.isExplodeUp) {\n              const dist = pos.clone().sub(this.position); // need to use a cloned position here\n              dist.x *= factor;\n              dist.y *= factor;\n              dist.z *= factor;\n              pos.sub(dist);\n            } else {\n              const dist2 = (pos.z - this.position.z) * factor;\n              pos.setZ(pos.z - dist2);\n            }\n            // console.log(`obj '${childObj.name}', [${i}] new position: (${pos.x}, ${pos.y}, ${pos.z})`)\n            matrix.setPosition(pos);\n            childObj.setMatrixAt(i, matrix);\n          }\n          childObj.matrixWorldNeedsUpdate = true; // not necessary?\n          childObj.instanceMatrix.needsUpdate = true; // need to call this to upate it\n        } else {\n          const pos = childObj.position.clone();\n          const factor = this.scale / (1 + this.scale);\n          if (!this.isExplodeUp) {\n            const dist = pos.sub(this.position);\n            dist.x *= factor;\n            dist.y *= factor;\n            dist.z *= factor;\n            childObj.position.sub(dist);\n          } else {\n            const dist2 = (pos.z - this.position.z) * factor;\n            childObj.position.setZ(pos.z - dist2);\n          }\n        }\n        childObj.updateMatrix(); // need to call it since object.matrixAutoUpdate is false\n      });\n    }\n  }\n\n  public setOnlyExplodeUp(onlyExplodeUp: boolean) {\n    this.isExplodeUp = onlyExplodeUp;\n  }\n\n  private getObjectCenter(center: THREE.Vector3) {\n    const bbox = new THREE.Box3();\n    if (!this.objectId) {\n      console.log(`[EXP] Invalid objectId: ${this.objectId}`);\n      return;\n    }\n    const object = this.scene.getObjectById(this.objectId);\n    if (!object || !object.children) {\n      console.log(\"[EXP] No children to explode!\");\n      return;\n    }\n    object.traverse(obj => {\n      bbox.expandByObject(obj);\n    });\n    bbox.getCenter(center);\n  }\n}\n","import * as THREE from \"three\";\nimport Exploder from \"../exploder/Exploder\";\n\n/**\n * Util methods about Scene\n */\nexport default class SceneUtils {\n  /**\n   * Get all visible objects' bounding box in a scene.\n   * @param scene\n   */\n  static getVisibleObjectBoundingBox(scene: THREE.Scene): THREE.Box3 {\n    const bbox = new THREE.Box3();\n    scene.traverseVisible((object) => {\n      if (object instanceof THREE.Mesh && object.userData.selectable !== false) {\n        bbox.expandByObject(object);\n      }\n    });\n    return bbox;\n  }\n\n  public static getObjectsBoundingBox(scene: THREE.Scene, objectUuids: string[]): THREE.Box3 {\n    const bbox = new THREE.Box3();\n    objectUuids.forEach(uuid => {\n      const object = scene.getObjectByProperty(\"uuid\", uuid);\n      if (object) {\n        const box = SceneUtils.getBoundingBox(object); // use getBoundingBox rather than expandByObject to work for InstancedMesh\n        if (!box.isEmpty()) {\n          bbox.union(box);\n        }\n      }\n    });\n    return bbox;\n  }\n\n  /**\n   * Box3.expandByObject() doesn't work well in some case.\n   * E.g. when object's position is far away from object's center?\n   * When objects are instanced?\n   * That's why we need a method to find bounding box by object's children!\n   * And, better to do sampling in case there are too many children.\n   */\n  public static getBoundingBox(object: THREE.Object3D, sampling = true): THREE.Box3 {\n    const bbox = new THREE.Box3();\n    if (object instanceof THREE.InstancedMesh) {\n      return SceneUtils.getInstancedMeshBoundingBox(object);\n    }\n    if (object.children.length === 0) {\n      bbox.expandByObject(object); // for leaf object, call expandByObject directly\n      return bbox;\n    }\n    // now, need to get geometry from children\n    const count = object.children.length;\n    let divisor = 1; // used for sampling\n    if (count > 20) divisor = 3; // sampling 1/3\n    if (count > 100) divisor = 5;\n    if (count > 200) divisor = 10;\n    if (count > 1000) divisor = 100; // sampling 1/100\n    object.updateMatrixWorld(false);\n    // const matrixWorld = object.matrixWorld\n    for (let i = 0; i < count; ++i) {\n      const child = object.children[i] as any;\n      // if don't do sampling, expand by each children; Otherwise, only expand by some children\n      if (!sampling || i % divisor === 0) {\n        child.updateMatrix();\n        if (child instanceof THREE.InstancedMesh) {\n          const box = SceneUtils.getInstancedMeshBoundingBox(child);\n          // box.applyMatrix4(matrixWorld) // need to consider parent's world matrix\n          bbox.union(box);\n        } else {\n          bbox.expandByObject(child);\n        }\n      }\n    }\n    return bbox;\n  }\n\n  /**\n   * InstancedMesh is different, we need to get its child meshes in order to get the bounding box\n   */\n  public static getInstancedMeshBoundingBox(mesh: THREE.InstancedMesh): THREE.Box3 {\n    const bbox = new THREE.Box3();\n    const matrix = new THREE.Matrix4();\n    for (let i = 0; i < mesh.count; ++i) {\n      mesh.getMatrixAt(i, matrix);\n      const geom = mesh.geometry.clone();\n      if (geom.boundingBox) {\n        const box = geom.boundingBox.applyMatrix4(matrix);\n        if (!box.isEmpty() && !isNaN(box.min.x) && !isNaN(box.min.y) && !isNaN(box.min.z) && !isNaN(box.max.x) && !isNaN(box.max.y) && !isNaN(box.max.z)) {\n          bbox.union(box);\n        }\n      }\n    }\n    bbox.applyMatrix4(mesh.matrixWorld); // need to apply matrixWorld\n    return bbox;\n  }\n\n  private static explodeObject(object: THREE.Object3D, scene: THREE.Scene, exploderDict: { [objId: number]: Exploder }, onlyExplodeUp = false) {\n    if (exploderDict[object.id]) {\n      // if there is existing explode, probably it is exploded already. Need to unexplode it first.\n      exploderDict[object.id].unexplode();\n    }\n    const position = new THREE.Vector3();\n    SceneUtils.getPositionCenter(object, position);\n    const exploder = new Exploder(scene, object.id, position);\n    exploder.setOnlyExplodeUp(onlyExplodeUp);\n    exploder.explode();\n    exploderDict[object.id] = exploder;\n  }\n\n  static explodeObjects(scene: THREE.Scene, exploderDict: { [objId: number]: Exploder }, objectUuids: string[], onlyExplodeUp = false) {\n    // const exploderDict: { [objId: number]: Exploder } = {}\n    scene.traverse(object => {\n      if (objectUuids.find(id => id === object.uuid)) {\n        // convert uuid to id, and new Exploder for each object to be exploded\n        if (object.children && object.children.length === 1) {\n          // if there is only one child, explode its child\n          SceneUtils.explodeObject(object.children[0], scene, exploderDict, onlyExplodeUp);\n        } else {\n          SceneUtils.explodeObject(object, scene, exploderDict, onlyExplodeUp);\n        }\n      }\n    });\n    return exploderDict;\n  }\n\n  static unexplodeObjects(scene: THREE.Scene, exploderDict: { [objId: number]: Exploder }) {\n    scene.traverse(object => {\n      const exploder = exploderDict[object.id];\n      if (exploder) {\n        exploder.unexplode();\n        delete exploderDict[object.id];\n      }\n    });\n  }\n\n  public static getPositionCenter(object: THREE.Object3D, center: THREE.Vector3) {\n    const bbox = SceneUtils.getBoundingBox(object);\n    bbox.getCenter(center);\n    center.y = bbox.min.y; // while, set the elevation value to the min, rather than the real center of y-axis\n  }\n}\n","import * as THREE from \"three\";\nimport { matrixAutoUpdate } from \"@/core/Constants\";\nimport Exploder from \"../exploder/Exploder\";\nimport SceneUtils from \"./SceneUtils\";\n\nexport interface MaterialInfo {\n  uuid: string;\n  material?: THREE.Material,\n  clonedMaterial?: THREE.Material,\n  opacity: number;\n  transparent: boolean;\n}\n\n/**\n * Util class for Threejs Object\n */\nexport class ObjectUtils {\n  /**\n   * Clears any styles, including transparency, wireframe mode, filter by floor, etc.\n   * @param object\n   */\n  public static resetObjectStyle(object: THREE.Object3D) {\n    this.revertWireframeMode(object);\n    // as we don't know the materialInfoList, there is side effect that the opacity will be set to 1.0\n    this.revertObjectOpacity(object, []);\n    // revert visible\n    this.revertVisibleForFloors(object);\n  }\n\n  /**\n   * Clears any styles, including transparency, wireframe mode, filter by floor, etc.\n   */\n  public static resetObjectStyleByUuid(scene: THREE.Scene, uuid: string) {\n    const object = this.getObjectByUuid(scene, uuid);\n    this.resetObjectStyle(object);\n  }\n\n  /**\n   * Sets an object's opacity\n   * @returns returns MaterialInfo list in case caller want to revert the opacity\n   */\n  public static setObjectOpacity(object: THREE.Object3D, opacity = 0.3, includeObjectUuids?: string[], excludeObjectUuids?: string[]): MaterialInfo[] {\n    // need to store the original materials' opacity, so that we can revert the transparent mode back\n    const materialInfoList: MaterialInfo[] = [];\n    const addOpacity = (mat: THREE.Material) => {\n      // only add it when there is no such a material in cache list yet\n      if (!materialInfoList.find(m => m.uuid === mat.uuid)) {\n        materialInfoList.push({ uuid: mat.uuid, opacity: mat.opacity, transparent: mat.transparent });\n        mat.opacity *= opacity; // shouldn't set to target opacity directly, because it may already has opacity\n        mat.transparent = true;\n      }\n    };\n    const addOpacityForClonedMaterial = (mat: THREE.Material): THREE.Material | undefined => {\n      // only add it when there is no such a material in cache list yet\n      const matInfo = materialInfoList.find(m => m.uuid === mat.uuid);\n      if (!matInfo) {\n        const clonedMaterial = mat.clone();\n        materialInfoList.push({ uuid: mat.uuid, opacity: mat.opacity, transparent: mat.transparent, material: mat, clonedMaterial });\n        clonedMaterial.opacity *= opacity; // shouldn't set to target opacity directly, because it may already has opacity\n        clonedMaterial.transparent = true;\n        return clonedMaterial;\n      }\n      return matInfo.clonedMaterial;\n    };\n    object.traverse(obj => {\n      if (excludeObjectUuids && excludeObjectUuids.indexOf(obj.uuid) !== -1) {\n        return; // excluded\n      }\n      if (includeObjectUuids && includeObjectUuids.indexOf(obj.uuid) === -1) {\n        return; // not in include list\n      }\n      // probably not only Mesh, but also some other object like InstancedMesh should be considered!\n      if (obj instanceof THREE.Mesh) {\n        const mesh = obj as THREE.Mesh;\n        // if there is any includeObjectUuids, we should copy materials rather than change them directly\n        if (includeObjectUuids) {\n          if (Array.isArray(mesh.material)) {\n            const materials: THREE.Material[] = [];\n            mesh.material.forEach(mat => {\n              const m = addOpacityForClonedMaterial(mat);\n              if (m) {\n                materials.push(m);\n              }\n            });\n            mesh.material = materials;\n          } else if (mesh.material) {\n            const m = addOpacityForClonedMaterial(mesh.material);\n            if (m) {\n              mesh.material = m;\n            }\n          }\n        } else {\n          if (Array.isArray(mesh.material)) {\n            mesh.material.forEach(mat => {\n              addOpacity(mat);\n            });\n          } else if (mesh.material) {\n            const mat = mesh.material;\n            addOpacity(mat);\n          }\n        }\n      }\n    });\n    return materialInfoList;\n  }\n\n  /**\n   * Reverts an object's opacity\n   * @param object the root object\n   */\n  public static revertObjectOpacity(object: THREE.Object3D, materialInfoList: MaterialInfo[], includeObjectUuids?: string[], excludeObjectUuids?: string[]) {\n    const revertOpacity = (mat: THREE.Material) => {\n      // revert opacity for this material\n      const material = materialInfoList.find(m => m.uuid === mat.uuid);\n      if (material) {\n        mat.opacity = material.opacity;\n        mat.transparent = material.transparent;\n      } else {\n        // if we cannot find the MaterialInfo, still need to set opacity to 1.0\n        mat.opacity = 1.0;\n      }\n    };\n    const tryGetOriginalMaterial = (mat: THREE.Material) => {\n      // check if the passed in mat is a cloned one\n      const matInfo = materialInfoList.find(m => m.clonedMaterial && m.clonedMaterial.uuid === mat.uuid);\n      if (matInfo) {\n        return matInfo.material;\n      }\n      return undefined;\n    };\n    object.traverse(mesh => {\n      if (excludeObjectUuids && excludeObjectUuids.indexOf(mesh.uuid) !== -1) {\n        return; // excluded\n      }\n      if (includeObjectUuids && includeObjectUuids.indexOf(mesh.uuid) === -1) {\n        return; // not in include list\n      }\n      // probably not only Mesh, but also some other object like InstancedMesh should be considered!\n      if (mesh instanceof THREE.Mesh) {\n        // if there is any includeObjectUuids, we should copy materials rather than change them directly\n        if (includeObjectUuids) {\n          if (Array.isArray(mesh.material)) {\n            const materials: THREE.Material[] = [];\n            mesh.material.forEach(mat => {\n              const m = tryGetOriginalMaterial(mat);\n              if (m) {\n                materials.push(m);\n              }\n            });\n            mesh.material = materials;\n          } else if (mesh.material) {\n            const m = tryGetOriginalMaterial(mesh.material);\n            if (m) {\n              mesh.material = m;\n            }\n          }\n        } else {\n          if (Array.isArray(mesh.material)) {\n            mesh.material.forEach(mat => {\n              revertOpacity(mat);\n            });\n          } else if (mesh.material) {\n            const mat = mesh.material;\n            revertOpacity(mat);\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Sets an object's opacity\n   */\n  public static setObjectOpacityByUuid(scene: THREE.Scene, uuid: string, opacity = 0.3, includeObjectUuids?: string[], excludeObjectUuids?: string[]): MaterialInfo[] {\n    const object = scene.getObjectByProperty(\"uuid\", uuid);\n    if (!object) {\n      throw new Error(`Failed to find object by uuid: ${uuid}`);\n    }\n    return ObjectUtils.setObjectOpacity(object, opacity, includeObjectUuids, excludeObjectUuids);\n  }\n\n  /**\n   * Reverts an object's opacity\n   */\n  public static revertObjectOpacityByUuid(scene: THREE.Scene, uuid: string, materialInfoList: MaterialInfo[], includeObjectUuids?: string[], excludeObjectUuids?: string[]) {\n    const object = scene.getObjectByProperty(\"uuid\", uuid);\n    if (!object) {\n      throw new Error(`Failed to find object by uuid: ${uuid}`);\n    }\n    ObjectUtils.revertObjectOpacity(object, materialInfoList, includeObjectUuids, excludeObjectUuids);\n  }\n\n  /**\n   * Explodes an object\n   */\n  public static explodeObject(scene: THREE.Scene, object: THREE.Object3D, explodeUp = false): Exploder {\n    const position = new THREE.Vector3();\n    SceneUtils.getPositionCenter(object, position);\n    const exploder = new Exploder(scene, object.id, position);\n    exploder.setOnlyExplodeUp(explodeUp);\n    exploder.explode();\n    return exploder;\n  }\n\n  /**\n   * Unexplodes an object\n   */\n  public static unexplodeObject(exploder: Exploder) {\n    if (!exploder) {\n      throw new Error(\"Invalid exploder!\");\n    }\n    exploder.unexplode();\n  }\n\n  /**\n   * Sets an object to be wireframe mode.\n   * In order to revert wireframe mode, we'll store original material in userData: {\n   *   materialForWireframe: THREE.Material\n   * }\n   * It seems wireframe mode have performance degradation, look at here for more info:\n   * https://stackoverflow.com/questions/45917611/shader-wireframe-of-an-object\n   */\n  public static setWireframeMode(object: THREE.Object3D) {\n    const wireframeMaterial = new THREE.MeshBasicMaterial({\n      color: 0xff5000,\n      wireframe: true,\n      transparent: true,\n      opacity: 0.8\n    });\n    object.traverseVisible(obj => {\n      if (obj instanceof THREE.Mesh) {\n        const mesh = obj as THREE.Mesh;\n        mesh.userData.materialForWireframe = mesh.material;\n        mesh.material = wireframeMaterial;\n      }\n    });\n  }\n\n  /**\n   * Sets an object to be wireframe mode.\n   */\n  public static setWireframeModeByUuid(scene: THREE.Scene, uuid: string) {\n    const object = scene.getObjectByProperty(\"uuid\", uuid);\n    if (!object) {\n      throw new Error(`Failed to find object by uuid: ${uuid}`);\n    }\n    ObjectUtils.setWireframeMode(object);\n  }\n\n  /**\n   * Reverts an object to be non-wireframe mode.\n   */\n  public static revertWireframeMode(object: THREE.Object3D) {\n    object.traverseVisible(obj => {\n      if (obj instanceof THREE.Mesh) {\n        // caller need to make sure there is userData.materialForWireframe\n        if (obj.userData.materialForWireframe) {\n          obj.material = obj.userData.materialForWireframe;\n          obj.userData.materialForWireframe = undefined; // clean it up\n        }\n      }\n    });\n  }\n\n  /**\n   * Reverts an object to be non-wireframe mode.\n   */\n  public static revertWireframeModeByUuid(scene: THREE.Scene, uuid: string) {\n    const object = scene.getObjectByProperty(\"uuid\", uuid);\n    if (!object) {\n      throw new Error(`Failed to find object by uuid: ${uuid}`);\n    }\n    ObjectUtils.revertWireframeMode(object);\n  }\n\n  /**\n   * Finds objects by name, id, userData, etc.\n   * @param scene\n   * @param targetUuids target object uuids to find from\n   * @param searchText search text\n   * @param findFirst only find the first\n   */\n  private static findInner(scene: THREE.Scene, searchText: string, targetUuids: string[] = [], findFirst = false): THREE.Object3D[] {\n    const val = searchText.toLowerCase();\n    const results: THREE.Object3D[] = [];\n\n    const matchStr = (str: string) => {\n      return str.toLowerCase().indexOf(val) !== -1;\n    };\n    const matchNum = (num: number) => {\n      return num.toString().indexOf(val) !== -1;\n    };\n    const matchUserData = (userData: any) => {\n      if (userData.name) {\n        if (userData.name.toLowerCase().indexOf(val) !== -1) {\n          return true;\n        }\n      }\n      if (userData.gltfExtensions) {\n        const ext = userData.gltfExtensions;\n        const id = (ext.objectId && ext.objectId.Value) || (ext.elementId && ext.elementId.Value);\n        if (id && id.toLowerCase().indexOf(val) !== -1) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    if (targetUuids.length > 0) {\n      for (let i = 0; i < targetUuids.length; ++i) {\n        const uuid = targetUuids[i];\n        const object = scene.getObjectByProperty(\"uuid\", uuid);\n        if (object) {\n          object.traverse(obj => {\n            if (matchStr(obj.name) || matchNum(obj.id) || matchUserData(obj.userData)) {\n              results.push(obj);\n            }\n          });\n        }\n        if (findFirst && results.length > 0) {\n          return [results[0]];\n        }\n      }\n    } else {\n      // if no target uuid is passed in, find it from whole scene\n      scene.traverse(obj => {\n        if (matchStr(obj.name) || matchNum(obj.id) || matchUserData(obj.userData)) {\n          results.push(obj);\n        }\n      });\n      if (findFirst && results.length > 0) {\n        return [results[0]];\n      }\n    }\n    return results;\n  }\n\n  /**\n   * Finds objects by given string\n   */\n  public static find(scene: THREE.Scene, searchText: string, targetUuids: string[] = [], findFirst = false): THREE.Object3D[] {\n    return this.findInner(scene, searchText, targetUuids);\n  }\n\n  /**\n   * Finds the first object by given string\n   */\n  public static findFirst(scene: THREE.Scene, searchText: string, targetUuids: string[] = [], findFirst = false): THREE.Object3D | undefined {\n    const results = this.findInner(scene, searchText, targetUuids, true);\n    if (results.length > 0) {\n      return results[0];\n    }\n    return undefined;\n  }\n\n  /**\n   * Checks if given string contains floor\n   * @param str string to match, e.g. '5F(xxx)'\n   */\n  private static getFloorsFromString(str: string): number[] {\n    const results: number[] = [];\n    // Regular text to find if there is floor in a string.\n    // It matches such cases: 5F, 15F, -1F, a5F, a5F(xxx), 10.5F\n    // It doesn't match cases: 5f, 5Fa, 5F_, 5F-, 10.3F\n    const reg = new RegExp(/(?:-?(?:\\d+(?:\\.5)?)F)(?=\\W|$)/, \"g\"); // case sensitive\n    const arr = reg.exec(str);\n    if (arr && arr.length > 0) {\n      arr.forEach(r => {\n        if (r) {\n          const f = r.replace(\"F\", \"\");\n          const num = Number(f);\n          if (num) {\n            results.push(num);\n          } else {\n            console.log(`[OU] invalid floor: ${r}`); // TODO: remove this later\n          }\n        }\n      });\n    }\n    return results;\n  }\n\n  /**\n   * Matches if a string contains floor string\n   * @param str string to match, e.g. '5F(xxx)'\n   * @param floor '5F', etc.\n   */\n  private static matchFloor(str: string, floor: number): boolean {\n    const results = this.getFloorsFromString(str);\n    const i = results.findIndex(r => r === floor);\n    return i !== -1;\n  }\n\n  /**\n   * Matches if a string contains one of floor string in floors\n   * @param str string to match, e.g. '5F(xxx)'\n   * @param floor '5F', etc.\n   */\n  private static matchFloors(str: string, floors: number[]): boolean {\n    const results = this.getFloorsFromString(str);\n    const i = results.findIndex(r => {\n      const j = floors.findIndex(f => f === r);\n      return j !== -1;\n    });\n    return i !== -1;\n  }\n\n  /**\n   * Distincts/find floors from models, by checking children object.name\n   */\n  public static distinctFloors(scene: THREE.Scene, modelUuid: string[]): string[] {\n    const floors: { [floor: number]: boolean } = [];\n\n    const match = (name: string) => {\n      const results = this.getFloorsFromString(name);\n      results.forEach(f => {\n        floors[f] = true;\n      });\n    };\n\n    modelUuid.forEach(uuid => {\n      const object = scene.getObjectByProperty(\"uuid\", uuid);\n      if (object) {\n        object.traverse(obj => {\n          match(obj.name);\n          if (obj.userData.gltfExtensions) {\n            const ext = obj.userData.gltfExtensions;\n            if (ext.level && ext.level.Value) {\n              match(ext.level.Value);\n            }\n          }\n        });\n      }\n    });\n\n    return Object.keys(floors).sort();\n  }\n\n  /**\n   * Sets object's visible to true if its name, etc. match one of given floor.\n   * This method won't affect other objects that don't match.\n   */\n  public static traverseObjectByFloors(scene: THREE.Scene, modelUuid: string, floors: number[], matchCallback?: (object: THREE.Object3D) => void, unmatchCallback?: (object: THREE.Object3D) => void) {\n    const object = scene.getObjectByProperty(\"uuid\", modelUuid);\n    if (!object) {\n      return [];\n    }\n    // const uuids: string[] = []\n    object.traverse(obj => {\n      let isMatch = this.matchFloors(obj.name, floors);\n      if (!isMatch) {\n        if (obj.userData && obj.userData.gltfExtensions) {\n          const ext = obj.userData.gltfExtensions;\n          if (ext.level && ext.level.Value) {\n            isMatch = this.matchFloors(ext.level.Value, floors);\n          }\n        }\n      }\n      if (isMatch && matchCallback) {\n        matchCallback(obj);\n      }\n      if (!isMatch && unmatchCallback) {\n        unmatchCallback(obj);\n      }\n    });\n  }\n\n  /**\n   * Sets object belong to given floors to be visible\n   * @param modelUuid root or parent object uuid\n   * @param makeUnmatchedInvisible if it should make unmatched object invisible\n   */\n  public static setVisibleForFloors(scene: THREE.Scene, modelUuid: string, floors: number[], makeUnmatchedInvisible = true) {\n    this.traverseObjectByFloors(scene, modelUuid, floors, (object: THREE.Object3D) => {\n      let obj: THREE.Object3D | undefined = object;\n      while (obj) {\n        obj.visible = true;\n        obj = obj.parent || undefined;\n      }\n    }, (object: THREE.Object3D) => {\n      if (makeUnmatchedInvisible) {\n        object.visible = false;\n      }\n    });\n  }\n\n  public static revertVisibleForFloors(object: THREE.Object3D) {\n    object.traverse(obj => {\n      obj.visible = true;\n    });\n  }\n\n  public static revertVisibleForFloorsByUuid(scene: THREE.Scene, uuid: string) {\n    const object = this.getObjectByUuid(scene, uuid);\n    this.revertVisibleForFloors(object);\n  }\n\n  private static getObjectByUuid(scene: THREE.Scene, uuid: string) {\n    const object = scene.getObjectByProperty(\"uuid\", uuid);\n    if (!object) {\n      throw new Error(`Failed to find object by uuid: ${uuid}`);\n    }\n    return object;\n  }\n\n  /**\n   * Outline default material\n   */\n  private static OUTLINE_MATERIAL = new THREE.LineBasicMaterial({ name: \"outline\", color: 0x000000, transparent: true, opacity: 0.2 });\n\n  /**\n   * Creates outlines for given object and children\n   * @param options 'replaceOriginalObject' must be used carefully, it removes original objects and cannot get back for now.\n   *   It can be used in case for really large models that has a bad performace.\n   */\n  public static addOutlines(\n    object: THREE.Object3D,\n    material = this.OUTLINE_MATERIAL.clone(),\n    options = { visibleOnly: true, meshOnly: true, replaceOriginalObject: false }): THREE.LineSegments[] {\n    if (!object) {\n      return [];\n    }\n    // if not a parent object and invisible and not a mesh, then ignore\n    if ((object.children.length === 0) &&\n      ((options.visibleOnly && !object.visible) || (options.meshOnly && !(object instanceof THREE.Mesh)))) {\n      return [];\n    }\n    const obj = object as any;\n    const length = obj.children.length;\n    if (length > 0) {\n      for (let i = length - 1; i >= 0; --i) { // need to iterate backward\n        const o = obj.children[i];\n        const lines = this.addOutlines(o, material, options);\n        lines.forEach(line => line.applyMatrix4(obj.matrixWorld)); // should use matrixWorld rather than matrix\n      }\n    }\n    if (!obj.geometry) {\n      return [];\n    }\n\n    const createOutline = (geometry: THREE.BufferGeometry, matrix: THREE.Matrix4): THREE.LineSegments => {\n      // edges within given thresholdAngle will be ignored\n      const geom = new THREE.EdgesGeometry(geometry, 5); // create EdgesGeometry from original geometry\n      geom.applyMatrix4(matrix);\n      // create outline and add it as a child\n      const line = new THREE.LineSegments(geom, material);\n      // line.position.set(obj.position.x, obj.position.y, obj.position.z) // need to set position in some case!\n      // use userData: { selectable: false } to indicate an object is not selectable\n      line.userData.selectable = false;\n      line.userData.isOutline = true;\n      line.matrixAutoUpdate = matrixAutoUpdate; // for better performance\n      line.updateMatrix(); // need to call it since object.matrixAutoUpdate is false\n      return line;\n    };\n\n    const lines: THREE.LineSegments[] = [];\n    if (obj instanceof THREE.InstancedMesh) {\n      for (let i = 0; i < obj.count; ++i) {\n        const m = new THREE.Matrix4();\n        obj.getMatrixAt(i, m);\n        const line = createOutline(obj.geometry, m);\n        // line.position.set(obj.position.x, obj.position.y, obj.position.z)\n        if (options.replaceOriginalObject && obj.parent) {\n          const parent = obj.parent;\n          parent.children.push(line);\n        } else {\n          obj.children.push(line);\n        }\n        lines.push(line);\n      }\n    } else {\n      // create outline and add it as a child\n      const line = createOutline(obj.geometry, obj.matrix);\n      // line.position.set(obj.position.x, obj.position.y, obj.position.z)\n      if (options.replaceOriginalObject && obj.parent) {\n        // In this case, we'll remove the object. Which means, user cann't get it back!\n        // parent.remove(obj)\n        obj.removeFromParent(); // removeFromParent is added from r129\n        obj.geometry.dispose(); // TODO: consider to dispose unused materials too\n        const parent = obj.parent;\n        parent.children.push(line);\n      } else {\n        obj.children.push(line);\n      }\n      lines.push(line);\n    }\n    return lines;\n  }\n\n  /**\n   * Recursively removes outlines for given object and children\n   */\n  public static removeOutlines(object: THREE.Object3D) {\n    if (!object || !Array.isArray(object.children)) {\n      return;\n    }\n    for (let i = object.children.length - 1; i >= 0; --i) { // iterate from back to front\n      const child = object.children[i];\n      if (child.children.length > 0) {\n        this.removeOutlines(child);\n      }\n      if (child.userData.isOutline) {\n        object.remove(child);\n      }\n    }\n  }\n\n  /**\n   * Recursively checks if an object or children has outline already\n   */\n  public static hasOutline(object: THREE.Object3D): boolean {\n    let result = false;\n    for (let i = 0; i < object.children.length; ++i) {\n      const obj = object.children[i];\n      if (obj.userData.isOutline) {\n        result = true;\n        break;\n      }\n      if (obj.children.length > 0) {\n        result = this.hasOutline(obj);\n        if (result) {\n          break;\n        }\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Sets outline visiblility for given object and children\n   */\n  public static setOutlinesVisibility(object: THREE.Object3D, visible: boolean) {\n    object.traverse(obj => {\n      if (obj.userData.isOutline) {\n        obj.visible = visible;\n      }\n    });\n  }\n}\n","import { Box3, Scene, WebGLRenderer, Vector3, Mesh, MeshBasicMaterial, Vector2, Raycaster, PerspectiveCamera, Group, LineSegments, LineBasicMaterial, Plane, PlaneGeometry, BackSide, BufferGeometry, OrthographicCamera } from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\n// Note: this code is originally from https://github.com/screamsyk/three.js-clipping\n\n/**\n * Object's box section\n */\nexport class BaseBoxSection {\n  static MIN_WIDTH = 1; // min width of section box\n  // basic member data\n  public isOpen: boolean = false;\n  protected sectionBox?: Box3;\n  protected scene: Scene;\n  protected camera: PerspectiveCamera | OrthographicCamera;\n  protected renderer: WebGLRenderer;\n  protected controls: OrbitControls;\n\n  /**\n   * Constructor\n   * @param scene\n   * @param camera\n   * @param renderer\n   * @param controls\n   */\n  constructor(scene: Scene, camera: PerspectiveCamera | OrthographicCamera, renderer: WebGLRenderer, controls: OrbitControls) {\n    this.scene = scene;\n    this.camera = camera;\n    this.renderer = renderer;\n    this.controls = controls;\n  }\n\n  /**\n   * If sectionBox is not assigned in constructor, then set it here.\n   * For now, we only support it to be set once. Otherwise, need to check isOpen status, and initSectionBox properly.\n   * @param sectionBox\n   */\n  protected setSectionBox(sectionBox: Box3) {\n    if (this.sectionBox) {\n      throw new Error(\"sectionBox is assigned already!\");\n    }\n    this.sectionBox = sectionBox;\n  }\n\n  /**\n   * Starts to clip\n   */\n  open() {\n    this.initSectionBox();\n    this.addMouseListener();\n    this.isOpen = true;\n  }\n\n  /**\n   * Close clipper\n   */\n  close() {\n    this.isOpen = false;\n    this.removeMouseListener();\n    this.clearSectionBox();\n  }\n\n  /**\n   * reset clipper\n   */\n  reset() {\n    this.close();\n    this.open();\n  }\n\n  // --------------- Clipping box --------------------\n\n  // basic data member\n  protected boxMin: Vector3 = new Vector3(); // min point of section box\n  protected boxMax: Vector3 = new Vector3(); // max point of section box\n  protected group: Group = new Group(); // contains any object for section\n  protected planes: Array<Plane> = []; // section planes\n  protected vertices = [\n    new Vector3(), new Vector3(), new Vector3(), new Vector3(), // 4 vertices at the top\n    new Vector3(), new Vector3(), new Vector3(), new Vector3() // 4 vertices at the bottom\n  ];\n\n  protected faces: Array<BoxFace> = []; // eslint-disable-line\n  protected lines: Array<BoxLine> = []; // eslint-disable-line\n\n  /**\n   * Initialize clip box\n   */\n  protected initSectionBox() {\n    if (!this.sectionBox) {\n      throw new Error(\"Need to set sectionBox first!\");\n    }\n    this.boxMin = this.sectionBox.min;\n    this.boxMax = this.sectionBox.max;\n    this.group = new Group();\n    this.initPlanes();\n    this.initOrUpdateVertices();\n    this.initOrUpdateFaces();\n    this.initOrUpdateLines();\n    this.scene.add(this.group);\n  }\n\n  /**\n   * Initialize 6 section plane\n   */\n  protected initPlanes() {\n    this.planes = [];\n    this.planes.push(\n      new Plane(new Vector3(0, -1, 0), this.boxMax.y), // up\n      new Plane(new Vector3(0, 1, 0), -this.boxMin.y), // down\n      new Plane(new Vector3(1, 0, 0), -this.boxMin.x), // left\n      new Plane(new Vector3(-1, 0, 0), this.boxMax.x), // right\n      new Plane(new Vector3(0, 0, -1), this.boxMax.z), // front\n      new Plane(new Vector3(0, 0, 1), -this.boxMin.z) // back\n    );\n  }\n\n  protected updatePlanes() {\n    this.planes[0].constant = this.boxMax.y;\n    this.planes[1].constant = -this.boxMin.y;\n    this.planes[2].constant = -this.boxMin.x;\n    this.planes[3].constant = this.boxMax.x;\n    this.planes[4].constant = this.boxMax.z;\n    this.planes[5].constant = -this.boxMin.z;\n  }\n\n  /**\n   * Initialize or update 8 vertices of section box\n   */\n  protected initOrUpdateVertices() {\n    this.vertices[0].set(this.boxMin.x, this.boxMax.y, this.boxMin.z); // 4 vertices at the top\n    this.vertices[1].set(this.boxMax.x, this.boxMax.y, this.boxMin.z);\n    this.vertices[2].set(this.boxMax.x, this.boxMax.y, this.boxMax.z);\n    this.vertices[3].set(this.boxMin.x, this.boxMax.y, this.boxMax.z);\n    this.vertices[4].set(this.boxMin.x, this.boxMin.y, this.boxMin.z); // 4 vertices at the bottom\n    this.vertices[5].set(this.boxMax.x, this.boxMin.y, this.boxMin.z);\n    this.vertices[6].set(this.boxMax.x, this.boxMin.y, this.boxMax.z);\n    this.vertices[7].set(this.boxMin.x, this.boxMin.y, this.boxMax.z);\n  }\n\n  /**\n   * Initialize 6 faces of section box\n   */\n  protected initOrUpdateFaces() {\n    const v = this.vertices;\n    if (!this.faces || this.faces.length === 0) {\n      this.faces = [];\n      this.faces.push(\n        new BoxFace(\"yUp\", [v[0], v[1], v[2], v[3]]), // up\n        new BoxFace(\"yDown\", [v[4], v[7], v[6], v[5]]), // down\n        new BoxFace(\"xLeft\", [v[0], v[3], v[7], v[4]]), // left\n        new BoxFace(\"xRight\", [v[1], v[5], v[6], v[2]]), // right\n        new BoxFace(\"zFront\", [v[2], v[6], v[7], v[3]]), // front\n        new BoxFace(\"zBack\", [v[0], v[4], v[5], v[1]]) // back\n      );\n      this.group.add(...this.faces);\n      this.faces.forEach(face => {\n        this.group.add(face.backFace);\n      });\n    } else {\n      const f = this.faces;\n      f[0].setFromPoints([v[0], v[1], v[2], v[3]]);\n      f[1].setFromPoints([v[4], v[7], v[6], v[5]]);\n      f[2].setFromPoints([v[0], v[3], v[7], v[4]]);\n      f[3].setFromPoints([v[1], v[5], v[6], v[2]]);\n      f[4].setFromPoints([v[2], v[6], v[7], v[3]]);\n      f[5].setFromPoints([v[0], v[4], v[5], v[1]]);\n    }\n  }\n\n  /**\n   * Initialize 12 lines of section box\n   */\n  protected initOrUpdateLines() {\n    const v = this.vertices;\n    if (!this.lines || this.lines.length === 0) {\n      const f = this.faces;\n      if (!f) {\n        throw Error(\"Need to init Face first!\");\n      }\n      this.lines = [];\n      this.lines.push(\n        new BoxLine([v[0], v[1]], [f[0], f[5]]),\n        new BoxLine([v[1], v[2]], [f[0], f[3]]),\n        new BoxLine([v[2], v[3]], [f[0], f[4]]),\n        new BoxLine([v[3], v[0]], [f[0], f[2]]),\n        new BoxLine([v[4], v[5]], [f[1], f[5]]),\n        new BoxLine([v[5], v[6]], [f[1], f[3]]),\n        new BoxLine([v[6], v[7]], [f[1], f[4]]),\n        new BoxLine([v[7], v[4]], [f[1], f[2]]),\n        new BoxLine([v[0], v[4]], [f[2], f[5]]),\n        new BoxLine([v[1], v[5]], [f[3], f[5]]),\n        new BoxLine([v[2], v[6]], [f[3], f[4]]),\n        new BoxLine([v[3], v[7]], [f[2], f[4]])\n      );\n      this.group.add(...this.lines);\n    } else {\n      let i = 0;\n      this.lines[i++].setFromPoints([v[0], v[1]]);\n      this.lines[i++].setFromPoints([v[1], v[2]]);\n      this.lines[i++].setFromPoints([v[2], v[3]]);\n      this.lines[i++].setFromPoints([v[3], v[0]]);\n      this.lines[i++].setFromPoints([v[4], v[5]]);\n      this.lines[i++].setFromPoints([v[5], v[6]]);\n      this.lines[i++].setFromPoints([v[6], v[7]]);\n      this.lines[i++].setFromPoints([v[7], v[4]]);\n      this.lines[i++].setFromPoints([v[0], v[4]]);\n      this.lines[i++].setFromPoints([v[1], v[5]]);\n      this.lines[i++].setFromPoints([v[2], v[6]]);\n      this.lines[i++].setFromPoints([v[3], v[7]]);\n    }\n  }\n\n  /**\n   * Clears clip box\n   */\n  protected clearSectionBox() {\n    this.scene.remove(this.group);\n    this.renderer.domElement.style.cursor = \"\";\n  }\n\n  // ------------------- Mouse events -----------------------\n\n  // basic data member\n  protected raycaster: Raycaster = new Raycaster();\n  protected mousePosition: Vector2 = new Vector2();\n  // the face that the mouse is hovering\n  protected activeFace: BoxFace | null = null; // eslint-disable-line\n\n  /**\n   * Adds mouse event listener\n   */\n  private addMouseListener() {\n    window.addEventListener(\"pointermove\", this.onMouseMove);\n    window.addEventListener(\"pointerdown\", this.onMouseDown);\n  }\n\n  /**\n   * Removes mouse event listener\n   */\n  private removeMouseListener() {\n    window.removeEventListener(\"pointermove\", this.onMouseMove);\n    window.removeEventListener(\"pointerdown\", this.onMouseDown);\n  }\n\n  /**\n   * Converts mouse coordinates, and updates raycaster\n   */\n  protected updateMouseAndRay(event: MouseEvent) {\n    this.mousePosition.setX((event.clientX / window.innerWidth) * 2 - 1);\n    this.mousePosition.setY(-(event.clientY / window.innerHeight) * 2 + 1);\n    this.raycaster.setFromCamera(this.mousePosition, this.camera);\n  }\n\n  /**\n   * Handles mouse move event, highlights corresponding face/lines properly\n   */\n  protected onMouseMove = (event: MouseEvent) => {\n    this.updateMouseAndRay(event);\n    const intersects = this.raycaster.intersectObjects(this.faces); // intersects for mouse and faces\n    if (intersects.length) {\n      this.renderer.domElement.style.cursor = \"pointer\";\n      const face = intersects[0].object as BoxFace;\n      if (face !== this.activeFace) {\n        if (this.activeFace) {\n          this.activeFace.setActive(false);\n        }\n        face.setActive(true);\n        this.activeFace = face;\n      }\n    } else {\n      if (this.activeFace) {\n        this.activeFace.setActive(false);\n        this.activeFace = null;\n        this.renderer.domElement.style.cursor = \"auto\";\n      }\n    }\n  };\n\n  /**\n   * Handles mouse down event, starts to drag a face using left button\n   */\n  protected onMouseDown = (event: MouseEvent) => {\n    const isLeftButton = event.button === 0; // 0: left button, 1: middle button, 2: right button\n    if (this.activeFace && isLeftButton) {\n      this.updateMouseAndRay(event);\n      const intersects = this.raycaster.intersectObjects(this.faces); // intersects for mouse and faces\n      if (intersects.length) {\n        const face = intersects[0].object as BoxFace;\n        const axis = face.axis;\n        const point = intersects[0].point;\n        this.drag.start(axis, point);\n      }\n    }\n  };\n\n  /**\n   * The drag object, used to handle clip operation\n   */\n  protected drag = {\n    axis: \"\", // one of the 6 axis to be dragged\n    point: new Vector3(), // to record where the drag point is\n    ground: new Mesh(new PlaneGeometry(1000000, 1000000), new MeshBasicMaterial({ colorWrite: false, depthWrite: false })),\n    start: (axis: string, point: Vector3) => {\n      this.drag.axis = axis;\n      this.drag.point = point;\n      this.drag.initGround();\n      this.controls.enablePan = false;\n      this.controls.enableZoom = false;\n      this.controls.enableRotate = false;\n      this.renderer.domElement.style.cursor = \"move\";\n      // mouseup/mousedown/mousemove event is prevented by OrbitControls, let's use pointerup/pointerdown/pointermove\n      window.removeEventListener(\"pointermove\", this.onMouseMove);\n      window.addEventListener(\"pointermove\", this.drag.mousemove);\n      window.addEventListener(\"pointerup\", this.drag.mouseup);\n    },\n    end: () => {\n      this.scene.remove(this.drag.ground);\n      this.controls.enablePan = true;\n      this.controls.enableZoom = true;\n      this.controls.enableRotate = true;\n      window.removeEventListener(\"pointermove\", this.drag.mousemove);\n      window.removeEventListener(\"pointerup\", this.drag.mouseup);\n      window.addEventListener(\"pointermove\", this.onMouseMove);\n    },\n    mousemove: (event: MouseEvent) => {\n      this.updateMouseAndRay(event);\n      const intersects = this.raycaster.intersectObject(this.drag.ground); // 鼠标与拖动地面的相交情况\n      if (intersects.length) {\n        this.drag.updateSectionBox(intersects[0].point);\n      }\n    },\n    mouseup: () => {\n      this.drag.end();\n    },\n    // Initialize the reference plane while dragging, which can be XY, YZ, ZX plane\n    initGround: () => {\n      const normals: any = {\n        xLeft: new Vector3(-1, 0, 0),\n        xRight: new Vector3(1, 0, 0),\n        yDown: new Vector3(0, -1, 0),\n        yUp: new Vector3(0, 1, 0),\n        zBack: new Vector3(0, 0, -1),\n        zFront: new Vector3(0, 0, 1)\n      };\n      if ([\"xLeft\", \"xRight\"].includes(this.drag.axis)) {\n        this.drag.point.setX(0);\n      } else if ([\"yDown\", \"yUp\"].includes(this.drag.axis)) {\n        this.drag.point.setY(0);\n      } else if ([\"zBack\", \"zFront\"].includes(this.drag.axis)) {\n        this.drag.point.setZ(0);\n      }\n      this.drag.ground.position.copy(this.drag.point);\n      const newNormal = this.camera.position.clone()\n        .sub(this.camera.position.clone().projectOnVector(normals[this.drag.axis]))\n        .add(this.drag.point); // gets the normal of the plane\n      this.drag.ground.lookAt(newNormal);\n      this.scene.add(this.drag.ground);\n    },\n    // updates section box, thus applies section\n    updateSectionBox: (point: Vector3) => {\n      const minSize = BaseBoxSection.MIN_WIDTH; // min size of section box\n      switch (this.drag.axis) {\n        case \"yUp\": // up\n          this.boxMax.setY(Math.max(this.boxMin.y + minSize, point.y));\n          break;\n        case \"yDown\": // down\n          this.boxMin.setY(Math.min(this.boxMax.y - minSize, point.y));\n          break;\n        case \"xLeft\": // left\n          this.boxMin.setX(Math.min(this.boxMax.x - minSize, point.x));\n          break;\n        case \"xRight\": // right\n          this.boxMax.setX(Math.max(this.boxMin.x + minSize, point.x));\n          break;\n        case \"zFront\": // front\n          this.boxMax.setZ(Math.max(this.boxMin.z + minSize, point.z));\n          break;\n        case \"zBack\": // back\n          this.boxMin.setZ(Math.min(this.boxMax.z - minSize, point.z));\n          break;\n      }\n\n      // updates section box's planes, vertices, faces and lines\n      // this.initPlanes()\n      this.updatePlanes();\n      this.initOrUpdateVertices();\n      this.initOrUpdateFaces();\n      this.initOrUpdateLines();\n    }\n  };\n}\n\n/**\n * BoxLine of a section box\n */\nclass BoxLine extends LineSegments {\n  // basic data member\n  private normalMaterial = new LineBasicMaterial({ color: 0x795548 }); // 0xffa080, normal color of line (original color: 0xe1f2fb)\n  private activeMaterial = new LineBasicMaterial({ color: 0x4e342e }); // 0xff5000, active color of line (original color: 0x00ffff)\n\n  /**\n   * @param vertices two points of a line\n   * @param faces two faces relative to a line\n   */\n  constructor(vertices: Array<Vector3>, faces: Array<BoxFace>) {\n    super();\n    faces.forEach(face => face.lines.push(this)); // saves the relationship between face and line\n    this.geometry = new BufferGeometry();\n    this.geometry.setFromPoints(vertices);\n    this.material = this.normalMaterial;\n  }\n\n  /**\n   * Updates geometry\n   */\n  setFromPoints(vertices: Vector3[]) {\n    this.geometry.setFromPoints(vertices);\n  }\n\n  /**\n   * Sets to active or inactive\n   * @param isActive\n   */\n  setActive(isActive: boolean) {\n    this.material = isActive ? this.activeMaterial : this.normalMaterial;\n  }\n}\n\n/**\n * BoxFace of a section box\n */\nclass BoxFace extends Mesh {\n  // basic data member\n  axis: string;\n  lines: Array<BoxLine> = []; // 4 lines relative to a face\n  backFace: Mesh; // the back side of a face, used to display\n\n  /**\n   * @param axis axis of a face\n   * @param vertices 4 points of a face\n   */\n  constructor(axis: string, vertices: Array<Vector3>) {\n    super();\n    this.axis = axis;\n    this.lines = [];\n    this.geometry = new BufferGeometry();\n    this.geometry.setFromPoints(vertices);\n    this.geometry.setIndex([0, 3, 2, 0, 2, 1]);\n    this.geometry.computeVertexNormals();\n    this.material = new MeshBasicMaterial({ colorWrite: false, depthWrite: false });\n    const backMaterial = new MeshBasicMaterial({ color: 0xb1bfcb, transparent: true, opacity: 0.3, side: BackSide });\n    this.backFace = new Mesh(this.geometry, backMaterial);\n  }\n\n  /**\n   * Updates geometry\n   */\n  setFromPoints(vertices: Vector3[]) {\n    this.geometry.setFromPoints(vertices);\n  }\n\n  /**\n   * Sets to active or inactive\n   * @param isActive\n   */\n  setActive(isActive: boolean) {\n    this.lines.forEach(line => { line.setActive(isActive) });\n  }\n}\n","import { BaseBoxSection } from \"./BaseBoxSection\";\nimport { Box3, Scene, WebGLRenderer, PerspectiveCamera, OrthographicCamera } from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\n/**\n * Object's box section\n **/\nexport class ObjectsBoxSection extends BaseBoxSection {\n  // basic member data\n  private objectUuids: string[];\n\n  /**\n   * Constructor\n   */\n  constructor(objectsUuids: string[], scene: Scene, camera: PerspectiveCamera | OrthographicCamera, renderer: WebGLRenderer, controls: OrbitControls) {\n    super(scene, camera, renderer, controls);\n\n    this.objectUuids = objectsUuids;\n    const box3 = new Box3();\n    this.objectUuids.forEach(uuid => {\n      const object = this.scene.getObjectByProperty(\"uuid\", uuid);\n      object && box3.expandByObject(object); // gets object's bounding box\n    });\n    box3.expandByScalar(1.5); // expand bounding box a bit\n    super.setSectionBox(box3);\n  }\n\n  /**\n   * Initialize 6 section plane\n   **/\n  protected initPlanes() {\n    super.initPlanes();\n    this.objectUuids.forEach(uuid => {\n      const object = this.scene.getObjectByProperty(\"uuid\", uuid);\n      object && object.traverse((child: any) => {\n        if ([\"Mesh\", \"LineSegments\"].includes(child.type)) {\n          child.material.clippingPlanes = this.planes;\n          // clipIntersection is false by default, but it may changed by other section (ObjectsPlaneClipper, etc.)\n          // so, need to set it back here\n          child.material.clipIntersection = false;\n        }\n      });\n    });\n  }\n\n  /**\n   * Clears section box\n   **/\n  protected clearSectionBox() {\n    super.clearSectionBox();\n    this.objectUuids.forEach(uuid => {\n      const object = this.scene.getObjectByProperty(\"uuid\", uuid);\n      object && object.traverse((child: any) => {\n        if ([\"Mesh\", \"LineSegments\"].includes(child.type)) {\n          child.material.clippingPlanes = [];\n        }\n      });\n    });\n  }\n}\n","import * as THREE from \"three\";\nimport { Box3, Scene, WebGLRenderer, Vector3, Mesh, MeshBasicMaterial, Matrix4, Vector2, Raycaster, PerspectiveCamera, Group, LineSegments, LineBasicMaterial, Plane, PlaneGeometry, DoubleSide, BufferGeometry, OrthographicCamera } from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\n/**\n * Object's plane section\n */\nexport class BasePlaneSection {\n  static MIN_WIDTH = 1; // min width of section plane\n  // basic member data\n  public isOpen = false;\n  protected boundingBox?: Box3;\n  protected scene: Scene;\n  protected camera: PerspectiveCamera | OrthographicCamera;\n  protected renderer: WebGLRenderer;\n  protected controls: OrbitControls;\n  protected isSectionObjectVisible = true;\n  // matrix for section planes, etc.\n  protected matrix?: Matrix4;\n\n  /**\n   * Constructor\n   */\n  constructor(scene: Scene, camera: PerspectiveCamera | OrthographicCamera, renderer: WebGLRenderer, controls: OrbitControls) {\n    this.scene = scene;\n    this.camera = camera;\n    this.renderer = renderer;\n    this.controls = controls;\n  }\n\n  /**\n   * If plane is not assigned in constructor, then set it here.\n   * For now, we only support it to be set once. Otherwise, need to check isOpen status, and initSectionPlane properly.\n   */\n  protected setSectionPlane(box: Box3) {\n    if (this.boundingBox) {\n      throw new Error(\"boundingBox is assigned already!\");\n    }\n    const y = (box.min.y + box.max.y) / 2; // section at the middle by default\n    this.boxMin.set(box.min.x, y, box.min.z);\n    this.boxMax.set(box.max.x, y, box.max.z);\n  }\n\n  /**\n   * Sets section object's visibility, in case caller don't want to see it\n   */\n  public setSectionObjectVisible(visilbe: boolean) {\n    this.isSectionObjectVisible = visilbe;\n    // if sub objects are initialized already, set their visibility\n    if (this.group) {\n      this.group.traverse(object => { object.visible = visilbe });\n    }\n  }\n\n  /**\n   * Starts to section\n   */\n  open() {\n    this.initSectionPlane();\n    this.setSectionObjectVisible(this.isSectionObjectVisible);\n    this.addMouseListener();\n    this.isOpen = true;\n  }\n\n  /**\n   * Close section\n   */\n  close() {\n    this.isOpen = false;\n    this.removeMouseListener();\n    this.clearSectionPlane();\n  }\n\n  /**\n   * reset section\n   */\n  reset() {\n    this.close();\n    this.open();\n  }\n\n  /**\n   * Sets a matrix for section planes, which constains rotation on x, y, z, scale, etc.\n   * Should call this after initSectionPlane() is called.\n   * The rotation can be any value, but the editor (drag tool) doesn't work well when rotation is too big!\n   * So, we'd better to limmit user from applying a big value.\n   */\n  public setMatrix(matrix: Matrix4) {\n    this.group.applyMatrix4(matrix);\n    this.planes.forEach(plane => plane.applyMatrix4(matrix));\n  }\n\n  // --------------- Sectionping plane ------------------\n  protected boxMin: Vector3 = new Vector3(); // min point of section plane, use its 'y' for constrant\n  protected boxMax: Vector3 = new Vector3(); // max point of section plane (ignore its y)\n  protected group: Group = new Group(); // contains any object for section\n  protected planes: Plane[] = []; // section plane\n  protected vertices = [\n    new Vector3(), new Vector3(), new Vector3(), new Vector3() // yUp\n  ];\n\n  protected controllerMarkers: THREE.Sprite[] = [];\n  protected face?: BoxFace; // eslint-disable-line\n  protected lines: BoxLine[] = []; // eslint-disable-line\n  readonly normalMarkerOpacity = 0.5;\n  readonly activeMarkerOpacity = 1;\n  readonly normalColor = 0x4e342e; // 0xffa080\n  readonly activeColor = 0x4e342e; // 0xff5000\n\n  /**\n   * Initialize section plane\n   */\n  protected initSectionPlane() {\n    this.group = new Group();\n    this.initPlanes();\n    this.initOrUpdateVertices();\n    this.initOrUpdateFace(); // init face before lines\n    this.initOrUpdateLines();\n    this.scene.add(this.group);\n  }\n\n  /**\n   * Initialize section planes\n   */\n  protected initPlanes() {\n    this.planes = [];\n    this.planes.push(\n      // for a section panel, objects in a direction/normal is visible\n      new Plane(new Vector3(0, -1, 0)), // up\n      new Plane(new Vector3(-1, 0, 0)), // xLeft\n      new Plane(new Vector3(0, 0, 1)), // zFront\n      new Plane(new Vector3(1, 0, 0)), // xRight\n      new Plane(new Vector3(0, 0, -1)) // zBack\n    );\n    this.updatePlanes();\n  }\n\n  /**\n   * Updates planes for section plane\n   */\n  protected updatePlanes() {\n    this.planes[0].constant = this.boxMax.y;\n    this.planes[1].constant = this.boxMin.x;\n    this.planes[2].constant = -this.boxMax.z; // why need to be nagetive??\n    this.planes[3].constant = -this.boxMax.x;\n    this.planes[4].constant = this.boxMin.z;\n  }\n\n  /**\n   * Initialize or update 4 vertices of section plane\n   */\n  protected initOrUpdateVertices() {\n    const y = this.boxMax.y; // y is always the same as it's a plane\n    this.vertices[0].set(this.boxMin.x, y, this.boxMin.z);\n    this.vertices[1].set(this.boxMin.x, y, this.boxMax.z);\n    this.vertices[2].set(this.boxMax.x, y, this.boxMax.z);\n    this.vertices[3].set(this.boxMax.x, y, this.boxMin.z);\n\n    const createOrUpdateControllerMarker = (v1: Vector3, v2: Vector3, marker: THREE.Sprite | undefined = undefined, name?: string) => {\n      if (marker) {\n        marker.position.set((v1.x + v2.x) / 2, (v1.y + v2.y) / 2, (v1.z + v2.z) / 2);\n      } else {\n        const position = new Vector3((v1.x + v2.x) / 2, (v1.y + v2.y) / 2, (v1.z + v2.z) / 2);\n        const marker = this.createPointMarker(position, name);\n        this.controllerMarkers.push(marker);\n        this.group.add(marker);\n      }\n    };\n\n    const v = this.vertices;\n    if (this.controllerMarkers.length === 0) {\n      createOrUpdateControllerMarker(v[0], v[1], undefined, \"xLeft\");\n      createOrUpdateControllerMarker(v[1], v[2], undefined, \"zFront\");\n      createOrUpdateControllerMarker(v[2], v[3], undefined, \"xRight\");\n      createOrUpdateControllerMarker(v[3], v[0], undefined, \"zBack\");\n    } else {\n      createOrUpdateControllerMarker(v[0], v[1], this.controllerMarkers[0]);\n      createOrUpdateControllerMarker(v[1], v[2], this.controllerMarkers[1]);\n      createOrUpdateControllerMarker(v[2], v[3], this.controllerMarkers[2]);\n      createOrUpdateControllerMarker(v[3], v[0], this.controllerMarkers[3]);\n    }\n  }\n\n  /**\n   * Initialize 1 face of section plane\n   */\n  protected initOrUpdateFace() {\n    const v = this.vertices;\n    if (!this.face) {\n      let i = 0;\n      this.face = new BoxFace(\"yUp\", [v[i++], v[i++], v[i++], v[i++]]); // up\n      this.group.add(this.face);\n    } else {\n      this.face.setFromPoints(v);\n    }\n  }\n\n  /**\n   * Initialize 4 lines of section plane\n   */\n  protected initOrUpdateLines() {\n    const v = this.vertices;\n    if (!this.lines || this.lines.length === 0) {\n      const f = this.face;\n      if (!f) {\n        throw Error(\"Need to init Face first!\");\n      }\n      this.lines = [];\n      this.lines.push(\n        new BoxLine([v[0], v[1]], [f]),\n        new BoxLine([v[1], v[2]], [f]),\n        new BoxLine([v[2], v[3]], [f]),\n        new BoxLine([v[3], v[0]], [f])\n      );\n      this.group.add(...this.lines);\n    } else {\n      let i = 0;\n      this.lines[i].setFromPoints([v[i], v[++i]]);\n      this.lines[i].setFromPoints([v[i], v[++i]]);\n      this.lines[i].setFromPoints([v[i], v[++i]]);\n      this.lines[i].setFromPoints([v[i], v[0]]);\n    }\n  }\n\n  /**\n   * Clears section plane\n   */\n  protected clearSectionPlane() {\n    this.scene.remove(this.group);\n    this.renderer.domElement.style.cursor = \"\";\n  }\n\n  // ------------------- Mouse events -----------------------\n\n  // basic data member\n  protected raycaster: Raycaster = new Raycaster();\n  protected mousePosition: Vector2 = new Vector2();\n  // the face that the mouse is hovering\n  protected activeFace: BoxFace | undefined = undefined; // eslint-disable-line\n  protected activeMarker: THREE.Sprite | undefined = undefined;\n\n  /**\n   * Adds mouse event listener\n   */\n  private addMouseListener() {\n    window.addEventListener(\"pointermove\", this.onMouseMove);\n    window.addEventListener(\"pointerdown\", this.onMouseDown);\n  }\n\n  /**\n   * Removes mouse event listener\n   */\n  private removeMouseListener() {\n    window.removeEventListener(\"pointermove\", this.onMouseMove);\n    window.removeEventListener(\"pointerdown\", this.onMouseDown);\n  }\n\n  /**\n   * Converts mouse coordinates, and updates raycaster\n   */\n  protected updateMouseAndRay(event: MouseEvent) {\n    this.mousePosition.setX((event.clientX / window.innerWidth) * 2 - 1);\n    this.mousePosition.setY(-(event.clientY / window.innerHeight) * 2 + 1);\n    this.raycaster.setFromCamera(this.mousePosition, this.camera);\n  }\n\n  /**\n   * Handles mouse move event, highlights corresponding face/lines properly\n   */\n  protected onMouseMove = (event: MouseEvent) => {\n    if (!this.isSectionObjectVisible) {\n      return;\n    }\n    this.updateMouseAndRay(event);\n    const intersects = this.raycaster.intersectObject(this.group, true); // intersects for mouse and faces\n    if (intersects.length) {\n      this.renderer.domElement.style.cursor = \"pointer\";\n      const markers = intersects.filter(i => {\n        return i && i.object && i.object instanceof THREE.Sprite;\n      });\n      const faces = intersects.filter(i => {\n        return i && i.object && i.object instanceof BoxFace;\n      });\n      if (markers.length > 0) {\n        this.activeMarker = markers[0].object as THREE.Sprite;\n        this.activeMarker.material.opacity = this.activeMarkerOpacity;\n        this.activeMarker.material.color.set(this.activeColor);\n      } else if (this.activeMarker) {\n        this.activeMarker.material.opacity = this.normalMarkerOpacity;\n        this.activeMarker.material.color.set(this.normalColor);\n        this.activeMarker = undefined;\n      }\n      if (faces.length > 0 && !this.activeMarker) {\n        const face = faces[0].object as BoxFace;\n        if (face !== this.activeFace) {\n          if (this.activeFace) {\n            this.activeFace.setActive(false);\n          }\n          face.setActive(true);\n          this.activeFace = face;\n        }\n      } else if (this.activeFace) {\n        this.activeFace.setActive(false);\n        this.activeFace = undefined;\n      }\n      if (!this.activeMarker && !this.activeFace) {\n        this.renderer.domElement.style.cursor = \"auto\";\n      }\n    }\n  };\n\n  /**\n   * Handles mouse down event, starts to drag a face using left button\n   */\n  protected onMouseDown = (event: MouseEvent) => {\n    if (!this.isSectionObjectVisible) {\n      return;\n    }\n    const isLeftButton = event.button === 0; // 0: left button, 1: middle button, 2: right button\n    if (!isLeftButton) {\n      return;\n    }\n    if (this.activeMarker) {\n      this.updateMouseAndRay(event);\n      const intersects = this.raycaster.intersectObject(this.group, true); // intersects for mouse and faces\n      if (intersects.length) {\n        const axis = this.activeMarker.name;\n        const point = intersects[0].point;\n        this.drag.start(axis, point);\n      }\n    } else if (this.activeFace && this.face) {\n      this.updateMouseAndRay(event);\n      const intersects = this.raycaster.intersectObject(this.face); // intersects for mouse and faces\n      if (intersects.length) {\n        const face = intersects[0].object as BoxFace;\n        const axis = face.axis;\n        const point = intersects[0].point;\n        this.drag.start(axis, point);\n      }\n    }\n  };\n\n  /**\n   * The drag object, used to handle section operation\n   */\n  protected drag = {\n    axis: \"\", // the axis to be dragged\n    point: new Vector3(), // to record where the drag point is\n    ground: new Mesh(new PlaneGeometry(1000000, 1000000), new MeshBasicMaterial({ colorWrite: false, depthWrite: false })),\n    start: (axis: string, point: Vector3) => {\n      this.drag.axis = axis;\n      this.drag.point = point;\n      this.drag.initGround();\n      this.controls.enablePan = false;\n      this.controls.enableZoom = false;\n      this.controls.enableRotate = false;\n      this.renderer.domElement.style.cursor = \"move\";\n      // mouseup/mousedown/mousemove event is prevented by OrbitControls, let's use pointerup/pointerdown/pointermove\n      window.removeEventListener(\"pointermove\", this.onMouseMove);\n      window.addEventListener(\"pointermove\", this.drag.mousemove);\n      window.addEventListener(\"pointerup\", this.drag.mouseup);\n    },\n    end: () => {\n      this.scene.remove(this.drag.ground);\n      this.controls.enablePan = true;\n      this.controls.enableZoom = true;\n      this.controls.enableRotate = true;\n      window.removeEventListener(\"pointermove\", this.drag.mousemove);\n      window.removeEventListener(\"pointerup\", this.drag.mouseup);\n      window.addEventListener(\"pointermove\", this.onMouseMove);\n    },\n    mousemove: (event: MouseEvent) => {\n      this.updateMouseAndRay(event);\n      const intersects = this.raycaster.intersectObject(this.drag.ground); // 鼠标与拖动地面的相交情况\n      if (intersects.length) {\n        this.drag.updateSectionPlane(intersects[0].point);\n      }\n    },\n    mouseup: () => {\n      this.drag.end();\n    },\n    // Initialize the reference plane while dragging\n    initGround: () => {\n      const axis = this.drag.axis;\n      const normals: any = {\n        yUp: new Vector3(0, 1, 0),\n        xLeft: new Vector3(-1, 0, 0),\n        zFront: new Vector3(0, 0, 1),\n        xRight: new Vector3(1, 0, 0),\n        zBack: new Vector3(0, 0, -1)\n      };\n      if ([\"xLeft\", \"xRight\"].includes(axis)) {\n        this.drag.point.setX(0);\n      } else if ([\"yUp\"].includes(axis)) {\n        this.drag.point.setY(0);\n      } else if ([\"zBack\", \"zFront\"].includes(axis)) {\n        this.drag.point.setZ(0);\n      }\n      this.drag.ground.position.copy(this.drag.point);\n      const newNormal = this.camera.position.clone()\n        .sub(this.camera.position.clone().projectOnVector(normals[axis]))\n        .add(this.drag.point); // gets the normal of the plane\n      this.drag.ground.lookAt(newNormal);\n      this.scene.add(this.drag.ground);\n    },\n    // updates section plane, thus applies section\n    updateSectionPlane: (point: Vector3) => {\n      const axis = this.drag.axis;\n      const minSize = BasePlaneSection.MIN_WIDTH; // min size of section box\n      switch (axis) {\n        case \"yUp\": // up\n          this.boxMax.y = point.y;\n          this.boxMin.y = point.y;\n          // this.boxMax.setY(Math.max(this.boxMin.y + minSize, point.y))\n          break;\n        case \"xLeft\": // xLeft\n          this.boxMin.setX(Math.min(this.boxMax.x - minSize, point.x));\n          break;\n        case \"zFront\": // zFront\n          this.boxMax.setZ(Math.max(this.boxMin.z + minSize, point.z));\n          break;\n        case \"xRight\": // xRight\n          this.boxMax.setX(Math.max(this.boxMin.x + minSize, point.x));\n          break;\n        case \"zBack\": // zBack\n          this.boxMin.setZ(Math.min(this.boxMax.z - minSize, point.z));\n          break;\n      }\n\n      // updates section plane, vertices, faces and lines\n      this.updatePlanes();\n      this.initOrUpdateVertices();\n      this.initOrUpdateFace();\n      this.initOrUpdateLines();\n    }\n  };\n\n  spriteMaterial?: THREE.SpriteMaterial;\n\n  /**\n   * Initializes point marker material\n   */\n  initPointMarkerMaterial() {\n    const markerTexture = new THREE.TextureLoader().load(\"images/circle.png\");\n    this.spriteMaterial = new THREE.SpriteMaterial({\n      map: markerTexture,\n      color: this.normalColor,\n      sizeAttenuation: false,\n      depthTest: false,\n      depthWrite: false,\n      transparent: true,\n      opacity: this.normalMarkerOpacity\n    });\n  }\n\n  /**\n   * Creates point marker\n   */\n  private createPointMarker(position?: THREE.Vector3, name: string = \"\"): THREE.Sprite {\n    if (!this.spriteMaterial) {\n      this.initPointMarkerMaterial();\n    }\n    const p = position;\n    const scale = 0.015;\n    const obj = new THREE.Sprite(this.spriteMaterial);\n    obj.scale.set(scale, scale, scale);\n    if (p) {\n      obj.position.set(p.x, p.y, p.z);\n    }\n    obj.name = name;\n    return obj;\n  }\n}\n\n/**\n * BoxLine of a section plane\n */\nclass BoxLine extends LineSegments {\n  // basic data member\n  private normalMaterial = new LineBasicMaterial({ color: 0x795548 }); // normal color of line (original color: 0xe1f2fb)\n  private activeMaterial = new LineBasicMaterial({ color: 0x4e342e }); // active color of line (original color: 0x00ffff)\n\n  /**\n   * @param vertices two points of a line\n   * @param faces two faces relative to a line\n   */\n  constructor(vertices: Vector3[], faces: BoxFace[]) {\n    super();\n    faces.forEach(face => face.lines.push(this)); // saves the relationship between face and line\n    this.geometry = new BufferGeometry();\n    this.geometry.setFromPoints(vertices);\n    this.material = this.normalMaterial;\n  }\n\n  /**\n   * Updates geometry\n   */\n  setFromPoints(vertices: Vector3[]) {\n    this.geometry.setFromPoints(vertices);\n  }\n\n  /**\n   * Sets to active or inactive\n   * @param isActive\n   */\n  setActive(isActive: boolean) {\n    this.material = isActive ? this.activeMaterial : this.normalMaterial;\n  }\n}\n\n/**\n * BoxFace of a section plane\n */\nclass BoxFace extends Mesh {\n  // basic data member\n  axis: string;\n  lines: BoxLine[] = []; // 4 lines relative to a face\n\n  /**\n   * @param axis axis of a face\n   * @param vertices 4 points of a face\n   */\n  constructor(axis: string, vertices: Vector3[]) {\n    super();\n    this.axis = axis;\n    this.lines = [];\n    this.geometry = new BufferGeometry();\n    this.geometry.setFromPoints(vertices);\n    this.geometry.setIndex([0, 3, 2, 0, 2, 1]);\n    this.geometry.computeVertexNormals();\n    this.material = new MeshBasicMaterial({ colorWrite: false, depthWrite: false, side: DoubleSide });\n  }\n\n  /**\n   * Updates geometry\n   */\n  setFromPoints(vertices: Vector3[]) {\n    this.geometry.setFromPoints(vertices);\n  }\n\n  /**\n   * Sets to active or inactive\n   * @param isActive\n   */\n  setActive(isActive: boolean) {\n    this.lines.forEach(line => { line.setActive(isActive) });\n  }\n}\n","import { BasePlaneSection } from \"./BasePlaneSection\";\nimport { Box3, Scene, WebGLRenderer, PerspectiveCamera, OrthographicCamera } from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\n/**\n * Objects' plane section\n **/\nexport class ObjectsPlaneSection extends BasePlaneSection {\n  // basic member data\n  private objectUuids: string[];\n\n  /**\n   * Constructor\n   */\n  constructor(objectUuids: string[], scene: Scene, camera: PerspectiveCamera | OrthographicCamera, renderer: WebGLRenderer, controls: OrbitControls) {\n    super(scene, camera, renderer, controls);\n\n    this.objectUuids = objectUuids;\n    const box3 = new Box3();\n    this.objectUuids.forEach(uuid => {\n      const object = this.scene.getObjectByProperty(\"uuid\", uuid);\n      object && box3.expandByObject(object); // gets object's bounding box\n    });\n    box3.expandByScalar(1.5); // expand bounding box a bit\n    super.setSectionPlane(box3);\n  }\n\n  /**\n   * Initialize 6 section plane\n   **/\n  protected initSectionPlane() {\n    super.initSectionPlane();\n    this.objectUuids.forEach(uuid => {\n      const object = this.scene.getObjectByProperty(\"uuid\", uuid);\n      object && object.traverse((child: any) => {\n        if ([\"Mesh\", \"LineSegments\"].includes(child.type)) {\n          child.material.clippingPlanes = this.planes;\n          // Reference: https://www.cnblogs.com/xiaxiangx/p/13873037.html\n          child.material.clipIntersection = true;\n        }\n      });\n    });\n  }\n\n  /**\n   * Clears section plane\n   **/\n  protected clearSectionPlane() {\n    super.clearSectionPlane();\n    this.objectUuids.forEach(uuid => {\n      const object = this.scene.getObjectByProperty(\"uuid\", uuid);\n      object && object.traverse((child: any) => {\n        if ([\"Mesh\", \"LineSegments\"].includes(child.type)) {\n          child.material.clippingPlanes = [];\n        }\n      });\n    });\n  }\n}\n","import { Component, Vue, Emit } from \"vue-property-decorator\";\nimport { VNode } from \"vue/types/umd\";\nimport styles from \"./BasePanel.module.scss\";\n\n/**\n * BasePanel class\n * BasePanel defines common layout and behavior for panel.\n * e.g. drag-able, resize-able, close-able, the same header/footer, etc.\n * All panel in this application should derive from BasePanel\n */\n@Component\nexport default class BasePanel extends Vue {\n  protected minWidth = 150;\n  protected maxWidth = 600;\n  protected minHeight = 200;\n  protected maxHeight = 800;\n\n  @Emit()\n  protected close() {}\n\n  @Emit()\n  protected resize() {}\n\n  protected mounted() {\n  }\n\n  /**\n   * Handles drag event\n   */\n  protected dragHandler(e: MouseEvent) {\n    const panel = this.$refs.basePanel as HTMLElement;\n    const parentElement = this.findRelativeParentElement(panel);\n    const distX = e.clientX - panel.offsetLeft;\n    const distY = e.clientY - panel.offsetTop;\n    if ((panel as any).setCapture) {\n      (panel as any).setCapture();\n    }\n\n    document.onmousemove = function(e) {\n      e.preventDefault();\n      let l = e.clientX - distX; // left\n      let t = e.clientY - distY; // top\n      const pOffsetWidth = parentElement.offsetWidth;\n      const pOffsetHeight = parentElement.offsetHeight;\n      const elOffsetWidth = panel.offsetWidth;\n      const elOffsetHeight = panel.offsetHeight;\n      l = Math.min(Math.max(l, 0), pOffsetWidth - elOffsetWidth);\n      t = Math.min(Math.max(t, 0), pOffsetHeight - elOffsetHeight);\n\n      panel.style.left = l + \"px\";\n      panel.style.top = t + \"px\";\n    };\n    document.onmouseup = function() {\n      document.onmousemove = document.onmousedown = null;\n      if ((panel as any).releaseCapture) {\n        (panel as any).releaseCapture();\n      }\n    };\n  }\n\n  /**\n   * Handles resize event\n   */\n  protected resizeHandler(e: MouseEvent) {\n    const panel = this.$refs.basePanel as HTMLElement;\n    const parentElement = this.findRelativeParentElement(panel);\n    const elOffsetWidth = panel.offsetWidth;\n    const elOffsetHeight = panel.offsetHeight;\n    const distX = e.clientX - (panel.offsetLeft + elOffsetWidth);\n    const distY = e.clientY - (panel.offsetTop + elOffsetHeight);\n    if ((panel as any).setCapture) {\n      (panel as any).setCapture();\n    }\n\n    document.onmousemove = (e) => {\n      e.preventDefault();\n      let w = e.clientX - distX - panel.offsetLeft; // width\n      let h = e.clientY - distY - panel.offsetTop; // height\n\n      const pOffsetWidth = parentElement.offsetWidth;\n      const pOffsetHeight = parentElement.offsetHeight;\n      w = Math.min(Math.max(w, this.minWidth), Math.min(pOffsetWidth - panel.offsetLeft, this.maxWidth));\n      h = Math.min(Math.max(h, this.minHeight), Math.min(pOffsetHeight - panel.offsetTop, this.maxHeight));\n\n      panel.style.width = w + \"px\";\n      panel.style.height = h + \"px\";\n      this.resize();\n    };\n    document.onmouseup = () => {\n      document.onmousemove = document.onmousedown = null;\n      if ((panel as any).releaseCapture) {\n        (panel as any).releaseCapture();\n      }\n    };\n  }\n\n  // find the closest ancestor whoes width is non-zero\n  private findRelativeParentElement(el: HTMLElement): any {\n    const pElement = el.parentElement;\n    if (!pElement || pElement.offsetWidth) {\n      return pElement;\n    } else {\n      return this.findRelativeParentElement(pElement);\n    }\n  }\n\n  protected beforeDestroy() {\n  }\n\n  protected render(): VNode {\n    return (\n      <div class={ styles.basePanel } ref=\"basePanel\">\n        <div class=\"base-panel__header\" onMousedown={ this.dragHandler }>\n          <span class=\"base-panel__header-title\">\n            { this.$scopedSlots.header && this.$scopedSlots.header({ text: \"\" }) }\n            { !this.$scopedSlots.header && \"Title\" }\n          </span>\n          <el-button type=\"text\" icon=\"el-icon-close\" class=\"base-panel__header-close\" onClick={ this.close }></el-button>\n        </div>\n        <div class=\"base-panel__body\">\n          { this.$scopedSlots.content && this.$scopedSlots.content({ text: \"\" }) }\n        </div>\n        <div class=\"base-panel__footer\">\n          <div class=\"base-panel__footer-resize\" onMousedown={ this.resizeHandler }>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"el-tree\",class:{\n    'el-tree--highlight-current': _vm.highlightCurrent,\n    'is-dragging': !!_vm.dragState.draggingNode,\n    'is-drop-not-allow': !_vm.dragState.allowDrop,\n    'is-drop-inner': _vm.dragState.dropType === 'inner'\n  },attrs:{\"role\":\"tree\"}},[(_vm.height)?_c('virtual-list',{style:({ height: _vm.height + 'px', 'overflow-y': 'auto' }),attrs:{\"data-key\":_vm.getNodeKey,\"data-sources\":_vm.visibleList,\"data-component\":_vm.itemComponent,\"keeps\":Math.ceil(_vm.height / 22) + _vm.extraLine,\"extra-props\":{\n      renderAfterExpand: _vm.renderAfterExpand,\n      showCheckbox: _vm.showCheckbox,\n      renderContent: _vm.renderContent,\n      onNodeExpand: _vm.handleNodeExpand\n    }}}):_vm._l((_vm.root.childNodes),function(child){return _c('el-tree-node',{key:_vm.getNodeKey(child),attrs:{\"node\":child,\"props\":_vm.props,\"render-after-expand\":_vm.renderAfterExpand,\"show-checkbox\":_vm.showCheckbox,\"render-content\":_vm.renderContent},on:{\"node-expand\":_vm.handleNodeExpand}})}),(_vm.isEmpty)?_c('div',{staticClass:\"el-tree__empty-block\"},[_c('span',{staticClass:\"el-tree__empty-text\"},[_vm._v(_vm._s(_vm.emptyText))])]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dragState.showDropIndicator),expression:\"dragState.showDropIndicator\"}],ref:\"dropIndicator\",staticClass:\"el-tree__drop-indicator\"})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const NODE_KEY = '$treeNodeId'\n\nexport const markNodeData = function(node, data) {\n  if (!data || data[NODE_KEY]) return\n  Object.defineProperty(data, NODE_KEY, {\n    value: node.id,\n    enumerable: false,\n    configurable: false,\n    writable: false\n  })\n}\n\nexport const getNodeKey = function(key, data) {\n  if (!key) return data[NODE_KEY]\n  return data[key]\n}\n\nexport const findNearestComponent = (element, componentName) => {\n  let target = element\n  while (target && target.tagName !== 'BODY') {\n    if (target.__vue__ && target.__vue__.$options.name === componentName) {\n      return target.__vue__\n    }\n    target = target.parentNode\n  }\n  return null\n}\n","import objectAssign from 'element-ui/src/utils/merge'\nimport { markNodeData, NODE_KEY } from './util'\nimport { arrayFindIndex } from 'element-ui/src/utils/util'\n\nexport const getChildState = node => {\n  let all = true\n  let none = true\n  let allWithoutDisable = true\n  for (let i = 0, j = node.length; i < j; i++) {\n    const n = node[i]\n    if (n.checked !== true || n.indeterminate) {\n      all = false\n      if (!n.disabled) {\n        allWithoutDisable = false\n      }\n    }\n    if (n.checked !== false || n.indeterminate) {\n      none = false\n    }\n  }\n\n  return { all, none, allWithoutDisable, half: !all && !none }\n}\n\nconst reInitChecked = function(node) {\n  if (node.childNodes.length === 0) return\n\n  const {all, none, half} = getChildState(node.childNodes)\n  if (all) {\n    node.checked = true\n    node.indeterminate = false\n  } else if (half) {\n    node.checked = false\n    node.indeterminate = true\n  } else if (none) {\n    node.checked = false\n    node.indeterminate = false\n  }\n\n  const parent = node.parent\n  if (!parent || parent.level === 0) return\n\n  if (!node.store.checkStrictly) {\n    reInitChecked(parent)\n  }\n}\n\nconst getPropertyFromData = function(node, prop) {\n  const props = node.store.props\n  const data = node.data || {}\n  const config = props[prop]\n\n  if (typeof config === 'function') {\n    return config(data, node)\n  } else if (typeof config === 'string') {\n    return data[config]\n  } else if (typeof config === 'undefined') {\n    const dataProp = data[prop]\n    return dataProp === undefined ? '' : dataProp\n  }\n}\n\nlet nodeIdSeed = 0\n\nexport default class Node {\n  constructor(options) {\n    this.id = nodeIdSeed++\n    this.text = null\n    this.checked = false\n    this.indeterminate = false\n    this.data = null\n    this.expanded = false\n    this.parent = null\n    this.visible = true\n    this.isCurrent = false\n\n    for (let name in options) {\n      if (options.hasOwnProperty(name)) {\n        this[name] = options[name]\n      }\n    }\n\n    // internal\n    this.level = 0\n    this.loaded = false\n    this.childNodes = []\n    this.loading = false\n\n    if (this.parent) {\n      this.level = this.parent.level + 1\n    }\n\n    const store = this.store\n    if (!store) {\n      throw new Error('[Node]store is required!')\n    }\n    store.registerNode(this)\n\n    const props = store.props\n    if (props && typeof props.isLeaf !== 'undefined') {\n      const isLeaf = getPropertyFromData(this, 'isLeaf')\n      if (typeof isLeaf === 'boolean') {\n        this.isLeafByUser = isLeaf\n      }\n    }\n\n    if (store.lazy !== true && this.data) {\n      this.setData(this.data)\n\n      if (store.defaultExpandAll) {\n        this.expanded = true\n      }\n    } else if (this.level > 0 && store.lazy && store.defaultExpandAll) {\n      this.expand()\n    }\n    if (!Array.isArray(this.data)) {\n      markNodeData(this, this.data)\n    }\n    if (!this.data) return\n    const defaultExpandedKeys = store.defaultExpandedKeys\n    const key = store.key\n    if (key && defaultExpandedKeys && defaultExpandedKeys.indexOf(this.key) !== -1) {\n      this.expand(null, store.autoExpandParent)\n    }\n\n    if (key && store.currentNodeKey !== undefined && this.key === store.currentNodeKey) {\n      store.currentNode = this\n      store.currentNode.isCurrent = true\n    }\n\n    if (store.lazy) {\n      store._initDefaultCheckedNode(this)\n    }\n\n    this.updateLeafState()\n  }\n\n  setData(data) {\n    if (!Array.isArray(data)) {\n      markNodeData(this, data)\n    }\n\n    this.data = data\n    this.childNodes = []\n\n    let children\n    if (this.level === 0 && this.data instanceof Array) {\n      children = this.data\n    } else {\n      children = getPropertyFromData(this, 'children') || []\n    }\n\n    for (let i = 0, j = children.length; i < j; i++) {\n      this.insertChild({ data: children[i] })\n    }\n  }\n\n  get label() {\n    return getPropertyFromData(this, 'label')\n  }\n\n  get key() {\n    const nodeKey = this.store.key\n    if (this.data) return this.data[nodeKey]\n    return null\n  }\n\n  get disabled() {\n    return getPropertyFromData(this, 'disabled')\n  }\n\n  get nextSibling() {\n    const parent = this.parent\n    if (parent) {\n      const index = parent.childNodes.indexOf(this)\n      if (index > -1) {\n        return parent.childNodes[index + 1]\n      }\n    }\n    return null\n  }\n\n  get previousSibling() {\n    const parent = this.parent\n    if (parent) {\n      const index = parent.childNodes.indexOf(this)\n      if (index > -1) {\n        return index > 0 ? parent.childNodes[index - 1] : null\n      }\n    }\n    return null\n  }\n\n  contains(target, deep = true) {\n    const walk = function(parent) {\n      const children = parent.childNodes || []\n      let result = false\n      for (let i = 0, j = children.length; i < j; i++) {\n        const child = children[i]\n        if (child === target || (deep && walk(child))) {\n          result = true\n          break\n        }\n      }\n      return result\n    }\n\n    return walk(this)\n  }\n\n  remove() {\n    const parent = this.parent\n    if (parent) {\n      parent.removeChild(this)\n    }\n  }\n\n  insertChild(child, index, batch) {\n    if (!child) throw new Error('insertChild error: child is required.')\n\n    if (!(child instanceof Node)) {\n      if (!batch) {\n        const children = this.getChildren(true)\n        if (children.indexOf(child.data) === -1) {\n          if (typeof index === 'undefined' || index < 0) {\n            children.push(child.data)\n          } else {\n            children.splice(index, 0, child.data)\n          }\n        }\n      }\n      objectAssign(child, {\n        parent: this,\n        store: this.store\n      })\n      child = new Node(child)\n    }\n\n    child.level = this.level + 1\n\n    if (typeof index === 'undefined' || index < 0) {\n      this.childNodes.push(child)\n    } else {\n      this.childNodes.splice(index, 0, child)\n    }\n\n    this.updateLeafState()\n  }\n\n  insertBefore(child, ref) {\n    let index\n    if (ref) {\n      index = this.childNodes.indexOf(ref)\n    }\n    this.insertChild(child, index)\n  }\n\n  insertAfter(child, ref) {\n    let index\n    if (ref) {\n      index = this.childNodes.indexOf(ref)\n      if (index !== -1) index += 1\n    }\n    this.insertChild(child, index)\n  }\n\n  removeChild(child) {\n    const children = this.getChildren() || []\n    const dataIndex = children.indexOf(child.data)\n    if (dataIndex > -1) {\n      children.splice(dataIndex, 1)\n    }\n\n    const index = this.childNodes.indexOf(child)\n\n    if (index > -1) {\n      this.store && this.store.deregisterNode(child)\n      child.parent = null\n      this.childNodes.splice(index, 1)\n    }\n\n    this.updateLeafState()\n  }\n\n  removeChildByData(data) {\n    let targetNode = null\n\n    for (let i = 0; i < this.childNodes.length; i++) {\n      if (this.childNodes[i].data === data) {\n        targetNode = this.childNodes[i]\n        break\n      }\n    }\n\n    if (targetNode) {\n      this.removeChild(targetNode)\n    }\n  }\n\n  expand(callback, expandParent) {\n    const done = () => {\n      if (expandParent) {\n        let parent = this.parent\n        while (parent.level > 0) {\n          parent.expanded = true\n          parent = parent.parent\n        }\n      }\n      this.expanded = true\n      if (callback) callback()\n    }\n\n    if (this.shouldLoadData()) {\n      this.loadData((data) => {\n        if (data instanceof Array) {\n          if (this.checked) {\n            this.setChecked(true, true)\n          } else if (!this.store.checkStrictly) {\n            reInitChecked(this)\n          }\n          done()\n        }\n      })\n    } else {\n      done()\n    }\n  }\n\n  doCreateChildren(array, defaultProps = {}) {\n    array.forEach((item) => {\n      this.insertChild(objectAssign({ data: item }, defaultProps), undefined, true)\n    })\n  }\n\n  collapse() {\n    this.expanded = false\n  }\n\n  shouldLoadData() {\n    return this.store.lazy === true && this.store.load && !this.loaded\n  }\n\n  updateLeafState() {\n    if (this.store.lazy === true && this.loaded !== true && typeof this.isLeafByUser !== 'undefined') {\n      this.isLeaf = this.isLeafByUser\n      return\n    }\n    const childNodes = this.childNodes\n    if (!this.store.lazy || (this.store.lazy === true && this.loaded === true)) {\n      this.isLeaf = !childNodes || childNodes.length === 0\n      return\n    }\n    this.isLeaf = false\n  }\n\n  setChecked(value, deep, recursion, passValue) {\n    this.indeterminate = value === 'half'\n    this.checked = value === true\n\n    if (this.store.checkStrictly) return\n\n    if (!(this.shouldLoadData() && !this.store.checkDescendants)) {\n      let { all, allWithoutDisable } = getChildState(this.childNodes)\n\n      if (!this.isLeaf && (!all && allWithoutDisable)) {\n        this.checked = false\n        value = false\n      }\n\n      const handleDescendants = () => {\n        if (deep) {\n          const childNodes = this.childNodes\n          for (let i = 0, j = childNodes.length; i < j; i++) {\n            const child = childNodes[i]\n            passValue = passValue || value !== false\n            const isCheck = child.disabled ? child.checked : passValue\n            child.setChecked(isCheck, deep, true, passValue)\n          }\n          const { half, all } = getChildState(childNodes)\n          if (!all) {\n            this.checked = all\n            this.indeterminate = half\n          }\n        }\n      }\n\n      if (this.shouldLoadData()) {\n        // Only work on lazy load data.\n        this.loadData(() => {\n          handleDescendants()\n          reInitChecked(this)\n        }, {\n          checked: value !== false\n        })\n        return\n      } else {\n        handleDescendants()\n      }\n    }\n\n    const parent = this.parent\n    if (!parent || parent.level === 0) return\n\n    if (!recursion) {\n      reInitChecked(parent)\n    }\n  }\n\n  getChildren(forceInit = false) { // this is data\n    if (this.level === 0) return this.data\n    const data = this.data\n    if (!data) return null\n\n    const props = this.store.props\n    let children = 'children'\n    if (props) {\n      children = props.children || 'children'\n    }\n\n    if (data[children] === undefined) {\n      data[children] = null\n    }\n\n    if (forceInit && !data[children]) {\n      data[children] = []\n    }\n\n    return data[children]\n  }\n\n  updateChildren() {\n    const newData = this.getChildren() || []\n    const oldData = this.childNodes.map((node) => node.data)\n\n    const newDataMap = {}\n    const newNodes = []\n\n    newData.forEach((item, index) => {\n      const key = item[NODE_KEY]\n      const isNodeExists = !!key && arrayFindIndex(oldData, data => data[NODE_KEY] === key) >= 0\n      if (isNodeExists) {\n        newDataMap[key] = { index, data: item }\n      } else {\n        newNodes.push({ index, data: item })\n      }\n    })\n\n    if (!this.store.lazy) {\n      oldData.forEach((item) => {\n        if (!newDataMap[item[NODE_KEY]]) this.removeChildByData(item)\n      })\n    }\n\n    newNodes.forEach(({ index, data }) => {\n      this.insertChild({ data }, index)\n    })\n\n    this.updateLeafState()\n  }\n\n  loadData(callback, defaultProps = {}) {\n    if (this.store.lazy === true && this.store.load && !this.loaded && (!this.loading || Object.keys(defaultProps).length)) {\n      this.loading = true\n\n      const resolve = (children) => {\n        this.loaded = true\n        this.loading = false\n        this.childNodes = []\n\n        this.doCreateChildren(children, defaultProps)\n\n        this.updateLeafState()\n        if (callback) {\n          callback.call(this, children)\n        }\n      }\n\n      this.store.load(this, resolve)\n    } else {\n      if (callback) {\n        callback.call(this)\n      }\n    }\n  }\n}\n","import Node from './node'\nimport { getNodeKey } from './util'\n\nexport default class TreeStore {\n  constructor(options) {\n    this.currentNode = null\n    this.currentNodeKey = null\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        this[option] = options[option]\n      }\n    }\n\n    this.nodesMap = {}\n\n    this.root = new Node({\n      data: this.data,\n      store: this\n    })\n\n    if (this.lazy && this.load) {\n      const loadFn = this.load\n      loadFn(this.root, (data) => {\n        this.root.doCreateChildren(data)\n        this._initDefaultCheckedNodes()\n      })\n    } else {\n      this._initDefaultCheckedNodes()\n    }\n  }\n\n  filter(value) {\n    const filterNodeMethod = this.filterNodeMethod\n    const lazy = this.lazy\n    const traverse = function(node) {\n      const childNodes = node.root ? node.root.childNodes : node.childNodes\n\n      childNodes.forEach((child) => {\n        child.visible = filterNodeMethod.call(child, value, child.data, child)\n\n        traverse(child)\n      })\n\n      if (!node.visible && childNodes.length) {\n        let allHidden = true\n        allHidden = !childNodes.some(child => child.visible)\n\n        if (node.root) {\n          node.root.visible = allHidden === false\n        } else {\n          node.visible = allHidden === false\n        }\n      }\n      if (!value) return\n\n      if (node.visible && !node.isLeaf && !lazy) node.expand()\n    }\n\n    traverse(this)\n  }\n\n  setData(newVal) {\n    const instanceChanged = newVal !== this.root.data\n    if (instanceChanged) {\n      this.root.setData(newVal)\n      this._initDefaultCheckedNodes()\n    } else {\n      this.root.updateChildren()\n    }\n  }\n\n  getNode(data) {\n    if (data instanceof Node) return data\n    const key = typeof data !== 'object' ? data : getNodeKey(this.key, data)\n    return this.nodesMap[key] || null\n  }\n\n  insertBefore(data, refData) {\n    const refNode = this.getNode(refData)\n    refNode.parent.insertBefore({ data }, refNode)\n  }\n\n  insertAfter(data, refData) {\n    const refNode = this.getNode(refData)\n    refNode.parent.insertAfter({ data }, refNode)\n  }\n\n  remove(data) {\n    const node = this.getNode(data)\n\n    if (node && node.parent) {\n      if (node === this.currentNode) {\n        this.currentNode = null\n      }\n      node.parent.removeChild(node)\n    }\n  }\n\n  append(data, parentData) {\n    const parentNode = parentData ? this.getNode(parentData) : this.root\n\n    if (parentNode) {\n      parentNode.insertChild({ data })\n    }\n  }\n\n  _initDefaultCheckedNodes() {\n    const defaultCheckedKeys = this.defaultCheckedKeys || []\n    const nodesMap = this.nodesMap\n\n    defaultCheckedKeys.forEach((checkedKey) => {\n      const node = nodesMap[checkedKey]\n\n      if (node) {\n        node.setChecked(true, !this.checkStrictly)\n      }\n    })\n  }\n\n  _initDefaultCheckedNode(node) {\n    const defaultCheckedKeys = this.defaultCheckedKeys || []\n\n    if (defaultCheckedKeys.indexOf(node.key) !== -1) {\n      node.setChecked(true, !this.checkStrictly)\n    }\n  }\n\n  setDefaultCheckedKey(newVal) {\n    if (newVal !== this.defaultCheckedKeys) {\n      this.defaultCheckedKeys = newVal\n      this._initDefaultCheckedNodes()\n    }\n  }\n\n  registerNode(node) {\n    const key = this.key\n    if (!key || !node || !node.data) return\n\n    const nodeKey = node.key\n    if (nodeKey !== undefined) this.nodesMap[node.key] = node\n  }\n\n  deregisterNode(node) {\n    const key = this.key\n    if (!key || !node || !node.data) return\n\n    node.childNodes.forEach(child => {\n      this.deregisterNode(child)\n    })\n\n    delete this.nodesMap[node.key]\n  }\n\n  getCheckedNodes(leafOnly = false, includeHalfChecked = false) {\n    const checkedNodes = []\n    const traverse = function(node) {\n      const childNodes = node.root ? node.root.childNodes : node.childNodes\n\n      childNodes.forEach((child) => {\n        if ((child.checked || (includeHalfChecked && child.indeterminate)) && (!leafOnly || (leafOnly && child.isLeaf))) {\n          checkedNodes.push(child.data)\n        }\n\n        traverse(child)\n      })\n    }\n\n    traverse(this)\n\n    return checkedNodes\n  }\n\n  getCheckedKeys(leafOnly = false) {\n    return this.getCheckedNodes(leafOnly).map((data) => (data || {})[this.key])\n  }\n\n  getHalfCheckedNodes() {\n    const nodes = []\n    const traverse = function(node) {\n      const childNodes = node.root ? node.root.childNodes : node.childNodes\n\n      childNodes.forEach((child) => {\n        if (child.indeterminate) {\n          nodes.push(child.data)\n        }\n\n        traverse(child)\n      })\n    }\n\n    traverse(this)\n\n    return nodes\n  }\n\n  getHalfCheckedKeys() {\n    return this.getHalfCheckedNodes().map((data) => (data || {})[this.key])\n  }\n\n  _getAllNodes() {\n    const allNodes = []\n    const nodesMap = this.nodesMap\n    for (let nodeKey in nodesMap) {\n      if (nodesMap.hasOwnProperty(nodeKey)) {\n        allNodes.push(nodesMap[nodeKey])\n      }\n    }\n\n    return allNodes\n  }\n\n  updateChildren(key, data) {\n    const node = this.nodesMap[key]\n    if (!node) return\n    const childNodes = node.childNodes\n    for (let i = childNodes.length - 1; i >= 0; i--) {\n      const child = childNodes[i]\n      this.remove(child.data)\n    }\n    for (let i = 0, j = data.length; i < j; i++) {\n      const child = data[i]\n      this.append(child, node.data)\n    }\n  }\n\n  _setCheckedKeys(key, leafOnly = false, checkedKeys) {\n    const allNodes = this._getAllNodes().sort((a, b) => b.level - a.level)\n    const cache = Object.create(null)\n    const keys = Object.keys(checkedKeys)\n    allNodes.forEach(node => node.setChecked(false, false))\n    for (let i = 0, j = allNodes.length; i < j; i++) {\n      const node = allNodes[i]\n      const nodeKey = node.data[key].toString()\n      let checked = keys.indexOf(nodeKey) > -1\n      if (!checked) {\n        if (node.checked && !cache[nodeKey]) {\n          node.setChecked(false, false)\n        }\n        continue\n      }\n\n      let parent = node.parent\n      while (parent && parent.level > 0) {\n        cache[parent.data[key]] = true\n        parent = parent.parent\n      }\n\n      if (node.isLeaf || this.checkStrictly) {\n        node.setChecked(true, false)\n        continue\n      }\n      node.setChecked(true, true)\n\n      if (leafOnly) {\n        node.setChecked(false, false)\n        const traverse = function(node) {\n          const childNodes = node.childNodes\n          childNodes.forEach((child) => {\n            if (!child.isLeaf) {\n              child.setChecked(false, false)\n            }\n            traverse(child)\n          })\n        }\n        traverse(node)\n      }\n    }\n  }\n\n  setCheckedNodes(array, leafOnly = false) {\n    const key = this.key\n    const checkedKeys = {}\n    array.forEach((item) => {\n      checkedKeys[(item || {})[key]] = true\n    })\n\n    this._setCheckedKeys(key, leafOnly, checkedKeys)\n  }\n\n  setCheckedKeys(keys, leafOnly = false) {\n    this.defaultCheckedKeys = keys\n    const key = this.key\n    const checkedKeys = {}\n    keys.forEach((key) => {\n      checkedKeys[key] = true\n    })\n\n    this._setCheckedKeys(key, leafOnly, checkedKeys)\n  }\n\n  setDefaultExpandedKeys(keys) {\n    keys = keys || []\n    this.defaultExpandedKeys = keys\n\n    keys.forEach((key) => {\n      const node = this.getNode(key)\n      if (node) node.expand(null, this.autoExpandParent)\n    })\n  }\n\n  setChecked(data, checked, deep) {\n    const node = this.getNode(data)\n\n    if (node) {\n      node.setChecked(!!checked, deep)\n    }\n  }\n\n  getCurrentNode() {\n    return this.currentNode\n  }\n\n  setCurrentNode(currentNode) {\n    const prevCurrentNode = this.currentNode\n    if (prevCurrentNode) {\n      prevCurrentNode.isCurrent = false\n    }\n    this.currentNode = currentNode\n    this.currentNode.isCurrent = true\n  }\n\n  setUserCurrentNode(node) {\n    const key = node[this.key]\n    const currNode = this.nodesMap[key]\n    this.setCurrentNode(currNode)\n  }\n\n  setCurrentNodeKey(key) {\n    if (key === null || key === undefined) {\n      this.currentNode && (this.currentNode.isCurrent = false)\n      this.currentNode = null\n      return\n    }\n    const node = this.getNode(key)\n    if (node) {\n      this.setCurrentNode(node)\n    }\n  }\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.node.visible),expression:\"node.visible\"}],ref:\"node\",staticClass:\"el-tree-node\",class:{\n    'is-expanded': _vm.expanded,\n    'is-current': _vm.node.isCurrent,\n    'is-hidden': !_vm.node.visible,\n    'is-focusable': !_vm.node.disabled,\n    'is-checked': !_vm.node.disabled && _vm.node.checked\n  },attrs:{\"role\":\"treeitem\",\"tabindex\":\"-1\",\"aria-expanded\":_vm.expanded,\"aria-disabled\":_vm.node.disabled,\"aria-checked\":_vm.node.checked,\"draggable\":_vm.tree.draggable},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleClick.apply(null, arguments)},\"contextmenu\":($event) => this.handleContextMenu($event),\"dragstart\":function($event){$event.stopPropagation();return _vm.handleDragStart.apply(null, arguments)},\"dragover\":function($event){$event.stopPropagation();return _vm.handleDragOver.apply(null, arguments)},\"dragend\":function($event){$event.stopPropagation();return _vm.handleDragEnd.apply(null, arguments)},\"drop\":function($event){$event.stopPropagation();return _vm.handleDrop.apply(null, arguments)}}},[_c('div',{staticClass:\"el-tree-node__content\",style:({ 'padding-left': (_vm.node.level - 1) * _vm.tree.indent + 'px' })},[_c('span',{class:[\n        { 'is-leaf': _vm.node.isLeaf, expanded: !_vm.node.isLeaf && _vm.expanded },\n        'el-tree-node__expand-icon',\n        _vm.tree.iconClass ? _vm.tree.iconClass : 'el-icon-caret-right'\n      ],on:{\"click\":function($event){$event.stopPropagation();return _vm.handleExpandIconClick.apply(null, arguments)}}}),(_vm.showCheckbox)?_c('el-checkbox',{attrs:{\"indeterminate\":_vm.node.indeterminate,\"disabled\":!!_vm.node.disabled},on:{\"change\":_vm.handleCheckChange},nativeOn:{\"click\":function($event){$event.stopPropagation();}},model:{value:(_vm.node.checked),callback:function ($$v) {_vm.$set(_vm.node, \"checked\", $$v)},expression:\"node.checked\"}}):_vm._e(),(_vm.node.loading)?_c('span',{staticClass:\"el-tree-node__loading-icon el-icon-loading\"}):_vm._e(),_c('node-content',{attrs:{\"node\":_vm.node}})],1),_c('el-collapse-transition',[(!_vm.renderAfterExpand || _vm.childNodeRendered)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.expanded),expression:\"expanded\"}],staticClass:\"el-tree-node__children\",attrs:{\"role\":\"group\",\"aria-expanded\":_vm.expanded}},_vm._l((_vm.node.childNodes),function(child){return _c('el-tree-node',{key:_vm.getNodeKey(child),attrs:{\"render-content\":_vm.renderContent,\"render-after-expand\":_vm.renderAfterExpand,\"show-checkbox\":_vm.showCheckbox,\"node\":child},on:{\"node-expand\":_vm.handleChildNodeExpand}})}),1):_vm._e()])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { getNodeKey } from '../model/util'\n\nexport default {\n  methods: {\n    creator(parent, nodeTag) {\n      const node = this[nodeTag]\n\n      if (parent.isTree) {\n        this.tree = parent\n      } else {\n        this.tree = parent.tree\n      }\n\n      const tree = this.tree\n      if (!tree) {\n        console.warn('Can not find node\\'s tree.')\n      }\n\n      const props = tree.props || {}\n      const childrenKey = props['children'] || 'children'\n\n      this.$watch(`${nodeTag}.data.${childrenKey}`, () => {\n        node.updateChildren()\n      })\n\n      if (node.expanded) {\n        this.expanded = true\n        this.childNodeRendered = true\n      }\n\n      if (this.tree.accordion) {\n        this.$on('tree-node-expand', currentNode => {\n          if (node !== currentNode) {\n            node.collapse()\n          }\n        })\n      }\n    },\n\n    getNodeKey(node) {\n      return getNodeKey(this.tree.nodeKey, node.data)\n    },\n\n    handleSelectChange(checked, indeterminate) {\n      const node = this.node || this.source\n\n      if (this.oldChecked !== checked && this.oldIndeterminate !== indeterminate) {\n        this.tree.$emit('check-change', node.data, checked, indeterminate)\n      }\n      this.oldChecked = checked\n      this.indeterminate = indeterminate\n    },\n\n    handleClick() {\n      const node = this.node || this.source\n      const store = this.tree.store\n\n      store.setCurrentNode(node)\n      this.tree.$emit('current-change', store.currentNode ? store.currentNode.data : null, store.currentNode)\n      this.tree.currentNode = this\n      if (this.tree.expandOnClickNode) {\n        this.handleExpandIconClick()\n      }\n      if (this.tree.checkOnClickNode && !node.disabled) {\n        this.handleCheckChange(null, {\n          target: { checked: !node.checked }\n        })\n      }\n\n      this.tree.$emit('node-click', node.data, node, this)\n    },\n\n    handleContextMenu(event) {\n      const node = this.node || this.source\n\n      if (this.tree._events['node-contextmenu'] && this.tree._events['node-contextmenu'].length > 0) {\n        event.stopPropagation()\n        event.preventDefault()\n      }\n      this.tree.$emit('node-contextmenu', event, node.data, node, this)\n    },\n\n    handleExpandIconClick() {\n      const node = this.node || this.source\n\n      if (node.isLeaf) return\n      if (this.expanded) {\n        this.tree.$emit('node-collapse', node.data, node, this)\n        node.collapse()\n      } else {\n        node.expand()\n        this.$emit('node-expand', node.data, node, this)\n      }\n    },\n\n    handleCheckChange(_, ev) {\n      const node = this.node || this.source\n\n      node.setChecked(ev.target.checked, !this.tree.checkStrictly)\n      this.$nextTick(() => {\n        const store = this.tree.store\n        this.tree.$emit('check', node.data, {\n          checkedNodes: store.getCheckedNodes(),\n          checkedKeys: store.getCheckedKeys(),\n          halfCheckedNodes: store.getHalfCheckedNodes(),\n          halfCheckedKeys: store.getHalfCheckedKeys()\n        })\n      })\n    },\n\n    handleChildNodeExpand(nodeData, node, instance) {\n      this.broadcast('ElTreeNode', 'tree-node-expand', node)\n      this.tree.$emit('node-expand', nodeData, node, instance)\n    }\n  }\n}\n","<template>\n  <div\n    class=\"el-tree-node\"\n    @click.stop=\"handleClick\"\n    @contextmenu=\"($event) => this.handleContextMenu($event)\"\n    v-show=\"node.visible\"\n    :class=\"{\n      'is-expanded': expanded,\n      'is-current': node.isCurrent,\n      'is-hidden': !node.visible,\n      'is-focusable': !node.disabled,\n      'is-checked': !node.disabled && node.checked\n    }\"\n    role=\"treeitem\"\n    tabindex=\"-1\"\n    :aria-expanded=\"expanded\"\n    :aria-disabled=\"node.disabled\"\n    :aria-checked=\"node.checked\"\n    :draggable=\"tree.draggable\"\n    @dragstart.stop=\"handleDragStart\"\n    @dragover.stop=\"handleDragOver\"\n    @dragend.stop=\"handleDragEnd\"\n    @drop.stop=\"handleDrop\"\n    ref=\"node\"\n  >\n    <div class=\"el-tree-node__content\"\n      :style=\"{ 'padding-left': (node.level - 1) * tree.indent + 'px' }\">\n      <span\n        @click.stop=\"handleExpandIconClick\"\n        :class=\"[\n          { 'is-leaf': node.isLeaf, expanded: !node.isLeaf && expanded },\n          'el-tree-node__expand-icon',\n          tree.iconClass ? tree.iconClass : 'el-icon-caret-right'\n        ]\"\n      >\n      </span>\n      <el-checkbox\n        v-if=\"showCheckbox\"\n        v-model=\"node.checked\"\n        :indeterminate=\"node.indeterminate\"\n        :disabled=\"!!node.disabled\"\n        @click.native.stop\n        @change=\"handleCheckChange\"\n      >\n      </el-checkbox>\n      <span\n        v-if=\"node.loading\"\n        class=\"el-tree-node__loading-icon el-icon-loading\">\n      </span>\n      <node-content :node=\"node\"></node-content>\n    </div>\n    <el-collapse-transition>\n      <div\n        class=\"el-tree-node__children\"\n        v-if=\"!renderAfterExpand || childNodeRendered\"\n        v-show=\"expanded\"\n        role=\"group\"\n        :aria-expanded=\"expanded\"\n      >\n        <el-tree-node\n          :render-content=\"renderContent\"\n          v-for=\"child in node.childNodes\"\n          :render-after-expand=\"renderAfterExpand\"\n          :show-checkbox=\"showCheckbox\"\n          :key=\"getNodeKey(child)\"\n          :node=\"child\"\n          @node-expand=\"handleChildNodeExpand\">\n        </el-tree-node>\n      </div>\n    </el-collapse-transition>\n  </div>\n</template>\n\n<script type=\"text/jsx\">\nimport ElCollapseTransition from 'element-ui/src/transitions/collapse-transition';\nimport ElCheckbox from 'element-ui/packages/checkbox';\nimport emitter from 'element-ui/src/mixins/emitter';\nimport mixinNode from './mixin/node';\nimport { getNodeKey } from './model/util';\n\nexport default {\n  name: 'ElTreeNode',\n\n  componentName: 'ElTreeNode',\n\n  mixins: [emitter, mixinNode],\n\n  props: {\n    node: {\n      default() {\n        return {};\n      }\n    },\n    props: {},\n    renderContent: Function,\n    renderAfterExpand: {\n      type: Boolean,\n      default: true\n    },\n    showCheckbox: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  components: {\n    ElCollapseTransition,\n    ElCheckbox,\n    NodeContent: {\n      props: {\n        node: {\n          required: true\n        }\n      },\n      render(h) {\n        const parent = this.$parent;\n        const tree = parent.tree;\n        const node = this.node;\n        const { data, store } = node;\n        return (\n          parent.renderContent\n            ? parent.renderContent.call(parent._renderProxy, h, { _self: tree.$vnode.context, node, data, store })\n            : tree.$scopedSlots.default\n              ? tree.$scopedSlots.default({ node, data })\n              : <span class=\"el-tree-node__label\">{ node.label }</span>\n        );\n      }\n    }\n  },\n\n  data() {\n    return {\n      tree: null,\n      expanded: false,\n      childNodeRendered: false,\n      oldChecked: null,\n      oldIndeterminate: null\n    };\n  },\n\n  watch: {\n    'node.indeterminate'(val) {\n      this.handleSelectChange(this.node.checked, val);\n    },\n\n    'node.checked'(val) {\n      this.handleSelectChange(val, this.node.indeterminate);\n    },\n\n    'node.expanded'(val) {\n      this.$nextTick(() => this.expanded = val);\n      if (val) {\n        this.childNodeRendered = true;\n      }\n    }\n  },\n\n  methods: {\n    handleDragStart(event) {\n      if (!this.tree.draggable) return;\n      this.tree.$emit('tree-node-drag-start', event, this);\n    },\n\n    handleDragOver(event) {\n      if (!this.tree.draggable) return;\n      this.tree.$emit('tree-node-drag-over', event, this);\n      event.preventDefault();\n    },\n\n    handleDrop(event) {\n      event.preventDefault();\n    },\n\n    handleDragEnd(event) {\n      if (!this.tree.draggable) return;\n      this.tree.$emit('tree-node-drag-end', event, this);\n    }\n  },\n\n  created() {\n    const parent = this.$parent;\n    this.creator(parent, 'node');\n  }\n};\n</script>\n","import mod from \"-!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.26.10_webpack@4.47.0/node_modules/babel-loader/lib/index.js!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/index.js??vue-loader-options!./tree-node.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.26.10_webpack@4.47.0/node_modules/babel-loader/lib/index.js!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/index.js??vue-loader-options!./tree-node.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./tree-node.vue?vue&type=template&id=05432960\"\nimport script from \"./tree-node.vue?vue&type=script&lang=js\"\nexport * from \"./tree-node.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.source.visible),expression:\"source.visible\"}],ref:\"node\",staticClass:\"el-tree-node\",class:{\n    'is-expanded': _vm.expanded,\n    'is-current': _vm.source.isCurrent,\n    'is-hidden': !_vm.source.visible,\n    'is-focusable': !_vm.source.disabled,\n    'is-checked': !_vm.source.disabled && _vm.source.checked\n  },attrs:{\"role\":\"treeitem\",\"tabindex\":\"-1\",\"aria-expanded\":_vm.expanded,\"aria-disabled\":_vm.source.disabled,\"aria-checked\":_vm.source.checked},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleClick.apply(null, arguments)},\"contextmenu\":($event) => this.handleContextMenu($event)}},[_c('div',{staticClass:\"el-tree-node__content\",style:({ 'padding-left': (_vm.source.level - 1) * _vm.tree.indent + 'px' })},[_c('span',{class:[\n        { 'is-leaf': _vm.source.isLeaf, expanded: !_vm.source.isLeaf && _vm.expanded },\n        'el-tree-node__expand-icon',\n        _vm.tree.iconClass ? _vm.tree.iconClass : 'el-icon-caret-right'\n      ],on:{\"click\":function($event){$event.stopPropagation();return _vm.handleExpandIconClick.apply(null, arguments)}}}),(_vm.showCheckbox)?_c('el-checkbox',{attrs:{\"indeterminate\":_vm.source.indeterminate,\"disabled\":!!_vm.source.disabled},on:{\"change\":_vm.handleCheckChange},nativeOn:{\"click\":function($event){$event.stopPropagation();}},model:{value:(_vm.source.checked),callback:function ($$v) {_vm.$set(_vm.source, \"checked\", $$v)},expression:\"source.checked\"}}):_vm._e(),(_vm.source.loading)?_c('span',{staticClass:\"el-tree-node__loading-icon el-icon-loading\"}):_vm._e(),_c('node-content',{attrs:{\"node\":_vm.source}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"el-tree-node\"\n    @click.stop=\"handleClick\"\n    @contextmenu=\"($event) => this.handleContextMenu($event)\"\n    v-show=\"source.visible\"\n    :class=\"{\n      'is-expanded': expanded,\n      'is-current': source.isCurrent,\n      'is-hidden': !source.visible,\n      'is-focusable': !source.disabled,\n      'is-checked': !source.disabled && source.checked\n    }\"\n    role=\"treeitem\"\n    tabindex=\"-1\"\n    :aria-expanded=\"expanded\"\n    :aria-disabled=\"source.disabled\"\n    :aria-checked=\"source.checked\"\n    ref=\"node\"\n  >\n    <div class=\"el-tree-node__content\"\n      :style=\"{ 'padding-left': (source.level - 1) * tree.indent + 'px' }\">\n      <!-- <span aria-hidden=\"true\" :style=\"{ 'width': (source.level - 1) * tree.indent + 'px' }\"></span> -->\n      <span\n        @click.stop=\"handleExpandIconClick\"\n        :class=\"[\n          { 'is-leaf': source.isLeaf, expanded: !source.isLeaf && expanded },\n          'el-tree-node__expand-icon',\n          tree.iconClass ? tree.iconClass : 'el-icon-caret-right'\n        ]\"\n      >\n      </span>\n      <el-checkbox\n        v-if=\"showCheckbox\"\n        v-model=\"source.checked\"\n        :indeterminate=\"source.indeterminate\"\n        :disabled=\"!!source.disabled\"\n        @click.native.stop\n        @change=\"handleCheckChange\"\n      >\n      </el-checkbox>\n      <span\n        v-if=\"source.loading\"\n        class=\"el-tree-node__loading-icon el-icon-loading\">\n      </span>\n      <node-content :node=\"source\"></node-content>\n    </div>\n  </div>\n</template>\n\n<script type=\"text/jsx\">\nimport ElCheckbox from 'element-ui/packages/checkbox';\nimport emitter from 'element-ui/src/mixins/emitter';\nimport mixinNode from './mixin/node';\nimport { getNodeKey } from './model/util';\n\nexport default {\n  name: 'ElTreeVirtualNode',\n  componentName: 'ElTreeVirtualNode',\n\n  mixins: [emitter, mixinNode],\n\n  props: {\n    source: {\n      default() {\n        return {};\n      }\n    },\n    renderContent: Function,\n    showCheckbox: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  components: {\n    ElCheckbox,\n    NodeContent: {\n      props: {\n        node: {\n          required: true\n        }\n      },\n      render(h) {\n        const parent = this.$parent;\n        const tree = parent.tree;\n        const node = this.node;\n        const { data, store } = node;\n        return (\n          parent.renderContent\n            ? parent.renderContent.call(parent._renderProxy, h, { _self: tree.$vnode.context, node, data, store })\n            : tree.$scopedSlots.default\n              ? tree.$scopedSlots.default({ node, data })\n              : <span class=\"el-tree-node__label\">{ node.label }</span>\n        );\n      }\n    }\n  },\n\n  data() {\n    return {\n      tree: null,\n      expanded: false,\n      childNodeRendered: false,\n      oldChecked: null,\n      oldIndeterminate: null\n    };\n  },\n\n  watch: {\n    'source.indeterminate'(val) {\n      this.handleSelectChange(this.source.checked, val);\n    },\n\n    'source.checked'(val) {\n      this.handleSelectChange(val, this.source.indeterminate);\n    },\n\n    'source.expanded'(val) {\n      this.$nextTick(() => this.expanded = val);\n      if (val) {\n        this.childNodeRendered = true;\n      }\n    }\n  },\n\n  created() {\n    const parent = this.$parent.$parent.$parent;\n    this.creator(parent, 'source');\n  }\n};\n</script>\n","import mod from \"-!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.26.10_webpack@4.47.0/node_modules/babel-loader/lib/index.js!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/index.js??vue-loader-options!./tree-virtual-node.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.26.10_webpack@4.47.0/node_modules/babel-loader/lib/index.js!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/index.js??vue-loader-options!./tree-virtual-node.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./tree-virtual-node.vue?vue&type=template&id=33d639fa\"\nimport script from \"./tree-virtual-node.vue?vue&type=script&lang=js\"\nexport * from \"./tree-virtual-node.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    class=\"el-tree\"\n    :class=\"{\n      'el-tree--highlight-current': highlightCurrent,\n      'is-dragging': !!dragState.draggingNode,\n      'is-drop-not-allow': !dragState.allowDrop,\n      'is-drop-inner': dragState.dropType === 'inner'\n    }\"\n    role=\"tree\"\n  >\n    <virtual-list v-if=\"height\" :style=\"{ height: height + 'px', 'overflow-y': 'auto' }\"\n      :data-key=\"getNodeKey\"\n      :data-sources=\"visibleList\"\n      :data-component=\"itemComponent\"\n      :keeps=\"Math.ceil(height / 22) + extraLine\"\n      :extra-props=\"{\n        renderAfterExpand,\n        showCheckbox,\n        renderContent,\n        onNodeExpand: handleNodeExpand\n      }\"\n    />\n    <el-tree-node\n      v-else\n      v-for=\"child in root.childNodes\"\n      :node=\"child\"\n      :props=\"props\"\n      :render-after-expand=\"renderAfterExpand\"\n      :show-checkbox=\"showCheckbox\"\n      :key=\"getNodeKey(child)\"\n      :render-content=\"renderContent\"\n      @node-expand=\"handleNodeExpand\">\n    </el-tree-node>\n    <div class=\"el-tree__empty-block\" v-if=\"isEmpty\">\n      <span class=\"el-tree__empty-text\">{{ emptyText }}</span>\n    </div>\n    <div\n      v-show=\"dragState.showDropIndicator\"\n      class=\"el-tree__drop-indicator\"\n      ref=\"dropIndicator\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport TreeStore from './model/tree-store';\nimport VirtualList from 'vue-virtual-scroll-list';\nimport { getNodeKey, findNearestComponent } from './model/util';\nimport ElTreeNode from './tree-node.vue';\nimport ElVirtualNode from './tree-virtual-node.vue';\nimport {t} from 'element-ui/src/locale';\nimport emitter from 'element-ui/src/mixins/emitter';\nimport { addClass, removeClass } from 'element-ui/src/utils/dom';\n\nexport default {\n  name: 'ElTree',\n\n  mixins: [emitter],\n\n  components: {\n    VirtualList,\n    ElTreeNode\n  },\n\n  data() {\n    return {\n      store: null,\n      root: null,\n      currentNode: null,\n      treeItems: null,\n      checkboxItems: [],\n      dragState: {\n        showDropIndicator: false,\n        draggingNode: null,\n        dropNode: null,\n        allowDrop: true\n      },\n      itemComponent: ElVirtualNode\n    };\n  },\n\n  props: {\n    data: {\n      type: Array\n    },\n    emptyText: {\n      type: String,\n      default() {\n        return t('el.tree.emptyText');\n      }\n    },\n    renderAfterExpand: {\n      type: Boolean,\n      default: true\n    },\n    nodeKey: String,\n    checkStrictly: Boolean,\n    defaultExpandAll: Boolean,\n    expandOnClickNode: {\n      type: Boolean,\n      default: true\n    },\n    checkOnClickNode: Boolean,\n    checkDescendants: {\n      type: Boolean,\n      default: false\n    },\n    autoExpandParent: {\n      type: Boolean,\n      default: true\n    },\n    defaultCheckedKeys: Array,\n    defaultExpandedKeys: Array,\n    currentNodeKey: [String, Number],\n    renderContent: Function,\n    showCheckbox: {\n      type: Boolean,\n      default: false\n    },\n    draggable: {\n      type: Boolean,\n      default: false\n    },\n    allowDrag: Function,\n    allowDrop: Function,\n    props: {\n      default() {\n        return {\n          children: 'children',\n          label: 'label',\n          disabled: 'disabled'\n        };\n      }\n    },\n    lazy: {\n      type: Boolean,\n      default: false\n    },\n    highlightCurrent: Boolean,\n    load: Function,\n    filterNodeMethod: Function,\n    accordion: Boolean,\n    indent: {\n      type: Number,\n      default: 18\n    },\n    iconClass: String,\n    height: {\n      type: Number,\n      default: 0\n    },\n    extraLine: {\n      type: Number,\n      default: 8\n    }\n  },\n\n  computed: {\n    children: {\n      set(value) {\n        this.data = value;\n      },\n      get() {\n        return this.data;\n      }\n    },\n\n    treeItemArray() {\n      return Array.prototype.slice.call(this.treeItems);\n    },\n\n    isEmpty() {\n      const { childNodes } = this.root;\n      return !childNodes || childNodes.length === 0 || childNodes.every(({visible}) => !visible);\n    },\n\n    visibleList() {\n      return this.flattenTree(this.root.childNodes);\n    }\n  },\n\n  watch: {\n    defaultCheckedKeys(newVal) {\n      this.store.setDefaultCheckedKey(newVal);\n    },\n\n    defaultExpandedKeys(newVal) {\n      this.store.defaultExpandedKeys = newVal;\n      this.store.setDefaultExpandedKeys(newVal);\n    },\n\n    data(newVal) {\n      this.store.setData(newVal);\n    },\n\n    checkboxItems(val) {\n      Array.prototype.forEach.call(val, (checkbox) => {\n        checkbox.setAttribute('tabindex', -1);\n      });\n    },\n\n    checkStrictly(newVal) {\n      this.store.checkStrictly = newVal;\n    }\n  },\n\n  methods: {\n    flattenTree(datas) {\n      return datas.reduce((conn, data) => {\n        conn.push(data);\n        if (data.expanded && data.childNodes.length) {\n          conn.push(...this.flattenTree(data.childNodes));\n        }\n\n        return conn;\n      }, []);\n    },\n    filter(value) {\n      if (!this.filterNodeMethod) throw new Error('[Tree] filterNodeMethod is required when filter');\n      this.store.filter(value);\n    },\n\n    getNodeKey(node) {\n      return getNodeKey(this.nodeKey, node.data);\n    },\n\n    getNodePath(data) {\n      if (!this.nodeKey) throw new Error('[Tree] nodeKey is required in getNodePath');\n      const node = this.store.getNode(data);\n      if (!node) return [];\n      const path = [node.data];\n      let parent = node.parent;\n      while (parent && parent !== this.root) {\n        path.push(parent.data);\n        parent = parent.parent;\n      }\n      return path.reverse();\n    },\n\n    getCheckedNodes(leafOnly, includeHalfChecked) {\n      return this.store.getCheckedNodes(leafOnly, includeHalfChecked);\n    },\n\n    getCheckedKeys(leafOnly) {\n      return this.store.getCheckedKeys(leafOnly);\n    },\n\n    getCurrentNode() {\n      const currentNode = this.store.getCurrentNode();\n      return currentNode ? currentNode.data : null;\n    },\n\n    getCurrentKey() {\n      if (!this.nodeKey) throw new Error('[Tree] nodeKey is required in getCurrentKey');\n      const currentNode = this.getCurrentNode();\n      return currentNode ? currentNode[this.nodeKey] : null;\n    },\n\n    setCheckedNodes(nodes, leafOnly) {\n      if (!this.nodeKey) throw new Error('[Tree] nodeKey is required in setCheckedNodes');\n      this.store.setCheckedNodes(nodes, leafOnly);\n    },\n\n    setCheckedKeys(keys, leafOnly) {\n      if (!this.nodeKey) throw new Error('[Tree] nodeKey is required in setCheckedKeys');\n      this.store.setCheckedKeys(keys, leafOnly);\n    },\n\n    setChecked(data, checked, deep) {\n      this.store.setChecked(data, checked, deep);\n    },\n\n    getHalfCheckedNodes() {\n      return this.store.getHalfCheckedNodes();\n    },\n\n    getHalfCheckedKeys() {\n      return this.store.getHalfCheckedKeys();\n    },\n\n    setCurrentNode(node) {\n      if (!this.nodeKey) throw new Error('[Tree] nodeKey is required in setCurrentNode');\n      this.store.setUserCurrentNode(node);\n    },\n\n    setCurrentKey(key) {\n      if (!this.nodeKey) throw new Error('[Tree] nodeKey is required in setCurrentKey');\n      this.store.setCurrentNodeKey(key);\n    },\n\n    getNode(data) {\n      return this.store.getNode(data);\n    },\n\n    remove(data) {\n      this.store.remove(data);\n    },\n\n    append(data, parentNode) {\n      this.store.append(data, parentNode);\n    },\n\n    insertBefore(data, refNode) {\n      this.store.insertBefore(data, refNode);\n    },\n\n    insertAfter(data, refNode) {\n      this.store.insertAfter(data, refNode);\n    },\n\n    handleNodeExpand(nodeData, node, instance) {\n      this.broadcast('ElTreeNode', 'tree-node-expand', node);\n      this.$emit('node-expand', nodeData, node, instance);\n    },\n\n    updateKeyChildren(key, data) {\n      if (!this.nodeKey) throw new Error('[Tree] nodeKey is required in updateKeyChild');\n      this.store.updateChildren(key, data);\n    },\n\n    initTabIndex() {\n      this.treeItems = this.$el.querySelectorAll('.is-focusable[role=treeitem]');\n      this.checkboxItems = this.$el.querySelectorAll('input[type=checkbox]');\n      const checkedItem = this.$el.querySelectorAll('.is-checked[role=treeitem]');\n      if (checkedItem.length) {\n        checkedItem[0].setAttribute('tabindex', 0);\n        return;\n      }\n      this.treeItems[0] && this.treeItems[0].setAttribute('tabindex', 0);\n    },\n\n    handleKeydown(ev) {\n      const currentItem = ev.target;\n      if (currentItem.className.indexOf('el-tree-node') === -1) return;\n      const keyCode = ev.keyCode;\n      this.treeItems = this.$el.querySelectorAll('.is-focusable[role=treeitem]');\n      const currentIndex = this.treeItemArray.indexOf(currentItem);\n      let nextIndex;\n      if ([38, 40].indexOf(keyCode) > -1) { // up、down\n        ev.preventDefault();\n        if (keyCode === 38) { // up\n          nextIndex = currentIndex !== 0 ? currentIndex - 1 : 0;\n        } else {\n          nextIndex = (currentIndex < this.treeItemArray.length - 1) ? currentIndex + 1 : 0;\n        }\n        this.treeItemArray[nextIndex].focus(); // 选中\n      }\n      if ([37, 39].indexOf(keyCode) > -1) { // left、right 展开\n        ev.preventDefault();\n        currentItem.click(); // 选中\n      }\n      const hasInput = currentItem.querySelector('[type=\"checkbox\"]');\n      if ([13, 32].indexOf(keyCode) > -1 && hasInput) { // space enter选中checkbox\n        ev.preventDefault();\n        hasInput.click();\n      }\n    }\n  },\n\n  created() {\n    this.isTree = true;\n\n    this.store = new TreeStore({\n      key: this.nodeKey,\n      data: this.data,\n      lazy: this.lazy,\n      props: this.props,\n      load: this.load,\n      currentNodeKey: this.currentNodeKey,\n      checkStrictly: this.checkStrictly,\n      checkDescendants: this.checkDescendants,\n      defaultCheckedKeys: this.defaultCheckedKeys,\n      defaultExpandedKeys: this.defaultExpandedKeys,\n      autoExpandParent: this.autoExpandParent,\n      defaultExpandAll: this.defaultExpandAll,\n      filterNodeMethod: this.filterNodeMethod\n    });\n\n    this.root = this.store.root;\n\n    let dragState = this.dragState;\n    this.$on('tree-node-drag-start', (event, treeNode) => {\n      if (typeof this.allowDrag === 'function' && !this.allowDrag(treeNode.node)) {\n        event.preventDefault();\n        return false;\n      }\n      event.dataTransfer.effectAllowed = 'move';\n\n      // wrap in try catch to address IE's error when first param is 'text/plain'\n      try {\n        // setData is required for draggable to work in FireFox\n        // the content has to be '' so dragging a node out of the tree won't open a new tab in FireFox\n        event.dataTransfer.setData('text/plain', '');\n      } catch (e) {}\n      dragState.draggingNode = treeNode;\n      this.$emit('node-drag-start', treeNode.node, event);\n    });\n\n    this.$on('tree-node-drag-over', (event, treeNode) => {\n      const dropNode = findNearestComponent(event.target, 'ElTreeNode');\n      const oldDropNode = dragState.dropNode;\n      if (oldDropNode && oldDropNode !== dropNode) {\n        removeClass(oldDropNode.$el, 'is-drop-inner');\n      }\n      const draggingNode = dragState.draggingNode;\n      if (!draggingNode || !dropNode) return;\n\n      let dropPrev = true;\n      let dropInner = true;\n      let dropNext = true;\n      let userAllowDropInner = true;\n      if (typeof this.allowDrop === 'function') {\n        dropPrev = this.allowDrop(draggingNode.node, dropNode.node, 'prev');\n        userAllowDropInner = dropInner = this.allowDrop(draggingNode.node, dropNode.node, 'inner');\n        dropNext = this.allowDrop(draggingNode.node, dropNode.node, 'next');\n      }\n      event.dataTransfer.dropEffect = dropInner ? 'move' : 'none';\n      if ((dropPrev || dropInner || dropNext) && oldDropNode !== dropNode) {\n        if (oldDropNode) {\n          this.$emit('node-drag-leave', draggingNode.node, oldDropNode.node, event);\n        }\n        this.$emit('node-drag-enter', draggingNode.node, dropNode.node, event);\n      }\n\n      if (dropPrev || dropInner || dropNext) {\n        dragState.dropNode = dropNode;\n      }\n\n      if (dropNode.node.nextSibling === draggingNode.node) {\n        dropNext = false;\n      }\n      if (dropNode.node.previousSibling === draggingNode.node) {\n        dropPrev = false;\n      }\n      if (dropNode.node.contains(draggingNode.node, false)) {\n        dropInner = false;\n      }\n      if (draggingNode.node === dropNode.node || draggingNode.node.contains(dropNode.node)) {\n        dropPrev = false;\n        dropInner = false;\n        dropNext = false;\n      }\n\n      const targetPosition = dropNode.$el.getBoundingClientRect();\n      const treePosition = this.$el.getBoundingClientRect();\n\n      let dropType;\n      const prevPercent = dropPrev ? (dropInner ? 0.25 : (dropNext ? 0.45 : 1)) : -1;\n      const nextPercent = dropNext ? (dropInner ? 0.75 : (dropPrev ? 0.55 : 0)) : 1;\n\n      let indicatorTop = -9999;\n      const distance = event.clientY - targetPosition.top;\n      if (distance < targetPosition.height * prevPercent) {\n        dropType = 'before';\n      } else if (distance > targetPosition.height * nextPercent) {\n        dropType = 'after';\n      } else if (dropInner) {\n        dropType = 'inner';\n      } else {\n        dropType = 'none';\n      }\n\n      const iconPosition = dropNode.$el.querySelector('.el-tree-node__expand-icon').getBoundingClientRect();\n      const dropIndicator = this.$refs.dropIndicator;\n      if (dropType === 'before') {\n        indicatorTop = iconPosition.top - treePosition.top;\n      } else if (dropType === 'after') {\n        indicatorTop = iconPosition.bottom - treePosition.top;\n      }\n      dropIndicator.style.top = indicatorTop + 'px';\n      dropIndicator.style.left = (iconPosition.right - treePosition.left) + 'px';\n\n      if (dropType === 'inner') {\n        addClass(dropNode.$el, 'is-drop-inner');\n      } else {\n        removeClass(dropNode.$el, 'is-drop-inner');\n      }\n\n      dragState.showDropIndicator = dropType === 'before' || dropType === 'after';\n      dragState.allowDrop = dragState.showDropIndicator || userAllowDropInner;\n      dragState.dropType = dropType;\n      this.$emit('node-drag-over', draggingNode.node, dropNode.node, event);\n    });\n\n    this.$on('tree-node-drag-end', (event) => {\n      const { draggingNode, dropType, dropNode } = dragState;\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'move';\n\n      if (draggingNode && dropNode) {\n        const draggingNodeCopy = { data: draggingNode.node.data };\n        if (dropType !== 'none') {\n          draggingNode.node.remove();\n        }\n        if (dropType === 'before') {\n          dropNode.node.parent.insertBefore(draggingNodeCopy, dropNode.node);\n        } else if (dropType === 'after') {\n          dropNode.node.parent.insertAfter(draggingNodeCopy, dropNode.node);\n        } else if (dropType === 'inner') {\n          dropNode.node.insertChild(draggingNodeCopy);\n        }\n        if (dropType !== 'none') {\n          this.store.registerNode(draggingNodeCopy);\n        }\n\n        removeClass(dropNode.$el, 'is-drop-inner');\n\n        this.$emit('node-drag-end', draggingNode.node, dropNode.node, dropType, event);\n        if (dropType !== 'none') {\n          this.$emit('node-drop', draggingNode.node, dropNode.node, dropType, event);\n        }\n      }\n      if (draggingNode && !dropNode) {\n        this.$emit('node-drag-end', draggingNode.node, null, dropType, event);\n      }\n\n      dragState.showDropIndicator = false;\n      dragState.draggingNode = null;\n      dragState.dropNode = null;\n      dragState.allowDrop = true;\n    });\n  },\n\n  mounted() {\n    this.initTabIndex();\n    this.$el.addEventListener('keydown', this.handleKeydown);\n  },\n\n  updated() {\n    this.treeItems = this.$el.querySelectorAll('[role=treeitem]');\n    this.checkboxItems = this.$el.querySelectorAll('input[type=checkbox]');\n  }\n};\n</script>\n","import mod from \"-!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.26.10_webpack@4.47.0/node_modules/babel-loader/lib/index.js!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/index.js??vue-loader-options!./tree.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/.pnpm/thread-loader@2.1.3_webpack@4.47.0/node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/.pnpm/babel-loader@8.4.1_@babel+core@7.26.10_webpack@4.47.0/node_modules/babel-loader/lib/index.js!../../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/index.js??vue-loader-options!./tree.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./tree.vue?vue&type=template&id=0c6a4fa0\"\nimport script from \"./tree.vue?vue&type=script&lang=js\"\nexport * from \"./tree.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/.pnpm/vue-loader@15.11.1_@vue+compiler-sfc@3.5.13_cache-loader@4.1.0_webpack@4.47.0__css-load_7907ed7515d572276d45114f834f04a7/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import * as THREE from \"three\";\n\n/**\n * GeometryUtils class\n */\nexport default class GeometryUtils {\n  /**\n   * Compares two materials\n   */\n  public static geometryEquals(g1: THREE.BufferGeometry, g2: THREE.BufferGeometry): boolean {\n    if (g1 === g2) {\n      return true;\n    }\n    const result =\n      g1.type === g2.type &&\n      g1.name === g2.name &&\n      g1.morphTargetsRelative === g2.morphTargetsRelative &&\n      this.equals<THREE.Box3>(g1.boundingBox, g2.boundingBox) &&\n      this.equals<THREE.Sphere>(g1.boundingSphere, g2.boundingSphere) &&\n      this.attributesEqual(g1.attributes, g2.attributes) &&\n      this.bufferAttributeEqual(g1.index, g2.index);\n    // there are more, but let's compare these for now!\n    return result;\n  }\n\n  /**\n   * Checks if two types equal each other.\n   * This method requires type T defined 'equals' method.\n   */\n  private static equals<T>(t1: T | null, t2: T | null): boolean {\n    if (t1 === t2) {\n      return true;\n    } else if (!t1 && !t2) {\n      return true;\n    } else if (t1 && t2) {\n      return (t1 as any).equals(t2);\n    } else {\n      // in case, one of b1 or b2 is null or undefined\n      return false;\n    }\n  }\n\n  private static attributesEqual(a1: any, a2: any): boolean {\n    if (a1 === a2) {\n      return true;\n    }\n    const keys1 = Object.keys(a1).sort();\n    const keys2 = Object.keys(a2).sort();\n    if (keys1.length !== keys2.length) {\n      return false;\n    }\n    for (let i = 0; i < keys1.length; ++i) {\n      if (keys1[i] !== keys2[i]) {\n        return false;\n      }\n      const ba1 = a1[keys1[i]] as THREE.BufferAttribute;\n      const ba2 = a2[keys2[i]] as THREE.BufferAttribute;\n      const equals = this.bufferAttributeEqual(ba1, ba2);\n      if (!equals) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  private static bufferAttributeEqual(b1: THREE.BufferAttribute | null, b2: THREE.BufferAttribute | null): boolean {\n    if (b1 === b2) {\n      return true;\n    } if (!b1 || !b2) {\n      return false;\n    }\n    const equals = b1.name === b2.name &&\n      b1.itemSize === b2.itemSize &&\n      b1.count === b2.count &&\n      b1.normalized === b2.normalized;\n    if (!equals) {\n      return false;\n    }\n\n    // compare 'array' if there is\n    if (b1.array && b2.array) {\n      if (b1.array.length !== b2.array.length) {\n        return false;\n      }\n      for (let i = 0; i < b1.array.length; ++i) {\n        if (b1.array[i] !== b2.array[i]) {\n          return false;\n        }\n      }\n    } else if (b1.array || b2.array) {\n      return false;\n    }\n\n    // compare 'data' if there is\n    const d1 = (b1 as any).data;\n    const d2 = (b2 as any).data;\n    if (d1 && d2) {\n      if (d1.length !== d2.length) {\n        return false;\n      }\n      for (let i = 0; i < d1.length; ++i) {\n        if (d1[i] !== d2[i]) {\n          return false;\n        }\n      }\n    } else if (d1 || d2) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Converts InterleavedBufferAttribute to BufferAttribute, because mergeGeometries doesn't support InterleavedBufferAttribute.\n   * If it is supported by Three.js one day, we should remove this method.\n   */\n  public static tryConvertInterleavedBufferAttributes(geometry: THREE.BufferGeometry) {\n    if (!geometry || !geometry.attributes) {\n      return;\n    }\n    Object.keys(geometry.attributes).forEach(key => {\n      const val = geometry.attributes[key];\n      if (val instanceof THREE.InterleavedBufferAttribute) {\n        const bufferAttr = val.clone(); // returns THREE.BufferAttribute\n        geometry.attributes[key] = bufferAttr;\n      }\n    });\n  }\n}\n","import * as THREE from \"three\";\n\n/**\n * MaterialUtils class\n */\nexport default class MaterialUtils {\n  /**\n   * Compares two materials\n   */\n  public static materialEquals(m1: THREE.Material, m2: THREE.Material): boolean {\n    if (m1 === m2) {\n      return true;\n    }\n    if (m1 instanceof THREE.Material && m2 instanceof THREE.Material) {\n      const result = m1.type === m2.type &&\n        m1.alphaTest === m2.alphaTest &&\n        m1.opacity === m2.opacity &&\n        m1.side === m2.side &&\n        m1.visible === m2.visible &&\n        m1.name === m2.name &&\n        m1.transparent === m2.transparent &&\n        this.colorEquals((m1 as any).color, (m2 as any).color) &&\n        this.colorEquals((m1 as any).emissive, (m2 as any).emissive) &&\n        (m1 as any).roughness === (m2 as any).roughness &&\n        (m1 as any).metalness === (m2 as any).metalness &&\n        (m1 as any).alphaMap === (m2 as any).alphaMap;\n      // there are more, but let's compare these for now!\n      return result;\n    }\n    return false;\n  }\n\n  /**\n   * Compares two materials, which could be material or material array\n   */\n  public static materialsEquals(m1: THREE.Material | THREE.Material[], m2: THREE.Material | THREE.Material[]): boolean {\n    if (m1 === m2) {\n      return true;\n    } else if (Array.isArray(m1) && Array.isArray(m2) && m1.length === m2.length) {\n      for (let i = 0; i < m1.length; ++i) {\n        if (!this.materialEquals(m1[i], m2[i])) {\n          return false;\n        }\n      }\n      return true;\n    } else if (m1 instanceof THREE.Material && m2 instanceof THREE.Material) {\n      return this.materialEquals(m1, m2);\n    }\n    return false;\n  }\n\n  /**\n   * Compares two colors\n   */\n  public static colorEquals(c1: THREE.Color, c2: THREE.Color): boolean {\n    if (c1 === c2) {\n      return true;\n    }\n    if (c1 instanceof THREE.Color && c2 instanceof THREE.Color) {\n      return c1.equals(c2);\n    }\n    return false;\n  }\n}\n","import * as THREE from \"three\";\nimport { matrixAutoUpdate } from \"@/core/Constants\";\nimport GeometryUtils from \"../utils/GeometryUtils\";\nimport MaterialUtils from \"../utils/MaterialUtils\";\n\n/**\n * InstantiateHelper class is used to instantiate child objects for a given object\n */\nexport default class InstantiateHelper {\n  object: THREE.Object3D;\n\n  constructor(object: THREE.Object3D) {\n    this.object = object;\n  }\n\n  /**\n   * Instatiates child objects for given object.\n   */\n  public instantiate() {\n    const startTime = Date.now();\n    this.instantiateInner(this.object);\n    console.log(`[Inst] instantiate() costed ${(Date.now() - startTime) / 1000}s`);\n  }\n\n  /**\n   * Instatiates child objects of given object.\n   * If objects' geometry and material are the same, they can be instanced.\n   */\n  private instantiateInner(object: THREE.Object3D) {\n    if (!object.children || object.children.length === 0) {\n      return;\n    }\n    const childCount = object.children.length;\n\n    // to group the index that can be instanced. e.g. {0: { indexes: [0, 3, 4]}}\n    // means 0, 3, 4 have the same geometry and material can be instanced\n    const dict: { [firstIndex: number]: { indexes: number[] } } = {};\n    // store indexes of objects that are able to but didn't find the same geometry and material yet.\n    // nonInstIndexes is used in order to improve performance (space for time), with this, it can check less objects.\n    const nonInstIndexes: number[] = [];\n    for (let i = 0; i < childCount; ++i) {\n      const oi = object.children[i] as THREE.Mesh; // object i\n      // recursive call, depth-first, handle descendants first\n      this.instantiateInner(oi);\n\n      if (oi.children && oi.children.length > 0) continue; // only instantiate leaf nodes, skip parent nodes\n      if (!oi.geometry) continue; // skit any one without geometry\n\n      let foundInstantableObject = false;\n      // for a better hit rate(performance), firstly find out if there is the same geometry and material in the dict\n      const values = Object.values(dict);\n      for (let j = values.length - 1; j >= 0; --j) { // search from back to front for a better hit rate\n        const k = values[j].indexes[0];\n        const ok = object.children[k] as THREE.Mesh; // object k\n        // if geometry and material are the same, then they can be instanced\n        if (this.geometryEquals(oi.geometry, ok.geometry) && MaterialUtils.materialsEquals(oi.material, ok.material)) {\n          if (!dict[k]) {\n            dict[k] = { indexes: [k] };\n            this.removeFromArray(nonInstIndexes, k);\n          }\n          dict[k].indexes.push(i);\n          foundInstantableObject = true;\n          break; // break, since already found the same instance\n        }\n      }\n\n      for (let j = nonInstIndexes.length - 1; !foundInstantableObject && j >= 0; --j) {\n        const k = nonInstIndexes[j];\n        const ok = object.children[k] as THREE.Mesh; // object k\n        // if geometry and material are the same, then they can be instanced\n        if (this.geometryEquals(oi.geometry, ok.geometry) && MaterialUtils.materialsEquals(oi.material, ok.material)) {\n          if (!dict[k]) {\n            dict[k] = { indexes: [k] };\n            this.removeFromArray(nonInstIndexes, k);\n          }\n          dict[k].indexes.push(i);\n          foundInstantableObject = true;\n          break; // break, since already found the same instance\n        }\n      }\n      if (!foundInstantableObject) {\n        nonInstIndexes.push(i);\n      }\n    }\n    if (Object.keys(dict).length <= 0) {\n      return;\n    }\n    // console.log(dict)\n\n    // creates new instances\n    const instances: THREE.InstancedMesh[] = [];\n    const indexesToBeRemoved: number[] = []; // store all indexes to be removed later\n    Object.values(dict).forEach((value: any) => {\n      const indexes = value.indexes;\n      indexesToBeRemoved.push(...indexes);\n      const firstObj = object.children[indexes[0]] as THREE.Mesh;\n      let mat = firstObj.material;\n      if (mat instanceof THREE.Material) {\n        mat = (mat as THREE.Material).clone();\n      } else if (Array.isArray(mat)) {\n        const arr: THREE.Material[] = [];\n        mat.forEach(m => arr.push(m.clone()));\n        mat = arr;\n      }\n      const instance = new THREE.InstancedMesh(firstObj.geometry, mat, indexes.length);\n      instance.name = `[Instanced] ${firstObj.name}`; // for now, used the first object's name\n      for (let i = 0; i < indexes.length; ++i) {\n        const index = indexes[i];\n        const obj = object.children[index];\n        obj.updateMatrix(); // need to update the matrix, otherwise, it will be wrong for some models!\n        instance.setMatrixAt(i, obj.matrix);\n      }\n      instance.matrixAutoUpdate = matrixAutoUpdate;\n      if (!matrixAutoUpdate) {\n        instance.updateMatrix();\n      }\n      instances.push(instance);\n    });\n\n    // remove original objects\n    indexesToBeRemoved.sort((a, b) => b - a); // need to delete from back to front, order descending\n    indexesToBeRemoved.forEach(i => object.remove(object.children[i]));\n\n    // add new instances\n    instances.forEach(instance => {\n      // object.children.push() has better performance than object.add(), because the former didn't dispatch event, etc.\n      instance.parent = object;\n      object.children.push(instance);\n    });\n    object.updateMatrix(); // need to call it since object.matrixAutoUpdate is false\n    console.log(`[Inst] ${indexesToBeRemoved.length}(out of ${childCount}) objects instanced to ${instances.length} InstancedMesh`);\n  }\n\n  /**\n   * Removes a number from array\n   */\n  removeFromArray(arr: number[], toBeRemoved: number) {\n    for (let i = arr.length - 1; i >= 0; --i) { // do from back to front for a better hit rate\n      if (arr[i] === toBeRemoved) {\n        arr.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  /**\n   * Checks if two geometries equal\n   */\n  private geometryEquals(g1: THREE.BufferGeometry, g2: THREE.BufferGeometry) {\n    // return g1 === g2\n    return GeometryUtils.geometryEquals(g1, g2);\n  }\n}\n","import * as THREE from \"three\";\nimport { mergeGeometries } from \"three/examples/jsm/utils/BufferGeometryUtils\";\nimport { matrixAutoUpdate } from \"@/core/Constants\";\nimport GeometryUtils from \"../utils/GeometryUtils\";\nimport MaterialUtils from \"../utils/MaterialUtils\";\n\n/**\n * MergeHelper class is used to merge child objects for a given object\n */\nexport default class MergeHelper {\n  object: THREE.Object3D;\n  counter = 0; // used to avoid printing too many logs\n\n  constructor(object: THREE.Object3D) {\n    this.object = object;\n  }\n\n  /**\n   * Merges child objects for given object.\n   * @param deepMerge with deepMerge to be false, it tries to merge objects in the same level and with the same parent;\n   *   with deepMerge to be true, it tries to merge across all levels in the entire root object;\n   */\n  public merge(deepMerge = true) {\n    this.counter = 0;\n    const startTime = Date.now();\n    this.mergeInner(this.object);\n    if (deepMerge) {\n      this.deepMerge(this.object);\n    }\n    console.log(`[Merge] merge() costed ${(Date.now() - startTime) / 1000}s`);\n  }\n\n  /**\n   * Merges child objects of given object.\n   * If objects' material are the same, they can be merged.\n   */\n  private mergeInner(object: THREE.Object3D) {\n    if (!object.children || object.children.length === 0) {\n      return;\n    }\n    const childCount = object.children.length;\n\n    // to group the index that can be merged. e.g. {0: { indexes: [0, 3, 4]}}\n    // means 0, 3, 4 have the same material can be merged\n    const dict: { [firstIndex: number]: { indexes: number[] } } = {};\n    // store indexes of objects that are able to but didn't find the same material yet.\n    // nonInstIndexes is used in order to improve performance (space for time), with this, it can check less objects.\n    const nonMergeIndexes: number[] = [];\n    for (let i = 0; i < childCount; ++i) {\n      const oi = object.children[i] as THREE.Mesh; // object i\n      // recursive call, depth-first, handle descendants first\n      this.mergeInner(oi);\n\n      if (oi.children && oi.children.length > 0) continue; // only merge leaf nodes, skip parent nodes\n      if (!oi.geometry) continue; // skit any one without geometry\n\n      let foundMergeableObject = false;\n      // for a better hit rate(performance), firstly find out if there is the same geometry and material in the dict\n      const values = Object.values(dict);\n      for (let j = values.length - 1; j >= 0; --j) { // search from back to front for a better hit rate\n        const k = values[j].indexes[0];\n        foundMergeableObject = this.tryHandleMergeableObjects(object, i, k, dict, nonMergeIndexes);\n        if (foundMergeableObject) {\n          break;\n        }\n      }\n\n      for (let j = nonMergeIndexes.length - 1; !foundMergeableObject && j >= 0; --j) {\n        const k = nonMergeIndexes[j];\n        foundMergeableObject = this.tryHandleMergeableObjects(object, i, k, dict, nonMergeIndexes);\n        if (foundMergeableObject) {\n          break;\n        }\n      }\n      if (!foundMergeableObject) {\n        nonMergeIndexes.push(i);\n      }\n    }\n    if (Object.keys(dict).length <= 0) {\n      return;\n    }\n    // console.log(dict)\n\n    // creates new merged geometries\n    const mergedMeshes: THREE.Mesh[] = [];\n    const indexesToBeRemoved: number[] = []; // store all indexes to be removed later\n    Object.values(dict).forEach((value: any) => {\n      const indexes = value.indexes;\n      const firstObj = object.children[indexes[0]] as THREE.Mesh;\n      let geometries: THREE.BufferGeometry[] = [];\n      indexes.forEach((index: number) => {\n        const obj = object.children[index];\n        if (obj instanceof THREE.Mesh) {\n          const geom = obj.geometry.clone(); // need to clone geometry, bacause a geometry can be shared by many objects\n          GeometryUtils.tryConvertInterleavedBufferAttributes(geom);\n          geom.applyMatrix4(obj.matrix);\n          geometries.push(geom);\n          indexesToBeRemoved.push(index);\n        }\n      });\n      if (geometries.length > 0) {\n        const mergedBufferGeometry = mergeGeometries(geometries);\n        geometries.forEach((geom: THREE.BufferGeometry) => geom.dispose()); // dispose as soon as posibble\n        geometries = [];\n        const mergedMesh = new THREE.Mesh(mergedBufferGeometry, firstObj.material);\n        mergedMesh.name = `[Merged] ${firstObj.name}`; // for now, used the first object's name\n        mergedMesh.userData.selectable = false; // set selectable to false because it doesn't make sense to select merged object\n        mergedMesh.matrixAutoUpdate = matrixAutoUpdate;\n        if (!matrixAutoUpdate) {\n          mergedMesh.updateMatrix();\n        }\n        mergedMesh.updateMatrixWorld(true);\n        mergedMesh.updateWorldMatrix(true, true);\n        mergedMeshes.push(mergedMesh);\n      }\n    });\n\n    // remove original objects\n    indexesToBeRemoved.sort((a, b) => b - a); // need to delete from back to front, order descending\n    indexesToBeRemoved.forEach(i => {\n      const o = object.children[i];\n      object.remove(o);\n      if (o instanceof THREE.Mesh) {\n        o.geometry.dispose();\n      }\n    });\n\n    // add new meshes\n    mergedMeshes.forEach(mesh => {\n      // object.children.push() has better performance than object.add(), because the former didn't dispatch event, etc.\n      mesh.parent = object;\n      object.children.push(mesh);\n    });\n    object.updateMatrix(); // need to call it since object.matrixAutoUpdate is false\n    if (this.counter++ < 2) {\n      console.log(`[Merge] ${indexesToBeRemoved.length}(out of ${childCount}) objects merged to ${mergedMeshes.length} Meshes`);\n    } else {\n      console.log(`[Merge] ${indexesToBeRemoved.length}/${childCount} -> ${mergedMeshes.length}`);\n    }\n  }\n\n  /**\n   * @param object parent object\n   * @param i index of for object.children[]\n   * @param k index of for object.children[]\n   * @param dict to store merge-able object\n   * @param nonMergeIndexes used in order to improve performance\n   */\n  private tryHandleMergeableObjects(object: THREE.Object3D, i: number, k: number, dict: { [firstIndex: number]: { indexes: number[]; } }, nonMergeIndexes: number[]) {\n    // if materials are the same, then they can be merged\n    let foundMergeableObject = false;\n    const oi = object.children[i] as THREE.Mesh;\n    const ok = object.children[k] as THREE.Mesh;\n    if (MaterialUtils.materialsEquals(oi.material, ok.material)) { // call MaterialUtils.materialsEquals() only for deep merge\n      if (!dict[k]) {\n        dict[k] = { indexes: [k] };\n        this.removeFromArray(nonMergeIndexes, k);\n      }\n      dict[k].indexes.push(i);\n      foundMergeableObject = true;\n    }\n    return foundMergeableObject;\n  }\n\n  /**\n   * Merges all objects of given object, not just direct children but also descendants (across all levels).\n   * If objects' material are the same, they can be merged.\n   * Better to call mergeInner first then deepMerge for a better performance.\n   */\n  private deepMerge(object: THREE.Object3D) {\n    // to group the objects that can be merged. e.g. {objectId0: { objects: [object0, object2, object8]}}\n    // means object0, object2, object8 have the same material can be merged.\n    // Here we store Object3D rather than id, because it is faster when there are many objects.\n    const dict: { [firstObjectId: number]: { material: any, objects: THREE.Object3D[] } } = {};\n    // firstly traverse all objects to find mergeable ones\n    let totalCount = 0;\n    object.traverse((obj: THREE.Object3D) => {\n      if (!(obj instanceof THREE.Mesh) || !obj.geometry || !obj.material) {\n        return;\n      }\n      GeometryUtils.tryConvertInterleavedBufferAttributes(obj.geometry); // try handle InterleavedBufferAttributes\n      let foundMergeableObject = false;\n      const values = Object.values(dict);\n      for (let i = values.length - 1; i >= 0; --i) { // search from back to front for a better hit rate\n        if (MaterialUtils.materialsEquals(values[i].material, obj.material)) {\n          values[i].objects.push(obj);\n          foundMergeableObject = true;\n          break;\n        }\n      }\n      if (!foundMergeableObject) {\n        dict[obj.id] = { material: obj.material, objects: [obj]/* , geometries: [obj.geometry.clone()] */ };\n      }\n      totalCount++;\n    });\n\n    // since we'll move geometry to another merged mesh under a group, below is the structure:\n    // - root object\n    //  - merged objects group\n    //    - merged object 1\n    // need to consider a geomery's matrix for each level of ancestor\n    const applyMatrix = (geom: THREE.BufferGeometry, obj: THREE.Object3D): THREE.BufferGeometry => {\n      geom.applyMatrix4(obj.matrix);\n      if (obj.parent && obj.parent !== object) { // also apply matrix of parent, until reached 'object'\n        applyMatrix(geom, obj.parent);\n      }\n      return geom;\n    };\n\n    // create merged meshes\n    const group = new THREE.Group();\n    const values = Object.values(dict).filter(value => value.objects.length > 1); // only merge when a material is used by more than 1 ojbects\n    group.name = `Merged objects (${values.length})`;\n    for (let i = values.length - 1; i >= 0; --i) { // search from back to front for a better hit rate\n      const value = values[i];\n      let geometries: THREE.BufferGeometry[] = [];\n      for (let j = 0; j < value.objects.length; ++j) {\n        const obj = value.objects[j];\n        const geom = applyMatrix((obj as THREE.Mesh).geometry.clone(), obj); // need to clone geometry, bacause a geometry can be shared by many objects\n        geometries.push(geom);\n      }\n      const geom = mergeGeometries(geometries);\n      geometries.forEach((geom: THREE.BufferGeometry) => geom.dispose()); // dispose as soon as posibble\n      geometries = [];\n      if (geom) {\n        const mergedMesh = new THREE.Mesh(geom, value.material);\n        mergedMesh.name = `[Merged] ${value.material.name}`; // for now, used the first object's name\n        mergedMesh.userData.selectable = false; // set selectable to false because it doesn't make sense to select merged object\n        mergedMesh.matrixAutoUpdate = matrixAutoUpdate;\n        if (!matrixAutoUpdate) {\n          mergedMesh.updateMatrix();\n        }\n        mergedMesh.parent = group;\n        group.children.push(mergedMesh);\n      } else {\n        // It could fail to merge because of InterleavedBufferAttributes, position, etc.\n        // In this case, cleanup the ids, so it won't remove these objects\n        value.objects = [];\n      }\n    }\n\n    // delete original meshes\n    let removedCount = 0;\n    for (let i = values.length - 1; i >= 0; --i) { // search from back to front for a better hit rate\n      values[i].objects.forEach(obj => {\n        if (obj instanceof THREE.Mesh) {\n          obj.removeFromParent(); // removeFromParent is added from r129\n          obj.geometry.dispose();\n          removedCount++;\n        }\n      });\n      values[i].objects = [];\n    }\n\n    if (group.children.length) {\n      group.matrixAutoUpdate = matrixAutoUpdate;\n      if (!matrixAutoUpdate) {\n        group.updateMatrix();\n      }\n      group.parent = object;\n      object.children.push(group);\n    }\n    console.log(`[Merge] ${removedCount}(out of ${totalCount}) objects merged to ${group.children.length} Meshes during deepMerge`);\n  }\n\n  /**\n   * Removes a number from array\n   */\n  removeFromArray(arr: number[], toBeRemoved: number) {\n    for (let i = arr.length - 1; i >= 0; --i) { // do from back to front for a better hit rate\n      if (arr[i] === toBeRemoved) {\n        arr.splice(i, 1);\n        return;\n      }\n    }\n  }\n}\n","import * as THREE from \"three\";\nimport SceneUtils from \"./SceneUtils\";\n\nexport enum Views {\n  Top = \"Top\",\n  Bottom = \"Bottom\",\n  Front = \"Front\",\n  Back = \"Back\",\n  Left = \"Left\",\n  Right = \"Right\"\n}\n\n/**\n * Util methods about Viewer3D\n */\nexport default class Viewer3DUtils {\n  /**\n   * Calculates camera position and look at point by given scene\n   * @param scene\n   * @param view\n   * @param eye this method pass out it to caller\n   * @param look this method pass out it to caller\n   */\n  static getCameraPositionByView(scene: THREE.Scene, view: Views | string, eye: THREE.Vector3, look: THREE.Vector3) {\n    const bbox = SceneUtils.getVisibleObjectBoundingBox(scene);\n    Viewer3DUtils.getCameraPositionByBboxAndView(bbox, view, eye, look);\n  }\n\n  /**\n   * Calculates camera position and look at point by given object uuids\n   * @param scene\n   * @param objectUuids\n   * @param view\n   * @param eye\n   * @param look\n   */\n  public static getCameraPositionByObjectUuids(scene: THREE.Scene, objectUuids: string[], view: Views | string, eye: THREE.Vector3, look: THREE.Vector3) {\n    const bbox = SceneUtils.getObjectsBoundingBox(scene, objectUuids);\n    Viewer3DUtils.getCameraPositionByBboxAndView(bbox, view, eye, look);\n  }\n\n  /**\n   * Gets camera's new position and target(lookAt) by given bbox and camera's current position\n   */\n  public static getCameraPositionByObjects(objects: THREE.Object3D[], camera: THREE.Camera, eye: THREE.Vector3, look: THREE.Vector3) {\n    const bbox = new THREE.Box3();\n    objects.forEach(object => {\n      const box = SceneUtils.getBoundingBox(object);\n      bbox.union(box);\n    });\n    Viewer3DUtils.getCameraPositionByBboxAndCamera(bbox, camera, eye, look);\n  }\n\n  /**\n   * Gets camera's new position and target(lookAt) by given bbox and camera's current position\n   */\n  public static getCameraPositionByBboxAndCamera(bbox: THREE.Box3, camera: THREE.Camera, eye: THREE.Vector3, look: THREE.Vector3) {\n    if (bbox.isEmpty()) {\n      return;\n    }\n    // the distance between target object and camera depends on the size of object,\n    // simply use object's summation of x, y, z size,\n    // then multiply a factor, it looks better\n    const DISTANCE_FACTOR = 1.2;\n    let distance = (bbox.max.x - bbox.min.x) + (bbox.max.y - bbox.min.y) + (bbox.max.z - bbox.min.z);\n    distance *= DISTANCE_FACTOR;\n    // make camera a little farer, it looks better\n    const distanceVector = new THREE.Vector3(distance, distance, distance);\n    const cx = (bbox.min.x + bbox.max.x) / 2; // bbox's center x\n    const cy = (bbox.min.y + bbox.max.y) / 2;\n    const cz = (bbox.min.z + bbox.max.z) / 2;\n    look.set(cx, cy, cz);\n\n    const oldPostion = new THREE.Vector3();\n    camera.getWorldPosition(oldPostion);\n    const dir = oldPostion.sub(look).normalize();\n    // change camera's direction to look at new target first, then move camera to a proper distance with target\n    const pos = dir.multiply(distanceVector).add(look);\n    eye.set(pos.x, pos.y, pos.z);\n  }\n\n  /**\n   * Gets camera's new position and target(lookAt) by given bbox and view\n   */\n  public static getCameraPositionByBboxAndView(bbox: THREE.Box3, view: Views | string, eye: THREE.Vector3, look: THREE.Vector3) {\n    if (bbox.isEmpty()) {\n      return;\n    }\n    // make camera a little farer, it looks better\n    const distance = (bbox.max.x - bbox.min.x) + (bbox.max.y - bbox.min.y) + (bbox.max.z - bbox.min.z);\n    // Make delta a number between 0.5 and 1. And delta is smaller as distance grows.\n    const delta = (0.5 + (0.5 / Math.pow(Math.E, distance / 100))) * distance;\n    let x = 0; // bbox.min.x + (bbox.max.x - bbox.min.x) // center by default\n    let y = bbox.min.y + (bbox.max.y - bbox.min.y); // for front/back/left/right, give y a certain value, thus looks better\n    let z = 0; // bbox.min.z + (bbox.max.z - bbox.min.z)\n    const cx = (bbox.min.x + bbox.max.x) / 2; // bbox's center x\n    const cy = (bbox.min.y + bbox.max.y) / 2;\n    const cz = (bbox.min.z + bbox.max.z) / 2;\n    if (view === Views.Top) {\n      y = bbox.max.y + delta;\n    } else if (view === Views.Bottom) {\n      y = bbox.min.y - delta;\n    } else if (view === Views.Front) {\n      z = bbox.max.z + delta;\n      x = cx;\n    } else if (view === Views.Back) {\n      z = bbox.min.z - delta;\n      x = cx;\n    } else if (view === Views.Left) {\n      x = bbox.min.x - delta;\n      z = cz;\n    } else if (view === Views.Right) {\n      x = bbox.max.x + delta;\n      z = cz;\n    }\n    eye.x = x;\n    eye.y = y;\n    eye.z = z;\n    look.x = cx;\n    look.y = cy;\n    look.z = cz;\n  }\n\n  /**\n   * Sleep a while\n   */\n  public static async sleep(ms: number) {\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        resolve(\"\");\n      }, ms);\n    });\n  }\n\n  // need to store the objects that is twinkling, do this to avoid one object to be\n  // twinkled while it is twinkling, that can be buggy!\n  private static twinklingObjectUuids: { [uuid: string]: boolean } = {};\n\n  /**\n   * Twinkle the object several times\n   */\n  public static async twinkle(obj: THREE.Object3D, ms: number = 500) {\n    const uuids = Viewer3DUtils.twinklingObjectUuids;\n    if (uuids[obj.uuid]) {\n      return; // avoid re-entry\n    }\n    uuids[obj.uuid] = true;\n\n    obj.visible = !obj.visible;\n    await this.sleep(ms);\n    obj.visible = !obj.visible;\n    await this.sleep(ms);\n    obj.visible = !obj.visible;\n    await this.sleep(ms);\n    obj.visible = !obj.visible;\n    await this.sleep(ms);\n    obj.visible = !obj.visible;\n    await this.sleep(ms);\n    obj.visible = !obj.visible;\n\n    delete uuids[obj.uuid]; // clear the flag\n  }\n}\n","import * as THREE from \"three\";\nimport { BooleanMessageData, MessageId } from \"../../core/postmate/Message\";\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { ExportUtils } from \"../../core/utils/ExportUtils\";\nimport { TreeData } from \"element-ui/types/tree\";\nimport { MaterialInfo, ObjectUtils } from \"../../core/utils/ObjectUtils\";\nimport { MessageBox, Tree } from \"element-ui\";\nimport { MessageBoxData } from \"element-ui/types/message-box\";\nimport { ObjectsBoxSection } from \"../../core/section/ObjectsBoxSection\";\nimport { ObjectsPlaneSection } from \"../../core/section/ObjectsPlaneSection\";\nimport { PostmateManager } from \"../../core/postmate/PostmateManager\";\nimport { VNode } from \"vue/types/umd\";\nimport BasePanel from \"@/components/base-panel/BasePanel\";\nimport ElTree from \"@/lib/element-ui/tree/src/tree.vue\";\nimport Exploder from \"../../core/exploder/Exploder\";\nimport InstantiateHelper from \"../../core/helpers/InstantiateHelper\";\nimport MergeHelper from \"../../core/helpers/MergeHelper\";\nimport store, { Types } from \"@/store\";\nimport styles from \"./BimTree.module.scss\";\nimport Viewer3D from \"../../core/Viewer3D\";\nimport Viewer3DUtils from \"../../core/utils/Viewer3DUtils\";\n\nexport enum Command {\n  ZoomTo = \"zoomTo\",\n  Transparent = \"transparent\",\n  Wireframe = \"wireframe\",\n  Outline = \"outline\",\n  Material = \"material\",\n  SectionBox = \"sectionBox\",\n  SectionPlane = \"sectionPlane\",\n  CustomizedSectionPlane = \"customizedSectionPlane\",\n  Explode = \"explode\",\n  Floor = \"floor\",\n  Instantiate = \"instantiate\",\n  Merge = \"merge\",\n  ExportToGltf = \"exportToGltf\",\n  ExportToGlb = \"exportToGlb\",\n  ExportToObj = \"exportToObj\",\n  ExportToDraco = \"exportToDraco\",\n  ExportToThreeJsJson = \"exportToThreeJsJson\"\n}\n\nexport interface BimTreeProps {\n  viewer: Viewer3D | undefined;\n}\n\n/**\n * BIM Tree class\n */\n@Component\nexport default class BimTree extends Vue {\n  @Prop({ required: true }) viewer!: BimTreeProps[\"viewer\"];\n\n  private readonly checkMark = \"√ \";\n  private treeData?: TreeData[] = [];\n  private filterText = \"\";\n  private visible?: boolean = false;\n  private treeHeight = 300;\n  private readonly postmate = PostmateManager.instance();\n  // need to save dropdown menu's state for each model, so we can update it accordingly\n  private dropdownMenuState: { [uuid: string]: {\n    components: { [command: string]: any }, // store the components, so we can update its status\n    materialInfoList?: MaterialInfo[], // used for transparent mode\n    isWireframeMode?: boolean,\n    showOutline?: boolean,\n    objectsBoxSection?: ObjectsBoxSection,\n    objectsPlaneSection?: ObjectsPlaneSection,\n    customizedPlaneSection?: ObjectsPlaneSection,\n    exploder?: Exploder,\n    filterByFloorInfo?: { includeObjectUuids: string[], materialInfoList: MaterialInfo[] },\n    isInstantiated?: boolean,\n    isMerged?: boolean\n  } } = {};\n\n  mounted() {\n    this.setBimTreeVisibility(!!this.visible);\n\n    this.postmate.addEventListener(MessageId.setBimTree, (messageData: object) => {\n      const visible = (messageData as BooleanMessageData).value;\n      this.setBimTreeVisibility(visible);\n    });\n    this.postmate.addEventListener(MessageId.highlightRandomNode, () => {\n      if (!this.treeData || this.treeData.length < 1) {\n        return;\n      }\n      let i = Math.floor(Math.random() * this.treeData.length);\n      let data: TreeData = this.treeData[i];\n      if (data.children) {\n        i = Math.floor(Math.random() * data.children.length);\n        data = data.children[i];\n        if (data.children) {\n          i = Math.floor(Math.random() * data.children.length);\n          data = data.children[i];\n        }\n      }\n      this.handleNodeClick(data);\n    });\n  }\n\n  @Watch(\"showBimTree\")\n  onShowBimTreeChanged(visible: boolean) {\n    this.setBimTreeVisibility(visible);\n  }\n\n  @Watch(\"filterText\")\n  onFilterTextChanged(value: string) {\n    const tree = this.$refs.tree as Tree;\n    tree.filter(value.toLowerCase()); // convert to lower case here\n  }\n\n  filterNode(value: string, data: TreeData) {\n    if (!value) {\n      return true;\n    }\n    const label = (data && data.label && data.label.toLowerCase()) || \"\";\n    return label.indexOf(value) !== -1;\n  }\n\n  /**\n   * Gets visibility of BIM Tree\n   */\n  get showBimTree() {\n    return this.$store.getters.getShowBimTree;\n  }\n\n  /**\n   * Gets model uuids in the viewer\n   */\n  private bimModelUuids() {\n    if (this.viewer) {\n      return Object.values(this.viewer.loadedModels).map(obj => obj.uuid);\n    }\n    return [];\n  }\n\n  public get bimTreeData(): TreeData[] | undefined {\n    if (!this.visible) {\n      this.treeData = []; // release memory at this time\n    } else {\n      this.treeData = this.bimModelsToTreeData();\n    }\n    return this.treeData;\n  }\n\n  // The 'checked' status of a tree node reflects to 'visible' of an object. So, TODOs:\n  // 1) Need to set 'checked' status according to if an object is visible.\n  // 2) When a node is checked/unchecked, store the status, so when next time BimTree is opened, the check status is correct.\n  private get defaultCheckedKeys(): string[] {\n    if (!this.bimModelUuids) {\n      console.warn(\"[BT] bimModels not defined!\");\n      return [];\n    }\n    if (!this.visible) {\n      return [];\n    }\n    let keys: string[] = [];\n    if (this.treeData) {\n      keys = this.treeData.map(item => item.id);\n    }\n    return keys;\n  }\n\n  private changeTreeHeight() {\n    const treeWrapper = this.$refs.treeWrapper;\n    if (treeWrapper) {\n      this.treeHeight = (treeWrapper as Element).clientHeight - 44;\n    }\n  }\n\n  private bimModelsToTreeData(bimModelUuids: string[] = []): TreeData[] | undefined {\n    if (!this.viewer || !this.viewer.scene) {\n      return [];\n    }\n    let modelUuids = bimModelUuids;\n    if (!modelUuids || modelUuids.length === 0) {\n      modelUuids = this.bimModelUuids();\n    }\n    const treeData: TreeData[] = [];\n    let counter = 1;\n    this.viewer.scene.traverse((object: any) => {\n      if (modelUuids.find(uuid => uuid === object.uuid)) {\n        const treeItem = this.objectToTreeData(object);\n        if (treeData && treeItem) {\n          if (treeData.find(item => item.label === treeItem.label)) {\n            // duplicated label found, should fix it to workaround console error\n            treeItem.label += (\"-\" + counter++);\n          }\n          treeData.push(treeItem);\n        }\n      }\n    });\n    return treeData;\n  }\n\n  /**\n   * Convert a node to TreeData. This is a recursive method.\n   * @param object\n   * @param maxDepth\n   */\n  private objectToTreeData(object: THREE.Object3D, maxDepth = 5): TreeData | undefined {\n    if (!object || maxDepth < 0) {\n      return;\n    }\n    // ignore outline\n    if (object.userData.isOutline === true) {\n      return;\n    }\n    const treeItem: TreeData = {};\n    treeItem.id = object.uuid || \"\"; // use model.uuid for TreeData.id\n    treeItem.label = this.getTreeLabelForObject(object);\n    if (object.children) {\n      let counter = 1; // node's label may be the same, need to fix it to make el-tree happy\n      // children may not have foreach method, wired!\n      for (let i = 0; i < object.children.length; ++i) {\n        if (!treeItem.children) {\n          treeItem.children = [];\n        }\n        const childTreeItem = this.objectToTreeData(object.children[i], maxDepth - 1); // recursive call\n        if (childTreeItem) {\n          if (treeItem.children.find(c => c.label === childTreeItem.label)) {\n            // duplicated label found, should fix it to workaround console error\n            childTreeItem.label += `-${counter++}`;\n          }\n          treeItem.children.push(childTreeItem);\n        }\n      }\n    } else {\n      treeItem.isLeaf = true; // it should have a better performance to explicitly set isLeaf to true\n    }\n    return treeItem;\n  }\n\n  /**\n   * When a tree item is clicked,  handleCheckChange could be triggered more than once.\n   * Need to set render-after-expand={ false }\n   */\n  private handleCheckChange(data: TreeData, checked: boolean, indeterminate: boolean) {\n    if (!data || !data.id || !this.viewer || !this.viewer.scene) {\n      return;\n    }\n\n    const obj = this.getObjectByUuid(data.id);\n    if (obj) {\n      if (checked) {\n        // when checked, also must set parent to visible!\n        obj.visible = true;\n        obj.traverseAncestors(o => { o.visible = true });\n      } else {\n        // when unchecked, only handle leaf nodes\n        if (!obj.children || obj.children.length <= 0) {\n          obj.visible = false;\n        }\n      }\n      // 针对虚拟滚动列表 覆盖未渲染节点\n      if (data.children && data.children.length) {\n        // 子节点取消勾选触发的父节点状态改变时，不必覆盖全部节点\n        if (!checked && indeterminate) {\n          return;\n        }\n        if (obj.children && obj.children.length) {\n          this.setObjLeavesVisible(obj.children, checked);\n        }\n      }\n      obj.visible = checked;\n      this.viewer.enableRender();\n    }\n  }\n\n  private setObjLeavesVisible(objects: THREE.Object3D[], visible: boolean) {\n    for (const obj of objects) {\n      if (obj.children && obj.children.length) {\n        this.setObjLeavesVisible(obj.children, visible);\n      }\n      obj.visible = visible;\n    }\n  }\n\n  private handleNodeClick(data: TreeData, node?: any, component?: any) {\n    if (!data || !data.id || !this.viewer || !this.viewer.scene || !this.viewer.camera) {\n      return;\n    }\n    const obj = this.viewer.scene.getObjectByProperty(\"uuid\", data.id);\n    if (obj) {\n      const eye = new THREE.Vector3();\n      const look = new THREE.Vector3();\n      Viewer3DUtils.getCameraPositionByObjects([obj], this.viewer.camera, eye, look);\n      this.viewer.flyTo(eye, look);\n      Viewer3DUtils.twinkle(obj);\n      // in this case set depthTest to false to make sure user can see it\n      this.viewer.selectObject(obj, undefined, false);\n    }\n  }\n\n  private close() {\n    // this.$emit('close')\n    this.setBimTreeVisibility(false);\n  }\n\n  private setBimTreeVisibility(visible: boolean) {\n    this.visible = visible;\n    store.commit(Types.MUTATION_SHOW_BIM_TREE, visible); // inform datGui to update\n  }\n\n  /**\n   * Gets object(Mesh, Object3D, etc.) name\n   * @param node\n   */\n  private getTreeLabelForObject(object: THREE.Object3D): string {\n    // object name is usually uuid, which is not human-readable\n    // let's try to read from userData if there is!\n    let name = object.name;\n    if (object.userData && object.userData.gltfExtensions) {\n      const ext = object.userData.gltfExtensions;\n      if (ext.elementId && ext.elementId.Value) {\n        name = ext.elementId.Value;\n      }\n      if (ext.level && ext.level.Value) {\n        name = `${name ? name + \"-\" : \"\"}${ext.level.Value}`;\n      }\n    }\n    if (!name) {\n      name = \"\";\n    }\n    return `${name} [${object.type}]`;\n  }\n\n  private startScroll(e: any) {\n    const wrapper = e.target;\n    const label = e.target.querySelector(\".custom-label\");\n    label.offsetWidth > wrapper.offsetWidth && label.classList.add(\"auto-scroll\");\n  }\n\n  private stopScroll(e: any) {\n    const wrapper = e.target;\n    const label = e.target.querySelector(\".custom-label\");\n    label.offsetWidth > wrapper.offsetWidth && label.classList.remove(\"auto-scroll\");\n  }\n\n  public beforeDestroy() {\n    Object.keys(this.dropdownMenuState).forEach(key => {\n      const state = this.dropdownMenuState[key];\n      if (state.components) {\n        Object.keys(state.components).forEach(command => {\n          state.components[command] = undefined;\n        });\n      }\n      state.materialInfoList = [];\n      if (state.objectsBoxSection && state.objectsBoxSection.isOpen) {\n        state.objectsBoxSection.close();\n        state.objectsBoxSection = undefined;\n      }\n      if (state.objectsPlaneSection && state.objectsPlaneSection.isOpen) {\n        state.objectsPlaneSection.close();\n        state.objectsPlaneSection = undefined;\n      }\n      state.exploder = undefined;\n    });\n    this.treeData = undefined;\n    this.postmate.removeEventListener(MessageId.setBimTree, MessageId.highlightRandomNode);\n    this.close();\n  }\n\n  /**\n   * Gets status by uuid. It makes sure to return non-null object.\n   */\n  getState(uuid: string) {\n    this.dropdownMenuState[uuid] = this.dropdownMenuState[uuid] || { uuid: { component: {} } };\n    const state = this.dropdownMenuState[uuid];\n    if (state.showOutline === undefined) {\n      const object = this.getObjectByUuid(uuid);\n      if (object) {\n        state.showOutline = ObjectUtils.hasOutline(object);\n      }\n    }\n    return state;\n  }\n\n  handleDropdownCommand(uuid: string) {\n    return (command: string, component?: any) => {\n      const state = this.getState(uuid);\n      if (!state.components) {\n        state.components = {};\n      }\n      if (!state.components[command]) {\n        state.components[command] = component;\n      }\n      if (command === Command.ZoomTo) {\n        this.zoomTo(uuid);\n      } else if (command === Command.Transparent) {\n        this.transparent(uuid, component);\n      } else if (command === Command.Wireframe) {\n        this.wireframe(uuid, component);\n      } else if (command === Command.Outline) {\n        this.outline(uuid, component);\n      } else if (command === Command.Material) {\n        this.material(uuid, component);\n      } else if (command === Command.SectionBox) {\n        this.section(uuid, component);\n      } else if (command === Command.SectionPlane) {\n        this.sectionPlane(uuid, component);\n      } else if (command === Command.CustomizedSectionPlane) {\n        this.customizedSectionPlane(uuid, component);\n      } else if (command === Command.Explode) {\n        this.explode(uuid, component);\n      } else if (command === Command.Floor) {\n        this.floor(uuid, component);\n      } else if (command === Command.Instantiate) {\n        this.instantiate(uuid, component);\n      } else if (command === Command.Merge) {\n        this.merge(uuid, component);\n      } else if (command === Command.ExportToGltf) {\n        this.exportToGltf(uuid);\n      } else if (command === Command.ExportToGlb) {\n        this.exportToGlb(uuid);\n      } else if (command === Command.ExportToObj) {\n        this.exportToObj(uuid);\n      } else if (command === Command.ExportToDraco) {\n        this.exportToDraco(uuid);\n      } else if (command === Command.ExportToThreeJsJson) {\n        this.exportToThreeJsJson(uuid);\n      } else {\n        console.warn(`Unknown command: ${command}`);\n      }\n    };\n  }\n\n  /**\n   * Runs a contextual command for given object\n   */\n  runCommand(uuid: string, command: string) {\n    const state = this.getState(uuid);\n    if (state && state.components && state.components[command]) {\n      const component = state.components[command];\n      component.handleClick(); // mimic click event\n    } else if (command === Command.Outline) {\n      // some commands like outline, is not initialized with a components. In other words,\n      // the model already has outline without clicking from dropdown.\n      const object = this.getObjectByUuid(uuid);\n      object && ObjectUtils.setOutlinesVisibility(object, false);\n    }\n  }\n\n  /**\n   * Runs contextual commands for given object\n   */\n  runCommands(uuid: string, commands: string[]) {\n    commands.forEach(command => this.runCommand(uuid, command));\n  }\n\n  /**\n   * Zooms to object\n   */\n  zoomTo(uuid: string) {\n    if (!uuid || !this.viewer || !this.viewer.scene || !this.viewer.camera) {\n      return;\n    }\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      const eye = new THREE.Vector3();\n      const look = new THREE.Vector3();\n      Viewer3DUtils.getCameraPositionByObjects([obj], this.viewer.camera, eye, look);\n      this.viewer.flyTo(eye, look);\n      Viewer3DUtils.twinkle(obj);\n    }\n  }\n\n  /**\n   * Makes object transparent\n   */\n  transparent(uuid: string, component?: any) {\n    if (!uuid || !this.viewer || !this.viewer.scene) {\n      return;\n    }\n    const state = this.getState(uuid);\n    const opacity = 0.3;\n    if (state.materialInfoList) {\n      ObjectUtils.revertObjectOpacityByUuid(this.viewer.scene, uuid, state.materialInfoList);\n      state.materialInfoList = undefined;\n      this.removeCheckMark(component);\n    } else {\n      state.materialInfoList = ObjectUtils.setObjectOpacityByUuid(this.viewer.scene, uuid, opacity);\n      this.addCheckMark(component);\n    }\n    this.viewer.enableRender();\n  }\n\n  /**\n   * Displies object's wireframe\n   */\n  wireframe(uuid: string, component?: any) {\n    if (!uuid || !this.viewer || !this.viewer.scene) {\n      return;\n    }\n    // wireframe can be affected by selected object, so de-select any object if there is\n    this.viewer.clearSelection();\n\n    const state = this.getState(uuid);\n    // cancel any other command that conflict with this one\n    const commands = [];\n    state.materialInfoList && commands.push(Command.Transparent);\n    state.objectsBoxSection && commands.push(Command.SectionBox);\n    state.objectsPlaneSection && commands.push(Command.SectionPlane);\n    state.showOutline && commands.push(Command.Outline);\n    if (commands.length > 0) {\n      console.log(`[BT] Cancelling conflicted commands: ${commands}`);\n      this.runCommands(uuid, commands);\n    }\n\n    if (state.isWireframeMode) {\n      ObjectUtils.revertWireframeModeByUuid(this.viewer.scene, uuid);\n      state.isWireframeMode = undefined;\n      this.removeCheckMark(component);\n    } else {\n      ObjectUtils.setWireframeModeByUuid(this.viewer.scene, uuid);\n      state.isWireframeMode = true;\n      this.addCheckMark(component);\n    }\n    this.viewer.enableRender();\n  }\n\n  /**\n   * Displies object's outline\n   */\n  outline(uuid: string, component?: any) {\n    if (!uuid || !this.viewer || !this.viewer.scene) {\n      return;\n    }\n    const object = this.getObjectByUuid(uuid);\n    if (!object) {\n      return;\n    }\n    // wireframe can be affected by selected object, so de-select any object if there is\n    this.viewer.clearSelection();\n\n    const state = this.getState(uuid);\n    // cancel any other command that conflict with this one\n    const commands = [];\n    state.exploder && commands.push(Command.Explode);\n    state.isWireframeMode && commands.push(Command.Wireframe);\n    if (commands.length > 0) {\n      console.log(`[BT] Cancelling conflicted commands: ${commands}`);\n      this.runCommands(uuid, commands);\n    }\n\n    if (state.showOutline) {\n      ObjectUtils.setOutlinesVisibility(object, false);\n      state.showOutline = false;\n      this.removeCheckMark(component);\n    } else {\n      if (!ObjectUtils.hasOutline(object)) {\n        ObjectUtils.addOutlines(object);\n      } else {\n        ObjectUtils.setOutlinesVisibility(object, true);\n      }\n      state.showOutline = true;\n      this.addCheckMark(component);\n    }\n    this.viewer.enableRender();\n  }\n\n  /**\n   * Shows object's material panel\n   */\n  material(uuid: string, component?: any) {\n    if (!uuid || !this.viewer || !this.viewer.scene) {\n      return;\n    }\n    // de-select any object if there is\n    this.viewer.clearSelection();\n\n    const state = this.getState(uuid);\n    // cancel any other command that conflict with this one\n    const commands = [];\n    state.materialInfoList && commands.push(Command.Transparent);\n    state.objectsBoxSection && commands.push(Command.SectionBox);\n    state.objectsPlaneSection && commands.push(Command.SectionPlane);\n    if (commands.length > 0) {\n      console.log(`[BT] Cancelling conflicted commands: ${commands}`);\n      this.runCommands(uuid, commands);\n    }\n\n    store.commit(Types.MUTATION_OBJECT_UUID_FOR_MATERIAL_MANAGER, uuid);\n  }\n\n  /**\n   * Box section\n   */\n  section(uuid: string, component?: any) {\n    if (!uuid || !this.viewer || !this.viewer.scene || !this.viewer.camera || !this.viewer.renderer || !this.viewer.controls) {\n      return;\n    }\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      const state = this.getState(uuid);\n      // cancel any other command that conflict with this one\n      const commands = [];\n      state.objectsPlaneSection && commands.push(Command.SectionPlane);\n      state.customizedPlaneSection && commands.push(Command.CustomizedSectionPlane);\n      if (commands.length > 0) {\n        console.log(`[BT] Cancelling conflicted commands: ${commands}`);\n        this.runCommands(uuid, commands);\n      }\n\n      if (state.objectsBoxSection) {\n        // It seems okay to keep localClippingEnabled to be true for ever...\n        // this.viewer.renderer.localClippingEnabled = false\n        state.objectsBoxSection.close();\n        state.objectsBoxSection = undefined;\n        this.removeCheckMark(component);\n      } else {\n        this.viewer.renderer.localClippingEnabled = true;\n        state.objectsBoxSection = new ObjectsBoxSection([uuid], this.viewer.scene, this.viewer.camera, this.viewer.renderer, this.viewer.controls);\n        state.objectsBoxSection.open();\n        this.addCheckMark(component);\n      }\n      this.viewer.enableRender();\n    }\n  }\n\n  /**\n   * Plane section\n   */\n  sectionPlane(uuid: string, component?: any) {\n    if (!uuid || !this.viewer || !this.viewer.scene || !this.viewer.camera || !this.viewer.renderer || !this.viewer.controls) {\n      return;\n    }\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      const state = this.getState(uuid);\n      // cancel any other command that conflict with this one\n      const commands = [];\n      state.objectsBoxSection && commands.push(Command.SectionBox);\n      state.customizedPlaneSection && commands.push(Command.CustomizedSectionPlane);\n      if (commands.length > 0) {\n        console.log(`[BT] Cancelling conflicted commands: ${commands}`);\n        this.runCommands(uuid, commands);\n      }\n\n      if (state.objectsPlaneSection) {\n        // It seems okay to keep localClippingEnabled to be true for ever...\n        // this.viewer.renderer.localClippingEnabled = false\n        state.objectsPlaneSection.close();\n        state.objectsPlaneSection = undefined;\n        this.removeCheckMark(component);\n      } else {\n        this.viewer.renderer.localClippingEnabled = true;\n        state.objectsPlaneSection = new ObjectsPlaneSection([uuid], this.viewer.scene, this.viewer.camera, this.viewer.renderer, this.viewer.controls);\n        state.objectsPlaneSection.open();\n        this.addCheckMark(component);\n      }\n      this.viewer.enableRender();\n    }\n  }\n\n  /**\n   * Customized section plane\n   */\n  customizedSectionPlane(uuid: string, component?: any) {\n    if (!uuid || !this.viewer || !this.viewer.scene || !this.viewer.camera || !this.viewer.renderer || !this.viewer.controls) {\n      return;\n    }\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      const state = this.getState(uuid);\n      // cancel any other command that conflict with this one\n      const commands = [];\n      state.objectsBoxSection && commands.push(Command.SectionBox);\n      state.objectsPlaneSection && commands.push(Command.SectionPlane);\n      if (commands.length > 0) {\n        console.log(`[BT] Cancelling conflicted commands: ${commands}`);\n        this.runCommands(uuid, commands);\n      }\n\n      if (state.customizedPlaneSection) {\n        state.customizedPlaneSection.close();\n        state.customizedPlaneSection = undefined;\n        this.removeCheckMark(component);\n      } else {\n        // TODO: For now, simply let user to input numbers. In future, should allow user to edit the plan in the scene\n        this.viewer.renderer.localClippingEnabled = true;\n        const scene = this.viewer.scene;\n        const camera = this.viewer.camera;\n        const renderer = this.viewer.renderer;\n        const controls = this.viewer.controls;\n        const format = \"Input rotation angle of section plane, recommended value: [-45°, 45°]\";\n        MessageBox.prompt(format.replace(\"axis\", \"X\")).then((data: MessageBoxData) => {\n          const x = Number((data as any).value);\n          if (isNaN(x)) {\n            console.log(\"Invalid input!\");\n            return;\n          }\n          MessageBox.prompt(format.replace(\"axis\", \"Y\")).then((data: MessageBoxData) => {\n            const y = Number((data as any).value);\n            if (isNaN(y)) {\n              console.log(\"Invalid input!\");\n              return;\n            }\n            MessageBox.prompt(format.replace(\"axis\", \"Z\")).then((data: MessageBoxData) => {\n              const z = Number((data as any).value);\n              if (isNaN(z)) {\n                console.log(\"Invalid input!\");\n                return;\n              }\n              state.customizedPlaneSection = new ObjectsPlaneSection([uuid], scene, camera, renderer, controls);\n              state.customizedPlaneSection.open();\n              const matrixX = new THREE.Matrix4().makeRotationX(Math.PI / 180 * x);\n              const matrixY = new THREE.Matrix4().makeRotationY(Math.PI / 180 * y);\n              const matrixZ = new THREE.Matrix4().makeRotationZ(Math.PI / 180 * z);\n              const matrix = matrixX.multiply(matrixY).multiply(matrixZ);\n              state.customizedPlaneSection.setMatrix(matrix);\n              this.addCheckMark(component);\n            });\n          });\n        });\n      }\n      this.viewer.enableRender();\n    }\n  }\n\n  /**\n   * explodes object\n   */\n  explode(uuid: string, component?: any) {\n    if (!uuid || !this.viewer || !this.viewer.scene || !this.viewer.renderer) {\n      return;\n    }\n    let obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      const state = this.getState(uuid);\n      // cancel any other command that conflict with this one\n      const commands = [];\n      state.showOutline && commands.push(Command.Outline);\n      if (commands.length > 0) {\n        console.log(`[BT] Cancelling conflicted commands: ${commands}`);\n        this.runCommands(uuid, commands);\n      }\n      if (state.exploder) {\n        ObjectUtils.unexplodeObject(state.exploder);\n        state.exploder = undefined;\n        this.removeCheckMark(component);\n      } else {\n        // if object has just one child, then explode doesn't mean anything. In this case, try its child level.\n        if (obj.children.length === 1) {\n          obj = obj.children[0];\n        }\n        state.exploder = ObjectUtils.explodeObject(this.viewer.scene, obj);\n        this.addCheckMark(component);\n      }\n      this.viewer.enableRender();\n    }\n  }\n\n  /**\n   * Filter by floor\n   */\n  floor(uuid: string, component?: any) {\n    if (!uuid || !this.viewer || !this.viewer.scene || !this.viewer.renderer) {\n      return;\n    }\n    // TODO: implement a panel for user to set visible floors for this object.\n    // What's more, we can create a panel to set floors for all models.\n    const floors = ObjectUtils.distinctFloors(this.viewer.scene, [uuid]);\n    if (floors.length === 0) {\n      MessageBox.alert(\"Failed to match floor info from components(name, userDate). Please make sure there are floor info(e.g. '2F')\", \"Warning\");\n      return;\n    }\n    const state = this.getState(uuid);\n    if (state.filterByFloorInfo) {\n      // if it is filtering by floor, we clear it\n      const info = state.filterByFloorInfo;\n      const mil = (info && info.materialInfoList) || undefined;\n      const uuids = (info && info.includeObjectUuids) || undefined;\n      ObjectUtils.revertObjectOpacityByUuid(this.viewer.scene, uuid, mil, uuids);\n      // clear filter by floor\n      // ObjectUtils.revertVisibleForFloorsByUuid(this.viewer.scene, uuid)\n      state.filterByFloorInfo = undefined;\n      this.removeCheckMark(component);\n      this.viewer.enableRender();\n      return;\n    }\n    MessageBox.prompt(`The model contains these floors: ${floors}, please input one or more floors, split with comma `, \"Specify floors\").then((data: MessageBoxData) => {\n      const val = (data as any).value as string;\n      if (this.viewer && this.viewer.scene) {\n        if (val) {\n          // split input with ',', '，' or white space\n          const floors = val.split(/[\\s,，]+/).map(v => Number(v)); // conver to number\n          // make sure objects for expected floor are visible, in case they are invisible by other operations...\n          // ObjectUtils.setVisibleForFloors(this.viewer.scene, uuid, floors, false)\n          // get un matched objects, then set opacity\n          const unmatchUuids: string[] = [];\n          ObjectUtils.traverseObjectByFloors(this.viewer.scene, uuid, floors, undefined, (object: THREE.Object3D) => {\n            unmatchUuids.push(object.uuid);\n          });\n          const materialInfo = ObjectUtils.setObjectOpacityByUuid(this.viewer.scene, uuid, 0.1, unmatchUuids);\n          if (!state.filterByFloorInfo) {\n            this.addCheckMark(component);\n          }\n          state.filterByFloorInfo = { includeObjectUuids: unmatchUuids, materialInfoList: materialInfo };\n          this.viewer.enableRender();\n        }\n      }\n    });\n  }\n\n  /**\n   * Instantiates objects\n   */\n  instantiate(uuid: string, component?: any) {\n    if (!this.viewer) {\n      return;\n    }\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      const state = this.getState(uuid);\n      // cancel any other command that conflict with this one\n      const commands = [];\n      state.materialInfoList && commands.push(Command.Transparent);\n      state.showOutline && commands.push(Command.Outline);\n      state.objectsBoxSection && commands.push(Command.SectionBox);\n      state.customizedPlaneSection && commands.push(Command.CustomizedSectionPlane);\n      if (commands.length > 0) {\n        console.log(`[BT] Cancelling conflicted commands: ${commands}`);\n        this.runCommands(uuid, commands);\n      }\n\n      if (!state.isInstantiated) {\n        // instantiate can be affected by selected object, so de-select any object if there is\n        this.viewer.clearSelection();\n\n        // outline affects instantiate/merge operation, remove outlines first before instantiate/merge.\n        // we can add outlines back after instantiate/merge if necessary\n        ObjectUtils.removeOutlines(obj);\n        new InstantiateHelper(obj).instantiate();\n        if (state.showOutline) {\n          ObjectUtils.addOutlines(obj);\n        }\n        state.isInstantiated = true;\n        this.addCheckMark(component);\n        // TODO: since objects changed, need to retreive BIM Tree for this object. For now, we can close then reopen BIM Tree\n      }\n      this.viewer.enableRender();\n    }\n  }\n\n  /**\n   * Merges objects\n   */\n  merge(uuid: string, component?: any) {\n    if (!this.viewer) {\n      return;\n    }\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      const state = this.getState(uuid);\n      // cancel any other command that conflict with this one\n      const commands = [];\n      state.objectsBoxSection && commands.push(Command.Transparent);\n      if (commands.length > 0) {\n        console.log(`[BT] Cancelling conflicted commands: ${commands}`);\n        this.runCommands(uuid, commands);\n      }\n\n      if (!state.isMerged) {\n        // merge can be affected by selected object, so de-select any object if there is\n        this.viewer.clearSelection();\n\n        // outline affects instantiate/merge operation, remove outlines first before instantiate/merge.\n        // we can add outlines back after instantiate/merge if necessary\n        ObjectUtils.removeOutlines(obj);\n        new MergeHelper(obj).merge();\n        if (state.showOutline) {\n          ObjectUtils.addOutlines(obj);\n        }\n        state.isMerged = true;\n        this.addCheckMark(component);\n        // TODO: since objects changed, need to retreive BIM Tree for this object. For now, we can close then reopen BIM Tree\n      }\n      this.viewer.enableRender();\n    }\n  }\n\n  /**\n   * Exports to glTF\n   */\n  exportToGltf(uuid: string) {\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      ExportUtils.exportToGltf(obj, obj.name || obj.uuid);\n    }\n  }\n\n  /**\n   * Exports to glb\n   */\n  exportToGlb(uuid: string) {\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      ExportUtils.exportToGlb(obj, obj.name || obj.uuid);\n    }\n  }\n\n  /**\n   * Exports to obj\n   */\n  exportToObj(uuid: string) {\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      ExportUtils.exportToObj(obj, obj.name || obj.uuid);\n    }\n  }\n\n  /**\n   * Exports to draco\n   */\n  exportToDraco(uuid: string) {\n    const obj = this.getObjectByUuid(uuid);\n    if (obj instanceof THREE.Mesh) {\n      ExportUtils.exportToDraco(obj, obj.name || obj.uuid);\n    }\n  }\n\n  /**\n   * Exports to threejs json\n   */\n  exportToThreeJsJson(uuid: string) {\n    const obj = this.getObjectByUuid(uuid);\n    if (obj) {\n      ExportUtils.exportToThreeJsJson(obj, obj.name);\n    }\n  }\n\n  private getObjectByUuid(uuid: string) {\n    if (uuid && this.viewer && this.viewer.scene) {\n      return this.viewer.scene.getObjectByProperty(\"uuid\", uuid);\n    }\n    return undefined;\n  }\n\n  private addCheckMark(component: any) {\n    component.$el.innerText = `${this.checkMark}${component.$el.innerText}`;\n  }\n\n  private removeCheckMark(component: any) {\n    let str: string = component.$el.innerText;\n    str = str.replace(`${this.checkMark}`, \"\");\n    component.$el.innerText = str;\n  }\n\n  private renderContent(h: any, { component, node, data, store }: any) {\n    if (!data || !data.id || !this.viewer || !this.viewer.scene) {\n      return;\n    }\n    const uuid = data.id;\n    const obj = this.getObjectByUuid(uuid);\n    const isRootNode = obj && (!obj.parent || obj.parent === this.viewer.scene);\n    const isMesh = obj instanceof THREE.Mesh;\n    const state = this.getState(uuid);\n    const isTransparent = !!state.materialInfoList;\n    const isWireframeMode = !!state.isWireframeMode;\n    const showOutline = !!state.showOutline;\n    const isSection = !!state.objectsBoxSection;\n    const isSectionByPanel = !!state.objectsPlaneSection;\n    const isCustomizedSectionPlane = !!state.customizedPlaneSection;\n    const isExploded = !!state.exploder;\n    const isInstantiated = !!state.isInstantiated;\n    const isMerged = !!state.isMerged;\n    const floors = ObjectUtils.distinctFloors(this.viewer.scene, [uuid]);\n\n    return (<div class=\"custom-content\">\n      <div onMouseenter={ this.startScroll } onMouseleave={ this.stopScroll } class=\"custom-label-wrapper\">\n        <span class=\"custom-label\">{ node.label }</span>\n      </div>\n      {isRootNode && // only disply dropdown menu for root node\n      <el-dropdown size=\"mini\" class=\"obj-dropdown\" placement=\"right-start\" trigger=\"click\" onCommand={ this.handleDropdownCommand(data.id) }>\n        <span onClick={ (event: MouseEvent) => event.stopPropagation() }>\n          <i class=\"el-icon-more\"></i>\n        </span>\n        <el-dropdown-menu slot=\"dropdown\" class=\"dropdown-menu\">\n          <el-dropdown-item command={ Command.ZoomTo }>Zoom to extent</el-dropdown-item>\n          <el-dropdown-item command={ Command.Transparent }>{ isTransparent && `${this.checkMark}` }Transparent</el-dropdown-item>\n          <el-dropdown-item command={ Command.Wireframe }>{ isWireframeMode && `${this.checkMark}` }Wireframe</el-dropdown-item>\n          <el-dropdown-item command={ Command.Outline }>{ showOutline && `${this.checkMark}` }Outline</el-dropdown-item>\n          <el-dropdown-item command={ Command.Material }>Material manager</el-dropdown-item>\n          <el-dropdown-item command={ Command.SectionBox }>{ isSection && `${this.checkMark}` }Section box</el-dropdown-item>\n          <el-dropdown-item command={ Command.SectionPlane }>{ isSectionByPanel && `${this.checkMark}` }Section plane</el-dropdown-item>\n          {/* Hide functions that doesn't work well in some case! */}\n          {/* <el-dropdown-item command={ Command.CustomizedSectionPlane }>{ isCustomizedSectionPlane && `${this.checkMark}` }User defined section plane</el-dropdown-item>\n          <el-dropdown-item command={ Command.Explode }>{ isExploded && `${this.checkMark}` }Explode</el-dropdown-item>\n          <el-dropdown-item command={ Command.Floor }>View by floor</el-dropdown-item>\n          <el-dropdown-item command={ Command.Instantiate } title=\"Create one InstancedMesh for all Meshes have the same Geometry and Material\">{ isInstantiated && `${this.checkMark}` }Instantiate gemometries</el-dropdown-item>\n          <el-dropdown-item command={ Command.Merge } title=\"Merge geometries that has the same Material and Geometry to one\">{ isMerged && `${this.checkMark}` }Merge geometries</el-dropdown-item>\n          <el-dropdown-item icon=\"el-icon-download\" command={ Command.ExportToGltf }>Export to GLTF</el-dropdown-item>\n          <el-dropdown-item icon=\"el-icon-download\" command={ Command.ExportToGlb }>Export to GLB</el-dropdown-item>\n          <el-dropdown-item icon=\"el-icon-download\" command={ Command.ExportToObj }>Export to OBJ</el-dropdown-item>\n          <el-dropdown-item icon=\"el-icon-download\" command={ Command.ExportToDraco } v-show={ isMesh }>Export to DRACO</el-dropdown-item>\n          <el-dropdown-item icon=\"el-icon-download\" command={ Command.ExportToThreeJsJson }>Export to ThreeJS JSON</el-dropdown-item> */}\n        </el-dropdown-menu>\n      </el-dropdown>\n      }\n    </div>);\n  }\n\n  protected render(): VNode {\n    const title = \"BIM Tree\";\n    const scopedSlots = {\n      header: () => title,\n      content: () => {\n        return <div class=\"tree-wrapper\" ref=\"treeWrapper\">\n          <el-input placeholder=\"your input...\" v-model={ this.filterText } class=\"input-with-select\" size=\"mini\" prefix-icon=\"el-icon-search\" clearable></el-input>\n          {/* @ts-ignore */}\n          <ElTree\n            node-key=\"id\"\n            ref=\"tree\"\n            height={this.treeHeight}\n            data={ this.bimTreeData }\n            default-checked-keys= { this.defaultCheckedKeys }\n            show-checkbox\n            render-after-expand={ false }\n            on-node-click={ this.handleNodeClick }\n            render-content={this.renderContent}\n            on-check-change={ this.handleCheckChange }\n            filter-node-method={ this.filterNode }>\n          </ElTree>\n        </div>;\n      }\n    };\n    return (\n      <BasePanel\n        ref=\"bimTreePanel\"\n        class={ styles.bimTree }\n        v-show={this.visible}\n        onClose={this.close}\n        onResize={this.changeTreeHeight}\n        {...{ scopedSlots }}>\n      </BasePanel>\n    );\n  }\n}\n","import * as THREE from \"three\";\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { History, PostmateManager } from \"../../core/postmate/PostmateManager\";\nimport { VNode } from \"vue/types/umd\";\nimport styles from \"./BottomBar.module.scss\";\nimport Viewer3D from \"../../core/Viewer3D\";\n\nexport interface BottomBarProps {\n  viewer: Viewer3D;\n}\n\n/**\n * Object info of the viewer\n */\ninterface ObjectInfo {\n  components: number,\n  points: number,\n  faces: number,\n  materials: { [id: string]: number } // store material ids and ref count\n}\n\n@Component\nexport default class BottomBar extends Vue {\n  @Prop({ required: true }) viewer!: BottomBarProps[\"viewer\"];\n\n  private readonly postmate = PostmateManager.instance();\n  private postmateHistories: History[] = [];\n  private postmateHistoryString = \"\";\n\n  mounted() {\n    // when viewer is assigned, watch ObitControls's 'change' event\n    this.$watch(\"viewer\", (viewer: Viewer3D) => {\n      if (viewer && viewer.controls) {\n        viewer.controls.addEventListener(\"change\", this.updateCameraInfo);\n      }\n    });\n\n    this.postmateHistories = this.postmate.getHistories();\n  }\n\n  updateCameraInfo() {\n    if (!this.viewer || !this.viewer.scene || !this.viewer.camera || !this.viewer.controls) {\n      return;\n    }\n    const camera = this.viewer.camera;\n    const controls = this.viewer.controls;\n    const r = (num: number) => Math.round(num); // round\n    const p2t = (p: THREE.Vector3) => `(${r(p.x)}, ${r(p.y)}, ${r(p.z)})`; // point to text\n    const p = camera.position;\n    const t = controls.target; // target point\n    if (p) {\n      const span = this.$refs.eye as HTMLSpanElement;\n      if (span) {\n        span.textContent = `Camera position: ${p2t(p)} | Camera target: ${p2t(t)}`;\n      }\n    }\n  }\n\n  getObjectInfo(object: THREE.Object3D, info: ObjectInfo) {\n    if (!(object instanceof THREE.Mesh) && !(object instanceof THREE.Line)) {\n      return;\n    }\n    // one InstancedMesh counts as 1 object\n    info.components++;\n    if (object.geometry) {\n      const geom = object.geometry;\n      if (geom.index && geom.index.count) {\n        info.faces += Math.round(geom.index.count / 3);\n      }\n      if (geom.attributes.position) {\n        const pos = geom.attributes.position;\n        if (pos.count && pos.itemSize) {\n          info.points += pos.count;\n        }\n      }\n    }\n\n    // log material info\n    const updateMaterialInfo = (id: number) => {\n      if (info.materials[id]) {\n        info.materials[id]++; // material id already exist\n      } else {\n        info.materials[id] = 0; // material id not exist\n      }\n    };\n\n    const mat = object.material;\n    if (mat instanceof THREE.Material) {\n      updateMaterialInfo(mat.id);\n    } else if (Array.isArray(mat)) {\n      mat.forEach(m => updateMaterialInfo(m.id));\n    }\n  }\n\n  @Watch(\"postmateHistories\")\n  updatePostmateHistoryCount() {\n    // this.postmateHistories = this.postmate.getHistories()\n    const span = this.$refs.postmateHistoryCount as HTMLSpanElement;\n    const count = this.postmateHistories.length;\n    span.textContent = `${count}`;\n\n    let str = \"\";\n    let i = 1;\n    this.postmateHistories.forEach(h => {\n      str += `${i++}. ${h.direction} message '${h.messageId}' at ${this.numToTime(h.time)}\\n`;\n    });\n    this.postmateHistoryString = str;\n  }\n\n  updateObjectsInfo() {\n    const span = this.$refs.objectsInfo as HTMLSpanElement;\n    if (!this.viewer.scene) {\n      if (span) {\n        span.textContent = \"Failed!\";\n      }\n      return;\n    }\n    span.textContent = \"Comupting...\";\n    // const info: { components: number, index: number, vertices: number, faces: number } = { components: 0, index: 0 }\n    const info: ObjectInfo = { components: 0, points: 0, faces: 0, materials: {} };\n    const updateTextContent = () => {\n      const materialCount = Object.keys(info.materials).length;\n      span.textContent = `Components: ${info.components}${info.points ? \", Points: \" + info.points : \"\"}${info.faces ? \", Faces: \" + info.faces : \"\"}${materialCount ? \", Materials: \" + materialCount : \"\"}`;\n    };\n    // traverse will be called on children of each child. Basically it traverses all the\n    // descendants of a any given three js object in Depth First Traversal manner.\n    this.viewer.scene.traverse((object) => {\n      this.getObjectInfo(object, info);\n      updateTextContent();\n    });\n    updateTextContent();\n  }\n\n  private numToTime(time: number) {\n    const date = new Date(time);\n    return `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\n  }\n\n  protected render(): VNode {\n    return (\n      <div class={ styles.bottomBar } ref=\"bottomBar\">\n        <div class=\"main\">\n          {/* Hide message popover for now */}\n          <div class=\"message\" style=\"display: none\">\n            <el-popover placement=\"top\" width=\"550\" height=\"300\" trigger=\"click\" class=\"popover-message\">\n              <el-input type=\"textarea\" rows=\"5\" v-model={this.postmateHistoryString}></el-input>\n              <i class=\"el-icon-message\" slot=\"reference\" title=\"Click to get messages\" onClick={this.updatePostmateHistoryCount}></i>\n            </el-popover>\n            <span ref='postmateHistoryCount'> 0 </span>\n          </div>\n          <el-popover placement=\"top\" trigger=\"click\">\n            <span ref='objectsInfo'> -- </span>\n            <i class=\"el-icon-info\" slot=\"reference\" title=\"Click to get statistics\" onClick={this.updateObjectsInfo}></i>\n          </el-popover>\n          <span class=\"separator\"> | </span>\n          <el-popover placement=\"top\" trigger=\"click\">\n            <span ref='eye'>Camera position: --</span>\n            <i class=\"el-icon-view\" slot=\"reference\" title=\"Click to get camera info\" onClick={this.updateCameraInfo}></i>\n          </el-popover>\n          <span class=\"separator\"> | </span>\n          <el-popover placement=\"top\" trigger=\"click\">\n            <div class=\"keys\">\n              <span>W: Move forward</span><br />\n              <span>A: Move backward</span><br />\n              <span>S: Move left</span><br />\n              <span>D: Move right</span><br />\n              <span>Ctrl: Move lower</span><br />\n              <span>Space: Move higher</span><br />\n              <span>↑: Rotate up</span><br />\n              <span>←: Rotate to left</span><br />\n              <span>↓: Rotate to right</span><br />\n              <span>→: Rotate to right</span><br />\n            </div>\n            <i class=\"el-icon-more\" slot=\"reference\" title=\"Click to get keyboard tips\" onClick={this.updateCameraInfo}></i>\n          </el-popover>\n        </div>\n      </div>\n    );\n  }\n}\n","import * as THREE from \"three\";\nimport { Font, FontLoader } from \"three/examples/jsm/loaders/FontLoader\";\nimport { TextGeometry } from \"three/examples/jsm/geometries/TextGeometry\";\n\nexport default class CoordinateAxes extends THREE.Object3D {\n  name = \"COORDINATE_AXES\";\n  private readonly AXIS_LENGTH = 1;\n  // follows right-hand coordinate system\n  private readonly AXIS_COLOR_X = 0xff0000; // red\n  private readonly AXIS_COLOR_Y = 0x00ff00; // green\n  private readonly AXIS_COLOR_Z = 0x0000ff; // blue\n\n  constructor(addTexts = true) {\n    super();\n\n    const origin = new THREE.Vector3(0, 0, 0);\n    const axisX = new THREE.Vector3(1, 0, 0);\n    const axisY = new THREE.Vector3(0, 1, 0);\n    const axisZ = new THREE.Vector3(0, 0, 1);\n\n    const arrowX = new THREE.ArrowHelper(axisX, origin, this.AXIS_LENGTH, this.AXIS_COLOR_X, this.AXIS_LENGTH / 5, this.AXIS_LENGTH / 8);\n    const arrowY = new THREE.ArrowHelper(axisY, origin, this.AXIS_LENGTH, this.AXIS_COLOR_Y, this.AXIS_LENGTH / 5, this.AXIS_LENGTH / 8);\n    const arrowZ = new THREE.ArrowHelper(axisZ, origin, this.AXIS_LENGTH, this.AXIS_COLOR_Z, this.AXIS_LENGTH / 5, this.AXIS_LENGTH / 8);\n    this.add(arrowX, arrowY, arrowZ);\n\n    // an additional box at the origin\n    // const sphere = new THREE.SphereGeometry(this.AXIS_LENGTH / 20)\n    // const object = new THREE.Mesh(sphere, new THREE.MeshBasicMaterial({ color: 0xffff00 }))\n    // const box = new THREE.BoxHelper(object, 0xffff00)\n    // this.add(box)\n\n    addTexts && this.addTexts();\n  }\n\n  addTexts() {\n    // should be able to load font from threejs' folder, don't know how...\n    new FontLoader().load(\"three/fonts/helvetiker_regular.typeface.json\", (font) => {\n      const x = this.createText(font, \"x\", new THREE.Color(0xff0000));\n      const y = this.createText(font, \"y\", new THREE.Color(0x00ff00));\n      const z = this.createText(font, \"z\", new THREE.Color(0x0000ff));\n      x.position.set(this.AXIS_LENGTH, 0, 0);\n      y.position.set(0, this.AXIS_LENGTH, 0);\n      z.position.set(0, 0, this.AXIS_LENGTH);\n      this.add(x, y, z);\n    });\n  }\n\n  createText(font: Font, text: string, color?: THREE.Color) {\n    const textGeom = new TextGeometry(text, {\n      font: font,\n      size: 0.3,\n      height: 0.02,\n      curveSegments: 6,\n      bevelEnabled: false,\n      bevelThickness: 0,\n      bevelSize: 0.01,\n      bevelSegments: 3\n    });\n    const textMat = new THREE.MeshStandardMaterial({\n      flatShading: true,\n      transparent: true,\n      opacity: 0.6,\n      emissive: color || new THREE.Color(0x00ff00)\n    });\n    return new THREE.Mesh(textGeom, textMat);\n  }\n}\n","import * as THREE from \"three\";\nimport CoordinateAxes from \"./CoordinateAxes\";\nimport Viewer3D from \"@/core/Viewer3D\";\n\n/**\n * This renderer monitors the host renderer's camera, and keeps a coordinate axes\n * the same direction as host renderer's\n */\nexport default class CoordinateAxesViewport {\n  hostRenderer?: Viewer3D;\n  coordinateAxes?: CoordinateAxes;\n  camera?: THREE.OrthographicCamera;\n  scene?: THREE.Scene;\n  renderer?: THREE.WebGLRenderer;\n  height = 100; // size of render area\n  width = 100;\n\n  constructor(width?: number, height?: number) {\n    this.width = width || this.width;\n    this.height = height || this.height;\n    this.init();\n  }\n\n  init() {\n    this.initRenderer();\n    this.initScene();\n    this.animate();\n  }\n\n  initRenderer() {\n    this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n    this.renderer.setSize(this.width, this.height);\n  }\n\n  initScene() {\n    this.scene = new THREE.Scene();\n    // do not set a background color, thus background is gonna be transparent\n    // this.scene.background = new THREE.Color(0xebf2f7)\n\n    this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0.1, 100);\n    this.scene.add(this.camera);\n\n    this.coordinateAxes = new CoordinateAxes();\n    this.scene.add(this.coordinateAxes);\n  }\n\n  render() {\n    if (this.renderer && this.scene && this.camera) {\n      this.update();\n      this.renderer.render(this.scene, this.camera);\n    }\n  }\n\n  animate() {\n    requestAnimationFrame(this.animate.bind(this));\n    this.render();\n  }\n\n  setHostRenderer(renderer: Viewer3D) {\n    this.hostRenderer = renderer;\n    this.update();\n  }\n\n  update() {\n    if (!this.hostRenderer || !this.hostRenderer.camera) {\n      return;\n    }\n    const camera = this.hostRenderer.camera;\n    if (camera) {\n      const target = new THREE.Vector3();\n      camera.getWorldDirection(target);\n      const up = camera.up;\n      this.updateCameraDirection(target, up);\n    }\n  }\n\n  /**\n   * Update axes according to camera direction.\n   * Camera's direction is the only input factor for this class. It always look at the origin.\n   * @param direction\n   */\n  updateCameraDirection(direction: THREE.Vector3, up: THREE.Vector3) {\n    if (!this.camera || !direction) {\n      return;\n    }\n    direction.normalize();\n    const distanceFactor = 2; // keep camera a little farer, so it looks better\n    const centerDelta = 0.3; // put the lookAt point to be in the first quadrant\n    this.camera.position.set(-direction.x * distanceFactor + centerDelta, -direction.y * distanceFactor + centerDelta, -direction.z * distanceFactor + centerDelta);\n    this.camera.lookAt(centerDelta, centerDelta, centerDelta); // it always looks at the origin\n    this.camera.up = up;\n  }\n\n  dispose() {\n    if (!this.scene || !this.camera || !this.coordinateAxes) {\n      return;\n    }\n    this.scene.clear(); // remove all child objects\n    this.hostRenderer = undefined;\n    this.camera = undefined;\n    this.coordinateAxes = undefined;\n    this.scene = undefined; // this is necessary to call\n  }\n}\n","import * as THREE from \"three\";\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { VNode } from \"vue/types/umd\";\nimport BasePanel from \"@/components/base-panel/BasePanel\";\nimport store, { Types } from \"@/store\";\nimport styles from \"./MaterialManager.module.scss\";\nimport Viewer3D from \"../../core/Viewer3D\";\n\n// TODO:\n// - note that if material is changed by other operations, it should refresh this panel,\n// - cannot revert the change yet\n\nexport interface MaterialManagerProps {\n  viewer: Viewer3D | undefined;\n}\n\ninterface TableRow {\n  materialId: number;\n  name: string;\n  type: string;\n  color: string;\n  refCount: number;\n}\n\n@Component\nexport default class MaterialManager extends Vue {\n  @Prop({ required: true }) viewer!: MaterialManagerProps[\"viewer\"];\n\n  visible?: boolean = false;\n  objectUuid: string | null = null;\n  materials: THREE.Material[] = [];\n  materialData: TableRow[] = [];\n  selectedMaterialIndex = -1;\n\n  mounted() {\n    this.setPanelVisibility(!!this.visible);\n\n    if (this.visible && this.objectUuid) {\n      this.getMaterials();\n    }\n  }\n\n  @Watch(\"objectUuidForMaterialManager\")\n  onObjectUuidForMaterialManagerChanged(objectUuid: string | null) {\n    if (!objectUuid) {\n      // hide panel\n      this.setPanelVisibility(false);\n    } else {\n      // TODO: if read material is kind of slow, we can improve it by not reading again if uuid unchanged\n      this.objectUuid = objectUuid;\n      this.setPanelVisibility(true);\n    }\n  }\n\n  get objectUuidForMaterialManager() {\n    return store.getters.getObjectUuidForMaterialManager;\n  }\n\n  close() {\n    this.setPanelVisibility(false);\n    store.commit(Types.MUTATION_OBJECT_UUID_FOR_MATERIAL_MANAGER, null);\n  }\n\n  setPanelVisibility(visible: boolean) {\n    this.visible = visible;\n    if (this.visible && this.objectUuid) {\n      this.materials = [];\n      this.materialData = [];\n      this.getMaterials();\n      if (this.selectedMaterialIndex === -1 && this.materials.length > 0) {\n        this.selectedMaterialIndex = 0; // select the first one by default\n      }\n    }\n  }\n\n  beforeDestroy() {\n    this.setPanelVisibility(false);\n    this.materials = [];\n    this.materialData = [];\n  }\n\n  getMaterials() {\n    if (!this.viewer || !this.viewer.scene || !this.objectUuid) {\n      return [];\n    }\n\n    const obj = this.viewer.scene.getObjectByProperty(\"uuid\", this.objectUuid);\n    if (obj) {\n      this.getMaterialsInner(obj);\n    }\n  }\n\n  private getMaterialsInner(object: THREE.Object3D) {\n    if (!object) {\n      return;\n    }\n    if (object.children.length > 0) {\n      object.children.forEach(obj => this.getMaterialsInner(obj));\n    }\n    const mat = (object as any).material;\n    if (mat && Array.isArray(mat) && mat.length > 0) {\n      mat.forEach(m => {\n        this.checkAndAddMaterial(m);\n      });\n    } else if (mat instanceof THREE.Material) {\n      this.checkAndAddMaterial(mat);\n    }\n  }\n\n  checkAndAddMaterial(material: THREE.Material) {\n    const item = this.materialData.find(item => item.materialId === material.id);\n    if (item) {\n      // if material already exist in materialData\n      item.refCount++;\n    } else {\n      this.materials.push(material);\n      const m = material as any;\n      const color = m.color ? this.color2Str(m.color) : \"\";\n      this.materialData.push({ materialId: material.id, name: material.name, type: material.type, color, refCount: 1 });\n    }\n  }\n\n  handleRowClick(row: TableRow, event: any, column: any) {\n    this.selectedMaterialIndex = this.materials.findIndex(m => m.id === row.materialId);\n  }\n\n  // color string is in format of \"#000000\" or \"rgba(0, 0, 0 ,0)\"\n  handleColorChange(material: THREE.Material, val: string) {\n    const m = material as any;\n    if (!m.color) {\n      return;\n    }\n    const c = new THREE.Color(val);\n    m.color.setRGB(c.r, c.g, c.b);\n    if (this.viewer) {\n      this.viewer.enableRender();\n    }\n    // TODO: change the color in table\n  }\n\n  handleTransparentChange(material: THREE.Material, val: boolean) {\n    material.transparent = val;\n    if (this.viewer) {\n      this.viewer.enableRender();\n    }\n  }\n\n  handleOpacityChange(material: THREE.Material, val: number) {\n    material.opacity = val;\n    if (this.viewer) {\n      this.viewer.enableRender();\n    }\n  }\n\n  handleRoughnessChange(material: THREE.Material, val: number) {\n    const m = material as any;\n    if (m.roughness == null) {\n      return; // if null or undefined, return\n    }\n    m.roughness = val;\n    if (this.viewer) {\n      this.viewer.enableRender();\n    }\n  }\n\n  handleMetalnessChange(material: THREE.Material, val: number) {\n    const m = material as any;\n    if (m.metalness == null) {\n      return; // if null or undefined, return\n    }\n    m.metalness = val;\n    if (this.viewer) {\n      this.viewer.enableRender();\n    }\n  }\n\n  colorFormatter(row: TableRow, column: any, cellValue: any, index: any) {\n    const id = row.materialId;\n    const material = this.materials.find(m => m.id === id);\n    let alpha = \"\";\n    if (material && material.transparent) {\n      alpha = this.opacity2HexStr(material.opacity);\n    }\n    // only store 'background-color' into style\n    const element: VNode = <div class=\"color-block\" style=\"background-color: \"></div>;\n    if (element.data && element.data.style) {\n      element.data.style = `background-color: ${cellValue}${alpha}`;\n    }\n    return element;\n  }\n\n  /**\n   * Converts THREE.Color to string like '#ffffff'\n   */\n  color2Str(color: THREE.Color): string {\n    return `#${color.getHexString()}`;\n  }\n\n  /**\n   * Converts opacity to hex string, e.g. 1 => FF\n   */\n  opacity2HexStr(opacity: number): string {\n    return Math.round(opacity * 255).toString(16);\n  }\n\n  protected render(): VNode {\n    const title = \"Material Manager\";\n    const scopedSlots = {\n      header: () => title,\n      content: () => {\n        let editorDiv: any = \"\";\n        if (this.selectedMaterialIndex >= 0) {\n          const m = this.materials[this.selectedMaterialIndex] as any;\n          let color = \"#ffffff\";\n          if (m.color && m.color.getHexString) {\n            color = this.color2Str(m.color);\n          }\n          editorDiv = <div class=\"material-editor\">\n            <div class=\"setting-row\">\n              <div class=\"setting-cell\">Color</div>\n              <div class=\"setting-cell\">\n                <el-color-picker value={ color } size=\"mini\" color-format=\"hex\"\n                  disabled={ !m.color }\n                  onInput={ (val: string) => this.handleColorChange(m, val) }\n                />\n              </div>\n            </div>\n            <div class=\"setting-row\">\n              <div class=\"setting-cell\">Enable transparent</div>\n              <div class=\"setting-cell\">\n                <el-checkbox value={ m.transparent }\n                  onChange={ (val: boolean) => this.handleTransparentChange(m, val) }\n                />\n              </div>\n            </div>\n            <div class=\"setting-row\">\n              <div class=\"setting-cell\">Opacity</div>\n              <div class=\"setting-cell\">\n                <el-slider value={ m.opacity || 0 } min={ 0 } max={ 1 } step={ 0.1 }\n                  onInput={ (val: number) => this.handleOpacityChange(m, val) }\n                />\n              </div>\n            </div>\n            <div class=\"setting-row\">\n              <div class=\"setting-cell\">Roughness</div>\n              <div class=\"setting-cell\">\n                <el-slider value={ m.roughness || 0 } min={ 0 } max={ 1 } step={ 0.1 }\n                  disabled={ m.roughness == null }\n                  onInput={ (val: number) => this.handleRoughnessChange(m, val) }\n                />\n              </div>\n            </div>\n            <div class=\"setting-row\">\n              <div class=\"setting-cell\">Metalness</div>\n              <div class=\"setting-cell\">\n                <el-slider value={ m.metalness || 0 } min={ 0 } max={ 1 } step={ 0.1 }\n                  disabled={ m.metalness == null }\n                  onInput={ (val: number) => this.handleMetalnessChange(m, val) }\n                />\n              </div>\n            </div>\n          </div>;\n        } else {\n          editorDiv = <div class=\"material-editor\"><span class=\"no-selection\">Please choose a material</span></div>;\n        }\n        return <div class=\"popup-body\">\n          <div class=\"object-info\">\n            <span>Object Uuid: { this.objectUuid }</span>\n          </div>\n          <el-table data={ this.materialData } size=\"mini\" border stripe highlight-current-row width=\"100%\" max-height=\"200\"\n            on-row-click={ this.handleRowClick }>\n            <el-table-column prop=\"materialId\" width=\"80\" label=\"Id\" align=\"center\" fixed sortable show-overflow-tooltip />\n            <el-table-column prop=\"name\" width=\"*\" label=\"Name\" header-align=\"center\" sortable show-overflow-tooltip />\n            <el-table-column prop=\"type\" width=\"*\" label=\"Type\" header-align=\"center\" sortable show-overflow-tooltip />\n            <el-table-column prop=\"color\" width=\"50\" label=\"Color\" align=\"center\" formatter={ this.colorFormatter } />\n            <el-table-column prop=\"refCount\" width=\"100\" label=\"Ref count\" align=\"center\" sortable show-overflow-tooltip />\n          </el-table>\n          { editorDiv }\n        </div>;\n      }\n    };\n\n    return (\n      <BasePanel\n        ref=\"materialManagerPanel\"\n        class={ styles.materialManager }\n        v-show={this.visible}\n        onClose={this.close}\n        {...{ scopedSlots }}>\n      </BasePanel>\n    );\n  }\n}\n","import { Component, Vue, Prop, Watch } from \"vue-property-decorator\";\nimport { VNode } from \"vue/types/umd\";\nimport styles from \"./ProgressBar.module.scss\";\n\nconst Progressbar = require(\"progressbar.js\");\nconst options = {\n  duration: 100,\n  from: { color: \"#409EFF\" },\n  to: { color: \"#67C23A\" },\n  strokeWidth: 1,\n  trailWidth: 0.4,\n  step: function(state: any, line: any) {\n    line.path.setAttribute(\"stroke\", state.color);\n  },\n  text: {\n    style: {\n      color: \"#888888\"\n    },\n    autoStyleContainer: true\n  },\n  easing: \"easeInOut\"\n};\n\nexport interface ProgressBarProps {\n  progressValue: number,\n  text: string\n}\n\n@Component\nexport default class ProgressBar extends Vue {\n  @Prop({ default: 0 }) progressValue!: ProgressBarProps[\"progressValue\"];\n  @Prop({ default: \"Loading...\" }) text?: ProgressBarProps[\"text\"];\n\n  progressBar?: any; // Progressbar\n\n  mounted() {\n    this.initProgressbar();\n  }\n\n  beforeDestroy() {\n    this.progressBar.destroy();\n  }\n\n  @Watch(\"progressValue\")\n  updateProgressBar(v: number) {\n    if (v < 100) {\n      this.progressBar.setText(`${this.text}: ${v}%`);\n    } else {\n      this.progressBar.setText(\"Loaded, a moment please...\");\n    }\n    this.progressBar.animate(v / 100);\n  }\n\n  initProgressbar() {\n    this.progressBar = new Progressbar.Line(this.$refs.progressBar as HTMLElement, options);\n  }\n\n  protected render(): VNode {\n    return (\n      <div class={styles.progressBarWrapper}>\n        <div ref=\"progressBar\" class={styles.progressBar}></div>\n      </div>\n    );\n  }\n}\n","import * as ProjectSettingType from \"./ProjectSettingsDef\";\nimport { Component, Vue, Prop } from \"vue-property-decorator\";\nimport { cloneDeep } from \"lodash\";\nimport { Settings as SettingsType, defaultSettings, cameraNearRange, cameraFarRange, unitRange, sensitivityRange, decimalPrecisionRange, settingStoreKeyName } from \"@/components/projectSettingsPanel/ProjectSettingsDef\";\nimport { Types as VuexTypes } from \"../../store\";\nimport styles from \"./ProjectSettings.module.scss\";\nimport Viewer3D from \"@/core/Viewer3D\";\n\n@Component\nexport default class ProjectSettingsPanel extends Vue {\n  @Prop({ required: true }) projectId!: string;\n  @Prop({ required: true }) viewer!: Viewer3D;\n  activeName = \"1\";\n  settings: ProjectSettingType.Settings = ProjectSettingType.defaultSettings;\n\n  changeTab(e: any) {\n  }\n\n  initProjectSettings() {\n    const savedSettings: SettingsType = localStorage.getItem(settingStoreKeyName + \"_\" + this.projectId) && JSON.parse(localStorage.getItem(settingStoreKeyName + \"_\" + this.projectId) || \"\");\n    const result = cloneDeep(defaultSettings);\n    if (savedSettings) {\n      Object.assign(result, cloneDeep(savedSettings));\n    }\n    this.settings = result;\n  }\n\n  restore(tabId: Number) {\n    if (tabId === 1) {\n      this.settings.unit = defaultSettings.unit;\n      this.settings.decimalPrecision = defaultSettings.decimalPrecision;\n      this.settings.camera = defaultSettings.camera;\n    }\n    if (tabId === 2) {\n      this.settings.mouse = defaultSettings.mouse;\n      this.settings.keyboard = defaultSettings.keyboard;\n    }\n  }\n\n  close() {\n    this.$emit(\"update:visible\", false);\n  }\n\n  save() {\n    this.$store.commit(VuexTypes.MUTATION_PROJECT_SETTINGS, this.settings);\n    localStorage.setItem(settingStoreKeyName + \"_\" + this.projectId, JSON.stringify(this.settings));\n    if (this.viewer) {\n      this.viewer.updateProjectSettings(this.settings);\n    }\n    this.close();\n  }\n\n  mounted() {\n    this.initProjectSettings();\n  }\n\n  render() {\n    const options1 = [];\n    const options2 = [];\n    let key: string;\n    for (key in unitRange) {\n      options1.push(<el-option value={unitRange[key]} label={key}></el-option>);\n    }\n    for (key in decimalPrecisionRange) {\n      options2.push(<el-option value={decimalPrecisionRange[key]} label={key}></el-option>);\n    }\n    return (\n      <div class={styles.psetting}>\n        <el-tabs v-model={this.activeName} onTabClick={this.changeTab}>\n          <el-tab-pane label=\"Common\" name=\"1\">\n            <div ref=\"panel1\">\n              <el-form ref=\"form\">\n                <el-form-item label=\"Units\">\n                  <el-select value={this.settings.unit} onInput={(val: string) => (this.settings.unit = val)}>\n                    {options1}\n                  </el-select>\n                </el-form-item>\n                <el-form-item label=\"Precision\">\n                  <el-select value={this.settings.decimalPrecision} onInput={(val: number) => (this.settings.decimalPrecision = val)}>\n                    {options2}\n                  </el-select>\n                </el-form-item>\n                <h3 style=\"margin-bottom:20px;margin-bottom:20px;\">Camera:</h3>\n                <div class={styles.sliderWrap}>\n                  <span class=\"demonstration\">Near:</span>\n                  <el-slider step={0.1} min={cameraNearRange[0]} max={cameraNearRange[1]} v-model={this.settings.camera.near}>\n                  </el-slider>\n                </div>\n                <div class={styles.sliderWrap}>\n                  <span class=\"demonstration\">Far:</span>\n                  <el-slider step={1} min={cameraFarRange[0]} max={cameraFarRange[1]} v-model={this.settings.camera.far}>\n                  </el-slider>\n                </div>\n                <p style=\"text-align:center;margin-bottom:20px;\">\n                  <el-button onClick={() => this.restore(1)}>Reset Settigns</el-button>\n                </p>\n                <p class={styles.btnWrap}>\n                  <el-button onClick={() => { this.close() } }>Cancel</el-button>\n                  <el-button onClick={() => { this.save() } }>Save</el-button>\n                </p>\n              </el-form>\n            </div>\n          </el-tab-pane>\n          <el-tab-pane label=\"Navigation\" name=\"2\">\n            <div ref=\"panel2\">\n              <el-form ref=\"form2\" label-width=\"100px\">\n                <el-form-item label=\"Mouse Sensitivity\">\n                  <el-slider style=\"margin-right:10px;\" value={this.settings.mouse.sensitivity} min={sensitivityRange[0]} max={sensitivityRange[1]} onInput={(val: number) => {\n                    this.settings.mouse.sensitivity = val;\n                  }}>\n                  </el-slider>\n                </el-form-item>\n                <el-form-item label=\"Keyboard Sensitivity\">\n                  <el-slider style=\"margin-right:10px;\" value={this.settings.keyboard.sensitivity} min={sensitivityRange[0]} max={sensitivityRange[1]} onInput={(val: number) => {\n                    this.settings.keyboard.sensitivity = val;\n                  }}>\n                  </el-slider>\n                </el-form-item>\n                <p style=\"text-align:center;margin-bottom:20px;\">\n                  <el-button onClick={() => this.restore(2)}>Reset Settigns</el-button>\n                </p>\n                <p class={styles.btnWrap}>\n                  <el-button onClick={() => { this.close() } }>Cancel</el-button>\n                  <el-button onClick={() => { this.save() } }>Save</el-button>\n                </p>\n              </el-form>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n    );\n  }\n}\n","import _ from \"lodash\";\nimport { Message } from \"element-ui\";\nimport axios, { AxiosRequestConfig, Canceler } from \"axios\";\nimport Vue from \"vue\";\n\nexport interface PendingRequest {\n  id: string;\n  cancel: Canceler;\n}\n\n/**\n  * Prompts error message\n  * @param {string} message error message\n  * @param {number} status error code\n  */\nexport const pushErrorMessage = (message: string, status?: string) => {\n  Message.error(`${message} ${status ? \"(\" + status + \")\" : \"\"}`);\n};\n\n/**\n  * General error handler\n  * @param {Object} error error object\n  */\nexport const errorHandler = (error: any) => {\n  const { response, code, message } = error;\n  if (response) {\n    const { status } = response;\n    const { error } = response.data;\n    switch (status) {\n    // 404 not found\n      case 404:\n        pushErrorMessage((error && error.errorMsg) || \"Not found\", status);\n        break;\n      case 500:\n        pushErrorMessage((error && error.errorMsg) || \"Server internal error\", status);\n        break;\n      default:\n        if (error.errorMsg) {\n          pushErrorMessage(error.errorMsg, error.code);\n        }\n    }\n  } else {\n    if (code === \"ECONNABORTED\" && message.indexOf(\"timeout\") > -1) {\n      pushErrorMessage(\"Request timeout\", code);\n    } else {\n      pushErrorMessage(message);\n    }\n  }\n};\n\n/**\n * General response handler\n*/\nexport function responseHandler(response: any) {\n  const { code, msg } = response.data;\n  switch (code) {\n  // TODO: enum\n  // case 0:\n  //   pushErrorMessage(msg)\n  //   return Promise.reject(response)\n    default:\n      return response;\n  }\n}\n\nexport function genRequestId(url: string, method: AxiosRequestConfig[\"method\"], data: any) {\n  return `${url}&${method}` + (data ? `&${JSON.stringify(data)}` : \"\");\n}\n\nexport function cancelPending(requestId: string) {\n  _.remove(Vue.prototype.$pendingRequests as PendingRequest[], (p: any) => {\n    if (p.id === requestId) {\n      p.cancel();\n      return true;\n    }\n  });\n}\n\n// creat axios instance\nconst instance = axios.create({\n  timeout: 1000 * 120\n});\n// set post header\ninstance.defaults.headers.post[\"Content-Type\"] = \"application/json;charset=UTF-8\";\n\n// request intercept\ninstance.interceptors.request.use(config => {\n  if (config.url) {\n    const requestId = genRequestId(config.url, config.method, config.data);\n    // cancel operation before an axios request\n    cancelPending(requestId);\n    config.cancelToken = new axios.CancelToken(c => {\n      Vue.prototype.$pendingRequests && Vue.prototype.$pendingRequests.push({ id: requestId, cancel: c } as PendingRequest);\n    });\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// response intercept\ninstance.interceptors.response.use(response => {\n  if (response.config.url) {\n    // handle response\n    const requestId = genRequestId(response.config.url, response.config.method, response.config.data);\n    cancelPending(requestId);\n  }\n  return responseHandler(response);\n}, error => {\n  if (error && error.constructor && error.constructor.name === \"Cancel\") {\n    return { data: {} };\n  }\n  errorHandler(error);\n  return Promise.reject(error);\n}\n);\n\nexport default instance;\n","import { AxiosRequestConfig } from \"axios\";\nimport instance from \"./interceptor\";\nimport qs from \"querystring\";\n\nexport function get(url: string, params?: any, config: AxiosRequestConfig = {}) {\n  return instance.get(url, {\n    ...config,\n    params,\n    paramsSerializer: (params: any) => {\n      return qs.stringify(params);\n    }\n  });\n}\n\nexport function post(url: string, data?: any, config: AxiosRequestConfig = {}) {\n  return instance.post(url, data, {\n    // baseURL: Vue.prototype?.$config?.threeJsBimService,\n    ...config\n  });\n}\n","import { get } from \"./base\";\n\nexport async function getJson(url: string) {\n  const res = await get(url);\n  return res.data;\n}\n","import { Component, Vue, Prop, Watch } from \"vue-property-decorator\";\nimport { getJson } from \"@/service/json\";\nimport { ObjectUtils } from \"../../core/utils/ObjectUtils\";\nimport { Project } from \"@/core/ProjectManager\";\nimport { VNode } from \"vue/types/umd\";\nimport styles from \"./PropertyPanel.module.scss\";\n\nexport interface Property {\n  name: string;\n  value: any;\n}\n\nexport interface PropertyPanelProps {\n  scene: THREE.Scene;\n  objId: string;\n}\n\n@Component\nexport default class PropertyPanel extends Vue {\n  @Prop({ required: true }) scene!: PropertyPanelProps[\"scene\"];\n  @Prop({ required: true }) objId!: PropertyPanelProps[\"objId\"];\n\n  jsonComponents: any[] = [] // eslint-disable-line\n  propData: any[] = [];\n  visible?: boolean = false;\n\n  @Watch(\"objId\")\n  async updatePropData(id: string) {\n    if (!this.visible) {\n      return;\n    }\n    this.propData = this.getObjectAttributes(id);\n    const data = this.getPropDataFormJson(id, this.jsonComponents);\n    if (data && data.length > 0) {\n      this.propData.concat(data);\n    }\n  }\n\n  @Watch(\"showPropertyPanel\")\n  onShowBimTreeChanged(visible: boolean) {\n    this.setPanelVisibility(visible);\n  }\n\n  get showPropertyPanel() {\n    return this.$store.getters.getShowPropertyPanel;\n  }\n\n  setPanelVisibility(visible: boolean) {\n    this.visible = visible;\n  }\n\n  mounted() {\n    // do not get component right after mounted, instead, do it later\n    // because the activeProject maynot be set at this time!\n    // caller need to trigger an 'activeProject' changed event, so PropertyPanel component get\n    // the event and update property files\n  }\n\n  @Watch(\"activeProject\")\n  async onActiveProjectChanged(newProject: Project, oldProject: Project) {\n    if (newProject && newProject.id) {\n      // TODO\n    }\n  }\n\n  get activeProject() {\n    return this.$store.getters.getActiveProject;\n  }\n\n  getObjectAttributes(uuid: string): Property[] {\n    if (!uuid) {\n      return [];\n    }\n    const attributes: Property[] = [];\n    let object = this.scene.getObjectByProperty(\"uuid\", uuid);\n    if (!object) {\n      // TODO: we'd better pass in Object3D into PropertyPanel, so that we don't need to find it at all,\n      // I've had a try but it doesn't work yet, could do it later.\n      object = ObjectUtils.findFirst(this.scene, uuid);\n    }\n    if (object) {\n      object.name && attributes.push({ name: \"name\", value: object.name });\n      attributes.push({ name: \"id\", value: object.id });\n      attributes.push({ name: \"uuid\", value: object.uuid });\n      attributes.push({ name: \"type\", value: object.constructor.name || object.type });\n      const keys = Object.keys(object.userData);\n      if (keys.length > 0) {\n        let str = \"\";\n        keys.forEach(key => {\n          if (str) {\n            str += \", \";\n          }\n          str += `${key}: ${object && object.userData[key]}`;\n        });\n        attributes.push({ name: \"userData\", value: str });\n      }\n    }\n    return attributes;\n  }\n\n  async setComponents(project: Project) {\n    if (project && project.models.length > 0) {\n      for (const model of project.models) {\n        const propFile = model.propertyFile;\n        if (propFile) {\n          const json = await getJson(propFile);\n          if (json && json.objects) {\n            this.jsonComponents.push(...json.objects.components);\n          }\n        }\n      }\n    }\n  }\n\n  getPropDataFormJson(id: string, json: any[]) {\n    if (json.length > 0) {\n      const userData = json.find(comp => comp.uuid === id)?.userData;\n      if (userData) {\n        return Object.keys(userData).map(key => {\n          return {\n            name: key,\n            value: userData[key]\n          };\n        });\n      }\n    }\n    return [];\n  }\n\n  protected render(): VNode {\n    return (\n      <div class={styles.tableWrapper} v-show={this.visible && this.propData.length}>\n        <el-table\n          data={this.propData}\n          size=\"mini\"\n          border\n          max-height=\"200\">\n          <el-table-column\n            prop=\"name\"\n            width=\"100\"\n            label=\"Name\">\n          </el-table-column>\n          <el-table-column\n            prop=\"value\"\n            width=\"200\"\n            label=\"Value\">\n          </el-table-column>\n        </el-table>\n      </div>\n    );\n  }\n}\n","import { Component, Vue, Prop, Watch } from \"vue-property-decorator\";\nimport { VNode } from \"vue/types/umd\";\nimport store, { Types } from \"@/store/index\";\nimport styles from \"./SnapshotPanel.module.scss\";\n\n// this requires WebGLRenderer's preserveDrawingBuffer set to true\n\nexport interface SnapshotPanelProps {\n  canvas: HTMLCanvasElement;\n}\n\n@Component\nexport default class SnapshotPanel extends Vue {\n  @Prop({ required: true }) canvas!: SnapshotPanelProps[\"canvas\"];\n\n  private type = \"image/png\"; // png, jpeg, etc.\n  private quality = 0.5; // a value between 0 and 1\n  private imageData = \"\";\n  private visible?: boolean = false;\n\n  mounted() {\n    this.setPanelVisibility(!!this.visible);\n  }\n\n  @Watch(\"showSnapshotPanel\")\n  onShowSnapshotPanelChanged(visible: boolean) {\n    this.setPanelVisibility(visible);\n  }\n\n  get showSnapshotPanel() {\n    return this.$store.getters.getShowSnapshotPanel;\n  }\n\n  setPanelVisibility(visible: boolean) {\n    this.visible = visible;\n    const panel = (this.$refs.snapshotPanel) as HTMLDivElement;\n    panel.style.display = visible ? \"\" : \"none\";\n\n    // when visible, regenerate image\n    if (visible) {\n      this.regenerateImageData();\n    }\n  }\n\n  private regenerateImageData() {\n    if (this.canvas) {\n      this.imageData = this.canvas.toDataURL(this.type, this.quality);\n    }\n  }\n\n  close() {\n    this.setPanelVisibility(false);\n    store.commit(Types.MUTATION_SHOW_SNAPSHOT_PANEL, false); // inform other components to update\n  }\n\n  protected render(): VNode {\n    return (\n      <div ref=\"snapshotPanel\" class={styles.snapshotPanel}>\n        <div class=\"popup-title\">\n          <span class=\"popup-title-span\">Snapshot</span>\n          <el-button icon=\"el-icon-close\" class=\"popup-title-close\" onClick={ this.close }></el-button>\n        </div>\n        <div class=\"image-container\">\n          <img id=\"image\" src={this.imageData} class=\"image\" title='Right click to download it'></img>\n          <a href={this.imageData} download=\"snapshot.png\" class=\"download-icon\">Download</a>\n        </div>\n      </div>\n    );\n  }\n}\n","/* eslint-disable */\n// Shapefile parser, following the specification at\n// http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf\n\nexport enum SHP {\n  NULL = 0,\n  POINT = 1,\n  POLYLINE = 3,\n  POLYGON = 5\n}\n\nexport class SHPParser {\n  // \"load\" method is moved to SHPLoader class\n  // public load (src: any, callback: any, onerror: any) {\n  //   var xhr = new XMLHttpRequest()\n  //   xhr.responseType = \"arraybuffer\"\n  //   xhr.onload = () => {\n  //     // console.log(xhr.response)\n  //     var d = this.parse(xhr.response)\n  //     callback(d)\n  //   }\n  //   xhr.onerror = onerror\n  //   xhr.open(\"GET\", src)\n  //   xhr.send(null)\n  // }\n\n  public parse (arrayBuffer: any) {\n    var o: any = {}\n    var dv = new DataView(arrayBuffer)\n    var idx = 0\n    o.fileCode = dv.getInt32(idx, false)\n    if (o.fileCode != 0x0000270a) {\n      throw (new Error(\"Unknown file code: \" + o.fileCode))\n    }\n    idx += 6 * 4\n    o.wordLength = dv.getInt32(idx, false)\n    o.byteLength = o.wordLength * 2\n    idx += 4\n    o.version = dv.getInt32(idx, true)\n    idx += 4\n    o.shapeType = dv.getInt32(idx, true)\n    idx += 4\n    o.minX = dv.getFloat64(idx, true)\n    o.minY = dv.getFloat64(idx + 8, true)\n    o.maxX = dv.getFloat64(idx + 16, true)\n    o.maxY = dv.getFloat64(idx + 24, true)\n    o.minZ = dv.getFloat64(idx + 32, true)\n    o.maxZ = dv.getFloat64(idx + 40, true)\n    o.minM = dv.getFloat64(idx + 48, true)\n    o.maxM = dv.getFloat64(idx + 56, true)\n    idx += 8 * 8\n    o.records = []\n    while (idx < o.byteLength) {\n      var record: any = {}\n      record.number = dv.getInt32(idx, false)\n      idx += 4\n      record.length = dv.getInt32(idx, false)\n      idx += 4\n      try {\n        record.shape = this.parseShape(dv, idx, record.length)\n      } catch(e) {\n        console.log(e, record)\n      }\n      idx += record.length * 2\n      o.records.push(record)\n    }\n    return o\n  }\n\n  parseShape (dv: any, idx: any, length: any) {\n    var i = 0, c = null\n    var shape: any = {}\n    shape.type = dv.getInt32(idx, true)\n    idx += 4\n    // var byteLen = length * 2\n    switch (shape.type) {\n      case SHP.NULL: // Null\n        break\n\n      case SHP.POINT: // Point (x,y)\n        shape.content = {\n          x: dv.getFloat64(idx, true),\n          y: dv.getFloat64(idx + 8, true)\n        }\n        break\n      case SHP.POLYLINE: // Polyline (MBR, partCount, pointCount, parts, points)\n      case SHP.POLYGON: // Polygon (MBR, partCount, pointCount, parts, points)\n        c = shape.content = {\n          minX: dv.getFloat64(idx, true),\n          minY: dv.getFloat64(idx+8, true),\n          maxX: dv.getFloat64(idx+16, true),\n          maxY: dv.getFloat64(idx+24, true),\n          parts: new Int32Array(dv.getInt32(idx+32, true)),\n          points: new Float64Array(dv.getInt32(idx+36, true)*2)\n        }\n        idx += 40\n        for (i=0; i<c.parts.length; i++) {\n          c.parts[i] = dv.getInt32(idx, true)\n          idx += 4\n        }\n        for (i=0; i<c.points.length; i++) {\n          c.points[i] = dv.getFloat64(idx, true)\n          idx += 8\n        }\n        break\n\n      case 8: // MultiPoint (MBR, pointCount, points)\n      case 11: // PointZ (X, Y, Z, M)\n      case 13: // PolylineZ\n      case 15: // PolygonZ\n      case 18: // MultiPointZ\n      case 21: // PointM (X, Y, M)\n      case 23: // PolylineM\n      case 25: // PolygonM\n      case 28: // MultiPointM\n      case 31: // MultiPatch\n        throw new Error(\"Shape type not supported: \"\n                        + shape.type + \":\" +\n                        + shape.type)\n      default:\n        throw new Error(\"Unknown shape type at \" + (idx-4) + \": \" + shape.type)\n    }\n    return shape\n  }\n}\n","/* eslint-disable */\nexport class BitView {\n  buffer: any\n  u8: any\n\n  constructor (buf: any) {\n    this.buffer = buf\n    this.u8 = new Uint8Array(buf)\n  }\n\n  getBit (idx: any) {\n    var v = this.u8[idx >> 3]\n    var off = idx & 0x7\n    return (v & (0x80 >> off)) >> (7-off)\n  }\n\n  setBit (idx: any, val: any) {\n    var bidx = idx >> 3\n    var v = this.u8[bidx]\n    var off = idx & 0x7\n    if (val) {\n      this.u8[bidx] = v | (0x80 >> off)\n    } else {\n      this.u8[bidx] = v & ~(0x80 >> off)\n    }\n  }\n\n  getInt12 (idx: any) {\n    var bidx = idx/8 | 0\n    var a = this.u8[bidx]\n    var b = this.u8[bidx + 1]\n    var c = this.u8[bidx + 2]\n    var off = idx % 8\n    var abits = 8-off\n    var bbits = Math.min(12-abits, 8)\n    var cbits = Math.max(12-abits-bbits, 0)\n    var am = ~(0xff << (abits))\n    var bm = (0xff << (8-bbits))\n    var cm = (0xff << (8-cbits))\n    a &= am\n    b &= bm\n    c &= cm\n    return (((a << 16) + (b << 8) + c) >> (12-off)) - 2048\n  }\n\n  setInt12 (idx: any, val: any) {\n    val += 2048\n    var bidx = idx/8 | 0\n    var off = idx % 8\n    var v = val << (12-off)\n    var a = (v & 0xff0000) >> 16\n    var b = (v & 0x00ff00) >> 8\n    var c = v & 0x0000ff\n    var abits = 8-off\n    var bbits = Math.min(12-abits, 8)\n    var cbits = Math.max(12-abits-bbits, 0)\n    var am = (0xff << (abits))\n    this.u8[bidx] = (this.u8[bidx] & am) + a\n    var bm = ~(0xff << (8-bbits))\n    this.u8[bidx+1] = (this.u8[bidx+1] & bm) + b\n    var cm = ~(0xff << (8-cbits))\n    this.u8[bidx+2] = (this.u8[bidx+2] & cm) + c\n  }\n\n  getInt6 (idx: any) {\n    var bidx = idx/8 | 0\n    var a = this.u8[bidx]\n    var b = this.u8[bidx + 1]\n    var off = idx % 8\n    var abits = 8-off\n    var bbits = Math.max(6-abits, 0)\n    var am = ~((0xff << (abits)) + (0xff >> (8-(2-off))))\n    var bm = (0xff << (8-bbits))\n    a &= am\n    b &= bm\n    return (((a << 8) + b) >> (10-off)) - 32\n  }\n\n  setInt6 (idx: any, val: any) {\n    val += 32\n    var bidx = idx/8 | 0\n    var off = idx % 8\n    var v = val << (10-off)\n    var a = (v & 0xff00) >> 8\n    var b = (v & 0x00ff)\n    var abits = 8-off\n    var bbits = Math.max(6-abits, 0)\n    var am = ((0xff << (abits)) + (0xff >> (8-(2-off))))\n    this.u8[bidx] = (this.u8[bidx] & am) + a\n    var bm = ~(0xff << (8-bbits))\n    this.u8[bidx+1] = (this.u8[bidx+1] & bm) + b\n  }\n\n  test () {\n    var buf = new ArrayBuffer(3)\n    var bv = new BitView(buf)\n    var i,j\n    for (j=0; j<12; j++) {\n      for (i=-2048; i<2048; i++) { \n        bv.setInt12(j,i) \n        if (bv.getInt12(j) != i) {\n          console.log(\"12-bit prob at\", j, i)\n          console.log(\"expected\", i, \"got\", bv.getInt12(j))\n          break\n        }\n      }\n    }\n    for (j=0; j<18; j++) {\n      for (i=-32; i<32; i++) { \n        bv.setInt6(j,i) \n        if (bv.getInt6(j) != i) {\n          console.log(\"6-bit prob at\", j, i)\n          console.log(\"expected\", i, \"got\", bv.getInt6(j))\n          break\n        }\n      }\n    }\n    return bv\n  }\n}\n","/* eslint-disable */\nimport * as THREE from \"three\"\nimport { BitView } from \"./BitView\"\nimport { SHP } from \"./Shp\"\n\n/**\n * Three.js extensions for SHP parser.\n * Code is converted from JS to TS based on: https://github.com/kig/shp.js/\n */\nexport class ShpThree {\n  readonly LINE_MATERIAL = new THREE.LineBasicMaterial({ color: 0x000000, linewidth: 2, opacity: 0.8, transparent: true })\n  readonly MESH_MATERIAL = new THREE.MeshBasicMaterial({ color: 0x1D65FF, opacity: 0.8, transparent: true }) // just one side for now\n\n  /**\n   * \n   * @param shp \n   * @param spherize is spherize or not. This only works well for the sameple shp for now!\n   */\n  public createModel (shp: any): THREE.Object3D {\n    var polygons: any = []\n    var lines = []\n    for (var i = 0; i < shp.records.length; i++) {\n      var r = shp.records[i].shape\n      if (r.type === SHP.POLYLINE || r.type === SHP.POLYGON) {\n        var points = r.content.points\n        var parts = r.content.parts\n        for (var k=0; k<parts.length; k++) {\n          const poly = []\n          for (var j=parts[k], last=parts[k+1]||(points.length/2); j<last; j++) {\n            var x = points[j*2]\n            var y = points[j*2+1]\n            poly.push(new THREE.Vector3(x, y, 0))\n          }\n          if (r.type === SHP.POLYGON) {\n            // create polygon with border\n            // poly.pop() // pop out the last point\n            // const vector2List = poly.map(v => new THREE.Vector2(v.x, v.y))\n            // polygons.push(new THREE.ExtrudeGeometry(new THREE.Shape(vector2List), { depth: 1, bevelEnabled: false, curveSegments: 1 }))\n            const trangles: number[][] = THREE.ShapeUtils.triangulateShape(poly, [])\n            const index: number[] = []\n            trangles.forEach(t => index.push(...t))\n            const geom = new THREE.BufferGeometry()\n            geom.setFromPoints(poly)\n            geom.setIndex(index)\n            polygons.push(geom)\n            // create border\n            const lineGeom = new THREE.BufferGeometry()\n            if (poly.length > 2 && !poly[0].equals(poly[poly.length - 1])) {\n              // close the line if not closed yet\n              poly.push(poly[0])\n            }\n            lineGeom.setFromPoints(poly)\n            lines.push(lineGeom)\n          } else {\n            // create line\n            const geom = new THREE.BufferGeometry()\n            geom.setFromPoints(poly)\n            lines.push(geom)\n          }\n        }\n      }\n    }\n    var model = new THREE.Object3D()\n    for (var i=0; i<lines.length; i++) {\n      model.add(new THREE.Line(lines[i], this.LINE_MATERIAL))\n    }\n    for (var i=0; i<polygons.length; i++) {\n      model.add(new THREE.Mesh(polygons[i], this.MESH_MATERIAL))\n    }\n    console.log(\"parsed\", polygons.length, lines.length)\n    return model\n  }\n\n  loadCompressed (deltaEncoded: any) {\n    var compressed = this.deltaDecode6(deltaEncoded)\n    var polygons = []\n    var lines: any = []\n    for (var i=0; i<compressed.length; i++) {\n      let poly: any = []\n      if (compressed[i] === -32768) {\n        var p: any = []\n        for (var h=1; h<poly.length; h++) {\n          if (!(poly[h-1].x == poly[h].x && poly[h-1].y == poly[h].y)) {\n            p.push(poly[h])\n          }\n        }\n        // TODO: check if this change is right\n        // var shape = new THREE.Shape(p)\n        // var geom = shape.extrude({ amount: 0.001, bevelThickness: 0.001, bevelSize: 0.001, bevelEnabled: false, curveSegments: 1 })\n        const geom = new THREE.BufferGeometry()\n        geom.setFromPoints(p)\n        polygons.push(geom)\n        poly = []\n        continue\n      }\n      var x = compressed[i] * 180 / 32767\n      var y = compressed[i+1] * 180 / 32767\n      i++\n      poly.push(new THREE.Vector3(x, y, 0))\n    }\n    var model = new THREE.Object3D()\n    for (var i=0; i<lines.length; i++) {\n      model.add(new THREE.Line(lines[i], this.LINE_MATERIAL))\n    }\n    for (var i=0; i<polygons.length; i++) {\n      model.add(new THREE.Mesh(polygons[i], this.MESH_MATERIAL))\n    }\n    console.log(\"parsed compressed\", polygons.length, lines.length)\n    return model\n  }\n\n  compress (shp: any) {\n    var polys = []\n    for (var i=0; i<shp.records.length; i++) {\n      var r = shp.records[i].shape\n      if (r.type === SHP.POLYGON) {\n        var points = r.content.points\n        var parts = r.content.parts\n        for (var k=0; k<parts.length; k++) {\n          for (var j=parts[k], last=parts[k+1]||(points.length/2); j<last; j++) {\n            var x = points[j*2]\n            var y = points[j*2+1]\n            polys.push(x / 180 * 32767, y / 180 * 32767)\n          }\n          polys.push(-32768)\n        }\n      }\n    }\n    var i16a = new Int16Array(polys)\n    console.log(\"16-bit quantized byteLength\", i16a.buffer.byteLength)\n    var denc = this.deltaEncode6(i16a)\n    console.log(\"delta-encoded byteLength\", denc.byteLength)\n    return denc\n  }\n\n  deltaEncode (arr: any) {\n    var polys = []\n    var spans = []\n    var span = []\n    var x = 0, y = 0\n    var byteLen = 0\n    for (var i=0; i<arr.length; i++) {\n      if (arr[i] == -32768) {\n        spans.push(span)\n        polys.push(spans)\n        spans = []\n        span = []\n        byteLen += 3\n        continue\n      }\n      if (span.length == 0) {\n        x = arr[i], y = arr[i+1]\n        span.push(x, y)\n        byteLen += 4\n        i++\n      } else if (Math.abs(x - arr[i]) > 1023 || Math.abs(y - arr[i+1]) > 1023) {\n        spans.push(span)\n        byteLen += 1\n        span = []\n        x = arr[i], y = arr[i+1]\n        span.push(x, y)\n        byteLen += 4\n        i++\n      } else {\n        span.push((arr[i] - x) / 8, (arr[i+1] - y) / 8)\n        x += (((arr[i] - x) / 8) | 0) * 8\n        y += (((arr[i+1] - y) / 8) | 0) * 8\n        byteLen += 2\n        i++\n      }\n    }\n    return this.storeDeltas(byteLen, polys)\n  }\n\n  deltaEncode6 (arr: any) {\n    var polys = []\n    var spans = []\n    var span = []\n    var x = 0, y = 0, i=0\n    var byteLen = 0\n    for (i=0; i<arr.length; i++) {\n      arr[i] = 0 | (arr[i] / 16)\n    }\n    for (i=0; i<arr.length; i++) {\n      if (arr[i] === -2048) {\n        spans.push(span)\n        polys.push(spans)\n        spans = []\n        span = []\n        byteLen += 3\n        continue\n      }\n      if (span.length == 0) {\n        x = arr[i], y = arr[i+1]\n        span.push(x, y)\n        byteLen += 4\n        i++\n      } else if (Math.abs(x - arr[i]) > 31 || Math.abs(y - arr[i+1]) > 31) {\n        spans.push(span)\n        byteLen += 1\n        span = []\n        x = arr[i], y = arr[i+1]\n        span.push(x, y)\n        byteLen += 4\n        i++\n      } else {\n        span.push((arr[i] - x), (arr[i+1] - y))\n        x += (arr[i] - x)\n        y += (arr[i+1] - y)\n        byteLen += 2\n        i++\n      }\n    }\n    return this.storeDeltas6(byteLen, polys)\n  }\n\n  storeDeltas (byteLen: any, polys: any) { \n    var buf = new ArrayBuffer(byteLen)\n    var dv = new DataView(buf)\n    var idx = 0\n    for (var i=0; i<polys.length; i++) {\n      var spans = polys[i]\n      for (var j=0; j<spans.length; j++) {\n        var span = spans[j]\n        dv.setInt16(idx, span[0])\n        idx += 2\n        dv.setInt16(idx, span[1])\n        idx += 2\n        for (var k=2; k<span.length; k++) {\n          dv.setInt8(idx++, span[k])\n        }\n        dv.setInt8(idx, -128)\n        idx += 1\n      }\n      dv.setInt16(idx, -32768)\n      idx += 2\n    }\n    return buf\n  }\n\n  deltaDecode (buf: any) {\n    var dv = new DataView(buf)\n    var idx = 0\n    var polys = []\n    while (idx < buf.byteLength) {\n      var x = dv.getInt16(idx)\n      idx += 2\n      if (x === -32768) {\n        polys.push(-32768)\n        continue\n      }\n      var y = dv.getInt16(idx)\n      idx += 2\n      polys.push(x, y)\n      while (idx < buf.byteLength) {\n        var dx = dv.getInt8(idx)\n        idx++\n        if (dx == -128) {\n          break\n        }\n        var dy = dv.getInt8(idx)\n        idx++\n        x += dx * 8\n        y += dy * 8\n        polys.push(x, y)\n      }\n    }\n    return polys\n  }\n\n\n  storeDeltas6 (byteLen: any, polys: any) { \n    var buf = new ArrayBuffer(Math.ceil(byteLen * 0.75)+4)\n    var dv = new BitView(buf)\n    var idx = 32\n    for (var i=0; i<polys.length; i++) {\n      var spans = polys[i]\n      for (var j=0; j<spans.length; j++) {\n        var span = spans[j]\n        dv.setInt12(idx, span[0])\n        idx += 12\n        dv.setInt12(idx, span[1])\n        idx += 12\n        for (var k = 2; k < span.length; k++) {\n          dv.setInt6(idx, span[k])\n          idx += 6\n        }\n        dv.setInt6(idx, -32)\n        idx += 6\n      }\n      dv.setInt12(idx, -2048)\n      idx += 12\n    }\n    new DataView(buf).setUint32(0, idx)\n    return buf\n  }\n\n  deltaDecode6 (buf: any) {\n    var bitLength = new DataView(buf).getUint32(0)\n    var dv = new BitView(buf)\n    var idx = 32\n    var polys = []\n    while (idx < bitLength) {\n      var x = dv.getInt12(idx)\n      idx += 12\n      if (x === -2048) {\n        polys.push(-2048)\n        continue\n      }\n      var y = dv.getInt12(idx)\n      idx += 12\n      polys.push(x, y)\n      while (idx < bitLength) {\n        var dx = dv.getInt6(idx)\n        idx += 6\n        if (dx === -32) {\n          break\n        }\n        var dy = dv.getInt6(idx)\n        idx += 6\n        x += dx\n        y += dy\n        polys.push(x, y)\n      }\n    }\n    for (var i=0; i<polys.length; i++) {\n      polys[i] *= 16\n    }\n    return polys\n  }\n}\n","import * as THREE from \"three\";\nimport { SHPParser } from \"./Shp\";\nimport { ShpThree } from \"./ShpThree\";\n\n/**\n * ArcGIS SHP file loader\n */\nexport class SHPLoader {\n  public async load(url: string, onLoad: (object: THREE.Object3D) => void, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void) {\n    this.updateProgress(onProgress, 0);\n\n    const xhr = new XMLHttpRequest();\n    xhr.responseType = \"arraybuffer\";\n    xhr.onload = () => {\n      this.updateProgress(onProgress, 50); // we actually don't know an exact progress, while write one here\n      // console.log(xhr.response)\n      const parser = new SHPParser();\n      const parsedShp = parser.parse(xhr.response);\n      const model = new ShpThree().createModel(parsedShp);\n      this.updateProgress(onProgress, 99);\n      onLoad(model);\n    };\n    xhr.onerror = onerror;\n    xhr.open(\"GET\", url);\n    xhr.send(null);\n  }\n\n  /**\n   *\n   * @param percent a number between [0, 100]\n   */\n  private updateProgress(onProgress: ((event: ProgressEvent) => void) | undefined, percent: number) {\n    if (onProgress) {\n      const progressEventInit = { lengthComputable: true, loaded: percent, total: 100 };\n      onProgress(new ProgressEvent(\"progress\", progressEventInit));\n    }\n  }\n}\n","import * as THREE from \"three\";\n\n// Reference to https://sbcode.net/threejs/webcam/\n// This class is just a demo yet\nexport class WebCam {\n  private webcamCanvas: HTMLCanvasElement;\n  private webcam: HTMLVideoElement;\n  private canvasCtx: CanvasRenderingContext2D;\n  private webcamTexture: THREE.Texture;\n  private shaderMaterial: THREE.ShaderMaterial;\n\n  readonly vertexShader = `\n    varying vec2 vUv;\n    void main( void ) {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n    }`;\n\n  readonly fragmentShader = `\n    uniform vec3 keyColor;\n    uniform float similarity;\n    uniform float smoothness;\n    varying vec2 vUv;\n    uniform sampler2D map;\n    void main() {\n        vec4 videoColor = texture2D(map, vUv);\n\n        float Y1 = 0.299 * keyColor.r + 0.587 * keyColor.g + 0.114 * keyColor.b;\n        float Cr1 = keyColor.r - Y1;\n        float Cb1 = keyColor.b - Y1;\n        \n        float Y2 = 0.299 * videoColor.r + 0.587 * videoColor.g + 0.114 * videoColor.b;\n        float Cr2 = videoColor.r - Y2; \n        float Cb2 = videoColor.b - Y2; \n        \n        float blend = smoothstep(similarity, similarity + smoothness, distance(vec2(Cr2, Cb2), vec2(Cr1, Cb1)));\n        gl_FragColor = vec4(videoColor.rgb, videoColor.a * blend); \n    }`;\n\n  constructor() {\n    const webcam = document.createElement(\"video\");\n    this.webcam = webcam;\n    const constraints = { video: { width: 600, height: 400 } };\n    navigator.mediaDevices.getUserMedia(constraints).then((mediaStream: MediaStream) => {\n      webcam.srcObject = mediaStream;\n      webcam.onloadedmetadata = (e) => {\n        webcam.setAttribute(\"autoplay\", \"true\");\n        webcam.setAttribute(\"playsinline\", \"true\");\n        webcam.play();\n      };\n    }).catch(function(err) {\n      alert(err.name + \": \" + err.message);\n    });\n    this.webcamCanvas = document.createElement(\"canvas\");\n    const canvasCtx = this.webcamCanvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    this.canvasCtx = canvasCtx;\n    canvasCtx.fillStyle = \"#000000\";\n    canvasCtx.fillRect(0, 0, this.webcamCanvas.width, this.webcamCanvas.height);\n    const webcamTexture = new THREE.Texture(this.webcamCanvas);\n    this.webcamTexture = webcamTexture;\n    webcamTexture.minFilter = THREE.LinearFilter;\n    webcamTexture.magFilter = THREE.LinearFilter;\n    this.shaderMaterial = new THREE.ShaderMaterial({\n      transparent: true,\n      uniforms: {\n        map: { value: webcamTexture },\n        keyColor: { value: [0.0, 1.0, 0.0] },\n        similarity: { value: 0.3 },\n        smoothness: { value: 0.0 }\n      },\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader\n    });\n  }\n\n  /**\n   * Returns THREE.ShaderMaterial that can be used for PlaneGeometry, Mesh, etc.\n   */\n  getShaderMaterial() {\n    return this.shaderMaterial;\n  }\n\n  /**\n   * Creates a plane to display webcam stream\n   */\n  createWebCamPlane(width = 5, height = 4): THREE.Mesh {\n    const geometry = new THREE.PlaneGeometry(width, height);\n    return new THREE.Mesh(geometry, this.shaderMaterial);\n  }\n\n  /**\n   * This should be called in renderer's animate method\n   */\n  animate() {\n    if (this.webcam.readyState === this.webcam.HAVE_ENOUGH_DATA) {\n      this.canvasCtx.drawImage(this.webcam, 0, 0, this.webcamCanvas.width, this.webcamCanvas.height);\n      this.webcamTexture.needsUpdate = true;\n    }\n  }\n}\n","import * as THREE from \"three\";\nimport { CSS2DObject } from \"three/examples/jsm/renderers/CSS2DRenderer\";\n\n/**\n * CommonUtils\n **/\nexport default class CommonUtils {\n  /**\n   * Checks full screen mode\n   */\n  static checkFullScreen(): Boolean | undefined {\n    const doc = document as any;\n    const isFull = doc.mozCancelFullScreen ||\n      (window as any).oRequestFullscreen ||\n      doc.webkitIsFullScreen ||\n      doc.msFullscreenEnabled;\n    return isFull;\n  }\n\n  /**\n   * Enters full screen mode\n   */\n  static fullScreen() {\n    const ele = document.documentElement as any;\n    const func =\n      ele.requestFullscreen ||\n      ele.mozRequestFullScreen ||\n      ele.webkitRequestFullscreen ||\n      ele.msRequestFullscreen;\n    func.call(ele);\n  }\n\n  /**\n   * Exits full screen mode\n   */\n  static exitFullscreen() {\n    const doc = document as any;\n    const func =\n      doc.exitFullScreen ||\n      doc.mozCancelFullScreen ||\n      doc.webkitExitFullscreen ||\n      doc.msExitFullscreen;\n    func.call(doc);\n  }\n\n  /**\n   * Displays a pointer marker in a period of time.\n   * @param duration display time in ms. 0/null/undefined means always display.\n   */\n  static displayPointMarker(scene: THREE.Scene, position: THREE.Vector3, duration = 1000, radius = 10): CSS2DObject {\n    const div = document.createElement(\"div\");\n    div.style.cssText = `display: block; width: ${radius}px; height: ${radius}px; border-radius: 50%; background: #505050; opacity: 0.2`;\n    const marker = new CSS2DObject(div);\n    marker.position.set(position.x, position.y, position.z);\n    scene.add(marker);\n    if (duration) {\n      setTimeout(() => {\n        scene.remove(marker);\n      }, duration);\n    }\n    return marker;\n  }\n}\n","function __getPointBaseLength() {\n  const testDiv:HTMLElement = document.createElement(\"div\"); // get ppi\n  testDiv.setAttribute(\"style\", \"height: 1in; visibility: hidden; position: absolute; margin: 0; padding: 0;\");\n  document.body.appendChild(testDiv);\n  const baseLen = testDiv.clientHeight;\n  const inchToMeter = 0.0254;\n  return inchToMeter / baseLen;\n}\n\nexport const unitConversionByMeter: { [key: string]: number } = {\n  file: 1, // hard code to be meters now. TODO: fix it later\n  m: 1,\n  mm: 0.001,\n  cm: 0.01,\n  ft: 0.3048,\n  in: 0.0254,\n  pt: __getPointBaseLength()\n};\n\nexport const unitLabel: { [key: string]: string } = {\n  file: \"m\",\n  m: \"m\",\n  mm: \"mm\",\n  cm: \"cm\",\n  ft: \"ft\",\n  in: \"in\",\n  pt: \"pt\"\n};\n\nconst _getSuffix = (power: number) => {\n  if (power === 2) {\n    return \"²\";\n  }\n  if (power === 3) {\n    return \"³\";\n  }\n  return \"\";\n};\n\nexport const getUnitStr = (unit: string, power: number = 1): string => {\n  return unitLabel[unit] + _getSuffix(power);\n};\n\n/**\n * Gets unit\n * value\n * sourceUnit\n * targetUnit\n */\ninterface valueWithUnit {\n  value: number,\n  unit: string\n}\nexport const getLengthValueByUnit = (value: number, sourceUnit: string, targetUnit: string, power: number = 1): valueWithUnit => {\n  if (targetUnit === null || targetUnit === undefined) {\n    targetUnit = sourceUnit;\n  }\n  if (targetUnit === sourceUnit) {\n    return {\n      value,\n      unit: getUnitStr(targetUnit)\n    };\n  } else {\n    const targetValue = value * Math.pow(unitConversionByMeter[sourceUnit] / unitConversionByMeter[targetUnit], power);\n    return {\n      value: targetValue,\n      unit: getUnitStr(targetUnit) + _getSuffix(power)\n    };\n  }\n};\n","import { decimalPrecisionRange } from \"@/components/projectSettingsPanel/ProjectSettingsDef\";\n\nexport const showPrecisionValue = (value: number, precistionType: number) => {\n  const str = value.toFixed(precistionType === decimalPrecisionRange[\"Precision from file\"] ? 2 : precistionType);\n  return str;\n};\n","import * as THREE from \"three\";\nimport { CSS2DObject } from \"three/examples/jsm/renderers/CSS2DRenderer\";\nimport { getUnitStr, getLengthValueByUnit } from \"@/core/utils/UnitConversionUtils\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { Settings as SettingsType, unitRange } from \"@/components/projectSettingsPanel/ProjectSettingsDef\";\nimport { showPrecisionValue } from \"@/core/utils/DecimalPrecisionUtils\";\n\nexport enum MeasureMode {\n  Distance = \"Distance\",\n  Area = \"Area\",\n  Angle = \"Angle\"\n}\n\n/**\n * Measure class\n */\nexport default class Measure {\n  // lineWidth is ignored for Chrome on Windows, which is a known issue:\n  // https://github.com/mrdoob/three.js/issues/269\n  static LINE_MATERIAL = new THREE.LineBasicMaterial({ color: 0xfff000, linewidth: 2, opacity: 0.8, transparent: true, side: THREE.DoubleSide, depthWrite: false, depthTest: false });\n  static MESH_MATERIAL = new THREE.MeshBasicMaterial({ color: 0x87cefa, transparent: true, opacity: 0.8, side: THREE.DoubleSide, depthWrite: false, depthTest: false });\n  static MAX_DISTANCE = 500; // when intersected object's distance is too far away, then ignore it\n  static OBJ_NAME = \"object_for_measure\";\n  static LABEL_NAME = \"label_for_measure\";\n\n  public isCompleted = false; // whether measure operation is completed or not\n  protected mode: MeasureMode;\n  protected renderer: THREE.WebGLRenderer;\n  protected scene: THREE.Scene;\n  protected camera: THREE.Camera;\n  protected controls: OrbitControls;\n  protected spriteMaterial?: THREE.SpriteMaterial;\n  protected raycaster?: THREE.Raycaster;\n  protected mouseMoved = false;\n  protected pointMarkers: THREE.Sprite[] = []; // used for measure distance and area\n  protected polyline?: THREE.Line; // the line user draws while measuring distance\n  protected faces?: THREE.Mesh; // the faces user draws while measuring area\n  protected curve?: THREE.Line; // the arc curve to indicate the angle in degree\n  protected tempPointMarker?: THREE.Sprite; // used to store temporary Points\n  protected tempLine?: THREE.Line; // used to store temporary line, which is useful for drawing line/area/angle as mouse moves\n  protected tempLabel?: CSS2DObject; // used to store temporary label as mouse moves\n  protected labels: CSS2DObject[] = []; // stores labels, so that we can clear them up when necessary\n  protected pointArray: THREE.Vector3[] = [];\n  protected lastClickTime?: number; // save the last click time, in order to detect double click event\n  protected settings: SettingsType;\n\n  constructor(renderer: THREE.WebGLRenderer, scene: THREE.Scene, camera: THREE.Camera, controls: OrbitControls, mode: MeasureMode = MeasureMode.Distance, settings: SettingsType) {\n    this.mode = mode;\n    this.renderer = renderer;\n    this.scene = scene;\n    this.camera = camera;\n    this.controls = controls;\n    this.settings = settings;\n  }\n\n  get canvas(): HTMLCanvasElement {\n    return this.renderer.domElement as HTMLCanvasElement;\n  }\n\n  /**\n   * Starts the measurement\n   */\n  open() {\n    // add mouse 'click' event, but do not trigger highlight for mouse drag event\n    // mouseup/mousedown/mousemove event is prevented by OrbitControls, let's use pointerup/pointerdown/pointermove\n    this.canvas.addEventListener(\"pointerdown\", this.mousedown);\n    this.canvas.addEventListener(\"pointermove\", this.mousemove);\n    this.canvas.addEventListener(\"pointerup\", this.mouseup);\n    this.canvas.addEventListener(\"dblclick\", this.dblclick);\n    window.addEventListener(\"keydown\", this.keydown);\n\n    this.pointArray = [];\n    this.raycaster = new THREE.Raycaster();\n\n    // polyline is required for measuring distance, area and angle\n    this.polyline = this.createLine();\n    this.scene.add(this.polyline);\n    if (this.mode === MeasureMode.Area) {\n      this.faces = this.createFaces();\n      this.scene.add(this.faces);\n    }\n    this.isCompleted = false;\n    this.renderer.domElement.style.cursor = \"crosshair\";\n  }\n\n  /**\n   * Ends the measurement\n   */\n  close() {\n    this.canvas.removeEventListener(\"pointerdown\", this.mousedown);\n    this.canvas.removeEventListener(\"pointermove\", this.mousemove);\n    this.canvas.removeEventListener(\"pointerup\", this.mouseup);\n    this.canvas.removeEventListener(\"dblclick\", this.dblclick);\n    window.removeEventListener(\"keydown\", this.keydown);\n\n    this.tempPointMarker && this.scene.remove(this.tempPointMarker);\n    this.tempLine && this.scene.remove(this.tempLine);\n    this.tempLabel && this.scene.remove(this.tempLabel);\n    this.pointMarkers.forEach(item => this.scene.remove(item));\n    this.polyline && this.scene.remove(this.polyline);\n    this.faces && this.scene.remove(this.faces);\n    this.curve && this.scene.remove(this.curve);\n    this.labels.forEach(item => this.scene.remove(item));\n    this.pointArray = [];\n    this.raycaster = undefined;\n    this.tempPointMarker = undefined;\n    this.tempLine = undefined;\n    this.tempLabel = undefined;\n    this.pointMarkers = [];\n    this.polyline = undefined;\n    this.labels = [];\n    this.renderer.domElement.style.cursor = \"\";\n  }\n\n  /**\n   * Initializes point marker material\n   */\n  initPointMarkerMaterial() {\n    const markerTexture = new THREE.TextureLoader().load(\"images/circle.png\");\n    this.spriteMaterial = new THREE.SpriteMaterial({\n      map: markerTexture,\n      depthTest: false,\n      depthWrite: false,\n      sizeAttenuation: false,\n      opacity: 0.8\n    });\n  }\n\n  /**\n   * Creates point marker\n   */\n  private createPointMarker(position?: THREE.Vector3): THREE.Sprite {\n    if (!this.spriteMaterial) {\n      this.initPointMarkerMaterial();\n    }\n    const p = position;\n    const scale = 0.012; // change marker's size here\n    const obj = new THREE.Sprite(this.spriteMaterial);\n    obj.scale.set(scale, scale, scale);\n    if (p) {\n      obj.position.set(p.x, p.y, p.z);\n    }\n    obj.name = Measure.OBJ_NAME;\n    return obj;\n  }\n\n  /**\n   * Creates THREE.Line\n   */\n  private createLine(material = Measure.LINE_MATERIAL): THREE.Line {\n    const geom = new THREE.BufferGeometry();\n    const obj = new THREE.Line(geom, material);\n    obj.frustumCulled = false; // Force to draw it. This fixes a bug that it disappear in some case\n    obj.name = Measure.OBJ_NAME;\n    return obj;\n  }\n\n  /**\n   * Creates THREE.Mesh\n   */\n  private createFaces() {\n    const geom = new THREE.BufferGeometry();\n    const obj = new THREE.Mesh(geom, Measure.MESH_MATERIAL);\n    // since we have to use BufferGeometry rather than Geometry, and we need to store points,\n    // let's store points into userData!\n    obj.userData.vertices = [];\n    obj.frustumCulled = false; // Force to draw it. This fixes a bug that it disappear in some case\n    obj.name = Measure.OBJ_NAME;\n    return obj;\n  }\n\n  /**\n   * Draw completed\n   */\n  complete() {\n    if (this.isCompleted) {\n      return; // avoid re-entry\n    }\n    let clearPoints = false;\n    let clearPolyline = false;\n    // for measure area, we need to make a close surface, then add area label\n    const count = this.pointArray.length;\n    if (this.mode === MeasureMode.Area && this.polyline) {\n      if (count > 2) {\n        const p0 = this.pointArray[0];\n        this.polyline.geometry.setFromPoints([...this.pointArray, p0]); // close the line as a loop\n        const area = this.calculateArea(this.pointArray);\n        const label = `${showPrecisionValue(getLengthValueByUnit(area, unitRange[\"Unit from file\"], this.settings.unit, 2).value, this.settings.decimalPrecision)} ${this.getUnitString()}`;\n        const p = this.getBarycenter(this.pointArray);\n        const labelObj = this.createLabel(label);\n        labelObj.position.set(p.x, p.y, p.z);\n        labelObj.element.innerHTML = label;\n        this.scene.add(labelObj);\n        this.labels.push(labelObj);\n      } else {\n        clearPoints = true;\n        clearPolyline = true;\n      }\n    }\n    if (this.mode === MeasureMode.Distance) {\n      if (count < 2) {\n        clearPoints = true;\n      }\n    }\n    if (this.mode === MeasureMode.Angle && this.polyline) {\n      if (count >= 3) {\n        const p0 = this.pointArray[0];\n        const p1 = this.pointArray[1];\n        const p2 = this.pointArray[2];\n        const dir0 = new THREE.Vector3(p0.x - p1.x, p0.y - p1.y, p0.z - p1.z).normalize();\n        const dir1 = this.getAngleBisector(p0, p1, p2);\n        const dir2 = new THREE.Vector3(p2.x - p1.x, p2.y - p1.y, p2.z - p1.z).normalize();\n        const angle = this.calculateAngle(p0, p1, p2);\n        const label = `${showPrecisionValue(angle, this.settings.decimalPrecision)} ${this.getUnitString()}`;\n        const distance = Math.min(p0.distanceTo(p1), p2.distanceTo(p1));\n        let d = distance * 0.3; // distance from label to p1\n        let p = p1.clone().add(new THREE.Vector3(dir1.x * d, dir1.y * d, dir1.z * d)); // label's position\n        const labelObj = this.createLabel(label);\n        labelObj.position.set(p.x, p.y, p.z);\n        labelObj.element.innerHTML = label;\n        this.scene.add(labelObj);\n        this.labels.push(labelObj);\n\n        d = distance * 0.2; // distance from arc to p1\n        p = p1.clone().add(new THREE.Vector3(dir1.x * d, dir1.y * d, dir1.z * d)); // arc's middle position\n        const arcP0 = p1.clone().add(new THREE.Vector3(dir0.x * d, dir0.y * d, dir0.z * d));\n        const arcP2 = p1.clone().add(new THREE.Vector3(dir2.x * d, dir2.y * d, dir2.z * d));\n        this.curve = this.createCurve(arcP0, p, arcP2);\n        this.scene.add(this.curve);\n      } else {\n        clearPoints = true;\n        clearPolyline = true;\n      }\n    }\n    // invalid case, clear useless objects\n    if (clearPoints) {\n      this.pointMarkers.forEach(item => this.scene.remove(item));\n      this.pointMarkers = [];\n    }\n    if (clearPolyline && this.polyline) {\n      this.scene.remove(this.polyline);\n      this.polyline = undefined;\n    }\n    this.isCompleted = true;\n    this.renderer.domElement.style.cursor = \"\";\n    this.tempPointMarker && this.scene.remove(this.tempPointMarker);\n    this.tempLine && this.scene.remove(this.tempLine);\n    this.tempLabel && this.scene.remove(this.tempLabel);\n  }\n\n  /**\n   * Draw canceled\n   */\n  cancel() {\n    this.close();\n  }\n\n  mousedown = (e: MouseEvent) => {\n    this.mouseMoved = false;\n  };\n\n  mousemove = (e: MouseEvent) => {\n    this.mouseMoved = true;\n\n    const point = this.getClosestIntersection(e);\n    if (!point) {\n      return;\n    }\n\n    // draw the temp point as mouse moves\n    if (this.tempPointMarker) {\n      this.tempPointMarker.position.set(point.x, point.y, point.z);\n    } else {\n      this.tempPointMarker = this.createPointMarker(point);\n      this.scene.add(this.tempPointMarker);\n    }\n\n    // draw the temp line as mouse moves\n    if (this.pointArray.length > 0) {\n      const p0 = this.pointArray[this.pointArray.length - 1]; // get last point\n      const line = this.tempLine || this.createLine();\n      // line.computeLineDistances() // LineDashedMaterial requires to call this\n      const geom = line.geometry;\n      const startPoint = this.pointArray[0];\n      const lastPoint = this.pointArray[this.pointArray.length - 1];\n      if (this.mode === MeasureMode.Area) {\n        // draw two line segments for area\n        geom.setFromPoints([lastPoint, point, startPoint]); // close the line as a loop\n      } else {\n        geom.setFromPoints([lastPoint, point]);\n      }\n      if (this.mode === MeasureMode.Distance) {\n        const dist = p0.distanceTo(point);\n        const label = `${showPrecisionValue(getLengthValueByUnit(dist, unitRange[\"Unit from file\"], this.settings.unit).value, this.settings.decimalPrecision)} ${this.getUnitString()}`; // hard code unit to 'm' here\n        const position = new THREE.Vector3((point.x + p0.x) / 2, (point.y + p0.y) / 2, (point.z + p0.z) / 2);\n        this.addOrUpdateTempLabel(label, position);\n      }\n      if (!this.tempLine) {\n        this.scene.add(line); // just add to scene once\n        this.tempLine = line;\n      }\n    }\n  };\n\n  mouseup = (e: MouseEvent) => {\n    // if mouseMoved is ture, then it is probably moving, instead of clicking\n    if (!this.mouseMoved) {\n      this.onMouseClicked(e);\n    }\n  };\n\n  dblclick = (e: MouseEvent) => {\n    // double click means to complete the draw operation\n    this.complete();\n  };\n\n  onMouseClicked = (e: MouseEvent) => {\n    if (!this.raycaster || !this.camera || !this.scene || this.isCompleted) {\n      return;\n    }\n\n    const point = this.getClosestIntersection(e);\n    if (!point) {\n      return;\n    }\n\n    // double click triggers two click events, we need to avoid the second click here\n    const now = Date.now();\n    if (this.lastClickTime && (now - this.lastClickTime < 500)) {\n      return;\n    }\n    this.lastClickTime = now;\n\n    this.pointArray.push(point);\n    const count = this.pointArray.length;\n    const marker = this.createPointMarker(point);\n    this.pointMarkers.push(marker);\n    this.scene.add(marker);\n    if (this.polyline) {\n      this.polyline.geometry.setFromPoints(this.pointArray);\n      if (this.tempLabel && count > 1) {\n        const p0 = this.pointArray[count - 2];\n        this.tempLabel.position.set((p0.x + point.x) / 2, (p0.y + point.y) / 2, (p0.z + point.z) / 2);\n        this.scene.add(this.tempLabel);\n        this.labels.push(this.tempLabel);\n        this.tempLabel = undefined;\n      }\n      // this.polyline.computeLineDistances() // LineDashedMaterial requires to call this\n    }\n    if (this.mode === MeasureMode.Area && this.faces) {\n      const geom = this.faces.geometry as THREE.BufferGeometry;\n      const vertices = this.faces.userData.vertices;\n      vertices.push(point);\n      geom.setFromPoints(vertices);\n      const len = vertices.length;\n      if (len > 2) {\n        const indexArray = [];\n        for (let i = 1; i < len - 1; ++i) {\n          indexArray.push(0, i, i + 1); // add one triangle\n        }\n        geom.setIndex(indexArray);\n        geom.computeVertexNormals();\n      }\n    }\n    if (this.mode === MeasureMode.Angle && this.pointArray.length >= 3) {\n      this.complete();\n    }\n  };\n\n  keydown = (e: KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      this.complete();\n    } else if (e.key === \"Escape\") {\n      this.cancel();\n    }\n  };\n\n  /**\n   * The the closest intersection\n   * @param e\n   */\n  getClosestIntersection = (e: MouseEvent) => {\n    if (!this.raycaster || !this.camera || !this.scene || this.isCompleted) {\n      return;\n    }\n    const x = e.clientX;\n    const y = e.clientY;\n    const mouse = new THREE.Vector2();\n    mouse.x = (x / this.renderer.domElement.clientWidth) * 2 - 1; // must use clientWidth rather than width here!\n    mouse.y = -(y / this.renderer.domElement.clientHeight) * 2 + 1;\n\n    this.raycaster.setFromCamera(mouse, this.camera);\n    let intersects = this.raycaster.intersectObject(this.scene, true) || [];\n    if (intersects && intersects.length > 0) {\n      // filter out the objects for measurement\n      intersects = intersects.filter(item => {\n        return item.object.name !== Measure.OBJ_NAME && item.object.visible;\n      });\n      if (intersects.length > 0 && intersects[0].distance < Measure.MAX_DISTANCE) {\n        return intersects[0].point;\n      }\n    }\n    return null;\n  };\n\n  /**\n   * Adds or update temp label and position\n   */\n  addOrUpdateTempLabel(label: string, position: THREE.Vector3) {\n    if (!this.tempLabel) {\n      this.tempLabel = this.createLabel(label);\n      this.scene.add(this.tempLabel);\n    }\n    this.tempLabel.position.set(position.x, position.y, position.z);\n    this.tempLabel.element.innerHTML = label;\n  }\n\n  /**\n   * Creates label\n   */\n  createLabel(text: string): CSS2DObject {\n    const div = document.createElement(\"div\");\n    // div.className = 'annotationLabel'\n    div.innerHTML = text;\n    div.style.padding = \"3px 6px\";\n    div.style.color = \"#fff\";\n    div.style.fontSize = \"12px\";\n    div.style.position = \"absolute\";\n    div.style.backgroundColor = \"rgba(25, 25, 25, 0.3)\";\n    div.style.borderRadius = \"12px\";\n    // div.style.width = '200px'\n    // div.style.height = '100px'\n    div.style.top = \"0px\";\n    div.style.left = \"0px\";\n    // div.style.pointerEvents = 'none' // avoid html element to affect mouse event of the scene\n    const obj = new CSS2DObject(div);\n    obj.name = Measure.LABEL_NAME;\n    return obj;\n  }\n\n  /**\n   * Creates the arc curve to indicate the angle in degree\n   */\n  createCurve(p0: THREE.Vector3, p1: THREE.Vector3, p2: THREE.Vector3) {\n    const curve = new THREE.QuadraticBezierCurve3(p0, p1, p2);\n    const points = curve.getPoints(4); // get points\n    const geometry = new THREE.BufferGeometry().setFromPoints(points);\n    const obj = new THREE.Line(geometry, Measure.LINE_MATERIAL);\n    obj.name = Measure.OBJ_NAME;\n    return obj;\n  }\n\n  /**\n   * Calculates area\n   * TODO: for concave polygon, the value doesn't right, need to fix it\n   * @param points\n   */\n  calculateArea(points: THREE.Vector3[]) {\n    let area = 0;\n    for (let i = 0, j = 1, k = 2; k < points.length; j++, k++) {\n      const a = points[i].distanceTo(points[j]);\n      const b = points[j].distanceTo(points[k]);\n      const c = points[k].distanceTo(points[i]);\n      const p = (a + b + c) / 2;\n      area += Math.sqrt(p * (p - a) * (p - b) * (p - c));\n    }\n    return area;\n  }\n\n  /**\n   * Gets included angle of two lines in degree\n   */\n  calculateAngle(startPoint: THREE.Vector3, middlePoint: THREE.Vector3, endPoint: THREE.Vector3) {\n    const p0 = startPoint;\n    const p1 = middlePoint;\n    const p2 = endPoint;\n    const dir0 = new THREE.Vector3(p0.x - p1.x, p0.y - p1.y, p0.z - p1.z);\n    const dir1 = new THREE.Vector3(p2.x - p1.x, p2.y - p1.y, p2.z - p1.z);\n    const angle = dir0.angleTo(dir1);\n    return angle * 180 / Math.PI; // convert to degree\n  }\n\n  /**\n   * Gets angle bisector of two lines\n   */\n  getAngleBisector(startPoint: THREE.Vector3, middlePoint: THREE.Vector3, endPoint: THREE.Vector3): THREE.Vector3 {\n    const p0 = startPoint;\n    const p1 = middlePoint;\n    const p2 = endPoint;\n    const dir0 = new THREE.Vector3(p0.x - p1.x, p0.y - p1.y, p0.z - p1.z).normalize();\n    const dir2 = new THREE.Vector3(p2.x - p1.x, p2.y - p1.y, p2.z - p1.z).normalize();\n    return new THREE.Vector3(dir0.x + dir2.x, dir0.y + dir2.y, dir0.z + dir2.z).normalize(); // the middle direction between dir0 and dir2\n  }\n\n  /**\n   * Get the barycenter of points\n   */\n  getBarycenter(points: THREE.Vector3[]): THREE.Vector3 {\n    const l = points.length;\n    let x = 0;\n    let y = 0;\n    let z = 0;\n    points.forEach(p => { x += p.x; y += p.y; z += p.z });\n    return new THREE.Vector3(x / l, y / l, z / l);\n  }\n\n  /**\n   * Gets unit string for distance, area or angle\n   */\n  getUnitString() {\n    if (this.mode === MeasureMode.Distance) return getUnitStr(this.settings.unit);\n    if (this.mode === MeasureMode.Area) return `${getUnitStr(this.settings.unit, 2)}`;\n    if (this.mode === MeasureMode.Angle) return \"°\";\n    return \"\";\n  }\n\n  /**\n   * Converts a number to a string with proper fraction digits\n   */\n  numberToString(num: number) {\n    if (num < 0.0001) {\n      return num.toString();\n    }\n    let fractionDigits = 2;\n    if (num < 0.01) {\n      fractionDigits = 4;\n    } else if (num < 0.1) {\n      fractionDigits = 3;\n    }\n    return num.toFixed(fractionDigits);\n  }\n}\n","\nimport * as THREE from \"three\";\n\nexport default class GroundUtils {\n  static GROUND_GRID_NAME = \"GROUND_GRID\";\n  static GRASS_GROUND_NAME = \"GRASS_GROUND\";\n  static DEFAULT_WIDTH = 1000;\n  static DEFAULT_HEIGHT = 1000;\n  static DEFAULT_WIDTH_SEGS = 100; // number of segments\n  static DEFAULT_HEIGHT_SETS = 100;\n  static DEFAULT_MAT_PARAMS = { color: 0xc3c3c3, transparent: true, opacity: 0.5, wireframeLinewidth: 0.5 };\n\n  /**\n   * Creates ground grid\n   */\n  static createGroundGrid(size?: number, divisions?: number, groundCenter?: THREE.Vector3): THREE.GridHelper {\n    // see code from: https://threejs.org/examples/#webgl_geometry_spline_editor\n    size = size || this.DEFAULT_WIDTH;\n    divisions = divisions || this.DEFAULT_WIDTH_SEGS;\n\n    const helper = new THREE.GridHelper(size, divisions);\n    if (groundCenter) {\n      helper.position.set(groundCenter.x, groundCenter.y, groundCenter.z);\n    } else {\n      helper.position.y = 0;\n    }\n    const mat = helper.material;\n    if (!Array.isArray(mat)) {\n      mat.opacity = this.DEFAULT_MAT_PARAMS.opacity;\n      mat.transparent = this.DEFAULT_MAT_PARAMS.transparent;\n    }\n    helper.name = this.GROUND_GRID_NAME;\n    helper.userData.selectable = false;\n    helper.matrixAutoUpdate = false;\n    helper.updateMatrix();\n    return helper;\n  }\n\n  static async createGrassGround(texture?: string, width?: number, height?: number, repeatX?: number, repeatY?: number): Promise<THREE.Mesh> {\n    width = width || this.DEFAULT_WIDTH;\n    height = height || this.DEFAULT_HEIGHT;\n\n    return new Promise((resolve) => {\n      // see code from: https://threejs.org/examples/#webgl_animation_cloth\n      const loader = new THREE.TextureLoader();\n      loader.load(texture || \"images/terrain/grass.jpg\", (groundTexture) => {\n        groundTexture.wrapS = groundTexture.wrapT = THREE.RepeatWrapping;\n        groundTexture.repeat.set(repeatX || this.DEFAULT_WIDTH_SEGS / 5, repeatY || this.DEFAULT_HEIGHT_SETS / 5);\n        groundTexture.anisotropy = 16;\n        groundTexture.encoding = THREE.sRGBEncoding;\n\n        const groundMaterial = new THREE.MeshLambertMaterial({ map: groundTexture });\n        groundMaterial.side = THREE.FrontSide;\n\n        const mesh = new THREE.Mesh(new THREE.PlaneGeometry(width, height), groundMaterial);\n        mesh.rotation.x = -Math.PI / 2;\n        mesh.position.y = 0;\n        mesh.receiveShadow = true;\n        mesh.name = this.GRASS_GROUND_NAME;\n        mesh.userData.selectable = false;\n        mesh.matrixAutoUpdate = false;\n        mesh.updateMatrix();\n        return resolve(mesh);\n      });\n    });\n  }\n}\n","import * as THREE from \"three\";\nimport SceneUtils from \"./SceneUtils\";\n\n/**\n * Creates a sky box with light blue sky.\n * See code here:\n * https://github.com/mrdoob/three.js/blob/master/examples/webgl_materials_lightmap.html\n */\nexport default class SkyboxUtils {\n  static NAME = \"SKYBOX\";\n  static MIN_SKY_RADIUS = 4000;\n  static MAX_SKY_RADIUS = 20000;\n  static vertexShader = `\n    varying vec3 vWorldPosition;\n    void main() {\n      vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n      vWorldPosition = worldPosition.xyz;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }`;\n\n  static fragmentShader = `\n    uniform vec3 topColor;\n    uniform vec3 skylineColor;\n    uniform vec3 bottomColor;\n    uniform float offset;\n    uniform float exponent;\n    uniform vec3 skyCenter;\n    varying vec3 vWorldPosition;\n    void main() {\n      vec3 position = vec3(vWorldPosition.x - skyCenter.x, vWorldPosition.y - skyCenter.y, vWorldPosition.z - skyCenter.z);\n      float h = normalize( position + offset ).y;\n      vec3 color;\n      if (h > 0.0) {\n        color = mix( skylineColor, topColor, max( pow( max( h, 0.0 ), exponent ), 0.0 ) );\n      } else {\n        color = mix( skylineColor, bottomColor, max( pow( max( -h, 0.0 ), exponent ), 0.0 ) );\n      }\n      gl_FragColor = vec4(color , 1.0 );\n    }`;\n\n  /**\n   * Creates sky\n   * @param radius\n   * @param widthSegments\n   * @param heightSegments\n   */\n  public static createSkyOfGradientRamp(radius: number = 4000, widthSegments: number = 32, heightSegments: number = 15, skyCenter = new THREE.Vector3()): THREE.Mesh {\n    const uniforms = {\n      topColor: { value: new THREE.Color(0x86B6F5) }, // 0xaabbff\n      skylineColor: { value: new THREE.Color(0xffffff) },\n      bottomColor: { value: new THREE.Color(0x999999) }, // 0x6A6A6A\n      offset: { value: 400 },\n      exponent: { value: 0.9 },\n      skyCenter: { value: skyCenter || new THREE.Vector3() }\n    };\n    // note that the camera's far distance should bigger than the radius,\n    // otherwise, you cannot see the sky\n    const skyGeo = new THREE.SphereGeometry(radius, widthSegments, heightSegments);\n    const skyMat = new THREE.ShaderMaterial({\n      uniforms: uniforms,\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader,\n      side: THREE.BackSide\n    });\n\n    const sky = new THREE.Mesh(skyGeo, skyMat);\n    sky.matrixAutoUpdate = false; // for better performance\n    sky.name = this.NAME;\n    sky.userData.selectable = false;\n    return sky;\n  }\n\n  /**\n   * Creates sky according to objects in the scene. Need to do this because\n   * objects' size and position may be large or out of sky box.\n   */\n  public static createSkyOfGradientRampByObjectsInScene(scene: THREE.Scene, objectUuids: string[]): THREE.Mesh {\n    if (!scene) {\n      return new THREE.Mesh();\n    }\n    const bbox = SceneUtils.getObjectsBoundingBox(scene, objectUuids);\n    return SkyboxUtils.createSkyOfGradientRampByBoundingBox(bbox);\n  }\n\n  /**\n   * Create sky according to a bounding box\n   */\n  public static createSkyOfGradientRampByBoundingBox(bbox: THREE.Box3) {\n    const distance = (bbox.max.x - bbox.min.x) + (bbox.max.y - bbox.min.y) + (bbox.max.z - bbox.min.z);\n    let radius = distance * 2; // make sky 10 times larger than objects' size\n\n    // make sky radium in a reasonable range, it looks bad if too small, and won't be visible if too far.\n    if (radius < SkyboxUtils.MIN_SKY_RADIUS) {\n      radius = SkyboxUtils.MIN_SKY_RADIUS;\n    } else if (radius > SkyboxUtils.MAX_SKY_RADIUS) {\n      radius = SkyboxUtils.MAX_SKY_RADIUS;\n    }\n    const center = new THREE.Vector3();\n    bbox.getCenter(center);\n\n    const sky = SkyboxUtils.createSkyOfGradientRamp(radius, undefined, undefined, center);\n    // make sky's center, at the center of object (and set y to 0)\n    sky.position.set(center.x, 0, center.z);\n    return sky;\n  }\n\n  /**\n   * Creates skybox by 6 pictures. The texture should be assigned to scene.background.\n   * Currently, there is only a 'cloudy' texture.\n   */\n  public static async createSkyFromTextures(subFolder: \"cloudy\" = \"cloudy\"): Promise<THREE.CubeTexture> {\n    const loader = new THREE.CubeTextureLoader();\n    loader.setPath(`images/skybox/${subFolder}/`);\n    // six pictures in order of: x, -x, y, -y, z, -z, aka, right, left, top, bottom, front, back\n    const pictures = [\"right.jpg\", \"left.jpg\", \"top.jpg\", \"bottom.jpg\", \"front.jpg\", \"back.jpg\"];\n    return new Promise<THREE.CubeTexture>((resolve, reject) => {\n      loader.load(pictures, (t: THREE.CubeTexture) => resolve(t));\n    });\n  }\n}\n","import * as THREE from \"three\";\nimport * as dat from \"dat.gui\";\nimport { BooleanMessageData, MessageId } from \"../postmate/Message\";\nimport { MeasureMode } from \"../measure/Measure\";\nimport { PostmateManager } from \"../postmate/PostmateManager\";\nimport Exploder from \"../exploder/Exploder\";\nimport GroundUtils from \"../utils/GroundUtils\";\nimport SceneUtils from \"../utils/SceneUtils\";\nimport SkyboxUtils from \"../utils/SkyboxUtils\";\nimport store, { Types } from \"@/store/index\";\nimport Viewer3D from \"../Viewer3D\";\nimport Viewer3DUtils from \"../utils/Viewer3DUtils\";\nconst screenfull = require(\"screenfull\");\n\nexport default class DatGuiHelper {\n  viewer: Viewer3D | undefined;\n  gui?: dat.GUI;\n  exploderDict?: { [objId: number]: Exploder } = {};\n  readonly postmate = PostmateManager.instance();\n\n  /**\n   *\n   * @param viewer pass in the Viewer3D, so we can reference its data members\n   */\n  constructor(viewer: Viewer3D) {\n    this.viewer = viewer;\n    this.init();\n    this.initPostmate();\n  }\n\n  /**\n   * Defined all controls here, which will be displyed in dat.GUI\n   * Color should follow these formats:\n   * '#ffffff', [0, 0, 0], [0, 0, 0, 0.5], { h: 100, s: 0.9, v: 0.3 }\n   */\n  readonly controls = {\n    // Common settings\n    showGroundGrid: false,\n    showGrassGround: false,\n    skyMode: [\"None\", \"Gradient ramp\", \"Cloudy\"],\n    homeView: () => console.log(\"[DGH] Go to home view\"),\n    views: [\"Top\", \"Bottom\", \"Front\", \"Back\", \"Left\", \"Right\"],\n    OrthographicCamera: false,\n    // viewpoints: false,\n    // annotations: false,\n    takeSnapshot: () => console.log(\"[DGH] Taking snapshot...\"),\n    fullScreen: () => console.log(\"[DGH] Full screen...\"),\n    webcam: false,\n    uploadFile: () => console.log(\"[DGH] Upload file...\"),\n\n    // model operations\n    // showLayerManager: false,\n    showBimTree: false,\n    // showPropertyPanel: false,\n    transparentMode: false,\n    // explodeMode: ['No explode', 'Explode', 'Explode Up'], // hide it beause it doesn't work well yet!\n    sectionMode: [\"No section\", \"Box section\", \"Plane section\"],\n    measure: [\"No measure\", \"Distance\", \"Area\", \"Angle\"],\n    // filterFloor: ['No filter', '-2F', '-1F', '1F', '2F', '3F', '4F', '5F', '6F', '7F', '8F', '9F', '10F', '11F', '12F', '13F', '14F', '15F', '16F', '17F', '18F', '19F', '20F'],\n\n    // Ambient Light (环境光)\n    alVisible: true,\n    alColor: \"#cccccc\",\n    alIntensity: 1,\n    alCastShadow: true, // 开启阴影\n\n    // Directinal Light (平行光)\n    dlVisible: true,\n    dlColor: \"#dddddd\",\n    dlIntensity: 2,\n    dlCastShadow: true,\n\n    // Hemisphere Light (半球光源)\n    hlVisible: true,\n    hlIntensity: 1,\n    hlColor: [255, 255, 255, 0.6], // sky color\n    hlGroundColor: [200, 255, 200, 0.6],\n\n    // Fog\n    fogEnabled: false,\n    fogColor: 0xdddddd,\n    fogNearDistance: 1,\n    fogFarDistance: 1000,\n\n    // Composer\n    composerEnabled: false,\n    renderPassEnabled: false,\n    fxaaEnabled: false,\n    saoEnabled: false,\n    ssaoEnabled: false,\n    outlineEnabled: false,\n    ssaaEnabled: false,\n    bloomEnabled: false,\n    unrealBloomEnabled: false\n  };\n\n  /**\n   * Init dat.GUI\n   */\n  init() {\n    if (!this.viewer || !this.viewer.renderer || !this.viewer.scene) {\n      throw new Error(\"Need to initialize renderer, scene first!\");\n    }\n    const viewer = this.viewer; // the name doesn't good, but I cannot find a better one!\n    const scene = this.viewer.scene;\n    const controls = this.controls;\n    this.gui = new dat.GUI({ name: \"controls\", autoPlace: true, width: 300, closed: true });\n    // uncomment it if we want to save values into localStorage\n    // gui.remember(controls)\n    // this.gui.close() // collapse the panel by default\n    this.gui.domElement.style.opacity = \"0.6\";\n\n    // Common settings\n    const sf = this.gui.addFolder(\"Common settings\");\n    sf.add(controls, \"showGroundGrid\").name(\"Show ground grid\").onChange((e: boolean) => {\n      if (viewer.groundGrid) {\n        viewer.groundGrid.visible = e;\n      } else if (e) {\n        viewer.groundGrid = GroundUtils.createGroundGrid();\n        scene.add(viewer.groundGrid);\n        viewer.enableRender();\n      }\n      viewer.enableRender();\n    });\n    sf.add(controls, \"showGrassGround\").name(\"Show grass ground\").onChange((e: boolean) => {\n      if (viewer.grassGround) {\n        viewer.grassGround.visible = e;\n      } else if (e) {\n        (async() => {\n          viewer.grassGround = await GroundUtils.createGrassGround();\n          scene.add(viewer.grassGround);\n          viewer.enableRender();\n        })();\n      }\n      viewer.enableRender();\n    });\n    const skyModeController = sf.add(controls, \"skyMode\", controls.skyMode).name(\"Sky mode\");\n    skyModeController.onChange((e: string) => {\n      if (viewer.skyOfGradientRamp) {\n        viewer.skyOfGradientRamp.visible = (e === \"Gradient ramp\");\n      }\n      if (e === \"Gradient ramp\") {\n        if (!viewer.skyOfGradientRamp) {\n          viewer.skyOfGradientRamp = SkyboxUtils.createSkyOfGradientRamp();\n          scene.add(viewer.skyOfGradientRamp);\n        }\n        viewer.skyOfGradientRamp.visible = true;\n      } else if (e === \"Cloudy\") {\n        SkyboxUtils.createSkyFromTextures(\"cloudy\").then(texture => {\n          scene.background = texture;\n        });\n      } else {\n        scene.background = viewer.sceneBackgroundColor;\n      }\n      viewer.enableRender();\n    });\n    skyModeController.setValue(\"Gradient ramp\");\n    sf.add(controls, \"homeView\").name(\"Go to home view\").onChange(() => {\n      viewer.goToHomeView();\n    });\n    sf.add(controls, \"views\", controls.views).name(\"Views\").onChange((e: string) => {\n      const eye = new THREE.Vector3();\n      const look = new THREE.Vector3();\n      Viewer3DUtils.getCameraPositionByView(scene, e, eye, look);\n      viewer.flyTo(eye, look);\n    });\n    // const viewpointsController = sf.add(controls, \"viewpoints\", controls.viewpoints).name(\"Viewpoints\");\n    // viewpointsController.onChange((e: boolean) => {\n    //   store.commit(Types.MUTATION_SHOW_VIEWPOINTS, e);\n    // });\n    // // when panel is closed/opened itself, update DatGui here\n    // store.watch(\n    //   (state, getters) => getters.getShowViewpoints,\n    //   (visible: boolean) => {\n    //     viewpointsController.setValue(visible);\n    //   }\n    // );\n    sf.add(controls, \"OrthographicCamera\").name(\"Orth Camera\").onChange((e: boolean) => {\n      viewer.setToOrthographicCamera(e);\n    });\n    // const annotationsController = sf.add(controls, \"annotations\", controls.annotations).name(\"Annotations\");\n    // annotationsController.onChange((e: boolean) => {\n    //   store.commit(Types.MUTATION_SHOW_ANNOTATIONS, e);\n    // });\n    // // when panel is closed/opened itself, update DatGui here\n    // store.watch(\n    //   (state, getters) => getters.getShowAnnotations,\n    //   (visible: boolean) => {\n    //     annotationsController.setValue(visible);\n    //   }\n    // );\n    sf.add(controls, \"takeSnapshot\").name(\"Take snapshot\").onChange(() => {\n      store.commit(Types.MUTATION_SHOW_SNAPSHOT_PANEL, true);\n    });\n    sf.add(controls, \"fullScreen\").name(\"Full screen\").onChange(() => {\n      if (screenfull && screenfull.isEnabled) {\n        screenfull.request();\n      }\n      viewer.enableRender();\n    });\n    // Since it is a demo, turn it off for now\n    // sf.add(controls, 'webcam', controls.webcam).name('Turn on WebCam').onChange((e: boolean) => {\n    //   e ? viewer.enableWebCam() : viewer.disableWebCam()\n    // })\n    sf.add(controls, \"uploadFile\").name(\"Upload file\").onChange(() => {\n      (document as any).getElementById(\"uploadModelFile\").click();\n    });\n\n    // Model operations\n    const mf = this.gui.addFolder(\"Model operations\");\n    // const showLayerManagerController = mf.add(controls, 'showLayerManager', controls.showLayerManager).name('Layer Manager')\n    // showLayerManagerController.onChange((e: boolean) => {\n    //   store.commit(Types.MUTATION_SHOW_LAYER_MANAGER, e)\n    // })\n    // // when panel is closed/opened itself, update DatGui here\n    // store.watch(\n    //   (state, getters) => getters.getShowLayerManager,\n    //   (visible: boolean) => {\n    //     showLayerManagerController.setValue(visible)\n    //   }\n    // )\n    const showBimTreeController = mf.add(controls, \"showBimTree\", controls.showBimTree).name(\"Show BimTree\");\n    showBimTreeController.onChange((e: boolean) => {\n      store.commit(Types.MUTATION_SHOW_BIM_TREE, e);\n    });\n    // when panel is closed/opened itself, update DatGui here\n    store.watch(\n      (state, getters) => getters.getShowBimTree,\n      (visible: boolean) => {\n        showBimTreeController.setValue(visible);\n      }\n    );\n    // const showPropertyPanel = mf.add(controls, \"showPropertyPanel\", controls.showPropertyPanel).name(\"Show Property Panel\");\n    // showPropertyPanel.onChange((e: boolean) => {\n    //   store.commit(Types.MUTATION_SHOW_PROPERTY_PANEL, e);\n    // });\n    // // when panel is closed/opened itself, update DatGui here\n    // store.watch(\n    //   (state, getters) => getters.getShowPropertyPanel,\n    //   (visible: boolean) => {\n    //     showPropertyPanel.setValue(visible);\n    //   }\n    // );\n    mf.add(controls, \"transparentMode\", controls.transparentMode).name(\"Transparent mode\").onChange((e: boolean) => {\n      viewer.addOrRemoveObjectOpacity(e);\n      viewer.enableRender();\n    });\n    // mf.add(controls, 'explodeMode', controls.explodeMode).name('Explode mode').onChange((e: string) => {\n    //   if (e === 'No explode') {\n    //     this.setExplodeMode(false)\n    //   } else if (e === 'Explode') {\n    //     this.setExplodeMode(true)\n    //   } else if (e === 'Explode Up') {\n    //     this.setExplodeMode(true, true)\n    //   }\n    //   viewer.enableRender()\n    // })\n    mf.add(controls, \"sectionMode\", controls.sectionMode).name(\"Section mode\").onChange((e: string) => {\n      if (e === \"No section\") {\n        viewer.disableSection();\n      } else if (e === \"Box section\") {\n        viewer.enableSection(\"ObjectsBoxSection\");\n      } else if (e === \"Plane section\") {\n        viewer.enableSection(\"PlaneSection\");\n      }\n      viewer.enableRender();\n    });\n    mf.add(controls, \"measure\", controls.measure).name(\"Measure\").onChange((e: string) => {\n      if (!viewer.renderer) {\n        return;\n      }\n      if (e === \"No measure\") {\n        viewer.disableMeasure();\n      } else if (e === \"Distance\") {\n        viewer.enableMeasure(MeasureMode.Distance);\n      } else if (e === \"Area\") {\n        viewer.enableMeasure(MeasureMode.Area);\n      } else if (e === \"Angle\") {\n        viewer.enableMeasure(MeasureMode.Angle);\n      }\n      viewer.enableRender();\n    });\n    // mf.add(controls, 'filterFloor', controls.filterFloor).name('Filter by floor').onChange((e: string) => {\n    //   if (e === 'No filter') {\n    //     e = '' // pass in nothing, so it clears the filter\n    //   }\n    //   this.filterFloor(e)\n    //   viewer.enableRender()\n    // })\n\n    // Ambient light\n    const al = this.viewer.ambientLight;\n    const alf = this.gui.addFolder(\"Ambient light\");\n    alf.add(controls, \"alVisible\", controls.alVisible).name(\"visible\").onChange((e: boolean) => {\n      // assume the light is added to scene already\n      al && (al.visible = e);\n      viewer.enableRender();\n    });\n    alf.addColor(controls, \"alColor\").name(\"color\").onChange((e: string) => {\n      al && (al.color = new THREE.Color(e));\n      viewer.enableRender();\n    });\n    alf.add(controls, \"alIntensity\", 0, 5).name(\"intensity\").onChange((e: number) => {\n      al && (al.intensity = e);\n      viewer.enableRender();\n    });\n    alf.add(controls, \"alCastShadow\").name(\"castShadow\").onChange((e: boolean) => {\n      al && (al.castShadow = e);\n      viewer.enableRender();\n    });\n\n    // Directional light\n    const dl = this.viewer.directionalLight;\n    const dlf = this.gui.addFolder(\"Directional light\");\n    dlf.add(controls, \"dlVisible\", controls.dlVisible).name(\"visible\").onChange((e: boolean) => {\n      // assume the light is added to scene already\n      dl && (dl.visible = e);\n      viewer.enableRender();\n    });\n    dlf.addColor(controls, \"dlColor\").name(\"color\").onChange((e: string) => {\n      dl && (dl.color = new THREE.Color(e));\n      viewer.enableRender();\n    });\n    dlf.add(controls, \"dlIntensity\", 0, 5).name(\"intensity\").onChange((e: number) => {\n      dl && (dl.intensity = e);\n      viewer.enableRender();\n    });\n    dlf.add(controls, \"dlCastShadow\").name(\"castShadow\").onChange((e: boolean) => {\n      dl && (dl.castShadow = e);\n      viewer.enableRender();\n    });\n\n    // Hemisphere Light\n    const hl = this.viewer.hemisphereLight;\n    const hlf = this.gui.addFolder(\"Hemisphere Light\");\n    hlf.add(controls, \"hlVisible\", controls.hlVisible).name(\"visible\").onChange((e: boolean) => {\n      // assume the light is added to scene already\n      hl && (hl.visible = e);\n      viewer.enableRender();\n    });\n    hlf.add(controls, \"hlIntensity\", 0, 5).name(\"intensity\").onChange((e: number) => {\n      hl && (hl.intensity = e);\n      viewer.enableRender();\n    });\n    hlf.addColor(controls, \"hlColor\").name(\"color\").onChange((e: string) => {\n      hl && (hl.color = new THREE.Color(e));\n      viewer.enableRender();\n    });\n    hlf.addColor(controls, \"hlGroundColor\").name(\"groundColor\").onChange((e: string) => {\n      hl && (hl.groundColor = new THREE.Color(e));\n      viewer.enableRender();\n    });\n\n    // Fog\n    const ff = this.gui.addFolder(\"Fog\");\n    ff.add(controls, \"fogEnabled\", controls.fogEnabled).name(\"Enabled\").onChange((e: boolean) => {\n      if (e) {\n        scene.fog = new THREE.Fog(controls.fogColor, controls.fogNearDistance, controls.fogFarDistance);\n      } else {\n        scene.fog = null;\n      }\n      viewer.enableRender();\n    });\n    ff.add(controls, \"fogNearDistance\", 0, 100).name(\"Near\").onChange((e: number) => {\n      controls.fogEnabled && scene && (scene.fog = new THREE.Fog(controls.fogColor, e, controls.fogFarDistance));\n      viewer.enableRender();\n    });\n    ff.add(controls, \"fogFarDistance\", 100, 2000).name(\"Far\").onChange((e: number) => {\n      controls.fogEnabled && scene && (scene.fog = new THREE.Fog(controls.fogColor, controls.fogNearDistance, e));\n      viewer.enableRender();\n    });\n\n    // Composer\n    const cf = this.gui.addFolder(\"Composer\");\n    cf.add(controls, \"composerEnabled\", controls.composerEnabled).name(\"Composer Enabled\").onChange((e: boolean) => {\n      viewer.enableComposer(e);\n    });\n    cf.add(controls, \"renderPassEnabled\", controls.renderPassEnabled).name(\"RenderPass Enabled\").onChange((e: boolean) => {\n      viewer.enableRenderPass(e);\n    });\n    cf.add(controls, \"fxaaEnabled\", controls.fxaaEnabled).name(\"Effect FXAA Enabled\").onChange((e: boolean) => {\n      viewer.enableFxaaPass(e);\n    });\n    cf.add(controls, \"saoEnabled\", controls.saoEnabled).name(\"SAO Enabled\").onChange((e: boolean) => {\n      viewer.enableSaoPass(e);\n    });\n    cf.add(controls, \"ssaoEnabled\", controls.ssaoEnabled).name(\"SSAO Enabled\").onChange((e: boolean) => {\n      viewer.enableSsaoPass(e);\n    });\n    cf.add(controls, \"outlineEnabled\", controls.outlineEnabled).name(\"OutlinePass Enabled\").onChange((e: boolean) => {\n      viewer.enableOutlinePass(e);\n    });\n    cf.add(controls, \"ssaaEnabled\", controls.ssaaEnabled).name(\"SSAA Enabled\").onChange((e: boolean) => {\n      viewer.enableSsaaPass(e);\n    });\n    cf.add(controls, \"bloomEnabled\", controls.bloomEnabled).name(\"Bloom Enabled\").onChange((e: boolean) => {\n      viewer.enableBloomPass(e);\n    });\n    cf.add(controls, \"unrealBloomEnabled\", controls.unrealBloomEnabled).name(\"Unreal Bloom Enabled\").onChange((e: boolean) => {\n      viewer.enableUnrealBloomPass(e);\n    });\n  }\n\n  private setExplodeMode(isExplodeMode: boolean, onlyExplodeUp = false) {\n    if (!this.viewer || !this.viewer.scene || !this.viewer.loadedModels || !this.exploderDict) {\n      return;\n    }\n    if (isExplodeMode) {\n      SceneUtils.explodeObjects(this.viewer.scene, this.exploderDict, Object.values(this.viewer.loadedModels).map(obj => obj.uuid), onlyExplodeUp);\n    } else {\n      SceneUtils.unexplodeObjects(this.viewer.scene, this.exploderDict || {});\n    }\n  }\n\n  // private filterFloor (floor: string) {\n  //   if (this.viewer && this.viewer.scene && this.viewer.loadedModels) {\n  //     const scene = this.viewer.scene\n  //     const uuids = Object.values(this.viewer.loadedModels).map(obj => obj.uuid)\n  //     if (floor) {\n  //       const f = Number(floor.replace('F', ''))\n  //       uuids.forEach(uuid => {\n  //         ObjectUtils.setVisibleForFloors(scene, uuid, [f])\n  //       })\n  //     } else {\n  //       uuids.forEach(uuid => {\n  //         ObjectUtils.revertVisibleForFloorsByUuid(scene, uuid)\n  //       })\n  //     }\n  //     this.viewer.enableRender()\n  //   }\n  // }\n\n  private initPostmate() {\n    const viewer = this.viewer;\n    if (!viewer) {\n      return;\n    }\n    this.postmate.addEventListenerWithReturnValue(MessageId.getGroundGrid, () => {\n      return viewer.groundGrid && viewer.groundGrid.visible;\n    });\n    this.postmate.addEventListener(MessageId.setGroundGrid, (messageData: object) => {\n      const value = (messageData as BooleanMessageData).value;\n      viewer.groundGrid && (viewer.groundGrid.visible = value);\n      viewer.enableRender();\n    });\n    this.postmate.addEventListener(MessageId.goHomeView, () => {\n      viewer.goToHomeView();\n    });\n    this.postmate.addEventListener(MessageId.setTransparentMode, (messageData: object) => {\n      const value = (messageData as BooleanMessageData).value;\n      viewer.addOrRemoveObjectOpacity(value);\n    });\n    this.postmate.addEventListener(MessageId.setExplodeMode, (messageData: object) => {\n      const value = (messageData as BooleanMessageData).value;\n      this.setExplodeMode(value);\n      viewer.enableRender();\n    });\n  }\n\n  open() {\n    this.gui && this.gui.open();\n  }\n\n  close() {\n    this.gui && this.gui.close();\n  }\n\n  beforeDestroy() {\n    this.viewer = undefined;\n    this.gui && this.gui.destroy();\n    this.gui = undefined;\n    this.exploderDict = [];\n    this.postmate.removeEventListenerWithReturnValue(MessageId.getGroundGrid);\n    this.postmate.removeEventListener(\n      MessageId.setGroundGrid,\n      MessageId.goHomeView,\n      MessageId.setTransparentMode,\n      MessageId.setExplodeMode);\n  }\n}\n","/**\n * Device util class\n */\nexport default class DeviceUtils {\n  /**\n   * Checks if it is opened in touch screen device, like iphone, ipad, etc.\n   */\n  static isTouchScreenDevice(): boolean {\n    // return !!(\"ontouchstart\" in window || navigator.maxTouchPoints);\n    return !!(\"ontouchstart\" in window);\n  }\n\n  static printDeviceInfo() {\n    const ua = navigator.userAgent;\n    const isAndroid = /(?:Android)/.test(ua);\n    const isFireFox = /(?:Firefox)/.test(ua);\n    const isChrome = /(?:Chrome|CriOS)/.test(ua);\n    const isTablet = /(?:iPad|PlayBook)/.test(ua) || (isAndroid && !/(?:Mobile)/.test(ua)) || (isFireFox && /(?:Tablet)/.test(ua));\n    const isiPhone = /(?:iPhone)/.test(ua) && !isTablet;\n    const isPc = !isiPhone && !isAndroid;\n    const isTouchDevice = DeviceUtils.isTouchScreenDevice();\n    if (isAndroid) console.log(\"[DI] is android\");\n    if (isFireFox) console.log(\"[DI] is fireFox\");\n    if (isChrome) console.log(\"[DI] is chrome\");\n    if (isTablet) console.log(\"[DI] is tablet\");\n    if (isiPhone) console.log(\"[DI] is iPhone\");\n    if (isPc) console.log(\"[DI] is PC\");\n    if (isTouchDevice) console.log(\"[DI] is touch device\");\n  }\n\n  /**\n   * Gets GPU Graphics card info\n   * @param canvas\n   */\n  static getWebGlRendererInfo(canvas: HTMLCanvasElement): string {\n    if (!canvas) {\n      throw new Error(\"Invalid canvas!\");\n    }\n    // Please find more details about getContext() via this link:\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext\n    const webgl: any = canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\") || canvas.getContext(\"webgl2\");\n    const info = webgl && webgl.getExtension(\"WEBGL_debug_renderer_info\");\n    let glRenderer = \"unknown\";\n    if (info) {\n      glRenderer = webgl.getParameter(info.UNMASKED_RENDERER_WEBGL);\n    }\n    return glRenderer;\n  }\n}\n","/**\n * This class implemented setTimeout and setInterval using RequestAnimationFrame\n * This code references to\n * https://github.com/aisriver/myHome3D/blob/master/src/utils/RAF.ts\n */\nexport default class RafHelper {\n  readonly TIMEOUT = \"timeout\";\n  readonly INTERVAL = \"interval\";\n  private timeoutMap: any = {}; // timeout map, key is symbol\n  private intervalMap: any = {}; // interval map\n\n  private run(type = this.INTERVAL, cb: () => void, interval = 16.7) {\n    const now = Date.now;\n    let startTime = now();\n    let endTime = startTime;\n    const timerSymbol = Symbol(\"\");\n    const loop = () => {\n      this.setIdMap(timerSymbol, type, loop);\n      endTime = now();\n      if (endTime - startTime >= interval) {\n        if (type === this.intervalMap) {\n          startTime = now();\n          endTime = startTime;\n        }\n        cb();\n        if (type === this.TIMEOUT) {\n          this.clearTimeout(timerSymbol);\n        }\n      }\n    };\n    this.setIdMap(timerSymbol, type, loop);\n    return timerSymbol;\n  }\n\n  private setIdMap(timerSymbol: symbol, type: string, loop: (time: number) => void) {\n    const id = requestAnimationFrame(loop);\n    if (type === this.INTERVAL) {\n      this.intervalMap[timerSymbol] = id;\n    } else if (type === this.TIMEOUT) {\n      this.timeoutMap[timerSymbol] = id;\n    }\n  }\n\n  public setTimeout(cb: () => void, interval: number) {\n    return this.run(this.TIMEOUT, cb, interval);\n  }\n\n  public clearTimeout(timer: symbol) {\n    cancelAnimationFrame(this.timeoutMap[timer]);\n  }\n\n  public setInterval(cb: () => void, interval: number) {\n    return this.run(this.INTERVAL, cb, interval);\n  }\n\n  public clearInterval(timer: symbol) {\n    cancelAnimationFrame(this.intervalMap[timer]);\n  }\n}\n","import * as THREE from \"three\";\n\n/**\n * Prefiltered, Mipmapped Radiance Environment Map (PMREM) util class.\n */\nexport class PmremUtils {\n  /**\n   * Creates default environment texture\n   */\n  public static async createEnvTextureFromDataArray(\n    pmremGenerator: THREE.PMREMGenerator | undefined,\n    data: Uint16Array = this.HDR_CITY_STREET_64x32,\n    width = 64,\n    height = 32\n  ): Promise<THREE.Texture> {\n    if (pmremGenerator) {\n      const texture = new THREE.DataTexture(data, width, height);\n      texture.flipY = true;\n      texture.magFilter = THREE.LinearFilter;\n      texture.minFilter = THREE.LinearFilter;\n      texture.type = THREE.HalfFloatType;\n      texture.version = 1;\n\n      const envMap = pmremGenerator.fromEquirectangular(texture).texture;\n      pmremGenerator.dispose();\n      return Promise.resolve(envMap);\n    }\n    return Promise.reject(new Error(\"Invalid pmremGenerator!\"));\n  }\n\n  // eslint-disable-next-line\n  private static HDR_CITY_STREET_64x32 = Uint16Array.from([11910,12340,1279715360,11926,12348,12806,15360,11958,12364,12814,15360,11974,12380,1283015360,11958,12364,12822,15360,11926,12348,12797,15360,11878,12324,1277315360,11830,12308,12749,15360,11798,12292,12733,15360,11782,12279,1272515360,11765,12263,12709,15360,11749,12247,12701,15360,11733,12231,1270115360,11701,12215,12693,15360,11685,12199,12685,15360,11685,12199,1268515360,11701,12215,12693,15360,11717,12231,12701,15360,11733,12247,1270915360,11749,12263,12717,15360,11749,12279,12717,15360,11765,12279,1272515360,11765,12279,12725,15360,11765,12292,12725,15360,11798,12300,1273315360,11830,12316,12749,15360,11846,12324,12757,15360,11894,12340,1278115360,11926,12356,12797,15360,11942,12356,12797,15360,11926,12348,1278915360,11926,12348,12789,15360,11942,12356,12797,15360,11942,12356,1279715360,11942,12348,12806,15360,11942,12356,12806,15360,11942,12356,1281415360,11958,12372,12830,15360,11974,12372,12830,15360,11974,12372,1283815360,11990,12388,12854,15360,12055,12420,12886,15360,12119,12452,1291815360,12167,12476,12950,15360,12231,12500,12982,15360,12263,12516,1299815360,12231,12500,12974,15360,12199,12484,12958,15360,12199,12484,1295815360,12199,12492,12966,15360,12247,12508,12982,15360,12247,12508,1299015360,12231,12500,12982,15360,12199,12484,12966,15360,12167,12468,1294215360,12119,12444,12918,15360,12087,12436,12902,15360,12055,12420,1288615360,12055,12412,12878,15360,12039,12412,12878,15360,12022,12396,1286215360,12006,12388,12846,15360,11958,12364,12830,15360,11910,12340,1280615360,12119,12508,13103,15360,12087,12484,13071,15360,12055,12468,1304615360,12006,12436,13006,15360,11926,12396,12958,15360,11878,12364,1292615360,11846,12348,12894,15360,11782,12308,12854,15360,11749,12292,1283015360,11717,12263,12814,15360,11685,12247,12806,15360,11669,12215,1278915360,11685,12231,12789,15360,11701,12247,12797,15360,11701,12247,1280615360,11717,12263,12814,15360,11749,12292,12822,15360,11782,12308,1283815360,11798,12316,12846,15360,11814,12332,12862,15360,11846,12340,1287015360,11862,12348,12878,15360,11846,12340,12870,15360,11846,12340,1286215360,11878,12356,12886,15360,11910,12372,12910,15360,11942,12396,1293415360,11958,12412,12958,15360,12039,12452,12998,15360,12071,12468,1302215360,12039,12452,12998,15360,12039,12452,12998,15360,12006,12444,1300615360,11974,12436,12998,15360,11942,12412,12982,15360,11926,12396,1297415360,11926,12404,12974,15360,11958,12420,12998,15360,12006,12452,1303815360,12055,12476,13071,15360,12039,12476,13079,15360,12087,12508,1312715360,12247,12597,13231,15360,12388,12693,13332,15360,12420,12741,1336415360,12436,12757,13372,15360,12468,12773,13380,15360,12500,12806,1338815360,12516,12822,13404,15360,12629,12934,13452,15360,12741,13046,1350815360,12806,13095,13532,15360,12757,13046,13516,15360,12645,12950,1346015360,12565,12870,13428,15360,12532,12838,13412,15360,12549,12854,1341215360,12516,12838,13396,15360,12452,12757,13356,15360,12420,12725,1334015360,12404,12709,13332,15360,12372,12677,13316,15360,12279,12589,1320715360,12135,12516,13119,15360,12388,12709,13348,15360,12247,12581,1322315360,12055,12476,13087,15360,11910,12388,12982,15360,11733,12308,1288615360,11669,12247,12846,15360,11621,12199,12814,15360,11541,12103,1276515360,11492,12055,12733,15360,11508,12055,12733,15360,11476,12022,1271715360,11525,12055,12725,15360,11589,12135,12757,15360,11669,12199,1276515360,11765,12292,12814,15360,11862,12348,12886,15360,11910,12372,1291015360,12006,12420,12966,15360,12071,12452,12998,15360,12119,12476,1302215360,12167,12492,13046,15360,12183,12500,13063,15360,12199,12524,1307915360,12308,12589,13151,15360,12300,12581,13151,15360,12167,12516,1308715360,12087,12468,13030,15360,12022,12444,13014,15360,11990,12420,1299015360,11974,12420,12990,15360,11974,12420,12990,15360,11990,12436,1301415360,11990,12444,13030,15360,12103,12500,13103,15360,12087,12508,1311115360,12039,12484,13103,15360,12039,12476,13103,15360,11942,12436,1305415360,11974,12452,13087,15360,12039,12492,13135,15360,12103,12532,1319915360,12183,12581,13263,15360,12308,12661,13340,15360,12484,12822,1343615360,12613,12918,13484,15360,12725,13046,13540,15360,13046,13332,1367715360,13143,13380,13717,15360,13223,13420,13741,15360,13396,13540,1386215360,13436,13589,13902,15360,13484,13629,13942,15360,13468,13621,1393415360,13412,13564,13878,15360,13372,13524,13846,15360,13287,13452,1378115360,13223,13428,13749,15360,13340,13492,13805,15360,13239,13428,1374915360,13095,13364,13685,15360,12918,13223,13597,15360,12822,13111,1355615360,12613,12934,13468,15360,12532,12854,13428,15360,12565,12870,1344415360,12468,12789,13396,15360,12372,12693,13340,15360,12087,12492,1311115360,11846,12364,12958,15360,11717,12300,12878,15360,11557,12135,1278115360,11476,12055,12741,15360,11460,12022,12725,15360,11476,12022,1272515360,11476,12022,12709,15360,11476,11958,12605,15360,11364,11733,1233215360,11111,11412,11661,15360,11223,11476,11773,15360,11388,11669,1209515360,11765,12119,12492,15360,12388,12613,13079,15360,12661,12902,1335615360,12998,13255,13564,15360,13372,13508,13797,15360,13412,13548,1384615360,13287,13436,13725,15360,13271,13428,13709,15360,13287,13428,1371715360,13014,13287,13597,15360,12709,12998,13460,15360,12452,12741,1333215360,12364,12653,13271,15360,12404,12693,13316,15360,12420,12709,1331615360,12420,12709,13332,15360,12263,12589,13231,15360,12332,12661,1331215360,12300,12629,13295,15360,12263,12605,13287,15360,12231,12597,1327915360,12247,12613,13303,15360,12231,12597,13295,15360,12231,12605,1331215360,12199,12597,13324,15360,12231,12613,13340,15360,12516,12870,1346815360,12725,13063,13564,15360,12741,13079,13573,15360,12854,13175,1361315360,12902,13223,13629,15360,13046,13348,13693,15360,13356,13516,1384615360,13605,13765,14078,15360,13717,13870,14191,15360,13765,13918,1425515360,13765,13910,14247,15360,13701,13854,14191,15360,13573,13733,1407015360,13508,13677,14006,15360,13380,13548,13886,15360,13111,13380,1374115360,13063,13348,13709,15360,12886,13207,13629,15360,12725,13046,1354815360,12645,12966,13508,15360,12677,12982,13508,15360,12629,12950,1349215360,12452,12789,13412,15360,12324,12661,13332,15360,12356,12677,1334015360,12388,12693,13348,15360,12279,12597,13247,15360,11894,12396,1299815360,11637,12231,12846,15360,11573,12135,12789,15360,11589,12151,1279715360,11621,12167,12797,15360,11637,12119,12677,15360,11079,11404,1169315360,10517,10701,10653,15360,10252,10348,10007,15360,9902,9999,9428,153609846,9886,9047,15360,10135,10260,9685,15360,10412,10533,10412,15360,1126811436,11549,15360,12364,12605,13087,15360,12444,12709,13255,15360,1254912822,13348,15360,12613,12886,13396,15360,12597,12886,13412,15360,1258112870,13404,15360,12661,12950,13460,15360,12725,13014,13492,15360,1307913332,13645,15360,12757,13046,13500,15360,12677,12982,13476,15360,1285413143,13556,15360,12693,12982,13492,15360,12581,12886,13452,15360,1270913030,13508,15360,12372,12709,13364,15360,12324,12661,13348,15360,1229212645,13340,15360,12292,12645,13348,15360,12468,12806,13436,15360,1253212854,13460,15360,12500,12854,13468,15360,12500,12854,13484,15360,1272513063,13589,15360,12982,13324,13701,15360,13111,13388,13741,15360,1301413340,13709,15360,13014,13332,13717,15360,13287,13476,13862,15360,1343613621,13974,15360,13532,13717,14095,15360,13725,13902,14295,15360,1394214103,14420,15360,13974,14135,14436,15360,13862,14022,14388,15360,1372513894,14295,15360,13789,13958,14336,15360,13830,13990,14348,15360,1337213548,13942,15360,13014,13332,13733,15360,12886,13239,13661,15360,1285413207,13637,15360,12757,13095,13589,15360,12757,13079,13573,15360,1264512982,13516,15360,12629,12966,13532,15360,12549,12870,13468,15360,1235612693,13372,15360,12151,12549,13231,15360,12215,12573,13247,15360,1219912565,13231,15360,12071,12492,13135,15360,12055,12468,13087,15360,1187812372,12958,15360,11685,12199,12781,15360,10774,11159,11412,15360,9533,96218870,15360,9308,9340,8071,15360,9276,9300,7878,15360,9324,9332,8420,153609191,9216,7991,15360,8950,8983,7766,15360,9493,9525,8677,15360,10252,1033210007,15360,10661,10846,10894,15360,10701,10926,10998,15360,10950,1127611428,15360,11364,11637,12063,15360,11958,12388,12926,15360,12183,1254013175,15360,12340,12645,13295,15360,12420,12693,13316,15360,12757,1303013460,15360,13046,13324,13645,15360,13095,13348,13677,15360,13303,1346013781,15360,13207,13404,13741,15360,13127,13372,13717,15360,13372,1352413862,15360,12693,13030,13540,15360,12725,13046,13548,15360,12468,1282213436,15360,12263,12629,13348,15360,12436,12773,13428,15360,12693,1299813524,15360,12725,13046,13564,15360,12645,12982,13556,15360,12613,1296613556,15360,12886,13255,13685,15360,13436,13629,14022,15360,13637,1381314231,15360,13621,13789,14215,15360,13878,14038,14412,15360,14022,1418314468,15360,13926,14119,14452,15360,14054,14231,14508,15360,14135,1431114540,15360,14348,14436,14669,15360,14460,14540,14749,15360,14404,1448414709,15360,14420,14500,14709,15360,14653,14717,14894,15360,14119,1427914508,15360,13484,13669,14078,15360,13063,13380,13773,15360,12677,1307913613,15360,12484,12886,13516,15360,12436,12822,13476,15360,12468,1283813476,15360,12039,12532,13316,15360,12231,12613,13340,15360,12468,1278913436,15360,12388,12725,13396,15360,12135,12557,13287,15360,12151,1255713271,15360,12039,12484,13175,15360,11878,12396,13038,15360,11814,1234812950,15360,11492,11894,12460,15360,9950,10103,9621,15360,8830,8838,722015360,8565,8533,7015,15360,8541,8501,6919,15360,8332,8300,6822,15360,84128372,7220,15360,8710,8701,7686,15360,9372,9404,8549,15360,9533,9621,907915360,9268,9292,8196,15360,9452,9460,8167,15360,9533,9581,8533,15360,97429870,9316,15360,11460,11814,12348,15360,11942,12388,12902,15360,11749,1216712573,15360,11300,11492,11621,15360,11974,12332,12669,15360,12436,1274113364,15360,12597,12886,13460,15360,12966,13271,13653,15360,12998,1330313669,15360,13476,13629,13974,15360,13733,13886,14239,15360,13364,1352413894,15360,13063,13356,13725,15360,12982,13287,13669,15360,12484,1280613444,15360,12565,12902,13500,15360,12950,13287,13693,15360,12934,1327113677,15360,12693,13046,13589,15360,12661,13030,13605,15360,12870,1327113717,15360,13348,13548,13966,15360,13621,13813,14271,15360,13797,1397414412,15360,13942,14119,14484,15360,14263,14388,14629,15360,14420,1450814733,15360,14460,14548,14773,15360,14982,15046,15231,15360,15564,1558015669,15360,15974,15982,16078,15360,15805,15821,15926,15360,15460,1547615572,15360,15436,15460,15556,15360,14781,14862,15127,15360,13621,1381314348,15360,12789,13207,13757,15360,12452,12886,13581,15360,12263,1270913476,15360,12039,12597,13396,15360,11942,12516,13340,15360,11846,1246813271,15360,11733,12380,13127,15360,11926,12460,13191,15360,12055,1252413263,15360,11878,12428,13159,15360,11605,12231,12886,15360,11412,1199012709,15360,11508,12103,12789,15360,11637,12231,12854,15360,10661,1107911380,15360,9541,9685,9252,15360,8573,8605,7493,15360,8404,8388,7348,153608830,8822,8212,15360,9308,9324,9095,15360,9324,9364,9220,15360,9047,91198653,15360,9023,9055,8404,15360,9055,9063,8167,15360,8870,8846,7541,153608862,8806,7380,15360,8950,8910,7252,15360,9268,9284,7557,15360,10316,1046810380,15360,11239,11476,11677,15360,10653,10942,11047,15360,9661,9814,932415360,10693,10958,11047,15360,11396,11653,11990,15360,11878,12292,1259715360,12468,12789,13396,15360,12773,13095,13589,15360,13364,13516,1389415360,13894,14054,14380,15360,13717,13870,14247,15360,13420,13589,1395815360,13255,13452,13830,15360,12806,13143,13637,15360,13159,13412,1383015360,13629,13813,14215,15360,13303,13500,13910,15360,13079,13396,1380515360,13191,13452,13878,15360,13412,13621,14062,15360,14103,14279,1454015360,14773,14854,15086,15360,14717,14805,15046,15360,14295,14420,1468515360,14380,14476,14733,15360,14572,14661,14902,15360,15596,15612,1570115360,16351,16335,16384,15360,16484,16476,16492,15360,16516,16500,1651615360,16388,16375,16404,15360,16054,16054,16118,15360,15918,15926,1600615360,15556,15572,15669,15360,14653,14725,14982,15360,13637,13838,1431915360,13412,13613,14054,15360,12870,13287,13789,15360,12404,12838,1352415360,12199,12677,13428,15360,12324,12741,13452,15360,11942,12516,1332415360,11765,12380,13111,15360,11428,11942,12589,15360,10886,11388,1190215360,10372,10717,11006,15360,9846,10240,10191,15360,10252,10549,1076615360,10613,11079,11484,15360,10581,10998,11388,15360,9613,9846,9629,153608525,8557,7541,15360,8605,8613,7814,15360,9292,9324,9079,15360,9388,93969220,15360,10709,10846,11031,15360,9894,9966,9854,15360,9252,9236,877415360,8822,8790,8183,15360,8292,8260,6533,15360,8111,8007,6324,15360,82288183,6405,15360,8501,8501,6565,15360,8814,8878,7172,15360,9260,9364,824415360,8902,9095,8252,15360,9444,9581,9047,15360,9509,9637,8790,15360,94779613,8806,15360,10725,11063,11079,15360,11508,11910,12356,15360,12484,1278913380,15360,12838,13159,13629,15360,13428,13589,13974,15360,14135,1427914484,15360,13942,14087,14396,15360,13677,13846,14247,15360,13436,1361314006,15360,13597,13781,14183,15360,14183,14340,14540,15360,14022,1421514484,15360,13637,13838,14271,15360,14038,14231,14508,15360,14380,1447614701,15360,14757,14854,15078,15360,15030,15111,15343,15360,15420,1545215556,15360,15476,15500,15588,15360,15351,15388,15492,15360,15572,1559615677,15360,15653,15669,15717,15360,15821,15821,15853,15360,15845,1584515869,15360,15998,15990,16022,15360,15926,15926,15974,15360,15653,1566915733,15360,15661,15677,15749,15360,15612,15629,15717,15360,15271,1533515452,15360,14484,14572,14821,15360,14215,14372,14588,15360,13468,1367714167,15360,12773,13175,13653,15360,12725,13143,13637,15360,12452,1288613532,15360,12263,12709,13444,15360,11894,12436,13103,15360,10252,1053310661,15360,8613,8693,7445,15360,8742,8782,7047,15360,8420,8412,6565,153607926,7910,6405,15360,8806,8854,7300,15360,9127,9228,8007,15360,8685,87507300,15360,8348,8356,6758,15360,8380,8340,7300,15360,8991,8918,8388,153609838,9790,9549,15360,10055,10127,10047,15360,9501,9493,9268,15360,9332,92928902,15360,9079,9007,8509,15360,8300,8260,7252,15360,8693,8701,8196,153608228,8212,7111,15360,8469,8501,7380,15360,8420,8501,6919,15360,8549,86456983,15360,8581,8661,6951,15360,9268,9332,7718,15360,9063,9207,7445,153609284,9380,7718,15360,9412,9557,8693,15360,10276,10517,10103,15360,1183012279,12589,15360,12725,13079,13589,15360,13127,13396,13773,15360,1408714231,14460,15360,13974,14119,14412,15360,13677,13854,14247,15360,1411914279,14500,15360,13990,14167,14460,15360,14364,14452,14653,15360,1456414653,14837,15360,14404,14492,14701,15360,14870,14942,15135,15360,1538815420,15500,15360,15207,15287,15420,15360,14797,14894,15127,15360,1527115335,15452,15360,15926,15942,15990,15360,16207,16207,16231,15360,1611816110,16126,15360,15741,15733,15741,15360,16239,16207,16175,15360,1644416460,16484,15360,16046,16022,16006,15360,15942,15950,15966,15360,1577315789,15829,15360,15789,15797,15845,15360,15693,15709,15757,15360,1554015564,15653,15360,15303,15364,15468,15360,14733,14813,15014,15360,1386214054,14420,15360,12838,13255,13725,15360,12789,13207,13693,15360,1246812918,13564,15360,12404,12838,13500,15360,11428,11862,12412,15360,9143,92768388,15360,8541,8533,6726,15360,8444,8428,6629,15360,8212,8183,6597,153608388,8380,7015,15360,8726,8710,6758,15360,8332,8316,6437,15360,8453,84286565,15360,8597,8605,7814,15360,8701,8661,8151,15360,9452,9396,9015,1536010581,10557,10380,15360,10950,10974,10846,15360,10380,10356,10252,1536010749,10741,10685,15360,9870,9854,9693,15360,9023,9039,8669,15360,8790,88548509,15360,8196,8167,7332,15360,7975,8015,7079,15360,8589,8750,7445,153609095,9260,7111,15360,8983,9135,7188,15360,8902,8991,7252,15360,8862,90077015,15360,8967,9111,7300,15360,8742,8878,7493,15360,9557,9999,9549,1536011292,11613,11862,15360,12135,12468,12982,15360,12215,12460,12878,1536013356,13468,13685,15360,13821,13934,14199,15360,13548,13701,14022,1536014103,14263,14468,15360,14279,14388,14572,15360,14364,14452,14645,1536014709,14789,14950,15360,15143,15199,15327,15360,15388,15412,15468,1536015476,15500,15548,15360,15420,15444,15492,15360,15436,15460,15516,1536015612,15637,15685,15360,16086,16086,16110,15360,16396,16388,16396,1536016094,16094,16110,15360,15869,15861,15861,15360,16135,16110,16070,1536016428,16420,16404,15360,15588,15556,15524,15360,15484,15500,15508,1536015335,15364,15396,15360,15677,15685,15717,15360,15604,15621,15661,1536015420,15444,15500,15360,15303,15372,15452,15360,14717,14805,14998,1536014412,14508,14701,15360,13548,13765,14199,15360,13271,13508,13942,1536012661,13159,13709,15360,12468,12854,13436,15360,10260,10484,10509,153608613,8669,6951,15360,8151,8143,6469,15360,8653,8629,7814,15360,8469,84447541,15360,8718,8693,7814,15360,8372,8332,6597,15360,8356,8308,7111,153609047,8983,8396,15360,8822,8798,8308,15360,9372,9348,8967,15360,10364,1036410183,15360,10268,10260,9894,15360,10541,10533,10468,15360,10380,1036410276,15360,10621,10613,10549,15360,9910,9942,9758,15360,8364,8380,762115360,8581,8637,8135,15360,8252,8300,7573,15360,8119,8175,7300,15360,83728453,7493,15360,8420,8501,6983,15360,8742,8822,7573,15360,8782,8854,815115360,8581,8661,7079,15360,9220,9268,8340,15360,9549,9645,8854,15360,1171711950,12127,15360,12468,12741,13207,15360,12709,12966,13388,15360,1230012508,12886,15360,12492,12709,13063,15360,13239,13372,13548,15360,1247612597,12814,15360,13581,13685,13878,15360,14476,14548,14685,15360,1455614629,14773,15360,14765,14829,14966,15360,15159,15207,15303,15360,1537215396,15444,15360,15516,15532,15572,15360,15653,15661,15693,15360,1582915837,15853,15360,16022,16014,16022,15360,16311,16295,16279,15360,1634316319,16303,15360,16412,16388,16359,15360,15813,15797,15773,15360,1306313151,13183,15360,11484,11701,11798,15360,12300,12412,12468,15360,1461314637,14653,15360,11974,12215,12316,15360,14135,14215,14303,15360,1560415629,15677,15360,15524,15548,15596,15360,15351,15380,15428,15360,1479714894,15054,15360,13990,14231,14500,15360,13492,13709,14070,15360,1288613316,13701,15360,12613,13207,13749,15360,11525,11974,12428,15360,9284,94128629,15360,8597,8653,6951,15360,7806,7790,6292,15360,7589,7541,6437,153607485,7437,6597,15360,7453,7404,6180,15360,7774,7686,6565,15360,8300,82607332,15360,9918,9942,9862,15360,10348,10372,10231,15360,9725,9709,922815360,10613,10621,10509,15360,10199,10175,9838,15360,10380,10388,1034015360,11207,11255,11284,15360,10661,10717,10725,15360,10103,10135,995015360,8444,8436,7669,15360,8469,8501,7445,15360,8950,9111,8854,15360,94859798,10071,15360,8364,8501,8039,15360,7959,7951,6806,15360,8597,8605,803915360,8501,8533,7557,15360,8758,8830,7509,15360,10758,10830,10693,1536011508,11605,11621,15360,13524,13669,13886,15360,13830,14022,14327,1536013926,14103,14364,15360,13460,13621,13886,15360,12854,13191,13420,1536013597,13733,13926,15360,13846,13990,14223,15360,13773,13942,14199,1536013910,14087,14356,15360,13813,14022,14319,15360,14247,14396,14540,1536014693,14765,14878,15360,15223,15279,15343,15360,15508,15524,15540,1536015540,15548,15564,15360,15327,15335,15319,15360,15303,15311,15303,1536015918,15910,15886,15360,16247,16207,16151,15360,16175,16143,16086,1536014436,14452,14436,15360,12263,12380,12404,15360,11476,11701,11773,1536012380,12492,12532,15360,14797,14797,14757,15360,11372,11589,11677,1536012597,12934,13356,15360,13990,14364,14725,15360,14183,14444,14773,1536014231,14444,14717,15360,14412,14532,14709,15360,14054,14199,14380,1536012372,12500,12605,15360,12199,12565,13006,15360,12581,13175,13653,1536010055,10380,10324,15360,8557,8573,6726,15360,8167,8196,6533,15360,7517,74856119,15360,7244,7172,5798,15360,7071,6959,5718,15360,7669,7581,6260,153608661,8605,7975,15360,10942,11079,11151,15360,12573,12741,13014,15360,1190212030,12191,15360,10308,10332,10135,15360,11255,11300,11284,15360,1127611348,11396,15360,10055,10215,10292,15360,12183,12332,12468,15360,9918,99669798,15360,8734,8742,8196,15360,8967,8950,8469,15360,10260,10276,1003915360,9734,9758,9605,15360,9388,9404,9308,15360,7943,7878,7095,15360,77267637,6645,15360,8047,7983,7204,15360,9284,9236,8693,15360,9621,9565,914315360,11255,11268,11047,15360,13175,13332,13420,15360,13773,13934,1417515360,13854,14022,14271,15360,13870,14038,14279,15360,13388,13516,1367715360,12279,12629,12966,15360,13348,13452,13564,15360,13821,13918,1405415360,13701,13846,14022,15360,13460,13605,13781,15360,13492,13637,1382115360,13709,13821,13950,15360,14372,14428,14476,15360,14516,14572,1461315360,14741,14789,14813,15360,14725,14749,14749,15360,13452,13484,1346815360,13476,13500,13492,15360,14990,15022,15022,15360,14556,14572,1456415360,15094,15111,15094,15360,13231,13287,13215,15360,11255,11380,1117515360,10677,10886,10492,15360,11846,12006,11934,15360,14327,14340,1427915360,10766,11039,10862,15360,12918,13255,13452,15360,14231,14548,1488615360,13878,14380,14765,15360,13444,13862,14412,15360,12151,12404,1262115360,12637,12902,13215,15360,11549,11749,11870,15360,12279,12653,1311915360,13223,13404,13516,15360,9228,9260,8276,15360,8087,7991,6308,153607918,7814,6919,15360,7469,7364,6148,15360,7485,7380,6212,15360,8228,79917204,15360,9276,8967,8212,15360,9806,9573,8742,15360,10135,10087,9621,1536011452,11452,11452,15360,10629,10637,10509,15360,10693,10733,10637,1536011095,11111,10982,15360,11292,11348,11372,15360,10199,10244,10167,1536010814,10926,10846,15360,8669,8774,7493,15360,7870,7910,6244,15360,8204,81836919,15360,9806,9758,9159,15360,9460,9436,8629,15360,9159,9087,8260,153607637,7509,6790,15360,7758,7629,6838,15360,7967,7918,6774,15360,10854,1074910501,15360,11508,11412,11316,15360,12372,12300,12151,15360,12030,1211912063,15360,12781,12910,12982,15360,13476,13581,13661,15360,13484,1358913677,15360,12404,12428,12380,15360,11605,11765,11798,15360,11492,1153311452,15360,11838,11886,11798,15360,12263,12372,12380,15360,12151,1223112175,15360,11492,11508,11412,15360,11119,11111,10838,15360,12508,1258112573,15360,12621,12693,12677,15360,12573,12629,12589,15360,12292,1232412231,15360,12476,12565,12573,15360,11998,12159,12215,15360,12950,1307113159,15360,12263,12372,12428,15360,12380,12428,12444,15360,11300,1130811143,15360,10199,10244,9734,15360,9709,9701,9252,15360,10492,10581,1040415360,11476,11516,11388,15360,9477,9517,8790,15360,11717,11854,11838,1536014247,14420,14524,15360,14054,14311,14436,15360,13597,13805,13982,1536011364,11533,11597,15360,12263,12428,12549,15360,11436,11605,11653,1536013079,13324,13444,15360,12516,12613,12605,15360,10039,10015,9605,15360,86938621,7878,15360,7951,7862,6902,15360,8196,8204,7015,15360,8677,8589,763715360,9284,9031,8340,15360,9814,9605,8902,15360,10685,10428,9910,1536010492,10260,9685,15360,9404,9252,7943,15360,8830,8766,7220,15360,9220,90477943,15360,9693,9669,9015,15360,11412,11468,11372,15360,11135,11159,1102315360,10087,10055,9428,15360,9910,10007,9621,15360,9236,9300,8934,153609597,9557,8902,15360,10669,10549,9782,15360,9926,9870,9127,15360,9894,99189047,15360,8685,8742,7910,15360,9958,10167,10284,15360,10215,10332,1039615360,11396,11428,11452,15360,11223,11255,11300,15360,11814,11862,1195815360,10685,10846,10870,15360,10340,10380,10007,15360,11175,11207,1089415360,12103,12207,12215,15360,11143,11103,10902,15360,9910,9966,9613,1536010015,10079,9493,15360,10806,10846,10517,15360,10862,10934,10637,1536010838,10942,10661,15360,10958,11087,10878,15360,10709,10838,10701,1536010669,10741,10589,15360,10581,10669,10525,15360,10252,10348,9974,1536011396,11500,11525,15360,11207,11255,11264,15360,10878,10910,10934,1536011031,11063,11159,15360,11292,11324,11396,15360,11223,11255,11300,1536010693,10685,10645,15360,10428,10420,10324,15360,10300,10252,9991,1536010838,10846,10798,15360,10428,10428,10364,15360,9669,9605,9380,15360,1016710244,10087,15360,11709,11854,11910,15360,11223,11284,11268,15360,1023110244,9878,15360,10199,10244,9862,15360,10183,10260,9942,15360,10525,1065310541,15360,12500,12597,12621,15360,11814,11741,11597,15360,11533,1146011175,15360,11103,11006,10557,15360,10444,10396,9846,15360,10007,10023,922815360,9653,9790,8469,15360,9316,9372,8039,15360,9557,9830,8071,15360,96219918,8071,15360,9677,10015,8167,15360,9991,10284,8420,15360,10215,104368581,15360,10260,10484,8645,15360,10292,10476,8902,15360,10324,10468,925215360,9910,9894,8886,15360,10525,10573,9701,15360,9782,10039,8581,153609565,9814,8167,15360,9950,10039,8934,15360,10749,10758,10199,15360,1066910685,10244,15360,10838,10838,10460,15360,11215,10910,10087,15360,1149211364,10806,15360,11095,11159,11055,15360,11364,11388,11356,15360,1102311039,10990,15360,11653,11653,11613,15360,11798,11725,11557,15360,1197411862,11637,15360,12039,11942,11765,15360,12119,12047,11934,15360,1215112071,11950,15360,12087,12006,11886,15360,12047,11966,11838,15360,1199011926,11790,15360,11974,11910,11798,15360,11998,11934,11814,15360,1211112039,11886,15360,12231,12143,11998,15360,12292,12199,12039,15360,1203911974,11846,15360,11822,11782,11653,15360,11862,11838,11765,15360,1179811765,11701,15360,11782,11733,11669,15360,11798,11749,11685,15360,1183811790,11725,15360,11870,11822,11749,15360,11741,11701,11621,15360,1156511541,11452,15360,11533,11500,11412,15360,11621,11581,11484,15360,1160511557,11460,15360,11516,11468,11372,15360,11565,11533,11444,15360,1167711637,11541,15360,11725,11661,11557,15360,11725,11661,11557,15360,1173311669,11573,15360,11838,11773,11677,15360,11998,11926,11814,15360,1201411926,11798,15360,11460,11404,11332,15360,11637,11557,11428,15360,1201411894,11693,15360,12167,12022,11765,15360,12119,11982,11709,15360,1192611806,11516,15360,11685,11589,11300,15360,11476,11404,10886,15360,1123911151,10468,15360,10766,10733,9894,15360,10565,10565,9589,15360,10436,104449332,15360,10308,10308,9031,15360,10308,10316,8999,15360,10199,10244,877415360,9725,9645,8549,15360,10244,10276,8967,15360,10878,10838,10183,1536011055,10966,10348,15360,11119,11006,10404,15360,11264,11135,10565,1536011404,11316,10822,15360,11492,11388,10982,15360,11798,11613,11223,1536012047,11830,11412,15360,12039,11894,11597,15360,12127,11990,11693,1536012127,11990,11725,15360,12191,12055,11806,15360,12191,12055,11830,1536011870,11773,11613,15360,11573,11516,11428,15360,11533,11484,11412,1536011541,11492,11420,15360,11565,11516,11452,15360,11589,11541,11476,1536011605,11557,11500,15360,11637,11589,11533,15360,11669,11621,11557,1536011701,11645,11573,15360,11733,11669,11589,15360,11798,11717,11605,1536011838,11749,11621,15360,11878,11782,11661,15360,11894,11798,11661,1536011926,11806,11653,15360,11958,11822,11661,15360,11982,11846,11677,1536012006,11870,11685,15360,12095,11950,11765,15360,12047,11910,11741,1536011886,11765,11605,15360,11838,11733,11589,15360,11814,11717,11589,1536011814,11709,11573,15360,11790,11693,11565,15360,11741,11677,11589,1536011733,11677,11613,15360,11733,11685,11629,15360,11717,11669,11621,1536011685,11645,11589,15360,11629,11589,11533,15360,11573,11525,11468,1536011492,11444,11380,15360,11316,11255,11111,15360,11348,11292,11143,1536011516,11436,11316,15360,11854,11749,11589,15360,12127,11990,11765,1536012199,12055,11782,15360,12340,12231,11910,15360,12372,12292,11958,1536012380,12300,11974,15360,12348,12247,11910,15360,12324,12215,11878,1536012247,12103,11773,15360,12095,11958,11637,15360,12055,11926,11613,1536011974,11854,11541,15360,11870,11765,11468,15360,11966,11854,11541,1536012300,12151,11846,15360,12396,12316,12006,15360,12388,12308,11990,1536012388,12308,12006,15360,12396,12316,12022,15360,12396,12308,12022,1536012396,12308,12022,15360,12364,12279,11974,15360,12340,12247,11942,1536012340,12231,11926,15360,12215,12071,11806,15360,12095,11966,11749,1536011741,11645,11500,15360,11420,11356,11255,15360,11364,11308,11207,1536011356,11300,11175,15360,11348,11292,11191,15360,11372,11324,11255,1536011412,11364,11308,15360,11420,11372,11316,15360,11428,11380,11324,1536011444,11388,11332,15360,11484,11428,11364,15360,11508,11460,11396,1536011557,11500,11436,15360,11589,11533,11460,15360,11613,11557,11484,1536011621,11557,11492,15360,11613,11557,11500,15360,11621,11557,11500,1536011629,11573,11508,15360,11629,11573,11508,15360,11605,11557,11484,1536011589,11533,11468,15360,11557,11508,11436,15360,11549,11500,11428,1536011557,11500,11436,15360,11549,11492,11436,15360,11533,11484,11428,1536011525,11476,11428,15360,11516,11476,11428,15360,11525,11484,11444,1536011516,11476,11428,15360,11468,11428,11380,15360,11428,11388,11332,1536011356,11308,11239,15360,11308,11255,11127,15360,11167,11071,10926,1536011223,11119,10966,15360,11276,11175,10998,15360,11404,11332,11191,1536011773,11693,11557,15360,11926,11798,11613,15360,12207,12039,11773,1536012348,12231,11894,15360,12308,12151,11846,15360,12332,12215,11894,1536012364,12279,11958,15360,12380,12292,11974,15360,12396,12316,12022,1536012404,12316,12039,15360,12412,12332,12087,15360,12412,12332,12103,1536012436,12356,12135,15360,12372,12292,12039,15360,12420,12332,12087,1536012396,12316,12055,15360,12356,12263,11990,15360,12340,12231,11942,1536012271,12127,11854,15360,12215,12071,11814,15360,12292,12135,11878,1536012288,12135,11870,15360,12111,11982,11765,15360,11990,11886,11717,1536011637,11557,11428,15360,11364,11300,11143,15360,11316,11239,11079,1536011300,11207,11047,15360,11268,11159,11015,15360,11268,11159,11015,1536011268,11159,11031,15360,11300,11223,11095,15360,11340,11292,11191,1536011348,11300,11223,15360,11372,11324,11255,15360,11380,11332,11255,1536011372,11316,11239,15360,11396,11340,11268,15360,11468,11404,11300,1536011460,11404,11324,15360,11484,11428,11356,15360,11492,11436,11372,1536011500,11444,11388,15360,11508,11460,11404,15360,11500,11452,11396,1536011492,11436,11380,15360,11468,11412,11356,15360,11444,11388,11324,1536011444,11388,11324,15360,11428,11380,11316,15360,11412,11356,11300,1536011404,11348,11300,15360,11404,11356,11308,15360,11396,11356,11308,1536011388,11348,11308,15360,11372,11340,11292,15360,11348,11308,11255,1536011284,11223,11111,15360,11231,11143,11023,15360,11199,11111,10974,1536011047,10958,10814,15360,11127,11023,10870,15360,11119,11006,10846,1536011175,11055,10886,15360,11292,11191,10998,15360,11525,11404,11284,1536011822,11637,11476,15360,11878,11733,11549,15360,11918,11790,11573,1536012063,11918,11653,15360,12223,12063,11765,15360,12300,12151,11846,1536012255,12103,11814,15360,12271,12127,11846,15360,12271,12127,11862,1536012271,12127,11886,15360,12308,12183,11942,15360,12175,12039,11814,1536012063,11934,11709,15360,12159,12014,11765,15360,12215,12063,11798,1536012143,11998,11757,15360,12071,11934,11693,15360,11998,11870,11661,1536011974,11870,11685,15360,11998,11910,11757,15360,11846,11765,11629,1536011468,11396,11284,15360,11308,11223,11031,15360,11215,11103,10934,1536011207,11095,10942,15360,11215,11103,10950,15360,11191,11087,10942,1536011175,11079,10942,15360,11167,11063,10934,15360,11143,11031,10902,1536011247,11143,11015,15360,11284,11191,11079,15360,11300,11223,11095,1536011316,11268,11127,15360,11340,11284,11143,15360,11340,11284,11159,1536011356,11300,11191,15360,11372,11316,11239,15360,11380,11324,11255,1536011372,11316,11255,15360,11380,11324,11276,15360,11380,11324,11268,1536011372,11316,11255,15360,11364,11316,11255,15360,11364,11308,11239,1536011348,11292,11207,15360,11340,11284,11191,15360,11348,11292,11191,1536011348,11292,11207,15360,11340,11292,11207,15360,11340,11292,11207,1536011324,11276,11207,15360,11308,11255,11175,15360,11264,11175,11079,1536011119,11039,10934,15360,11103,11015,10902,15360,11095,11006,10878,1536011031,10942,10806,15360,10990,10902,10766,15360,11047,10942,10814,1536011031,10926,10790,15360,11055,10942,10806,15360,11119,10998,10846,1536011151,11015,10830,15360,11268,11095,10886,15360,11484,11396,11268,1536011790,11701,11549,15360,11886,11790,11637,15360,11838,11741,11581,1536011838,11725,11541,15360,11902,11782,11581,15360,11966,11838,11629,1536011974,11846,11629,15360,11958,11838,11629,15360,11950,11838,11637,1536011814,11701,11525,15360,11581,11492,11332,15360,11645,11541,11380,1536011806,11701,11533,15360,11902,11806,11637,15360,11950,11862,11717,1536012014,11934,11790,15360,11942,11862,11725,15360,11565,11492,11388,1536011292,11191,11015,15360,11231,11111,10950,15360,11159,11047,10894,1536011119,11006,10854,15360,11127,11023,10878,15360,11159,11055,10902,1536011135,11031,10894,15360,11111,11006,10878,15360,11095,10990,10870,1536011095,10998,10886,15360,11071,10966,10846,15360,11111,11006,10902,1536011191,11095,10974,15360,11268,11159,11031,15360,11284,11191,11063,1536011292,11207,11063,15360,11300,11223,11079,15360,11332,11268,11143,1536011316,11255,11127,15360,11316,11255,11143,15360,11308,11239,11127,1536011316,11255,11159,15360,11300,11223,11127,15360,11292,11207,11095,1536011300,11223,11111,15360,11300,11223,11095,15360,11300,11223,11095,1536011308,11239,11111,15360,11300,11223,11111,15360,11292,11207,11111,1536011264,11167,11071,15360,11215,11127,11047,15360,11135,11055,10966,1536011015,10934,10846,15360,10918,10838,10733,15360,10982,10894,10782,1536010974,10886,10766,15360,10982,10894,10766,15360,10958,10862,10749,1536010982,10886,10774,15360,10958,10862,10758,15360,10958,10862,10749,1536011015,10910,10790,15360,11023,10910,10774,15360,11079,10958,10806,1536011103,10974,10798,15360,11191,11047,10846,15360,11468,11388,11276,1536011846,11765,11637,15360,12006,11918,11782,15360,11998,11910,11782,1536011902,11822,11693,15360,11838,11749,11637,15360,11782,11709,11605,1536011806,11741,11645,15360,11782,11717,11629,15360,11773,11717,11621,1536011870,11806,11701,15360,11942,11862,11757,15360,12183,12103,11974,1536011974,11894,11765,15360,11476,11404,11308,15360,11268,11143,10966,1536011183,11063,10902,15360,11111,10998,10854,15360,11055,10942,10806,1536011023,10910,10766,15360,11047,10934,10782,15360,11039,10926,10782,1536011079,10966,10830,15360,11031,10918,10782,15360,11031,10926,10806,1536010990,10894,10782,15360,10974,10886,10790,15360,10966,10870,10774,1536011006,10902,10806,15360,11039,10942,10838,15360,11127,11023,10910,1536011175,11079,10958,15360,11191,11087,10958,15360,11207,11095,10958,1536011268,11143,11015,15360,11276,11175,11047,15360,11284,11191,11079,1536011292,11191,11079,15360,11276,11175,11079,15360,11239,11135,11031,1536011268,11159,11047,15360,11215,11111,11006,15360,11239,11127,11015,1536011255,11143,11031,15360,11223,11119,11015,15360,11199,11103,10998,1536011175,11087,10982,15360,11143,11047,10958,15360,11031,10942,10854,1536010958,10878,10790,15360,10910,10830,10741,15360,10942,10862,10758,1536010926,10838,10733,15360,10854,10758,10637,15360,10918,10830,10709,1536010910,10822,10717,15360,10942,10846,10749,15360,10942,10854,10741,1536010942,10854,10749,15360,10966,10870,10758,15360,10966,10870,10758,1536010958,10854,10733,15360,10998,10886,10741,15360,10942,10830,10677,1536011039,10918,10749,15360,11095,10974,10806,15360,11308,11223,11031,1536011468,11396,11292,15360,11605,11533,11428,15360,11701,11621,11525,1536011693,11629,11541,15360,11685,11621,11549,15360,11685,11629,11549,1536011629,11565,11484,15360,11589,11533,11444,15360,11364,11308,11191,1536011191,11087,10958,15360,11135,11031,10902,15360,11135,11031,10894,1536011055,10950,10830,15360,11015,10910,10782,15360,10958,10854,10733,1536010942,10838,10717,15360,10974,10870,10733,15360,10982,10878,10749,1536010990,10886,10758,15360,11015,10910,10798,15360,10966,10862,10758,1536010950,10854,10758,15360,10910,10822,10733,15360,10894,10798,10709,1536010902,10814,10725,15360,10934,10846,10758,15360,10910,10822,10733,1536010950,10854,10749,15360,10974,10878,10766,15360,11047,10942,10830,1536011095,10990,10878,15360,11167,11055,10942,15360,11199,11103,10990,1536011191,11087,10982,15360,11151,11047,10950,15360,11135,11031,10934,1536011095,10998,10902,15360,11143,11047,10950,15360,11079,10990,10894,1536011079,10990,10902,15360,11103,11006,10910,15360,11079,10982,10886,1536011023,10926,10822,15360,10982,10894,10798,15360,10958,10870,10782,1536010910,10814,10725,15360,10926,10838,10741,15360,10934,10838,10733,1536010950,10854,10749,15360,10886,10798,10709,15360,10910,10814,10709,1536010926,10830,10725,15360,10910,10814,10701,15360,10862,10774,10677,1536010950,10854,10733,15360,10926,10830,10717,15360,10926,10838,10725,1536010926,10830,10725,15360,10894,10798,10685,15360,10926,10830,10701,1536010958,10854,10717,15360,10934,10830,10685,15360,10950,10846,10709,1536010974,10862,10717,15360,10942,10830,10685,15360,10958,10846,10701,1536011006,10894,10749,15360,10950,10846,10725,15360,10958,10862,10741,1536010894,10806,10701,15360,10854,10774,10669,15360,10886,10806,10701,1536010862,10790,10693,15360,10878,10806,10717,15360,10982,10902,10798,1536010990,10902,10798,15360,10950,10862,10758,15360,10942,10846,10733,1536010870,10774,10669,15360,10894,10798,10693,15360,10918,10830,10725,1536010894,10806,10701,15360,10926,10830,10733,15360,10902,10830,10725,1536010870,10790,10693,15360,10886,10814,10725,15360,10814,10741,10661,1536010838,10766,10677,15360,10822,10741,10661,15360,10822,10741,10669,1536010862,10790,10709,15360,10846,10758,10669,15360,10894,10798,10693,1536010974,10878,10766,15360,10966,10870,10766,15360,11023,10926,10814,1536011079,10974,10862,15360,11006,10910,10814,15360,10950,10862,10766,1536010982,10894,10798,15360,10958,10862,10774,15360,10958,10870,10782,1536010910,10830,10741,15360,10950,10862,10766,15360,10982,10886,10790,1536010918,10822,10725,15360,10886,10798,10701,15360,10854,10766,10669,1536010894,10806,10709,15360,10926,10830,10725,15360,10926,10830,10725,1536010958,10862,10749,15360,10958,10862,10749,15360,10894,10806,10717,1536010902,10814,10717,15360,10878,10790,10677,15360,10942,10838,10717,1536010918,10814,10701,15360,10886,10790,10661,15360,10942,10838,10717,1536010950,10854,10725,15360,10950,10854,10725,15360,10910,10814,10693,1536010910,10814,10685,15360,10942,10838,10709,15360,10894,10790,10661,1536010910,10806,10669,15360,10822,10725,10597,15360,10749,10661,10541,1536010830,10733,10613,15360,10838,10741,10629,15360,10806,10709,10597,1536010854,10766,10653,15360,10862,10774,10669,15360,10798,10725,10629,1536010822,10749,10653,15360,10854,10782,10693,15360,10806,10741,10661,1536010862,10790,10701,15360,10870,10790,10685,15360,10870,10790,10693,1536010878,10790,10677,15360,10862,10782,10677,15360,10870,10790,10693,1536010870,10782,10685,15360,10894,10814,10709,15360,10886,10814,10709,1536010846,10782,10685,15360,10741,10669,10573,15360,10766,10693,10589,1536010709,10637,10541,15360,10741,10669,10589,15360,10741,10677,10589,1536010709,10637,10557,15360,10774,10701,10613,15360,10862,10774,10677,1536011006,10918,10806,15360,11006,10902,10782,15360,10974,10870,10749,1536010958,10854,10733,15360,10934,10838,10725,15360,10934,10838,10733,1536010934,10838,10725,15360,10886,10790,10685,15360,10854,10766,10661,1536010886,10798,10701,15360,10838,10749,10645,15360,10878,10782,10661,1536010822,10725,10613,15360,10822,10717,10605,15360,10846,10749,10629,1536010854,10749,10637,15360,10950,10854,10733,15360,10958,10854,10741,1536010910,10806,10693,15360,10926,10822,10693,15360,10934,10838,10725,1536010910,10822,10709,15360,10910,10822,10709,15360,10886,10782,10661,1536010910,10814,10677,15360,10910,10806,10677,15360,10926,10822,10685,1536010958,10854,10717,15360,10974,10870,10725,15360,10926,10830,10693,1536010926,10830,10693,15360,10918,10822,10693,15360,10934,10838,10701,1536010918,10814,10685,15360,10878,10782,10653,15360,10870,10774,10645,1536010838,10749,10629,15360,10806,10717,10605,15360,10822,10733,10621,1536010822,10733,10621,15360,10846,10758,10653,15360,10846,10766,10653,1536010822,10741,10629,15360,10806,10733,10629,15360,10806,10725,10621,1536010790,10709,10605,15360,10766,10693,10589,15360,10814,10741,10629,1536010846,10766,10653,15360,10838,10758,10653,15360,10878,10790,10677,1536010894,10798,10685,15360,10830,10741,10629,15360,10830,10758,10653,1536010798,10725,10629,15360,10806,10733,10629,15360,10717,10637,10525,1536010661,10581,10476,15360,10701,10621,10517,15360,10733,10661,10565,1536010782,10685,10557,15360,10862,10758,10613,15360,10974,10862,10725,1536010958,10846,10709,15360,11006,10902,10766,15360,11006,10902,10774,1536011039,10934,10814,15360,11006,10902,10790,15360,11006,10910,10790,1536010950,10854,10741,15360,10934,10830,10709,15360,10918,10814,10701,1536010854,10758,10653,15360,10918,10814,10701,15360,10870,10766,10645,1536010830,10733,10621,15360,10934,10830,10709,15360,10990,10886,10758,1536010950,10838,10717,15360,10910,10814,10701,15360,10926,10822,10693,1536010934,10830,10709,15360,10878,10774,10653,15360,10934,10830,10701,1536010926,10822,10693,15360,10878,10782,10661,15360,10878,10782,10661,1536010862,10766,10621,15360,10886,10782,10645,15360,10886,10782,10653,1536010926,10822,10701,15360,10902,10806,10685,15360,10926,10822,10701,1536010918,10814,10685,15360,10878,10782,10645,15360,10910,10806,10669,1536010854,10758,10621,15360,10886,10790,10645,15360,10854,10758,10629,1536010830,10741,10613,15360,10918,10814,10685,15360,10862,10766,10645,1536010830,10741,10613,15360,10806,10717,10597,15360,10741,10661,10557,1536010774,10693,10581,15360,10749,10669,10557,15360,10774,10693,10581,1536010766,10685,10573,15360,10790,10709,10597,15360,10782,10701,10589,1536010790,10709,10597,15360,10838,10749,10621,15360,10870,10774,10645,1536010894,10790,10661,15360,10878,10782,10653,15360,10846,10741,10613,1536010790,10693,10557,15360,10814,10717,10597,15360,10790,10701,10581,1536010741,10645,10525,15360,10717,10629,10509,15360,10774,10685,10573,1536010725,10637,10525,15360,10854,10749,10621,15360,10950,10846,10701,1536010966,10854,10709,15360,10934,10814,10677,15360,10926,10822,10701,1536010982,10878,10766,15360,10998,10894,10782,15360,10990,10878,10766,1536010998,10894,10782,15360,10998,10886,10774,15360,10998,10886,10758,1536011006,10894,10774,15360,10942,10838,10733,15360,10958,10854,10741,1536010958,10854,10749,15360,11006,10902,10790,15360,11015,10902,10798,1536010982,10870,10758,15360,10998,10894,10782,15360,10974,10870,10758,1536011006,10902,10790,15360,10998,10894,10774,15360,10974,10870,10758,1536010950,10854,10741,15360,10878,10790,10693,15360,10902,10814,10701,1536010918,10822,10709,15360,10838,10733,10613,15360,10878,10782,10661,1536010934,10838,10717,15360,10902,10806,10693,15360,10918,10822,10709,1536010926,10830,10709,15360,10838,10733,10605,15360,10910,10806,10661,1536010942,10838,10693,15360,10886,10782,10645,15360,10886,10782,10637,1536010854,10749,10621,15360,10926,10830,10709,15360,10966,10862,10741,1536010846,10749,10629,15360,10830,10733,10605,15360,10854,10758,10637,1536010822,10725,10605,15360,10886,10790,10661,15360,10902,10806,10669,1536010918,10814,10677,15360,10830,10733,10605,15360,10806,10717,10589,1536010870,10774,10645,15360,10934,10838,10709,15360,10958,10862,10733,1536010886,10790,10661,15360,10894,10798,10661,15360,10958,10854,10709,1536010934,10830,10709,15360,10814,10717,10581,15360,10862,10758,10613,1536010854,10741,10589,15360,10814,10717,10573,15360,10886,10782,10645,1536010814,10725,10597,15360,10862,10766,10637,15360,10910,10806,10669,1536010942,10838,10709,15360,10966,10862,10733,15360,10974,10870,10741,1536010974,10870,10749,15360,10958,10862,10749,15360,11031,10934,10822,1536010998,10894,10782,15360,10974,10870,10766,15360,11023,10918,10814,1536011039,10926,10822,15360,10958,10846,10741,15360,10918,10814,10693,1536010966,10870,10741,15360,10982,10886,10766,15360,10982,10878,10766,1536010942,10846,10733,15360,10958,10862,10758,15360,10950,10854,10758,1536010934,10830,10717,15360,10966,10862,10733,15360,10942,10846,10725,1536010934,10846,10733,15360,10934,10846,10733,15360,10878,10798,10693,1536010886,10798,10693,15360,10910,10814,10709,15360,10942,10846,10733,1536010838,10733,10597,15360,10878,10774,10645,15360,10918,10822,10701,1536010878,10782,10653,15360,10894,10790,10661,15360,10934,10838,10725,1536010958,10854,10725,15360,10966,10862,10733,15360,10910,10806,10685,1536010982,10878,10758,15360,10942,10854,10749,15360,10934,10838,10733,1536010918,10814,10701,15360,10894,10798,10669,15360,10894,10798,10669,1536010814,10725,10605,15360,10902,10798,10669,15360,10814,10725,10605,1536010894,10798,10685,15360,10958,10862,10749,15360,10910,10814,10701,1536010910,10806,10685,15360,10918,10814,10693,15360,10926,10822,10709,1536010894,10790,10661,15360,10902,10806,10677,15360,10902,10806,10685,1536010934,10838,10717,15360,10934,10838,10701,15360,10934,10838,10717,1536010950,10854,10725,15360,10894,10798,10661,15360,10862,10749,10597,1536010894,10798,10677,15360,10878,10782,10661,15360,10926,10838,10717,1536010926,10838,10717,15360,10918,10822,10709,15360,10934,10838,10733,1536010926,10838,10733,15360,10958,10870,10766,15360,10942,10854,10749,1536010958,10870,10774,15360,10974,10878,10774,15360,10958,10854,10741,1536010950,10846,10741,15360,10950,10854,10758,15360,10934,10838,10733,1536010942,10846,10725,15360,10966,10862,10741,15360,10926,10838,10733,1536010958,10862,10749,15360,10910,10822,10709,15360,10942,10854,10758,1536010926,10838,10733,15360,10910,10822,10717,15360,10934,10838,10733,1536010934,10846,10733,15360,10902,10814,10709,15360,10926,10830,10717,1536010918,10822,10709,15360,10838,10749,10637,15360,10878,10790,10677,1536010942,10846,10733,15360,10926,10822,10701,15360,10958,10862,10749,1536010886,10790,10685,15360,10918,10814,10693,15360,10910,10814,10693,1536010902,10806,10701,15360,10878,10774,10637,15360,10798,10693,10565,1536010822,10725,10597,15360,10934,10838,10709,15360,10958,10854,10725,1536010886,10790,10669,15360,10910,10806,10677,15360,10886,10782,10645,1536010830,10725,10597,15360,10822,10717,10581,15360,10862,10758,10637,1536010878,10782,10669,15360,10926,10822,10709,15360,10974,10878,10774,1536010966,10870,10758,15360,10918,10822,10709,15360,10846,10749,10645,1536010894,10798,10693,15360,10918,10822,10709,15360,10974,10878,10774,1536010918,10822,10717,15360,10982,10886,10774,15360,10974,10878,10758,1536010950,10854,10741,15360,10958,10854,10725,15360,10982,10886,10766,1536010918,10822,10701,15360,10878,10782,10669,15360,10886,10790,10669,1536010934,10838,10717,15360,10950,10854,10741,15360,10934,10838,10733,1536010982,10886,10782,15360,10886,10798,10701,15360,10870,10782,10685,1536010894,10814,10717,15360,10910,10822,10725,15360,10934,10838,10733,1536010950,10846,10741,15360,10934,10838,10725,15360,10934,10846,10749,1536010902,10814,10717,15360,10878,10790,10677,15360,10878,10782,10669,1536010854,10766,10645,15360,10838,10749,10629,15360,10902,10814,10701,1536010910,10814,10693,15360,10902,10798,10669,15360,10910,10806,10677,1536010886,10782,10653,15360,10854,10749,10629,15360,10870,10774,10653,1536010974,10870,10758,15360,10990,10878,10758,15360,10918,10822,10709,1536010926,10838,10725,15360,10958,10854,10733,15360,10894,10790,10653,1536010822,10725,10605,15360,10878,10782,10661,15360,10974,10870,10749,1536010902,10806,10677,15360,10934,10838,10725,15360,10870,10774,10653,1536010798,10701,10581,15360,10854,10749,10621,15360,10894,10798,10669,1536010934,10822,10685,15360,10942,10830,10701,15360,10910,10806,10669,1536010870,10758,10629,15360,10886,10774,10645,15360,10950,10838,10701,1536010966,10870,10749,15360,10886,10790,10685,15360,10870,10782,10677,1536010934,10838,10733,15360,10934,10838,10725,15360,10822,10725,10621,1536010878,10790,10677,15360,10894,10798,10693,15360,10822,10733,10629,1536010894,10798,10685,15360,10998,10902,10790,15360,11015,10918,10806,1536010950,10854,10741,15360,10950,10846,10741,15360,10934,10838,10733,1536010942,10846,10749,15360,10910,10822,10725,15360,10846,10758,10653,1536010878,10790,10685,15360,10894,10798,10701,15360,10862,10774,10669,1536010814,10725,10621,15360,10846,10758,10645,15360,10870,10774,10661,1536010870,10774,10677,15360,10878,10790,10693,15360,10878,10782,10677,1536010830,10741,10637,15360,10870,10782,10677,15360,10966,10870,10766,1536011015,10918,10814,15360,10910,10814,10701,15360,10942,10846,10725,1536010950,10846,10725,15360,10942,10838,10725,15360,10934,10830,10701,1536010910,10798,10677,15360,10886,10782,10653,15360,10838,10733,10597,1536010902,10806,10669,15360,10830,10733,10613,15360,10838,10741,10621,1536010838,10741,10621,15360,10894,10798,10669,15360,10934,10830,10685,1536010886,10790,10669,15360,10902,10806,10685,15360,10854,10749,10637,15360]);\n}\n","import * as THREE from \"three\";\nimport { CSS2DRenderer } from \"three/examples/jsm/renderers/CSS2DRenderer\";\nimport { Collada, ColladaLoader } from \"three/examples/jsm/loaders/ColladaLoader\";\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader\";\nimport { FBXLoader } from \"three/examples/jsm/loaders/FBXLoader\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\n// import { HighlightConfigOfModel, IFCModel } from \"three/examples/jsm/loaders/IFCLoader\";\nimport { MTLLoader } from \"three/examples/jsm/loaders/MTLLoader\";\nimport { PLYLoader } from \"three/examples/jsm/loaders/PLYLoader\";\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\nimport { STLLoader } from \"three/examples/jsm/loaders/STLLoader\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer.js\";\nimport { FXAAShader } from \"three/examples/jsm/shaders/FXAAShader\";\nimport { BloomPass } from \"three/examples/jsm/postprocessing/BloomPass\";\nimport { OutlinePass } from \"three/examples/jsm/postprocessing/OutlinePass\";\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\nimport { SAOPass } from \"three/examples/jsm/postprocessing/SAOPass\";\nimport { SSAARenderPass } from \"three/examples/jsm/postprocessing/SSAARenderPass\";\nimport { SSAOPass } from \"three/examples/jsm/postprocessing/SSAOPass\";\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\nimport { UnrealBloomPass } from \"three/examples/jsm/postprocessing/UnrealBloomPass\";\nimport { ObjectsBoxSection } from \"./section/ObjectsBoxSection\";\nimport { ObjectsPlaneSection } from \"./section/ObjectsPlaneSection\";\nimport { LineBasicMaterial, Material, MeshBasicMaterial, MeshLambertMaterial, MeshPhongMaterial, MeshStandardMaterial, OrthographicCamera, PerspectiveCamera, Raycaster, Vector3 } from \"three\";\nimport { MaterialInfo, ObjectUtils } from \"./utils/ObjectUtils\";\nimport { Settings as SettingsType, defaultSettings, CameraSettings } from \"@/components/projectSettingsPanel/ProjectSettingsDef\";\nimport { PostmateManager } from \"./postmate/PostmateManager\";\nimport { BooleanMessageData, MessageId } from \"./postmate/Message\";\nimport { SHPLoader } from \"./shp-js/SHPLoader\";\nimport { Model, ProjectManager } from \"./ProjectManager\";\nimport { matrixAutoUpdate } from \"@/core/Constants\";\nimport { WebCam } from \"./webcam/WebCam\";\nimport CommonUtils from \"./utils/CommonUtils\";\nimport DatGuiHelper from \"./helpers/DatGuiHelper\";\nimport DeviceUtils from \"./utils/DeviceUtils\";\nimport GroundUtils from \"./utils/GroundUtils\";\nimport InstantiateHelper from \"./helpers/InstantiateHelper\";\nimport Measure, { MeasureMode } from \"./measure/Measure\";\nimport MergeHelper from \"./helpers/MergeHelper\";\nimport RafHelper from \"./helpers/RafHelper\";\nimport Stats from \"three/examples/jsm/libs/stats.module\";\nimport SkyboxUtils from \"./utils/SkyboxUtils\";\nimport store from \"../store/index\";\nimport Viewer3DUtils, { Views } from \"./utils/Viewer3DUtils\";\nimport { PmremUtils } from \"./utils/PmremUtils\";\n// eslint-disable-next-line\nconst TWEEN = require('tween')\nconst IFC = require(\"../../public/three/js/libs/ifc/IFCLoader.js\");\n\nconst decoderPath = \"three/js/libs/draco/gltf/\";\nexport default class Viewer3D {\n  camera?: THREE.PerspectiveCamera | THREE.OrthographicCamera;\n  scene?: THREE.Scene;\n  renderer?: THREE.WebGLRenderer;\n  css2dRenderer?: CSS2DRenderer; // used to render html labels in the scene\n  ambientLight?: THREE.AmbientLight;\n  directionalLight?: THREE.DirectionalLight;\n  hemisphereLight?: THREE.HemisphereLight;\n  controls?: OrbitControls;\n  selectedObject: any | undefined = undefined;\n  groundGrid?: THREE.Line;\n  grassGround?: THREE.Mesh;\n  sceneBackgroundColor: THREE.Color = new THREE.Color(0xebf2f7); // TODO: add it to settings\n  skyOfGradientRamp?: THREE.Mesh;\n  stats?: Stats;\n  loadedModels: { [src: string]: { uuid: string, bbox?: THREE.BoxHelper } } = {}; // a map to store model file and uuid\n  [propertyName: string]: any // any property name\n  private perspectiveCamera?: THREE.PerspectiveCamera;\n  private orthoCamera?: THREE.OrthographicCamera;\n  private perspectiveCameraControls?: OrbitControls;\n  private orthoCameraConrols?: OrbitControls;\n  private composerRenderEnabled = true; // if we should call composer.render() in render()\n  private composerEnabled = false; // if composer and passes are enabled\n  private composer?: EffectComposer;\n  private renderPass?: RenderPass;\n  private effectFxaaPass?: ShaderPass;\n  private ssaoPass?: SSAOPass | ShaderPass;\n  private saoPass?: SAOPass;\n  private outlinePass?: OutlinePass;\n  private ssaaRenderPass?: SSAARenderPass;\n  private bloomPass?: BloomPass;\n  private unrealBloomPass?: UnrealBloomPass;\n  private height = 0;\n  private width = 0;\n  private raycaster?: THREE.Raycaster;\n  private tween?: any; // TWEEN.Tween\n  private savedMaterialsForOpacity?: MaterialInfo[] = [];\n  private mouseMoved = false;\n  private mouseDoubleClicked = false;\n  private section?: ObjectsBoxSection | ObjectsPlaneSection;\n  private measure?: Measure;\n  private datGui?: DatGuiHelper;\n  private gltfLoader?: GLTFLoader;\n  private ifcLoader?: any; // IFCLoader;\n  private webcam?: WebCam;\n  private webcamPlane?: THREE.Mesh;\n  // RafHelper (requestAnimationFrame Helper) is used to improve render performance,\n  // With this feature, it only renders when necessary, e.g. camera position changed, model loaded, etc.\n  // We can disable this feature by assigning raf to undefined\n  private raf?: RafHelper = new RafHelper();\n  private renderEnabled = true; // used together with RafHelper\n  private timeoutSymbol?: symbol; // used together with RafHelper\n  private isFrustumInsectChecking = false;\n  // store events so that they can be removed before destroy\n  private events: { node: any, type: string, func: any }[] = [];\n  private settings: SettingsType;\n  private readonly postmate = PostmateManager.instance();\n\n  constructor(width: number, height: number, settings: SettingsType = defaultSettings) {\n    this.width = width;\n    this.height = height;\n    this.settings = settings;\n    this.init();\n  }\n\n  /**\n   * Initialize everything it needs\n   */\n  init() {\n    this.initScene();\n    this.initRenderer();\n    this.initCamera();\n    this.initControls();\n    this.initLights();\n    this.initPointerEvents();\n    this.initDatGui(); // should be initialized later than sky, ground grid, etc.\n    this.initPostmate();\n    this.initOthers();\n  }\n\n  private initScene() {\n    this.scene = new THREE.Scene();\n    // this.scene.background = new THREE.Color(0xebf2f7)\n\n    // Find more performance tips at: https://discoverthreejs.com/tips-and-tricks/\n    // For performance. call .updateMatrix() manually when needed.\n    this.scene.matrixAutoUpdate = matrixAutoUpdate;\n    // When testing the performance of your apps, one of the first things you’ll need to do is check whether it is CPU bound, or GPU bound.\n    // If performance increases, then your app is GPU bound. If performance doesn’t increase, your app is CPU bound.\n    // this.scene.overrideMaterial = new MeshBasicMaterial({ color: 'green' })\n  }\n\n  private initRenderer() {\n    this.renderer = new THREE.WebGLRenderer({ antialias: true, preserveDrawingBuffer: true });\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.width, this.height);\n    // this.renderer.outputEncoding = THREE.sRGBEncoding;\n    this.renderer.outputColorSpace = THREE.SRGBColorSpace;\n    this.renderer.toneMappingExposure = 1;\n    // this.renderer.physicallyCorrectLights = true;\n    this.renderer.useLegacyLights = false;\n    this.renderer.setClearColor(0xa9a9a9, 1);\n    this.renderer.shadowMap.enabled = true;\n    this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\n    // css2dRenderer.domElement should be added to dom element by caller\n    this.css2dRenderer = new CSS2DRenderer();\n    this.css2dRenderer.setSize(this.width, this.height);\n\n    this.stats = new Stats();\n\n    const pmremGenerator = new THREE.PMREMGenerator(this.renderer);\n    pmremGenerator.compileEquirectangularShader();\n    PmremUtils.createEnvTextureFromDataArray(pmremGenerator).then((texture) => {\n      if (this.scene) {\n        this.scene.environment = texture;\n      }\n    });\n  }\n\n  private initCamera() {\n    if (!this.scene) {\n      return; // have to init scene first\n    }\n    // to avoid z-fighting issue, do not set near value too small!\n    // https://www.cnblogs.com/lst619247/p/9098845.html\n    this.perspectiveCamera = new THREE.PerspectiveCamera(45, this.width / this.height, this.settings.camera.near, this.settings.camera.far);\n    this.perspectiveCamera.position.set(0, 100, 0);\n    this.scene.add(this.perspectiveCamera); // need to init scene before camera\n    this.camera = this.perspectiveCamera;\n  }\n\n  private initControls(isOrthCamera: boolean = false) {\n    if (!this.renderer) {\n      return;\n    }\n    // TODO: support touch device later, see https://github.com/tdushinwa/threejs_touchtest/blob/master/js/TrackballControls.js\n    DeviceUtils.printDeviceInfo();\n\n    const camera = isOrthCamera ? this.orthoCamera : this.perspectiveCamera;\n    if (!camera) {\n      return;\n    }\n    const controls = new OrbitControls(camera, this.renderer.domElement);\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.5;\n    controls.enabled = true;\n    controls.keyPanSpeed = 10;\n    // controls.keys = { LEFT: '65', UP: '87', RIGHT: '68', BOTTOM: '83' } // a, w, d, s\n    controls.keys = {\n      LEFT: \"KeyA\", // left arrow\n      UP: \"Space\", // up arrow\n      RIGHT: \"KeyD\", // right arrow\n      BOTTOM: \"ControlLeft\" // down arrow\n    };\n    controls.listenToKeyEvents(document.body);\n    controls.update();\n    if (isOrthCamera) {\n      this.orthoCameraConrols = controls;\n    } else {\n      this.perspectiveCameraControls = controls;\n    }\n    this.controls = controls;\n    this.addEvent(controls, \"change\", this.onControlsChange(this));\n    this.addEvent(window, \"keydown\", this.onKeyDown(this));\n  }\n\n  private onControlsChange(viewer: Viewer3D) {\n    return () => {\n      viewer.enableRender();\n    };\n  }\n\n  private onKeyDown(viewer: Viewer3D) {\n    return (e: KeyboardEvent) => {\n      const camera = viewer.camera;\n      const controls = viewer.controls;\n      if (!camera || !controls) {\n        return;\n      }\n      const sensitivity = this.settings.keyboard.sensitivity || 3;\n      const p = new THREE.Vector3(); // camera's position\n      camera.getWorldPosition(p);\n      const t = controls.target; // target point\n      const newTarget = t.clone();\n      if (e.code === \"ArrowLeft\" || e.code === \"ArrowRight\") {\n        // keep camera's position uchanged, rotate to left (q) or right (e) around y-axis\n        // thus it changes target(lookAt) point\n        const ANGLE = sensitivity; // angle in degree\n        let theta = (Math.PI * ANGLE) / 180; // angle in radians\n        if (e.code === \"ArrowLeft\") {\n          theta = -theta; // rotate to left\n        }\n        newTarget.x = ((t.x - p.x) * Math.cos(theta) - (t.z - p.z) * Math.sin(theta)) + p.x;\n        newTarget.z = ((t.z - p.z) * Math.cos(theta) + (t.x - p.x) * Math.sin(theta)) + p.z;\n        controls.target = newTarget;\n        controls.update();\n      } else if (e.code === \"ArrowUp\" || e.code === \"ArrowDown\") {\n        // keep camera's position uchanged, rotate to left (q) or right (e) around y-axis\n        // thus it changes target(lookAt) point's y value\n        const ANGLE2 = sensitivity; // angle in degree\n        let theta2 = (Math.PI * ANGLE2) / 180; // angle in radians\n        const distVec = new THREE.Vector3(t.x - p.x, t.y - p.y, t.z - p.z); // distance vector from p to t\n        const dist = distVec.length();\n        const deltaY = (t.y - p.y);\n        if (e.code === \"ArrowDown\") { // z: rotate down\n          theta2 = -theta2;\n        }\n        const angle = Math.asin(deltaY / dist) + theta2;\n        if (angle < -Math.PI / 2 || angle > Math.PI / 2) {\n          return; // cannot rotate that much\n        }\n        const newDeltaY = Math.sin(angle) * dist;\n        newTarget.y = t.y + (newDeltaY - deltaY);\n        controls.target = newTarget;\n        controls.update();\n      } else if (e.code === \"KeyW\") { // go forward\n        const ALPHA = sensitivity * 0.01;\n        const dist = p.distanceTo(t);\n        if (dist < camera.near) {\n          // If distance is too close, better to move target position forward too, so camera can keep moving forward,\n          // rather than stop at the lookAt position. Let's move it to be 'camera.near' away from camera.\n          controls.target.lerp(p, -camera.near / dist);\n        }\n        p.lerp(t, ALPHA);\n        camera.position.set(p.x, p.y, p.z);\n      } else if (e.code === \"KeyS\") { // go backward\n        const ALPHA = sensitivity * 0.01;\n        p.lerp(t, -ALPHA);\n        camera.position.set(p.x, p.y, p.z);\n      } else if (e.code === \"KeyF\") {\n        // if there is object selected, fly to it. (This is a design by Unreal Engine)\n        this.flyToSelectedObject();\n      } else if (e.code === \"KeyT\") { // reset target\n        // When a user does rotate(or pan) operation, where is the rotate center(camera's target)?\n        // It depends on where is the camera's target as well as where is the camera itself.\n        // Assume camera is at p1, user clicked at p2, target is p3, distance between p1 and p2 is d1, distance between p1 and p3 is d2.\n        // In order to have a better user experience, we'll move target to p4 without changing camera's direction,\n        // where distance between p1 and p4 equals d1.\n        const intersections = this.getIntersections();\n        if (intersections.length > 0) {\n          const firstIntersect = intersections.find(intersect => {\n            const object = intersect.object;\n            // exclude invisible objects\n            // exclude non-mesh objects, ground, outline, etc.\n            return object.visible && object instanceof THREE.Mesh;\n          });\n          if (firstIntersect && firstIntersect.point && this.camera && this.controls) {\n            const p1 = this.camera.position;\n            const p2 = firstIntersect.point;\n            const p3 = this.controls.target;\n            const d1 = p1.distanceTo(p2);\n            if (d1 > this.camera.near && d1 < this.camera.far) {\n              // only take it as valid scenario when d1 is between near and far\n              const d2 = p1.distanceTo(p3);\n              const p4 = p1.clone().lerp(p3, d1 / d2);\n              this.controls.target.set(p4.x, p4.y, p4.z);\n              if (this.scene) {\n                CommonUtils.displayPointMarker(this.scene, p4, 1000);\n              }\n            }\n          }\n        }\n      } else if (e.code === \"KeyY\") {\n        // Make camera direction vertical with y-axis.\n        // It is useful when a user want to roaming horizontally with key(w/s/a/d) controls\n        this.flyTo(p, t.clone().setY(p.y));\n      }\n      viewer.enableRender();\n    };\n  }\n\n  /**\n   * When 'pointerup' event is triggered, we don't know if it is a dblclick.\n   * So, need to wait for 200ms etc. to see if there is another mouse click.\n   */\n  onPointerUp(viewer: Viewer3D, event: MouseEvent) {\n    return () => {\n      if (!viewer.mouseDoubleClicked) {\n        // only run it when it is not a dblclick event\n        viewer.handleMouseClick(event);\n        viewer.enableRender();\n      }\n    };\n  }\n\n  private initLights() {\n    if (!this.scene) {\n      return;\n    }\n    // TODO: move light settings into project settings panel\n    // Maybe we can automatically calculate light direction, intensity, etc. according to models' materials\n    const color = 0xffffff;\n    const highIntensity = 0.3;\n    const dl = new THREE.DirectionalLight(color, highIntensity);\n    dl.position.set(-2, 2, 4);\n    this.directionalLight = dl;\n    this.ambientLight = new THREE.AmbientLight(0x303030);\n    this.hemisphereLight = new THREE.HemisphereLight(color, 0xdddddd, 3);\n    this.hemisphereLight.position.set(0, 300, 0);\n\n    this.scene.add(dl);\n    this.scene.add(this.ambientLight);\n    this.scene.add(this.hemisphereLight);\n  }\n\n  /**\n   * Initialize mouse/pointer events\n   */\n  private initPointerEvents() {\n    if (!this.renderer || !this.camera || !this.controls) {\n      return;\n    }\n    // add mouse 'click' event, but do not trigger highlight for mouse drag event\n    // mouseup/mousedown/mousemove event is prevented by OrbitControls, let's use pointerup/pointerdown/pointermove\n    this.renderer.domElement.addEventListener(\"pointerdown\", (e) => {\n      this.mouseMoved = false;\n      this.enableRender();\n    });\n    this.renderer.domElement.addEventListener(\"pointermove\", (e) => {\n      this.mouseMoved = true;\n      // should enable render when measuring\n      if (this.measure && !this.measure.isCompleted) {\n        this.enableRender();\n      }\n    });\n    this.renderer.domElement.addEventListener(\"pointerup\", (e) => {\n      if (!this.mouseMoved && !this.mouseDoubleClicked) {\n        // do not run immediately, because it can be a double click\n        setTimeout(this.onPointerUp(this, e), 200);\n      }\n      if (this.mouseDoubleClicked) {\n        setTimeout(() => { this.mouseDoubleClicked = false }, 200);\n      }\n    });\n    this.renderer.domElement.addEventListener(\"dblclick\", (e) => {\n      this.mouseDoubleClicked = true;\n      if (!this.mouseMoved && (!this.measure || this.measure.isCompleted)) {\n        this.handleMouseClick(e);\n        this.flyToSelectedObject();\n        this.enableRender();\n      }\n    });\n    this.raycaster = new Raycaster();\n  }\n\n  private initDatGui() {\n    this.datGui = new DatGuiHelper(this);\n    this.datGui.close(); // collapse it by default\n  }\n\n  private initPostmate() {\n    if (this.postmate.isEmbedded) {\n      this.postmate.addEventListener(MessageId.setObjectsBoxClipper, (messageData: object) => {\n        const value = (messageData as BooleanMessageData).value;\n        value ? this.enableSection(\"ObjectsBoxSection\") : this.disableSection();\n      });\n      this.postmate.addEventListener(MessageId.setObjectsPlaneClipper, (messageData: object) => {\n        const value = (messageData as BooleanMessageData).value;\n        value ? this.enableSection(\"PlaneSection\") : this.disableSection();\n      });\n    }\n  }\n\n  private initOthers() {\n    if (!this.scene || !this.renderer || !this.camera) {\n      return;\n    }\n\n    // Read some settings from Dat.Gui. While in future,\n    // these default settings should be defined by project settings.\n    const ctrl = this.datGui && this.datGui.controls;\n    if (ctrl) {\n      // some settings are read from datGui, so it requires to initialize datGui first\n      if (ctrl.showGroundGrid) {\n        this.groundGrid = GroundUtils.createGroundGrid();\n        this.scene.add(this.groundGrid);\n      }\n      if (ctrl.showGrassGround) {\n        (async() => {\n          this.grassGround = await GroundUtils.createGrassGround();\n          this.scene && this.scene.add(this.grassGround);\n          this.enableRender();\n        })();\n      }\n\n      ctrl.webcam && this.enableWebCam();\n      // the order of passes matters, outline pass should be the last one\n      this.composerEnabled = ctrl.composerEnabled;\n      if (this.composerEnabled) {\n        this.enableComposer(true);\n        this.enableRenderPass(ctrl.renderPassEnabled);\n        this.enableFxaaPass(ctrl.fxaaEnabled);\n        this.enableSaoPass(ctrl.saoEnabled);\n        this.enableSsaoPass(ctrl.ssaoEnabled);\n        this.enableOutlinePass(ctrl.outlineEnabled);\n        this.enableSsaaPass(ctrl.ssaaEnabled);\n        this.enableBloomPass(ctrl.bloomEnabled);\n        this.enableUnrealBloomPass(ctrl.unrealBloomEnabled);\n      }\n    }\n\n    console.log(`[Viewer] WebGL: ${DeviceUtils.getWebGlRendererInfo(this.renderer.domElement)}`);\n    // erase the black outline when viewer is focused\n    this.renderer.domElement.style.outlineWidth = \"0\";\n  }\n\n  sycnCameraPosition(src: THREE.PerspectiveCamera | THREE.OrthographicCamera, dest: THREE.PerspectiveCamera | THREE.OrthographicCamera) {\n    const p = src.position;\n    dest.position.set(p.x, p.y, p.z);\n\n    if (this.scene) {\n      const t = this.scene.position; // src.target\n      dest.lookAt(t);\n    }\n  }\n\n  sycnControls(src: OrbitControls, dest: OrbitControls, center: THREE.Vector3) {\n    const c = center;\n    const t = src.target;\n    if (dest.center) {\n      dest.center.set(c.x, c.y, c.z);\n    } else {\n      dest.center = c.clone();\n    }\n    dest.target.set(t.x, t.y, t.z);\n    dest.update();\n  }\n\n  setToOrthographicCamera(isOrthCamera: boolean = false) {\n    if (!this.scene || !this.controls) {\n      return;\n    }\n    const pc = this.perspectiveCamera;\n    const pcc = this.perspectiveCameraControls;\n    let oc = this.orthoCamera;\n    let occ = this.orthoCameraConrols;\n    if (isOrthCamera) {\n      if (!oc) {\n        oc = new THREE.OrthographicCamera(-this.width / 2, this.width / 2, this.height / 2, -this.height / 2, this.settings.camera.near, this.settings.camera.far);\n        oc.position.set(0, 100, 0);\n        oc.zoom = 10; // it seems 10 works better, but don't know how to set a better one!\n        oc.updateProjectionMatrix();\n        this.scene && this.scene.add(oc); // need to init scene before camera\n        this.orthoCamera = oc;\n      }\n      if (!occ) {\n        this.initControls(true);\n        occ = this.orthoCameraConrols;\n      }\n      if (pc) {\n        this.sycnCameraPosition(pc, oc);\n        oc.zoom = 10;\n        oc.updateProjectionMatrix();\n      }\n      if (pcc && occ) {\n        this.sycnControls(pcc, occ, oc.position);\n      }\n      this.camera = oc;\n      this.controls = occ;\n    } else {\n      if (pc && oc) {\n        this.sycnCameraPosition(oc, pc);\n      }\n      if (pcc && occ && pc) {\n        this.sycnControls(occ, pcc, pc.position);\n      }\n      this.camera = pc;\n      this.controls = pcc;\n    }\n\n    this.resize(); // trigger camera to update properly\n  }\n\n  animate() {\n    requestAnimationFrame(this.animate.bind(this));\n    this.tween && TWEEN.update();\n    this.webcam && this.webcam.animate();\n    // do not update controls when tween is working, otherwise there is error\n    this.controls && !this.tween && this.controls.update();\n\n    if (this.renderEnabled && this.scene && this.camera) {\n      this.renderer && this.renderer.render(this.scene, this.camera);\n      this.css2dRenderer && this.css2dRenderer.render(this.scene, this.camera);\n    }\n    if (this.composerRenderEnabled && this.composer && this.composerEnabled) {\n      this.composer.render();\n      this.composerRenderEnabled = false;\n    }\n    this.frustrumCullingByModelBBox();\n    this.stats && this.stats.update();\n  }\n\n  /**\n   * This is a method called in animate() in order to optimize rendering speed.\n   * The idea is to hide any model out of view frustrum.\n   */\n  frustrumCullingByModelBBox() {\n    const frustum = new THREE.Frustum();\n    const projScreenMatrix = new THREE.Matrix4();\n    this.isFrustumInsectChecking = true;\n    if (this.camera) {\n      projScreenMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse);\n      frustum.setFromProjectionMatrix(projScreenMatrix);\n      Object.values(this.loadedModels).forEach((obj: {uuid: string, bbox?: THREE.BoxHelper}) => {\n        const model = this.scene && this.scene.getObjectByProperty(\"uuid\", obj.uuid);\n        const bbox = obj.bbox;\n        if (model && bbox && this.scene) {\n          // adds userData to model\n          // userData: {\n          //   _visible: boolean,\n          //   userConfigVisibility: boolean\n          // }\n          // userConfigVisibility is a flag to indicate if model's visibility ever changed by user\n          // from BimTree, LayerManager, etc. If ever changed, then frustrumCullingByModelBBox shouldn't\n          // work for thus model any more.\n          if (typeof model.userData._visible === \"undefined\") {\n            model.userData._visible = true;\n            Object.defineProperties(model, {\n              visible: {\n                set: (val) => {\n                  model.userData._visible = val;\n                  if (!this.isFrustumInsectChecking) {\n                    model.userData.userConfigVisibility = true;\n                  }\n                },\n                get: () => model.userData._visible\n              }\n            });\n          }\n          if (typeof model.userData.userConfigVisibility === \"undefined\") {\n            bbox.geometry.computeBoundingBox();\n            if (bbox.geometry.boundingBox) {\n              model.visible = frustum.intersectsBox(bbox.geometry.boundingBox);\n            }\n          }\n        }\n      });\n    }\n    this.isFrustumInsectChecking = false;\n  }\n\n  /**\n   * In order to have a better performance, it should only render when necessary.\n   * Usually, we should enable render for these cases:\n   *  - Anything added to, removed from scene, or objects' position, scale, rotation, opacity, material, etc. changed\n   *  - Anything selected/unselected\n   *  - Camera changed\n   *  - Render area resized\n   */\n  enableRender = (time: number = 1000) => {\n    this.renderEnabled = true;\n    if (!this.raf) {\n      return;\n    }\n    this.timeoutSymbol && this.raf.clearTimeout(this.timeoutSymbol);\n    this.timeoutSymbol = this.raf.setTimeout(() => {\n      this.renderEnabled = false;\n      // when main render process is done, enable composer render\n      this.composerRenderEnabled = true;\n    }, time);\n  };\n\n  beforeDestroy() {\n    // remove events\n    this.events.forEach(e => e.node.removeEventListener(e.type, e.func));\n    this.events = [];\n    if (this.datGui && this.datGui.gui) {\n      this.datGui.beforeDestroy();\n      this.datGui = undefined;\n    }\n    const wc = this.webcamPlane;\n    if (this.scene && wc) {\n      this.scene.remove(wc);\n      wc.geometry.dispose();\n      (wc.material as THREE.Material).dispose();\n      this.webcamPlane = undefined;\n    }\n    this.webcam = undefined;\n    this.camera = undefined;\n    this.composer = undefined;\n    this.renderPass = undefined;\n    this.effectFxaaPass = undefined;\n    this.saoPass = undefined;\n    this.ssaoPass = undefined;\n    this.outlinePass = undefined;\n    /**\n     * https://github.com/mrdoob/three.js/releases/tag/r120\n     * Scene: Remove dispose()\n     * @details https://github.com/mrdoob/three.js/pull/19972\n    */\n    // this.scene && this.scene.dispose()\n    if (this.scene) {\n      this.scene.clear();\n      this.scene = undefined;\n    }\n    if (this.renderer) {\n      this.renderer.clear();\n      this.renderer.dispose();\n      this.renderer = undefined;\n    }\n    this.ambientLight = undefined;\n    this.directionalLight = undefined;\n    this.hemisphereLight = undefined;\n    if (this.controls) {\n      this.controls.dispose();\n      this.controls = undefined;\n    }\n    this.stats = undefined;\n    this.raycaster = undefined;\n    this.selectedObject = undefined;\n    if (this.groundGrid) {\n      this.groundGrid.geometry.dispose();\n      (this.groundGrid.material as THREE.Material).dispose();\n      this.groundGrid.clear();\n      this.groundGrid = undefined;\n    }\n    if (this.grassGround) {\n      this.grassGround.geometry.dispose();\n      (this.grassGround.material as THREE.Material).dispose();\n      this.grassGround.clear();\n      this.grassGround = undefined;\n    }\n    if (this.skyOfGradientRamp) {\n      this.skyOfGradientRamp.geometry.dispose();\n      // TODO: don't know why ShaderMaterial still cannot be released from memory\n      (this.skyOfGradientRamp.material as THREE.Material).dispose();\n      this.skyOfGradientRamp.clear();\n      this.skyOfGradientRamp = undefined;\n    }\n    this.savedMaterialsForOpacity = undefined;\n    this.section = undefined;\n    Object.keys(this.loadedModels).forEach(key => {\n      delete this.loadedModels[key];\n    });\n    if (this.raf) {\n      this.timeoutSymbol && this.raf.clearTimeout(this.timeoutSymbol);\n      this.raf = undefined;\n    }\n    if (this.postmate.isEmbedded) {\n      this.postmate.removeEventListener(MessageId.setObjectsBoxClipper, MessageId.setObjectsPlaneClipper);\n    }\n  }\n\n  async loadLocalModel(options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    const url = options.src;\n    const fileName = options.src.toLowerCase();\n    if (fileName.endsWith(\"fbx\")) {\n      return this.loadFbx(url, options, onProgress, onError);\n    } else if (fileName.endsWith(\"obj\")) {\n      return this.loadObj(url, options, onProgress, onError);\n    } else if (fileName.endsWith(\"stl\")) {\n      return this.loadStl(url, options, onProgress, onError);\n    } else if (fileName.endsWith(\"ifc\")) {\n      return this.loadIfc(url, options, onProgress, onError);\n    } else if (fileName.endsWith(\"shp\")) {\n      return this.loadShp(url, options, onProgress, onError);\n    } else if (fileName.endsWith(\"dae\")) {\n      return this.loadDae(url, options, onProgress, onError);\n    } else {\n      return this.loadGltf(url, options, onProgress, onError);\n    }\n  }\n\n  async loadModel(options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    const url = options.src.toLowerCase();\n    if (url.endsWith(\"fbx\")) {\n      return this.loadFbx(url, options, onProgress, onError);\n    } else if (url.endsWith(\"obj\")) {\n      return this.loadObj(url, options, onProgress, onError);\n    } else if (url.endsWith(\"stl\")) {\n      return this.loadStl(url, options, onProgress, onError);\n    } else if (url.endsWith(\"ifc\")) {\n      return this.loadIfc(url, options, onProgress, onError);\n    } else if (url.endsWith(\"shp\")) {\n      return this.loadShp(url, options, onProgress, onError);\n    } else if (url.endsWith(\"dae\")) {\n      return this.loadDae(url, options, onProgress, onError);\n    } else {\n      return this.loadGltf(url, options, onProgress, onError);\n    }\n  }\n\n  async loadGltf(url: string, options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    const loader = this.getGltfLoader();\n    return new Promise<THREE.Object3D>((resolve, reject) => {\n      if (url.indexOf(\"#\") !== -1) {\n        console.warn(`[Viewer3D] '#' is not allowed in filename ${url}`);\n      }\n      loader.load(url.replace(/#/g, encodeURIComponent(\"#\")), gltf => {\n        const object = gltf.scene;\n        this.applyOptionsAndAddToScene(url, object, options);\n        resolve(object);\n      },\n      onProgress,\n      (event) => {\n        onError && onError(event);\n        reject(event);\n      });\n    });\n  }\n\n  async loadFbx(url: string, options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    const loader = new FBXLoader();\n    return new Promise<THREE.Object3D>((resolve, reject) => {\n      loader.load(url, object => {\n        this.applyOptionsAndAddToScene(url, object, options);\n        resolve(object);\n      },\n      onProgress,\n      (event) => {\n        onError && onError(event);\n        reject(event);\n      });\n    });\n  }\n\n  async loadObj(url: string, options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    const loader = new OBJLoader();\n    const mtlLoader = new MTLLoader();\n    // for now, assume mtl is under the same folder (TODO: refine it later)\n    const mtlUrl = url.replace(\".obj\", \".mtl\");\n    return new Promise<THREE.Object3D>((resolve, reject) => {\n      mtlLoader.load(mtlUrl, material => {\n        material.preload();\n        loader.setMaterials(material);\n        loader.load(url, object => {\n          this.applyOptionsAndAddToScene(url, object, options);\n          resolve(object);\n        },\n        onProgress,\n        (event) => {\n          onError && onError(event);\n          reject(event);\n        });\n      });\n    });\n  }\n\n  async loadStl(url: string, options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    const loader = new STLLoader();\n    return new Promise<THREE.Object3D>((resolve, reject) => {\n      loader.load(url, (geometry: THREE.BufferGeometry) => {\n        const object = new THREE.Mesh(geometry);\n        if (options.src) {\n          object.name = options.src;\n        } else {\n          const i = url.lastIndexOf(\"/\");\n          if (i !== -1) {\n            object.name = url.substr(i + 1);\n          }\n        }\n        this.applyOptionsAndAddToScene(url, object, options);\n        resolve(object);\n      },\n      onProgress,\n      (event) => {\n        onError && onError(event);\n        reject(event);\n      });\n    });\n  }\n\n  async loadIfc(url: string, options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    if (!this.scene) {\n      throw new Error(\"Failed to load!\");\n    }\n    if (!this.ifcLoader) {\n      this.ifcLoader = new IFC.IFCLoader();\n      /**\n       * web-ifc.wasm\n       * wasm is required in order to load ifc file, we'll need to copy:\n       * three/examples/jsm/loaders/ifc/web-ifc.wasm to /public/three/js/libs/ifc/\n       *\n       * TODO: support highlight/select/hide individual object, rather than the entire object:\n       * https://github.com/mrdoob/three.js/pull/21905\n       */\n      const mgr = this.ifcLoader.ifcManager;\n      if (mgr && typeof mgr.setWasmPath === \"function\") {\n        mgr.setWasmPath(\"../three/js/libs/ifc/\");\n      }\n    }\n    const loader = this.ifcLoader;\n    return new Promise<THREE.Object3D>((resolve, reject) => {\n      loader.load(url, (ifcModel: any) => {\n        this.applyOptionsAndAddToScene(url, ifcModel.mesh, options);\n        resolve(ifcModel.mesh);\n      },\n      onProgress,\n      (event: any) => {\n        onError && onError(event);\n        reject(event);\n      });\n    });\n  }\n\n  async loadShp(url: string, options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    if (!this.scene) {\n      throw new Error(\"Failed to load!\");\n    }\n    const loader = new SHPLoader();\n    return new Promise<THREE.Object3D>((resolve, reject) => {\n      loader.load(url, object => {\n        this.applyOptionsAndAddToScene(url, object, options);\n        resolve(object);\n      },\n      onProgress,\n      (event) => {\n        onError && onError(event);\n        reject(event);\n      });\n    });\n  }\n\n  async loadDae(url: string, options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    if (!this.scene) {\n      throw new Error(\"Failed to load!\");\n    }\n    const loader = new ColladaLoader();\n    return new Promise<THREE.Object3D>((resolve, reject) => {\n      loader.load(url, (collada: Collada) => {\n        if (!collada) {\n          const event = new ErrorEvent(\"\");\n          onError && onError(event);\n          reject(event);\n        } else {\n          const object = collada.scene;\n          this.applyOptionsAndAddToScene(url, object, options);\n          resolve(object);\n        }\n      },\n      onProgress,\n      (event) => {\n        onError && onError(event);\n        reject(event);\n      });\n    });\n  }\n\n  async loadPly(url: string, options: Model, onProgress?: (event: ProgressEvent) => void, onError?: (event: ErrorEvent) => void): Promise<THREE.Object3D> {\n    if (!this.scene) {\n      throw new Error(\"Failed to load!\");\n    }\n    const loader = new PLYLoader();\n    return new Promise<THREE.Object3D>((resolve, reject) => {\n      loader.load(url, (geometry: THREE.BufferGeometry) => {\n        const object = new THREE.Mesh(geometry);\n        if (options.src) {\n          object.name = options.src;\n        } else {\n          const i = url.lastIndexOf(\"/\");\n          if (i !== -1) {\n            object.name = url.substr(i + 1);\n          }\n        }\n        this.applyOptionsAndAddToScene(url, object, options);\n        resolve(object);\n      },\n      onProgress,\n      (event) => {\n        onError && onError(event);\n        reject(event);\n      });\n    });\n  }\n\n  /**\n   * Applies options and add object to scene.\n   */\n  private applyOptionsAndAddToScene(url: string, object: THREE.Object3D, options: Model) {\n    const position = options.position || [0, 0, 0];\n    const rotation = options.rotation || [0, 0, 0];\n    const scale = options.scale || [1, 1, 1];\n    const instantiate = options.instantiate;\n    const merge = options.merge;\n    object.position.set(position[0], position[1], position[2]);\n    object.rotation.set(rotation[0] * Math.PI / 180.0, rotation[1] * Math.PI / 180.0, rotation[2] * Math.PI / 180.0);\n    object.scale.set(scale[0], scale[1], scale[2]);\n    if (instantiate) {\n      // load and display first, then do instantiation\n      setTimeout(() => {\n        this.instantiate(object);\n        // If we do instantiate, better to goToHomeView() and regenSky() after instantiate is done,\n        // otherwise, the bounding box could be wrong.\n        // This makes loading take longer time, since we add to scene after instantiate!\n        setTimeout(() => {\n          if (merge) {\n            this.merge(object);\n          }\n          this.addLoadedModelToScene(object, options);\n        }, 0);\n      }, 0);\n    } else if (merge) {\n      setTimeout(() => {\n        this.merge(object);\n        // If we do instantiate, better to goToHomeView() and regenSky() after instantiate is done,\n        // otherwise, the bounding box could be wrong.\n        // This makes loading take longer time, since we add to scene after instantiate!\n        setTimeout(() => this.addLoadedModelToScene(object, options), 0);\n      }, 0);\n    } else {\n      this.addLoadedModelToScene(object, options);\n    }\n  }\n\n  private getGltfLoader() {\n    if (!this.gltfLoader) {\n      this.gltfLoader = new GLTFLoader();\n      const dracoLoader = new DRACOLoader();\n      dracoLoader.setDecoderPath(decoderPath);\n      this.gltfLoader.setDRACOLoader(dracoLoader);\n      /** TODO: 版本升级导致 setDDSLoader 不存在，需用 KHR_texture_basisu 替换 */\n      // this.gltfLoader.setDDSLoader(new DDSLoader())\n    }\n    return this.gltfLoader;\n  }\n\n  /**\n   * Add newly added object to scene.\n   * Also, usually(but not always) we should regenerate sky and go to home view\n   * @param object\n   */\n  private addLoadedModelToScene(object: THREE.Object3D, options: Model) {\n    if (!this.scene) {\n      return;\n    }\n    // Set object.matrixAutoUpdate = matrixAutoUpdate for static or rarely moving objects and manually call\n    // object.updateMatrix() whenever their position/rotation/quaternion/scale are updated.\n    object.matrixAutoUpdate = matrixAutoUpdate;\n    object.updateMatrix();\n    object.traverse(obj => {\n      if (!matrixAutoUpdate && obj.matrixAutoUpdate) {\n        obj.matrixAutoUpdate = matrixAutoUpdate;\n        obj.updateMatrix();\n      }\n      // Below is a workaround to make object transparent when there is opacity < 1 and transprent is false for some data.\n      // It really should be fixed in data side, but to be compatible with these data, let's do it for now!\n      const tryMakeTransparent = (mat: THREE.Material) => {\n        if (mat.opacity < 1.0 && !mat.transparent) {\n          mat.transparent = true;\n        }\n      };\n      if (obj instanceof THREE.Mesh) {\n        if (obj.material instanceof THREE.Material) {\n          tryMakeTransparent(obj.material);\n        } else if (Array.isArray(obj.material)) {\n          obj.material.forEach(mat => {\n            tryMakeTransparent(mat);\n          });\n        }\n      }\n    });\n    this.scene.add(object);\n    const bbox = new THREE.BoxHelper(object);\n    bbox.visible = false;\n    bbox.matrixAutoUpdate = matrixAutoUpdate;\n    if (bbox.material) { // prevent ray from hitting the BoxHelper\n      // @ts-ignore\n      bbox.material = undefined;\n      bbox.userData.selectable = false;\n    }\n\n    this.loadedModels[options.src] = {\n      uuid: object.uuid,\n      bbox\n    };\n    const modelUuids = Object.values(this.loadedModels).map(obj => obj.uuid);\n    const isFirstModel = (!modelUuids || modelUuids.length <= 1);\n    if (isFirstModel) {\n      const ctrl = this.datGui && this.datGui.controls;\n      this.regenSkyOfGradientRamp();\n      if (ctrl && ctrl.showGroundGrid) {\n        this.regenGroundGrid();\n      }\n      this.goToHomeView(); // only go to home view once, when the first model loaded\n    }\n    this.scene.add(bbox);\n\n    if (options.edges) {\n      ObjectUtils.addOutlines(object);\n    }\n\n    this.enableRender();\n  }\n\n  /**\n   * We won't set a opacity directly, because that way will lose model's original opacity value\n   * @param isAdd is add or remove the opacity we added\n   * @param opacity\n   */\n  public addOrRemoveObjectOpacity(isAdd = true, opacity = 0.3) {\n    // store informations into materials, so we can revert them\n    if (!this.savedMaterialsForOpacity) {\n      this.savedMaterialsForOpacity = [];\n    }\n    if (!this.scene) {\n      return;\n    }\n    const scene = this.scene;\n    const materialInfoList:MaterialInfo[] = [];\n    Object.keys(this.loadedModels).forEach(key => {\n      const obj = this.loadedModels[key];\n      if (isAdd) {\n        if (this.savedMaterialsForOpacity!.length > 0) {\n          ObjectUtils.revertObjectOpacityByUuid(scene, obj.uuid, this.savedMaterialsForOpacity!);\n        }\n        const list = ObjectUtils.setObjectOpacityByUuid(scene, obj.uuid, opacity);\n        materialInfoList.push(...list);\n      } else {\n        ObjectUtils.revertObjectOpacityByUuid(scene, obj.uuid, this.savedMaterialsForOpacity!);\n      }\n    });\n    if (isAdd) {\n      this.savedMaterialsForOpacity = materialInfoList;\n    } else {\n      this.savedMaterialsForOpacity = [];\n    }\n    this.enableRender();\n  }\n\n  // resize render area\n  // if no width or height passed in, use window.innerWidth/window.innerHeight instead\n  public resize(width?: number, height?: number) {\n    // handle window resize event\n    const camera = this.camera;\n    if (camera) {\n      this.width = width || window.innerWidth;\n      this.height = height || window.innerHeight;\n      if (camera instanceof THREE.PerspectiveCamera) {\n        camera.aspect = this.width / this.height;\n      } else if (camera instanceof THREE.OrthographicCamera) {\n        camera.left = -this.width / 2;\n        camera.right = this.width / 2;\n        camera.top = this.height / 2;\n        camera.bottom = -this.height / 2;\n      }\n      camera.updateProjectionMatrix();\n      if (this.renderer) {\n        this.renderer.setSize(this.width, this.height);\n      }\n      if (this.css2dRenderer) {\n        this.css2dRenderer.setSize(this.width, this.height);\n      }\n      if (this.composer) {\n        this.composer.setSize(this.width, this.height);\n      }\n      if (this.effectFxaaPass) {\n        // eslint-disable-next-line\n        this.effectFxaaPass.uniforms[\"resolution\"].value.set(1 / this.width, 1 / this.height)\n      }\n    }\n    this.enableRender();\n  }\n\n  private clonedHighlightMaterials(mesh: THREE.Mesh, options: {\n    depthTest?: boolean,\n    highlightColor?: THREE.Color,\n    opacity?: number\n  } = {}): THREE.Material | THREE.Material[] | undefined {\n    if (!mesh || !mesh.material) {\n      return undefined;\n    }\n    const mat = mesh.material;\n    if (Array.isArray(mat) && mat.length > 0) {\n      const newMaterials: Material[] = [];\n      mat.forEach(m => {\n        newMaterials.push(this.clonedHighlightMaterial(m, options));\n      });\n      return newMaterials;\n    } else if (mat instanceof THREE.Material) {\n      return this.clonedHighlightMaterial(mat, options);\n    } else {\n      console.warn(`Invalid material: ${mat}`);\n    }\n    return undefined;\n  }\n\n  private clonedHighlightMaterial(material: Material, options: {\n    depthTest?: boolean,\n    highlightColor?: THREE.Color,\n    opacity?: number\n  } = {}) {\n    const { depthTest = undefined, highlightColor = new THREE.Color(0xff00ff), opacity = 0.7 } = options;\n    // change highlight color here is we don't like it\n    // the original mererial may be used by many objects, we cannot change the original one, thus need to clone\n    const mat = material.clone();\n    if (mat instanceof MeshStandardMaterial) {\n      mat.emissive.set(highlightColor);\n      mat.color.set(highlightColor);\n    } else if (mat instanceof MeshPhongMaterial) {\n      mat.emissive.set(highlightColor);\n      mat.color.set(highlightColor);\n    } else if (mat instanceof MeshBasicMaterial) {\n      mat.color.set(highlightColor);\n    } else if (mat instanceof LineBasicMaterial) {\n      mat.color.set(highlightColor);\n    } else if (mat instanceof MeshLambertMaterial) {\n      mat.color.set(highlightColor);\n    } else {\n      console.error(\"Unsupported Material: \" + (typeof mat).toString());\n    }\n    // it looks better to be transparent (no matter if it is originally transparent)\n    mat.opacity = opacity;\n    mat.transparent = true; // make transparent and so it can visually block other object\n    if (depthTest !== undefined) {\n      // set depthTest to false so that user can always see it\n      mat.depthTest = false;\n      // make sure to be visible for both side\n      mat.side = THREE.DoubleSide;\n    }\n    return mat;\n  }\n\n  /**\n   * Gets intersections by given mouse location.\n   * If no MouseEvent is passed in, use (0, 0) as the raycaster's origin.\n   */\n  private getIntersections(event?: MouseEvent): THREE.Intersection[] {\n    if (!this.raycaster || !this.camera || !this.scene) {\n      return [];\n    }\n\n    let x = 0;\n    let y = 0;\n    if (event) {\n      x = (event.clientX / this.width) * 2 - 1; // convert screen coord to normalrized device coord (NDC), [-1, 1]\n      y = -(event.clientY / this.height) * 2 + 1;\n    }\n    const coords = new THREE.Vector2(x, y);\n    this.raycaster.setFromCamera(coords, this.camera);\n    const objects: THREE.Object3D[] = [];\n    Object.values(this.loadedModels).forEach(obj => {\n      const object = this.scene && this.scene.getObjectByProperty(\"uuid\", obj.uuid);\n      if (object && object.visible) {\n        objects.push(object);\n      }\n    });\n    return this.raycaster.intersectObjects(objects, true) || [];\n  }\n\n  /**\n   * Handles mouse click event\n   */\n  private handleMouseClick(event: MouseEvent) {\n    // when measure is enabled, disable highlight/select feature\n    if (this.measure && !this.measure.isCompleted) {\n      return;\n    }\n    const intersections = this.getIntersections(event);\n    const firstIntersect = intersections.find(intersect => {\n      const object = intersect.object;\n      // exclude invisible objects\n      // exclude non-selectable non-mesh objects, ground, outline, etc. It's kind of complex, but gonna be wired if user can select another object behand a mesh.\n      return object.visible && (object.userData.selectable !== false || object instanceof THREE.Mesh);\n    });\n    let object = (firstIntersect && firstIntersect.object) || undefined;\n    let instanceId;\n    if (object) {\n      if (object.userData.selectable === false) {\n        // If the first intersect object is not selectable (sky, ground, merged mesh, etc.),\n        // don't select anything (don't select the second object, that seems wired).\n        console.log(`[Viewer] object(type: ${object.type}, name: ${object.name}) not selectable!`);\n        object = undefined;\n      } else if (object instanceof THREE.InstancedMesh) {\n        instanceId = (firstIntersect as THREE.Intersection).instanceId;\n        if (this.selectedObject && this.selectedObject.uuid === object.uuid && this.selectedObject.userData.instanceId === instanceId) {\n          // if the same InstancedMesh is selected and with the same instanceId, then deselect it\n          object = undefined;\n        }\n      // donna know why I cannot use \"instanceof IFCModel\" here\n      } else if ((object as any).ifcManager) {\n        // const ifcObj = object as IFCModel;\n        const faceIndex = (firstIntersect && firstIntersect.faceIndex) || -1;\n        instanceId = faceIndex; // for IFCModel, instanceId means faceIndex!!\n        if (this.selectedObject && this.selectedObject.userData.faceIndex === faceIndex) {\n          // if the same IFCModel is selected and with the same instanceId, then deselect it\n          object = undefined;\n        }\n      } else if (this.selectedObject && this.selectedObject.uuid === object.uuid) {\n        // if one object is selected twice, deselect it\n        object = undefined;\n      }\n    }\n    object ? this.selectObject(object, instanceId) : this.clearSelection();\n  }\n\n  private ifcHighlightMaterial = new THREE.MeshPhongMaterial({ color: 0xff00ff, depthTest: false, transparent: true, opacity: 0.3 });\n\n  /**\n   * Select or unselect an object.\n   * It doesn't support selecting more than one objects.\n   * It doesn't support selecting a parent object which doesn't have material itself.\n   * In order to support de-select, we'll need to store some information, we do this via userData:\n   * For InstancedMesh, there are two cases:\n   * 1) One Mesh in InstancedMesh is selected\n   * it adds following to selected object: userData {\n   *   instanceId: number,\n   *   originalMatrix: THREE.Matrix4,\n   *   clonedMesh: THREE.Mesh\n   * }\n   * 2) The whole InstancedMesh is selected. This case is no different from a normal Mesh is selected, so:\n   * For Mesh, it adds: userData {\n   *   originalMaterial: THREE.Material\n   * }\n   * @param object\n   * @param instanceIdOrFaceIndexId pass in instanceId if an InstancedMesh is selected, or faceIndexId for IFCModel\n   * @param depthTest set to false if caller want to make sure user can see it. When an object is\n   * selected by user manually, we don't need to make sure user can see it. While if selection is\n   * made by program, we parbably need to make sure user can see it, in other words, the selected\n   * object won't be blocked by other objects.\n   */\n  public selectObject(object?: THREE.Object3D, instanceIdOrFaceIndexId?: number, depthTest: boolean | undefined = undefined) {\n    // revert last selected object's material if any\n    if (this.selectedObject) {\n      const userData = this.selectedObject.userData;\n      if (userData.instanceId != null && userData.originalMatrix && userData.clonedMesh) {\n        this.scene && this.scene.remove(userData.clonedMesh); // clear the cloned mesh\n        const im = this.selectedObject as THREE.InstancedMesh;\n        im.setMatrixAt(userData.instanceId, userData.originalMatrix); // revert the matrix\n        im.instanceMatrix.needsUpdate = true;\n        im.updateMatrix(); // need to call it since object.matrixAutoUpdate is false\n        delete userData.instanceId;\n        delete userData.originalMatrix;\n\n        // if the cloned object is selected, then just de-select it and return\n        if (object === userData.clonedMesh) {\n          userData.clonedMesh.geometry.dispose();\n          delete userData.clonedMesh;\n          this.selectedObject = undefined;\n          if (this.outlinePass) {\n            this.outlinePass.selectedObjects = [];\n          }\n          return;\n        }\n        userData.clonedMesh.geometry.dispose();\n        delete userData.clonedMesh;\n      } else if (userData.highlightConfigOfModel) {\n        const ifcManager = this.ifcLoader?.ifcManager;\n        if (ifcManager) {\n          const cfg = userData.highlightConfigOfModel;\n          ifcManager.removeSubset(cfg.modelID);\n        }\n        this.ifcHighlightMaterial.opacity = 0; // completely hide it\n        delete userData.highlightConfigOfModel;\n        delete userData.faceIndex;\n      } else if (userData.originalMaterial) {\n        if (this.selectedObject.material) {\n          // manually dispose it according to https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects\n          const material = this.selectedObject.material;\n          if (Array.isArray(material)) {\n            material.forEach(m => m.dispose());\n          } else if (material instanceof THREE.Material) {\n            material.dispose();\n          }\n        }\n        this.selectedObject.material = userData.originalMaterial;\n        delete userData.originalMaterial; // clean up\n      }\n      this.selectedObject = undefined;\n      if (this.outlinePass) {\n        this.outlinePass.selectedObjects = [];\n      }\n    }\n    if (!this.scene || !object) {\n      return;\n    }\n    if (object instanceof THREE.InstancedMesh && instanceIdOrFaceIndexId != null) {\n      const im = object as THREE.InstancedMesh;\n      const originalMatrix = new THREE.Matrix4();\n      const hideMatrix = new THREE.Matrix4();\n      hideMatrix.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0); // this matrix hides an object\n      im.getMatrixAt(instanceIdOrFaceIndexId, originalMatrix);\n      this.selectedObject = object;\n      if (this.outlinePass) {\n        this.outlinePass.selectedObjects = [object];\n      }\n\n      // Here is the example to select InstancedMesh, which is to call setColorAt()\n      // https://threejs.org/examples/?q=instanc#webgl_instancing_raycast\n      // While, it sounds like only support MeshPhongMaterial. So here, we'll clone\n      // a mesh with highlighted color to replace the original instance in InstancedMesh\n      const clonedMaterial = this.clonedHighlightMaterials(object, { depthTest });\n      if (clonedMaterial) {\n        // clone a new mesh for the selected instance\n        const clonedMesh = new THREE.Mesh(im.geometry.clone(), clonedMaterial);\n        clonedMesh.applyMatrix4(object.matrixWorld.multiply(originalMatrix));\n        clonedMesh.matrixWorldNeedsUpdate = true;\n        clonedMesh.name = \"Cloned mesh for highlighting\";\n        // hide the original mesh by its matrix\n        const matrix = originalMatrix.clone();\n        matrix.multiplyMatrices(originalMatrix, hideMatrix);\n        im.setMatrixAt(instanceIdOrFaceIndexId, matrix);\n        im.instanceMatrix.needsUpdate = true;\n        im.updateMatrix(); // need to call it since object.matrixAutoUpdate is false\n        this.selectedObject.userData.instanceId = instanceIdOrFaceIndexId; // store some instanceId so highlight can be reverted\n        this.selectedObject.userData.originalMatrix = originalMatrix;\n        this.selectedObject.userData.clonedMesh = clonedMesh;\n        this.scene.add(clonedMesh); // add it to scene temporaly\n      }\n    } else if ((object as any).ifcManager && instanceIdOrFaceIndexId != null) {\n      const ifcObj = object as any; // IFCModel;\n      const ifcManager = this.ifcLoader?.ifcManager;\n      const faceIndex = instanceIdOrFaceIndexId;\n      if (faceIndex >= 0 && ifcManager) {\n        const geometry = ifcObj.geometry;\n        const id = ifcManager.getExpressId(geometry, faceIndex);\n        const scene = this.scene;\n        if (id && scene) {\n          const modelID = ifcObj.modelID;\n          // HighlightConfigOfModel\n          const cfg = {\n            modelID,\n            ids: [id],\n            scene,\n            removePrevious: true,\n            material: this.ifcHighlightMaterial\n          };\n          const subset = ifcManager.createSubset(cfg) as THREE.Object3D;\n          if (subset) {\n            // save HighlightConfigOfModel to userData, so it can be removed when unselect\n            subset.userData.highlightConfigOfModel = cfg;\n            subset.userData.faceIndex = faceIndex;\n            this.ifcHighlightMaterial.opacity = 0.3; // make highlight material visible\n            const props = ifcManager.getItemProperties(modelID, id, true);\n            console.log(\"Properties\", props);\n            this.selectedObject = subset;\n          } else {\n            console.warn(`[Viewer3D] Failed to createSubset for ifc modelID: ${modelID}, id: ${id}`);\n          }\n        }\n      }\n    } else {\n      // save the original material, so we can reverit it back when deselect\n      const clonedMaterial = this.clonedHighlightMaterials(object as THREE.Mesh, { depthTest });\n      if (clonedMaterial) {\n        this.selectedObject = object;\n        this.selectedObject.userData.originalMaterial = this.selectedObject.material;\n        this.selectedObject.material = clonedMaterial;\n        if (this.outlinePass) {\n          this.outlinePass.selectedObjects = [object];\n        }\n      }\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Clears the current selection\n   */\n  public clearSelection() {\n    this.selectObject(); // simply select nothing\n  }\n\n  /**\n   * Make camera fly to objects\n   */\n  public flyToObjects(objects: THREE.Object3D[]) {\n    if (!objects || objects.length === 0 || !this.camera) {\n      return;\n    }\n    const eye = new THREE.Vector3();\n    const look = new THREE.Vector3();\n    Viewer3DUtils.getCameraPositionByObjects(objects, this.camera, eye, look);\n    this.flyTo(eye, look);\n  }\n\n  /**\n   * Make camera fly to an object\n   */\n  public flyToObject(object: THREE.Object3D) {\n    this.flyToObjects([object]);\n  }\n\n  /**\n   * Flies to current selected object if any\n   */\n  public flyToSelectedObject() {\n    if (!this.selectedObject) {\n      return;\n    }\n    let obj = this.selectedObject;\n    // if part of InstancedMesh is selected, fly to that part rather than fly to the whole InstancedMesh\n    if (obj instanceof THREE.InstancedMesh && obj.userData.clonedMesh) {\n      obj = obj.userData.clonedMesh;\n    }\n    this.flyToObject(obj);\n  }\n\n  /**\n   * Make camera fly to target position with given lookAt position\n   * @param position camera's target position\n   * @param lookAt camera's new lookAt position\n   */\n  public flyTo(position: THREE.Vector3, lookAt: THREE.Vector3, onCompleteCallback?: () => void) {\n    const camera = this.camera;\n    const controls = this.controls;\n    if (!camera || !controls) {\n      return;\n    }\n    if (position.equals(lookAt)) {\n      console.error(\"[Viewer3D] camera position and lookAt cannot be the same!\");\n      return;\n    } else if (isNaN(position.x) || isNaN(position.y) || isNaN(position.z) || isNaN(lookAt.x) || isNaN(lookAt.y) || isNaN(lookAt.z)) {\n      console.error(\"[Viewer3D] invalid position or lookAt!\");\n      return;\n    }\n    // If distance between position and lookAt is too near or far (according to camera's near/far settings).\n    // need to adjust 'position' to fit it.\n    const distance = position.distanceTo(lookAt);\n    if (distance < camera.near) {\n      // the new position is just farer than original position\n      position = position.clone().sub(lookAt).normalize().multiplyScalar(camera.near * 1.1);\n      console.warn(\"[Viewer3D] camera could be too close to see the object!\");\n    } else if (distance > camera.far) {\n      // the new position is just closer than original position\n      position = position.clone().sub(lookAt).normalize().multiplyScalar(camera.far * 0.9);\n      console.warn(\"[Viewer3D] camera could be too far to see the object!\");\n    }\n\n    const update = (p?: THREE.Vector3, t?: THREE.Vector3) => {\n      t && camera.lookAt(t);\n      p && camera.position.set(p.x, p.y, p.z);\n      t && controls.target.set(t.x, t.y, t.z);\n      controls.update();\n      this.enableRender();\n    };\n\n    // there are two steps\n    // 1) change camera's lookAt point in x miliseconds\n    // 2) change camera's position in y miliseconds\n    const t = controls.target.clone(); // have to copy one, otherwise TWEEN breaks the passed in object!\n    const tween1 = new TWEEN.Tween(t);\n    tween1.to(lookAt, 500);\n    tween1.easing(TWEEN.Easing.Sinusoidal.InOut);\n    tween1.onUpdate(() => {\n      update(undefined, t);\n    });\n    tween1.onComplete(() => {\n      const p = camera.position.clone();\n      const tween2 = new TWEEN.Tween(p);\n      tween2.to(position, 1500);\n      tween2.easing(TWEEN.Easing.Sinusoidal.InOut);\n      tween2.onUpdate(() => {\n        update(p, lookAt);\n      });\n      tween2.onComplete(() => {\n        update(p, lookAt);\n        onCompleteCallback && onCompleteCallback();\n      });\n      this.tween = tween2;\n      tween2.start();\n    });\n    this.tween = tween1;\n    tween1.start();\n  }\n\n  public goToHomeView() {\n    const proj = store.state.activeProject;\n    const home = proj && proj.camera;\n    const position = home && ProjectManager.arrayToVector3(home.eye);\n    const target = home && ProjectManager.arrayToVector3(home.look);\n    if (position && target) {\n      this.flyTo(position, target);\n    } else if (this.scene) {\n      // if home.eye not defined in project, then go to 'Front'\n      const eye = new THREE.Vector3();\n      const look = new THREE.Vector3();\n      Viewer3DUtils.getCameraPositionByObjectUuids(this.scene, Object.values(this.loadedModels).map(obj => obj.uuid), Views.Front, eye, look);\n      // do not allow camera's target and position is the same point!!\n      if (!eye.equals(look)) {\n        this.flyTo(eye, look);\n      }\n    }\n  }\n\n  /**\n   * Regenerates skybox according to models' location and size\n   */\n  private regenSkyOfGradientRamp() {\n    if (!this.scene) {\n      return;\n    }\n    if (this.skyOfGradientRamp) {\n      this.skyOfGradientRamp.geometry.dispose();\n      (this.skyOfGradientRamp.material as THREE.Material).dispose();\n      this.scene.remove(this.skyOfGradientRamp);\n      this.skyOfGradientRamp.clear();\n      this.skyOfGradientRamp = undefined;\n    }\n    const modelUuids = Object.values(this.loadedModels).map(obj => obj.uuid);\n    if (modelUuids) {\n      const proj = store.state.activeProject;\n      const home = proj && proj.camera;\n      const position = home && ProjectManager.arrayToVector3(home.eye);\n      const target = home && ProjectManager.arrayToVector3(home.look);\n      if (position && target) {\n        const p1 = position;\n        const p2 = target;\n        const bbox = new THREE.Box3();\n        bbox.expandByPoint(new THREE.Vector3(p1.x, p1.y, p1.z));\n        bbox.expandByPoint(new THREE.Vector3(p2.x, p2.y, p2.z));\n        this.skyOfGradientRamp = SkyboxUtils.createSkyOfGradientRampByBoundingBox(bbox);\n      } else {\n        this.skyOfGradientRamp = SkyboxUtils.createSkyOfGradientRampByObjectsInScene(this.scene, modelUuids);\n      }\n      this.scene.add(this.skyOfGradientRamp);\n    }\n  }\n\n  /**\n   * Regenerates ground grid according to models' location and size\n   */\n  private regenGroundGrid() {\n    if (!this.scene) {\n      return;\n    }\n    if (this.groundGrid) {\n      this.groundGrid.geometry.dispose();\n      (this.groundGrid.material as THREE.Material).dispose();\n      this.scene.remove(this.groundGrid);\n    }\n    const modelUuids = Object.values(this.loadedModels).map(obj => obj.uuid);\n    if (modelUuids) {\n      const proj = store.state.activeProject;\n      const home = proj && proj.camera;\n      const center = home && ProjectManager.arrayToVector3(home.look);\n      center && (center.y = 0);\n      // TODO: will need to consider ground size according to models' size\n      this.groundGrid = GroundUtils.createGroundGrid(undefined, undefined, center);\n      this.scene.add(this.groundGrid);\n    }\n  }\n\n  /**\n   * Enables or disable Composer\n   */\n  public enableComposer(enable: boolean) {\n    if (!this.scene || !this.camera || !this.renderer) {\n      return;\n    }\n\n    this.composerEnabled = enable;\n    if (enable && !this.composer) {\n      this.composer = new EffectComposer(this.renderer);\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Enables or disable RenderPass\n   */\n  public enableRenderPass(enable: boolean) {\n    if (!this.scene || !this.camera || !this.renderer || !this.composer) {\n      return;\n    }\n\n    if (enable && !this.renderPass) {\n      const pass = new RenderPass(this.scene, this.camera);\n      pass.setSize(this.width, this.height);\n      this.composer.addPass(pass);\n      this.renderPass = pass;\n    }\n    if (this.renderPass) {\n      this.renderPass.enabled = enable;\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Enables or disable FxaaPass\n   */\n  public enableFxaaPass(enable: boolean) {\n    if (!this.scene || !this.camera || !this.renderer || !this.composer) {\n      return;\n    }\n\n    if (enable && !this.effectFxaaPass) {\n      const pass = new ShaderPass(FXAAShader);\n      // eslint-disable-next-line\n      pass.uniforms[\"resolution\"].value.set(1 / this.width, 1 / this.height)\n      pass.setSize(this.width, this.height);\n      pass.renderToScreen = true;\n      this.composer.addPass(pass);\n      this.effectFxaaPass = pass;\n    }\n    if (this.effectFxaaPass) {\n      this.effectFxaaPass.enabled = enable;\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Enables or disable SAOPass\n   */\n  public enableSaoPass(enable: boolean) {\n    if (!this.scene || !this.camera || !this.renderer || !this.composer) {\n      return;\n    }\n\n    if (enable && !this.saoPass) {\n      const pass = new SAOPass(this.scene, this.camera, false, true, new THREE.Vector2(1 / this.width, 1 / this.height));\n      pass.setSize(this.width, this.height);\n      // pass.renderToScreen = true\n      // pass.resolution.set(1024, 1024)\n      pass.params.output = 0;\n      pass.params.saoBias = 0.5; // -1 - 1\n      pass.params.saoIntensity = 0.00005; // 0 - 1\n      pass.params.saoScale = 5; // 0 - 10\n      pass.params.saoKernelRadius = 40; // 1 - 100\n      pass.params.saoMinResolution = 0; // 0 - 1\n      // pass.params.saoBlur = true\n      // pass.params.saoBlurRadius = 8 // 0 - 200\n      // pass.params.saoBlurStdDev = 4 // 0.5 - 150\n      // pass.params.saoBlurDepthCutoff = 0.01 // 0 - 0.1\n      this.composer.addPass(pass);\n      this.saoPass = pass;\n    }\n    if (this.saoPass) {\n      this.saoPass.enabled = enable;\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Enables or disable SSAOPass\n   */\n  public enableSsaoPass(enable: boolean) {\n    if (!this.scene || !this.camera || !this.renderer || !this.composer) {\n      return;\n    }\n\n    if (enable && !this.ssaoPass) {\n      const pass = new SSAOPass(this.scene, this.camera, this.width, this.height);\n      pass.kernelRadius = 16;\n      pass.minDistance = 0.005; // 0.001 - 0.02\n      pass.maxDistance = 0.1; // 0.01 - 0.3\n      // pass.output = 0 // 'Default': 0, 'SSAO': 1, 'Blur': 2, 'Beauty': 3, 'Depth': 4, 'Normal': 5\n      this.composer.addPass(pass);\n      this.ssaoPass = pass;\n    }\n    if (this.ssaoPass) {\n      this.ssaoPass.enabled = enable;\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Enables or disable OutlinePass\n   */\n  public enableOutlinePass(enable: boolean) {\n    if (!this.scene || !this.camera || !this.renderer || !this.composer) {\n      return;\n    }\n\n    if (enable && !this.outlinePass) {\n      const pass = new OutlinePass(new THREE.Vector2(this.width, this.height), this.scene, this.camera);\n      pass.edgeStrength = 3;\n      pass.edgeGlow = 0;\n      pass.edgeThickness = 2;\n      pass.pulsePeriod = 0; // 0: don't pulse\n      // outlinePass.usePatternTexture =\n      pass.visibleEdgeColor.set(0xff0000);\n      pass.hiddenEdgeColor.set(0xffa080);\n      this.composer.addPass(pass);\n      this.outlinePass = pass;\n    }\n    if (this.outlinePass) {\n      this.outlinePass.enabled = enable;\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Enables or disable SSAARenderPass\n   */\n  public enableSsaaPass(enable: boolean) {\n    if (!this.scene || !this.camera || !this.renderer || !this.composer) {\n      return;\n    }\n\n    if (enable && !this.ssaaRenderPass) {\n      const pass = new SSAARenderPass(this.scene, this.camera, 0xffffff, 0);\n      this.composer.addPass(pass);\n      this.ssaaRenderPass = pass;\n    }\n    if (this.ssaaRenderPass) {\n      this.ssaaRenderPass.enabled = enable;\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Enables or disable BloomPass\n   */\n  public enableBloomPass(enable: boolean) {\n    if (!this.scene || !this.camera || !this.renderer || !this.composer) {\n      return;\n    }\n\n    if (enable && !this.bloomPass) {\n      const pass = new BloomPass(\n        1, // strength\n        25, // kernel size\n        4 // sigma ?\n      );\n      pass.renderToScreen = true; // usually set it to true if it is the last pass\n      this.composer.addPass(pass);\n      this.bloomPass = pass;\n    }\n    if (this.bloomPass) {\n      this.bloomPass.enabled = enable;\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Enables or disable UnrealBloomPass\n   */\n  public enableUnrealBloomPass(enable: boolean) {\n    if (!this.scene || !this.camera || !this.renderer || !this.composer) {\n      return;\n    }\n\n    if (enable && !this.unrealBloomPass) {\n      const pass = new UnrealBloomPass(new THREE.Vector2(this.width, this.height), 1, 0, 0);\n      pass.threshold = 0;\n      pass.strength = 0.5;\n      pass.radius = 0;\n      this.composer.addPass(pass);\n      this.unrealBloomPass = pass;\n    }\n    if (this.unrealBloomPass) {\n      this.unrealBloomPass.enabled = enable;\n    }\n    this.enableRender();\n  }\n\n  /**\n   * Enable section.\n   * Currently, it only implemented local(object) box section.\n   */\n  public enableSection(sectionMode: string = \"ObjectsBoxSection\") {\n    if (!this.scene || !this.camera || !this.renderer || !this.controls) {\n      return;\n    }\n    if (this.section) {\n      this.disableSection();\n    }\n    const modelUuids = Object.values(this.loadedModels).map(obj => obj.uuid);\n    if (!modelUuids || modelUuids.length < 1) {\n      console.warn(\"No object to section!\");\n      return;\n    }\n    this.renderer.localClippingEnabled = true;\n    if (sectionMode === \"ObjectsBoxSection\") {\n      this.section = new ObjectsBoxSection(modelUuids, this.scene, this.camera, this.renderer, this.controls);\n      this.section.open();\n    } else if (sectionMode === \"PlaneSection\") {\n      this.section = new ObjectsPlaneSection(modelUuids, this.scene, this.camera, this.renderer, this.controls);\n      this.section.open();\n    }\n    this.enableRender();\n  }\n\n  public disableSection() {\n    if (!this.renderer || !this.section) {\n      return;\n    }\n    // It seems okay to keep localClippingEnabled to be true for ever...\n    // this.renderer.localClippingEnabled = false\n    this.section.close();\n    this.section = undefined;\n    this.enableRender();\n  }\n\n  public enableMeasure(mode: MeasureMode) {\n    if (!this.scene || !this.camera || !this.renderer || !this.controls) {\n      return;\n    }\n    if (this.measure) {\n      this.disableMeasure();\n    }\n    this.measure = new Measure(this.renderer, this.scene, this.camera, this.controls, mode, this.settings);\n    this.measure.open();\n  }\n\n  public disableMeasure() {\n    if (!this.renderer || !this.measure) {\n      return;\n    }\n    if (this.measure) {\n      this.measure.close();\n    }\n    this.measure = undefined;\n  }\n\n  public enableWebCam() {\n    if (!this.scene) {\n      return;\n    }\n\n    // for now, this is a demo. Just create a 5x4 plane and put it somewhere\n    if (!this.webcam) {\n      this.webcam = new WebCam();\n    }\n    if (!this.webcamPlane) {\n      this.webcamPlane = this.webcam.createWebCamPlane();\n      this.webcamPlane.position.set(10, 2, 0);\n    }\n    this.scene.add(this.webcamPlane);\n  }\n\n  public disableWebCam() {\n    if (!this.scene) {\n      return;\n    }\n    if (this.webcamPlane) {\n      this.webcamPlane.geometry.dispose();\n      (this.webcamPlane.material as THREE.Material).dispose();\n      this.scene.remove(this.webcamPlane);\n    }\n  }\n\n  /**\n   * Instatiates leaf nodes of given object.\n   * If objects' geometry and material are the same, they can be instanced.\n   * @param object\n   */\n  private instantiate(object: THREE.Object3D) {\n    new InstantiateHelper(object).instantiate();\n  }\n\n  /**\n   * Merges leaf nodes of given object.\n   * If objects' materials are the same, they can be merged.\n   * @param object\n   */\n  private merge(object: THREE.Object3D) {\n    new MergeHelper(object).merge();\n  }\n\n  /**\n   * Watches specified property of 'this' class\n   */\n  watch = (propertyName: string, callback: any) => {\n    if (propertyName in this) {\n      let old = this[propertyName];\n      Object.defineProperty(this, propertyName, {\n        set: function(val) {\n          const o = old;\n          old = val;\n          callback(val, o, this);\n        },\n        get: function() {\n          return old;\n        }\n      });\n    }\n  };\n\n  /**\n   * Calls addEventListener of a node.\n   * This makes sure to removeEventListener properly\n   * @param node window, dom element, etc.\n   * @param type 'change', 'keydown', etc.\n   * @param func event callback\n   */\n  private addEvent(node: any, type: string, func: any) {\n    node.addEventListener(type, func);\n    this.events.push({ node, type, func });\n  }\n\n  /**\n   * Updates project settings\n   */\n  public updateProjectSettings(settings: SettingsType) {\n    this.settings = settings;\n\n    const updateCameraSettings = (c: THREE.PerspectiveCamera | THREE.OrthographicCamera | undefined, cs: CameraSettings) => {\n      if (c && cs) {\n        c.near = cs.near;\n        c.far = cs.far;\n        c.updateProjectionMatrix();\n      }\n    };\n    updateCameraSettings(this.perspectiveCamera, this.settings.camera);\n    updateCameraSettings(this.orthoCamera, this.settings.camera);\n    this.enableRender(10);\n  }\n}\n","import * as THREE from \"three\";\nimport { Component, Vue, Prop } from \"vue-property-decorator\";\nimport { cloneDeep } from \"lodash\";\nimport { Message } from \"element-ui\";\nimport { ProjectManager, Project, Model } from \"@/core/ProjectManager\";\nimport { Settings as SettingsType, defaultSettings, settingStoreKeyName } from \"@/components/projectSettingsPanel/ProjectSettingsDef\";\nimport { Types } from \"@/store/index\";\nimport { VNode } from \"vue/types/umd\";\nimport BimTree from \"@/components/bim-tree/BimTree\";\nimport BottomBar from \"@/components/bottom-bar/BottomBar\";\nimport CoordinateAxesViewport from \"@/core/axes/CoordinateAxesViewport\";\nimport MaterialManager from \"@/components/materials/MaterialManager\";\nimport ProgressBar from \"@/components/progress-bar/ProgressBar\";\nimport ProjectSettingsPanel from \"@/components/projectSettingsPanel/ProjectSettingsPanel\";\nimport PropertyPanel from \"@/components/property/PropertyPanel\";\nimport settingPanelStyle from \"@/components/projectSettingsPanel/ProjectSettings.module.scss\";\nimport SnapshotPanel from \"../snapshot/SnapshotPanel\";\nimport styles from \"./Viewer3DContainer.module.scss\";\nimport Viewer3D from \"@/core/Viewer3D\";\n\nexport interface Viewer3DContainerProps {\n  projectId: string;\n}\n\nexport enum EventStatus {\n  FAILED = 0,\n  RUNNING = 1,\n  SUCCEEDED = 2\n}\n\n@Component\nexport default class Viewer3DContainer extends Vue {\n  @Prop({ required: true }) projectId!: Viewer3DContainerProps[\"projectId\"];\n\n  selectedObjId = \"\";\n  viewer?: Viewer3D;\n  axesViewport?: CoordinateAxesViewport;\n  onLoading = false;\n  loadingProgress = 0;\n  loadingText = \"\";\n  projectSettings?:SettingsType;\n  showProjectSettingPanel = false;\n\n  mounted() {\n    this.initProjectSettings();\n    const viewerContainer = (this.$refs.viewerContainer) as HTMLDivElement;\n    const viewer = new Viewer3D(window.innerWidth, window.innerHeight, this.projectSettings); // full screen\n    viewer.animate();\n    this.viewer = viewer;\n    if (viewer.renderer) {\n      viewerContainer.appendChild(viewer.renderer.domElement);\n      ProjectManager.getSampleProjects().then(projects => {\n        const proj = projects.find((p: Project) => p.id === this.projectId);\n        if (proj) {\n          this.$store.commit(Types.MUTATION_ACTIVE_PROJECT, proj);\n          this.loadSampleProjectModels(viewer, proj);\n        } else {\n          Message.error(`Failed to find project for projectId: ${this.projectId}`);\n        }\n      });\n    }\n    if (viewer.css2dRenderer) {\n      viewer.css2dRenderer.domElement.classList.add(\"css2dRenderer\");\n      viewerContainer.appendChild(viewer.css2dRenderer.domElement);\n    }\n    this.initStats(viewer);\n    this.initAxesRenderer(viewer);\n\n    // handle window resize event\n    window.addEventListener(\"resize\", () => {\n      viewer && viewer.resize(window.innerWidth, window.innerHeight);\n    }, false);\n\n    viewer.watch(\"selectedObject\", (obj: any) => {\n      if (obj?.userData?.gltfExtensions) {\n        const extensions = obj?.userData?.gltfExtensions;\n        const objId = extensions?.objectId?.Value || extensions?.elementId?.Value;\n        this.selectedObjId = objId || \"\";\n      } else if (obj?.uuid) {\n        this.selectedObjId = obj.uuid;\n      } else {\n        this.selectedObjId = \"\";\n      }\n    });\n  }\n\n  initStats(viewer: Viewer3D) {\n    const stats = viewer.stats as any;\n    if (stats) {\n      stats.setMode(0); // 0: fps, 1: ms\n      const statsOutput = (this.$refs.statsOutput) as HTMLDivElement;\n      statsOutput.appendChild(stats.domElement);\n    }\n  }\n\n  initProjectSettings() {\n    const key = settingStoreKeyName + \"_\" + this.projectId;\n    const savedSettings: SettingsType = localStorage.getItem(key) && JSON.parse(localStorage.getItem(key) || \"\");\n    const result = cloneDeep(defaultSettings);\n    if (savedSettings) {\n      Object.assign(result, cloneDeep(savedSettings));\n    }\n    this.projectSettings = result;\n  }\n\n  beforeDestroy() {\n    if (this.viewer) {\n      this.viewer.beforeDestroy();\n      this.viewer = undefined;\n    }\n    if (this.axesViewport) {\n      this.axesViewport.dispose();\n      this.axesViewport = undefined;\n    }\n    this.selectedObjId = \"\";\n    this.loadingText = \"\";\n  }\n\n  initAxesRenderer(viewer: Viewer3D) {\n    const axesDiv = (this.$refs.axesRenderer) as HTMLDivElement;\n    const cav = new CoordinateAxesViewport(axesDiv.clientWidth, axesDiv.clientHeight);\n    if (cav.renderer) {\n      axesDiv.appendChild(cav.renderer.domElement);\n      cav.setHostRenderer(viewer);\n    }\n    this.axesViewport = cav;\n  }\n\n  loadSampleProjectModels(viewer: Viewer3D, proj: Project) {\n    if (!viewer || !proj) {\n      console.log(\"[VC] Failed to load a project!\");\n      return;\n    }\n    if (!proj.models || proj.models.length < 1) {\n      console.log(\"[VC] No models to load!\");\n      return;\n    }\n    this.onLoading = false;\n    this.loadingProgress = 0;\n    let counter = 0; // to indicate how many models are loading\n    for (let i = 0; i < proj.models.length; ++i) {\n      const model = proj.models[i];\n      if (model.visible === false) {\n        continue; // skip when visible is false\n      }\n      counter++;\n      this.onLoading = true;\n      viewer.loadModel(model, (event) => {\n        this.loadingText = `${proj.name}(${i + 1}/${proj.models.length})`;\n        this.loadingProgress = Math.floor(event.loaded * 100 / event.total);\n      }, (event) => {\n        Message.error(\"Failed to load \" + model.src + \". \" + event.message);\n        this.onLoading = (--counter > 0);\n      }).then(() => {\n        this.onLoading = (--counter > 0);\n      });\n    }\n  }\n\n  getEventStatusIcon(status: number) {\n    let icon = \"\";\n    switch (status) {\n      case EventStatus.RUNNING:\n        icon = \"el-icon-loading\";\n        break;\n      case EventStatus.FAILED:\n        icon = \"el-icon-warning\";\n        break;\n      case EventStatus.SUCCEEDED:\n        icon = \"el-icon-success\";\n        break;\n      default:\n        icon = \"el-icon-loading\";\n        break;\n    }\n    return icon;\n  }\n\n  toggleProjectSettingPanel(val: boolean) {\n    this.$store.commit(Types.MUTATION_SHOW_PROJECT_SETTINGS_PANEL, val);\n  }\n\n  /**\n   * Enables user to upload a model file from local disk.\n   * TODO:\n   * - Enable user to set the model's position, rotation, scale, etc.\n   * - Enable to store the model to server, so user can see it next time open the same project.\n   */\n  uploadModelFile(viewer?: Viewer3D) {\n    return (event: any) => {\n      const files = event.target.files;\n      if (!files || files.length <= 0) {\n        return;\n      }\n      const file = files[0];\n      // const url = URL.createObjectURL(file);\n      this.onLoading = true;\n      const options: Model = {\n        src: file.name,\n        position: [0, 0, 0],\n        rotation: [0, 0, 0],\n        scale: [1, 1, 1],\n        instantiate: false,\n        merge: false\n      };\n      viewer && viewer.loadLocalModel(options, (event) => {\n        this.loadingText = `Loading ${file.name}`;\n        this.loadingProgress = Math.floor(event.loaded * 100 / event.total);\n      }, (event) => {\n        Message.error(\"Failed to load \" + file.name + \". \" + event.message);\n        this.onLoading = false;\n      }).then(() => {\n        this.onLoading = false;\n      });\n    };\n  }\n\n  protected render(): VNode {\n    return (\n      <div ref=\"viewerContainer\" class={styles.viewerContainer}>\n        <div ref=\"statsOutput\" class={styles.statsOutput} />\n        <BimTree viewer={ this.viewer } />\n        <PropertyPanel scene={ this.viewer?.scene } objId={ this.selectedObjId } class={styles.propertyPanel} />\n        <MaterialManager viewer={ this.viewer } />\n        <div ref=\"axesRenderer\" id=\"axesRenderer\" class={styles.axesRenderer} />\n        <SnapshotPanel canvas={this.viewer?.renderer?.domElement} />\n        <BottomBar viewer={ this.viewer } />\n        {/* Used to enable user from uploading a local model file to scene. The model won't be saved to server for now */}\n        <input type=\"file\" id=\"uploadModelFile\" style=\"display: none\" onChange={ this.uploadModelFile(this.viewer) } />\n        {this.onLoading && <ProgressBar text={this.loadingText} progressValue={this.loadingProgress} />}\n        <el-dialog\n          title=\"Project settings\"\n          width=\"400px\"\n          class={settingPanelStyle.pSettingDialog}\n          visible={this.$store.getters[Types.GETTER_SHOW_PROJECT_SETTINGS_PANEL]}\n          destroyOnClose={true}\n          on={{ \"update:visible\": (val: boolean) => { this.toggleProjectSettingPanel(val) } }}>\n          <ProjectSettingsPanel projectId={this.projectId} on={{ \"update:visible\": (val: boolean) => { this.toggleProjectSettingPanel(val) } }} viewer={this.viewer}></ProjectSettingsPanel>\n        </el-dialog>\n      </div>\n    );\n  }\n}\n","import { Component, Vue } from \"vue-property-decorator\";\nimport { VNode } from \"vue/types/umd\";\nimport styles from \"./projectPanel.module.scss\";\nimport Viewer3DContainer from \"../viewer-container/Viewer3DContainer\";\n\nexport interface ProjectPanelProps {\n}\n\n@Component\nexport default class ProjectPanel extends Vue {\n  projectId?: string;\n\n  mounted() {\n  }\n\n  getProjectId() {\n    this.projectId = this.$router.currentRoute.params.projectId;\n    if (!this.projectId) {\n      console.error(\"[PP] Invalid projectId!\");\n      return;\n    }\n    return this.projectId;\n  }\n\n  protected render(): VNode {\n    return (\n      <div ref=\"projectPanel\" class={styles.projectPanel}>\n        <Viewer3DContainer projectId={this.getProjectId()}></Viewer3DContainer>\n      </div>\n    );\n  }\n}\n","import Projects from \"@/views/projects/Projects\";\nimport ProjectPanel from \"@/components/projects/ProjectPanel\";\nimport Vue from \"vue\";\nimport VueRouter, { RouteConfig } from \"vue-router\";\n\nVue.use(VueRouter);\n\nconst routes: Array<RouteConfig> = [\n  {\n    path: \"/projects\",\n    name: \"Projects\",\n    component: Projects\n  },\n  {\n    path: \"/projects/:projectId\",\n    name: \"ProjectPanel\",\n    component: ProjectPanel\n  },\n  {\n    path: \"/\",\n    name: \"Index\",\n    component: Projects\n  }\n];\n\nconst router = new VueRouter({\n  routes\n});\n\nexport default router;\n","import { PostmateManager } from \"./core/postmate/PostmateManager\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\nimport Vue from \"vue\";\n\nimport \"./plugins/element.ts\";\nimport axios from \"axios\";\n\nVue.config.productionTip = false;\n\nstartApp();\n\nasync function startApp() {\n  Vue.config.productionTip = false;\n\n  PostmateManager.instance(); // initialize PostmateManager\n  await loadConfig(); // need to run later code after this is done\n\n  new Vue({\n    router,\n    store,\n    render: h => h(App)\n  }).$mount(\"#app\");\n}\n\nasync function loadConfig() {\n  try {\n    const baseURL = process.env.BASE_URL;\n    const configFile = \"config/base.json\";\n    const res = await axios.get(configFile, { baseURL });\n    Vue.prototype.$config = res.data;\n  } catch (e) {\n    console.error(e);\n  }\n}\n","import Vue from \"vue\";\nimport { Aside, Button, Card, Checkbox, Container, Dialog, Divider, Dropdown, DropdownItem, DropdownMenu, Footer, Form, FormItem, Header, Input, Main, Popover, Radio, RadioGroup, Table, TableColumn, Tree, Upload, Tabs, TabPane, Slider, Select, Option, ColorPicker } from \"element-ui\";\n\nVue.use(Aside);\nVue.use(Button);\nVue.use(Card);\nVue.use(Checkbox);\nVue.use(ColorPicker);\nVue.use(Container);\nVue.use(Dialog);\nVue.use(Divider);\nVue.use(Dropdown);\nVue.use(DropdownMenu);\nVue.use(DropdownItem);\nVue.use(Footer);\nVue.use(Form);\nVue.use(FormItem);\nVue.use(Header);\nVue.use(Input);\nVue.use(Main);\nVue.use(Popover);\nVue.use(Radio);\nVue.use(RadioGroup);\nVue.use(Table);\nVue.use(TableColumn);\nVue.use(Tree);\nVue.use(Upload);\nVue.use(Tabs);\nVue.use(TabPane);\nVue.use(Slider);\nVue.use(Select);\nVue.use(Option);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bottomBar\":\"BottomBar-module_bottomBar_joqOf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"projects\":\"Projects-module_projects_3jkGy\",\"cardsWrapper\":\"Projects-module_cardsWrapper_2hMMv\",\"card\":\"Projects-module_card_l6j4O\",\"createDialog\":\"Projects-module_createDialog_mY9uZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"viewerContainer\":\"Viewer3DContainer-module_viewerContainer_QfZNJ\",\"statsOutput\":\"Viewer3DContainer-module_statsOutput_30pSD\",\"propertyPanel\":\"Viewer3DContainer-module_propertyPanel_2c9Pb\",\"axesRenderer\":\"Viewer3DContainer-module_axesRenderer_3j1gH\",\"uploadEvents\":\"Viewer3DContainer-module_uploadEvents_2qIB6\",\"header\":\"Viewer3DContainer-module_header_35nFE\",\"body\":\"Viewer3DContainer-module_body_2Smto\",\"eventList\":\"Viewer3DContainer-module_eventList_SIkDK\",\"eventBox\":\"Viewer3DContainer-module_eventBox_2AXxE\",\"uploadBtnWrapper\":\"Viewer3DContainer-module_uploadBtnWrapper_3Z4S3\",\"createDialog\":\"Viewer3DContainer-module_createDialog_36gHC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"projectCard\":\"ProjectCard-module_projectCard_3mmBx\",\"card\":\"ProjectCard-module_card_1x907\",\"thumbnail\":\"ProjectCard-module_thumbnail_1FUHb\",\"deleteBtn\":\"ProjectCard-module_deleteBtn_1ZBSP\",\"infos\":\"ProjectCard-module_infos_Zohlx\",\"info\":\"ProjectCard-module_info_3iwXB\"};"],"sourceRoot":""}